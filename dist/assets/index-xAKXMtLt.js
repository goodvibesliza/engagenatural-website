var yF=Object.defineProperty;var vF=(t,e,n)=>e in t?yF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var rt=(t,e,n)=>vF(t,typeof e!="symbol"?e+"":e,n);function bF(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const a=Object.getOwnPropertyDescriptor(s,r);a&&Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function N4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e_={exports:{}},mm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT;function wF(){if(fT)return mm;fT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var d in r)d!=="key"&&(a[d]=r[d])}else a=r;return r=a.ref,{$$typeof:t,type:s,key:l,ref:r!==void 0?r:null,props:a}}return mm.Fragment=e,mm.jsx=n,mm.jsxs=n,mm}var mT;function _F(){return mT||(mT=1,e_.exports=wF()),e_.exports}var i=_F(),t_={exports:{}},Lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gT;function jF(){if(gT)return Lt;gT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=p&&B[p]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,S={};function _(B,K,ne){this.props=B,this.context=K,this.refs=S,this.updater=ne||w}_.prototype.isReactComponent={},_.prototype.setState=function(B,K){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,K,"setState")},_.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function E(){}E.prototype=_.prototype;function C(B,K,ne){this.props=B,this.context=K,this.refs=S,this.updater=ne||w}var I=C.prototype=new E;I.constructor=C,j(I,_.prototype),I.isPureReactComponent=!0;var M=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function D(B,K,ne,te,fe,ke){return ne=ke.ref,{$$typeof:t,type:B,key:K,ref:ne!==void 0?ne:null,props:ke}}function A(B,K){return D(B.type,K,void 0,void 0,void 0,B.props)}function T(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function R(B){var K={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ne){return K[ne]})}var P=/\/+/g;function O(B,K){return typeof B=="object"&&B!==null&&B.key!=null?R(""+B.key):K.toString(36)}function F(){}function J(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(F,F):(B.status="pending",B.then(function(K){B.status==="pending"&&(B.status="fulfilled",B.value=K)},function(K){B.status==="pending"&&(B.status="rejected",B.reason=K)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Z(B,K,ne,te,fe){var ke=typeof B;(ke==="undefined"||ke==="boolean")&&(B=null);var Ee=!1;if(B===null)Ee=!0;else switch(ke){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(B.$$typeof){case t:case e:Ee=!0;break;case m:return Ee=B._init,Z(Ee(B._payload),K,ne,te,fe)}}if(Ee)return fe=fe(B),Ee=te===""?"."+O(B,0):te,M(fe)?(ne="",Ee!=null&&(ne=Ee.replace(P,"$&/")+"/"),Z(fe,K,ne,"",function(Ne){return Ne})):fe!=null&&(T(fe)&&(fe=A(fe,ne+(fe.key==null||B&&B.key===fe.key?"":(""+fe.key).replace(P,"$&/")+"/")+Ee)),K.push(fe)),1;Ee=0;var ve=te===""?".":te+":";if(M(B))for(var le=0;le<B.length;le++)te=B[le],ke=ve+O(te,le),Ee+=Z(te,K,ne,ke,fe);else if(le=x(B),typeof le=="function")for(B=le.call(B),le=0;!(te=B.next()).done;)te=te.value,ke=ve+O(te,le++),Ee+=Z(te,K,ne,ke,fe);else if(ke==="object"){if(typeof B.then=="function")return Z(J(B),K,ne,te,fe);throw K=String(B),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function q(B,K,ne){if(B==null)return B;var te=[],fe=0;return Z(B,te,"","",function(ke){return K.call(ne,ke,fe++)}),te}function Y(B){if(B._status===-1){var K=B._result;K=K(),K.then(function(ne){(B._status===0||B._status===-1)&&(B._status=1,B._result=ne)},function(ne){(B._status===0||B._status===-1)&&(B._status=2,B._result=ne)}),B._status===-1&&(B._status=0,B._result=K)}if(B._status===1)return B._result.default;throw B._result}var W=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function H(){}return Lt.Children={map:q,forEach:function(B,K,ne){q(B,function(){K.apply(this,arguments)},ne)},count:function(B){var K=0;return q(B,function(){K++}),K},toArray:function(B){return q(B,function(K){return K})||[]},only:function(B){if(!T(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Lt.Component=_,Lt.Fragment=n,Lt.Profiler=r,Lt.PureComponent=C,Lt.StrictMode=s,Lt.Suspense=u,Lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Lt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return V.H.useMemoCache(B)}},Lt.cache=function(B){return function(){return B.apply(null,arguments)}},Lt.cloneElement=function(B,K,ne){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var te=j({},B.props),fe=B.key,ke=void 0;if(K!=null)for(Ee in K.ref!==void 0&&(ke=void 0),K.key!==void 0&&(fe=""+K.key),K)!z.call(K,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&K.ref===void 0||(te[Ee]=K[Ee]);var Ee=arguments.length-2;if(Ee===1)te.children=ne;else if(1<Ee){for(var ve=Array(Ee),le=0;le<Ee;le++)ve[le]=arguments[le+2];te.children=ve}return D(B.type,fe,void 0,void 0,ke,te)},Lt.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},Lt.createElement=function(B,K,ne){var te,fe={},ke=null;if(K!=null)for(te in K.key!==void 0&&(ke=""+K.key),K)z.call(K,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(fe[te]=K[te]);var Ee=arguments.length-2;if(Ee===1)fe.children=ne;else if(1<Ee){for(var ve=Array(Ee),le=0;le<Ee;le++)ve[le]=arguments[le+2];fe.children=ve}if(B&&B.defaultProps)for(te in Ee=B.defaultProps,Ee)fe[te]===void 0&&(fe[te]=Ee[te]);return D(B,ke,void 0,void 0,null,fe)},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(B){return{$$typeof:d,render:B}},Lt.isValidElement=T,Lt.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:Y}},Lt.memo=function(B,K){return{$$typeof:f,type:B,compare:K===void 0?null:K}},Lt.startTransition=function(B){var K=V.T,ne={};V.T=ne;try{var te=B(),fe=V.S;fe!==null&&fe(ne,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(H,W)}catch(ke){W(ke)}finally{V.T=K}},Lt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Lt.use=function(B){return V.H.use(B)},Lt.useActionState=function(B,K,ne){return V.H.useActionState(B,K,ne)},Lt.useCallback=function(B,K){return V.H.useCallback(B,K)},Lt.useContext=function(B){return V.H.useContext(B)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(B,K){return V.H.useDeferredValue(B,K)},Lt.useEffect=function(B,K,ne){var te=V.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(B,K)},Lt.useId=function(){return V.H.useId()},Lt.useImperativeHandle=function(B,K,ne){return V.H.useImperativeHandle(B,K,ne)},Lt.useInsertionEffect=function(B,K){return V.H.useInsertionEffect(B,K)},Lt.useLayoutEffect=function(B,K){return V.H.useLayoutEffect(B,K)},Lt.useMemo=function(B,K){return V.H.useMemo(B,K)},Lt.useOptimistic=function(B,K){return V.H.useOptimistic(B,K)},Lt.useReducer=function(B,K,ne){return V.H.useReducer(B,K,ne)},Lt.useRef=function(B){return V.H.useRef(B)},Lt.useState=function(B){return V.H.useState(B)},Lt.useSyncExternalStore=function(B,K,ne){return V.H.useSyncExternalStore(B,K,ne)},Lt.useTransition=function(){return V.H.useTransition()},Lt.version="19.1.0",Lt}var pT;function $0(){return pT||(pT=1,t_.exports=jF()),t_.exports}var b=$0();const Ct=N4(b),S4=bF({__proto__:null,default:Ct},[b]);var n_={exports:{}},gm={},s_={exports:{}},r_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT;function NF(){return xT||(xT=1,function(t){function e(q,Y){var W=q.length;q.push(Y);e:for(;0<W;){var H=W-1>>>1,B=q[H];if(0<r(B,Y))q[H]=Y,q[W]=B,W=H;else break e}}function n(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var Y=q[0],W=q.pop();if(W!==Y){q[0]=W;e:for(var H=0,B=q.length,K=B>>>1;H<K;){var ne=2*(H+1)-1,te=q[ne],fe=ne+1,ke=q[fe];if(0>r(te,W))fe<B&&0>r(ke,te)?(q[H]=ke,q[fe]=W,H=fe):(q[H]=te,q[ne]=W,H=ne);else if(fe<B&&0>r(ke,W))q[H]=ke,q[fe]=W,H=fe;else break e}}return Y}function r(q,Y){var W=q.sortIndex-Y.sortIndex;return W!==0?W:q.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var u=[],f=[],m=1,p=null,x=3,w=!1,j=!1,S=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function M(q){for(var Y=n(f);Y!==null;){if(Y.callback===null)s(f);else if(Y.startTime<=q)s(f),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(f)}}function V(q){if(S=!1,M(q),!j)if(n(u)!==null)j=!0,z||(z=!0,O());else{var Y=n(f);Y!==null&&Z(V,Y.startTime-q)}}var z=!1,D=-1,A=5,T=-1;function R(){return _?!0:!(t.unstable_now()-T<A)}function P(){if(_=!1,z){var q=t.unstable_now();T=q;var Y=!0;try{e:{j=!1,S&&(S=!1,C(D),D=-1),w=!0;var W=x;try{t:{for(M(q),p=n(u);p!==null&&!(p.expirationTime>q&&R());){var H=p.callback;if(typeof H=="function"){p.callback=null,x=p.priorityLevel;var B=H(p.expirationTime<=q);if(q=t.unstable_now(),typeof B=="function"){p.callback=B,M(q),Y=!0;break t}p===n(u)&&s(u),M(q)}else s(u);p=n(u)}if(p!==null)Y=!0;else{var K=n(f);K!==null&&Z(V,K.startTime-q),Y=!1}}break e}finally{p=null,x=W,w=!1}Y=void 0}}finally{Y?O():z=!1}}}var O;if(typeof I=="function")O=function(){I(P)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,J=F.port2;F.port1.onmessage=P,O=function(){J.postMessage(null)}}else O=function(){E(P,0)};function Z(q,Y){D=E(function(){q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(q){switch(x){case 1:case 2:case 3:var Y=3;break;default:Y=x}var W=x;x=Y;try{return q()}finally{x=W}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var W=x;x=q;try{return Y()}finally{x=W}},t.unstable_scheduleCallback=function(q,Y,W){var H=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?H+W:H):W=H,q){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=W+B,q={id:m++,callback:Y,priorityLevel:q,startTime:W,expirationTime:B,sortIndex:-1},W>H?(q.sortIndex=W,e(f,q),n(u)===null&&q===n(f)&&(S?(C(D),D=-1):S=!0,Z(V,W-H))):(q.sortIndex=B,e(u,q),j||w||(j=!0,z||(z=!0,O()))),q},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(q){var Y=x;return function(){var W=x;x=Y;try{return q.apply(this,arguments)}finally{x=W}}}}(r_)),r_}var yT;function SF(){return yT||(yT=1,s_.exports=NF()),s_.exports}var i_={exports:{}},fr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT;function EF(){if(vT)return fr;vT=1;var t=$0();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(u,f,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:u,containerInfo:f,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,fr.createPortal=function(u,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(u,f,null,m)},fr.flushSync=function(u){var f=l.T,m=s.p;try{if(l.T=null,s.p=2,u)return u()}finally{l.T=f,s.p=m,s.d.f()}},fr.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(u,f))},fr.prefetchDNS=function(u){typeof u=="string"&&s.d.D(u)},fr.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var m=f.as,p=d(m,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?s.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:x,fetchPriority:w}):m==="script"&&s.d.X(u,{crossOrigin:p,integrity:x,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},fr.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=d(f.as,f.crossOrigin);s.d.M(u,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(u)},fr.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,p=d(m,f.crossOrigin);s.d.L(u,m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},fr.preloadModule=function(u,f){if(typeof u=="string")if(f){var m=d(f.as,f.crossOrigin);s.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(u)},fr.requestFormReset=function(u){s.d.r(u)},fr.unstable_batchedUpdates=function(u,f){return u(f)},fr.useFormState=function(u,f,m){return l.H.useFormState(u,f,m)},fr.useFormStatus=function(){return l.H.useHostTransitionStatus()},fr.version="19.1.0",fr}var bT;function E4(){if(bT)return i_.exports;bT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),i_.exports=EF(),i_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wT;function CF(){if(wT)return gm;wT=1;var t=SF(),e=$0(),n=E4();function s(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function l(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function d(o){if(a(o)!==o)throw Error(s(188))}function u(o){var c=o.alternate;if(!c){if(c=a(o),c===null)throw Error(s(188));return c!==o?null:o}for(var h=o,g=c;;){var v=h.return;if(v===null)break;var N=v.alternate;if(N===null){if(g=v.return,g!==null){h=g;continue}break}if(v.child===N.child){for(N=v.child;N;){if(N===h)return d(v),o;if(N===g)return d(v),c;N=N.sibling}throw Error(s(188))}if(h.return!==g.return)h=v,g=N;else{for(var U=!1,$=v.child;$;){if($===h){U=!0,h=v,g=N;break}if($===g){U=!0,g=v,h=N;break}$=$.sibling}if(!U){for($=N.child;$;){if($===h){U=!0,h=N,g=v;break}if($===g){U=!0,g=N,h=v;break}$=$.sibling}if(!U)throw Error(s(189))}}if(h.alternate!==g)throw Error(s(190))}if(h.tag!==3)throw Error(s(188));return h.stateNode.current===h?o:c}function f(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=f(o),c!==null)return c;o=o.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),I=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function O(o){return o===null||typeof o!="object"?null:(o=P&&o[P]||o["@@iterator"],typeof o=="function"?o:null)}var F=Symbol.for("react.client.reference");function J(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===F?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case j:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case V:return"Suspense";case z:return"SuspenseList";case T:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case w:return"Portal";case I:return(o.displayName||"Context")+".Provider";case C:return(o._context.displayName||"Context")+".Consumer";case M:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case D:return c=o.displayName||null,c!==null?c:J(o.type)||"Memo";case A:c=o._payload,o=o._init;try{return J(o(c))}catch{}}return null}var Z=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},H=[],B=-1;function K(o){return{current:o}}function ne(o){0>B||(o.current=H[B],H[B]=null,B--)}function te(o,c){B++,H[B]=o.current,o.current=c}var fe=K(null),ke=K(null),Ee=K(null),ve=K(null);function le(o,c){switch(te(Ee,c),te(ke,o),te(fe,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?BC(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=BC(c),o=zC(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ne(fe),te(fe,o)}function Ne(){ne(fe),ne(ke),ne(Ee)}function Pe(o){o.memoizedState!==null&&te(ve,o);var c=fe.current,h=zC(c,o.type);c!==h&&(te(ke,o),te(fe,h))}function Ge(o){ke.current===o&&(ne(fe),ne(ke)),ve.current===o&&(ne(ve),cm._currentValue=W)}var Ye=Object.prototype.hasOwnProperty,ot=t.unstable_scheduleCallback,Dt=t.unstable_cancelCallback,je=t.unstable_shouldYield,qe=t.unstable_requestPaint,ct=t.unstable_now,dt=t.unstable_getCurrentPriorityLevel,pt=t.unstable_ImmediatePriority,X=t.unstable_UserBlockingPriority,re=t.unstable_NormalPriority,he=t.unstable_LowPriority,Ae=t.unstable_IdlePriority,Re=t.log,Te=t.unstable_setDisableYieldValue,Me=null,Ke=null;function xt(o){if(typeof Re=="function"&&Te(o),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Me,o)}catch{}}var Jt=Math.clz32?Math.clz32:ur,dr=Math.log,Rs=Math.LN2;function ur(o){return o>>>=0,o===0?32:31-(dr(o)/Rs|0)|0}var zs=256,$s=4194304;function pe(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Pt(o,c,h){var g=o.pendingLanes;if(g===0)return 0;var v=0,N=o.suspendedLanes,U=o.pingedLanes;o=o.warmLanes;var $=g&134217727;return $!==0?(g=$&~N,g!==0?v=pe(g):(U&=$,U!==0?v=pe(U):h||(h=$&~o,h!==0&&(v=pe(h))))):($=g&~N,$!==0?v=pe($):U!==0?v=pe(U):h||(h=g&~o,h!==0&&(v=pe(h)))),v===0?0:c!==0&&c!==v&&(c&N)===0&&(N=v&-v,h=c&-c,N>=h||N===32&&(h&4194048)!==0)?c:v}function wn(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Wt(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function en(){var o=zs;return zs<<=1,(zs&4194048)===0&&(zs=256),o}function _n(){var o=$s;return $s<<=1,($s&62914560)===0&&($s=4194304),o}function ss(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function Mn(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Fe(o,c,h,g,v,N){var U=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var $=o.entanglements,Q=o.expirationTimes,oe=o.hiddenUpdates;for(h=U&~h;0<h;){var ye=31-Jt(h),we=1<<ye;$[ye]=0,Q[ye]=-1;var de=oe[ye];if(de!==null)for(oe[ye]=null,ye=0;ye<de.length;ye++){var ue=de[ye];ue!==null&&(ue.lane&=-536870913)}h&=~we}g!==0&&Nt(o,g,0),N!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=N&~(U&~c))}function Nt(o,c,h){o.pendingLanes|=c,o.suspendedLanes&=~c;var g=31-Jt(c);o.entangledLanes|=c,o.entanglements[g]=o.entanglements[g]|1073741824|h&4194090}function Fn(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-Jt(h),v=1<<g;v&c|o[g]&c&&(o[g]|=c),h&=~v}}function cn(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Is(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function fn(){var o=Y.p;return o!==0?o:(o=window.event,o===void 0?32:oT(o.type))}function ge(o,c){var h=Y.p;try{return Y.p=o,c()}finally{Y.p=h}}var Ce=Math.random().toString(36).slice(2),Mt="__reactFiber$"+Ce,Et="__reactProps$"+Ce,Ot="__reactContainer$"+Ce,Hn="__reactEvents$"+Ce,Nr="__reactListeners$"+Ce,gs="__reactHandles$"+Ce,da="__reactResources$"+Ce,Wr="__reactMarker$"+Ce;function Gr(o){delete o[Mt],delete o[Et],delete o[Hn],delete o[Nr],delete o[gs]}function Yr(o){var c=o[Mt];if(c)return c;for(var h=o.parentNode;h;){if(c=h[Ot]||h[Mt]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=WC(o);o!==null;){if(h=o[Mt])return h;o=WC(o)}return c}o=h,h=o.parentNode}return null}function Kr(o){if(o=o[Mt]||o[Ot]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Xr(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(s(33))}function Ds(o){var c=o[da];return c||(c=o[da]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Yn(o){o[Wr]=!0}var gf=new Set,nu={};function $i(o,c){so(o,c),so(o+"Capture",c)}function so(o,c){for(nu[o]=c,o=0;o<c.length;o++)gf.add(c[o])}var up=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hp={},Rc={};function fp(o){return Ye.call(Rc,o)?!0:Ye.call(hp,o)?!1:up.test(o)?Rc[o]=!0:(hp[o]=!0,!1)}function ul(o,c,h){if(fp(c))if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+h)}}function ua(o,c,h){if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+h)}}function tr(o,c,h,g){if(g===null)o.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(c,h,""+g)}}var Ic,mp;function ro(o){if(Ic===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);Ic=c&&c[1]||"",mp=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ic+o+mp}var su=!1;function ru(o,c){if(!o||su)return"";su=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(ue){var de=ue}Reflect.construct(o,[],we)}else{try{we.call()}catch(ue){de=ue}o.call(we.prototype)}}else{try{throw Error()}catch(ue){de=ue}(we=o())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(ue){if(ue&&de&&typeof ue.stack=="string")return[ue.stack,de.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=g.DetermineComponentFrameRoot(),U=N[0],$=N[1];if(U&&$){var Q=U.split(`
`),oe=$.split(`
`);for(v=g=0;g<Q.length&&!Q[g].includes("DetermineComponentFrameRoot");)g++;for(;v<oe.length&&!oe[v].includes("DetermineComponentFrameRoot");)v++;if(g===Q.length||v===oe.length)for(g=Q.length-1,v=oe.length-1;1<=g&&0<=v&&Q[g]!==oe[v];)v--;for(;1<=g&&0<=v;g--,v--)if(Q[g]!==oe[v]){if(g!==1||v!==1)do if(g--,v--,0>v||Q[g]!==oe[v]){var ye=`
`+Q[g].replace(" at new "," at ");return o.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",o.displayName)),ye}while(1<=g&&0<=v);break}}}finally{su=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?ro(h):""}function pf(o){switch(o.tag){case 26:case 27:case 5:return ro(o.type);case 16:return ro("Lazy");case 13:return ro("Suspense");case 19:return ro("SuspenseList");case 0:case 15:return ru(o.type,!1);case 11:return ru(o.type.render,!1);case 1:return ru(o.type,!0);case 31:return ro("Activity");default:return""}}function iu(o){try{var c="";do c+=pf(o),o=o.return;while(o);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function Sr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function xf(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function rb(o){var c=xf(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,N=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return v.call(this)},set:function(U){g=""+U,N.call(this,U)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(U){g=""+U},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function au(o){o._valueTracker||(o._valueTracker=rb(o))}function yf(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=xf(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function Dc(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var ib=/[\n"\\]/g;function ps(o){return o.replace(ib,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Qr(o,c,h,g,v,N,U,$){o.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?o.type=U:o.removeAttribute("type"),c!=null?U==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Sr(c)):o.value!==""+Sr(c)&&(o.value=""+Sr(c)):U!=="submit"&&U!=="reset"||o.removeAttribute("value"),c!=null?hl(o,U,Sr(c)):h!=null?hl(o,U,Sr(h)):g!=null&&o.removeAttribute("value"),v==null&&N!=null&&(o.defaultChecked=!!N),v!=null&&(o.checked=v&&typeof v!="function"&&typeof v!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?o.name=""+Sr($):o.removeAttribute("name")}function Mc(o,c,h,g,v,N,U,$){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(o.type=N),c!=null||h!=null){if(!(N!=="submit"&&N!=="reset"||c!=null))return;h=h!=null?""+Sr(h):"",c=c!=null?""+Sr(c):h,$||c===o.value||(o.value=c),o.defaultValue=c}g=g??v,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=$?o.checked:!!g,o.defaultChecked=!!g,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(o.name=U)}function hl(o,c,h){c==="number"&&Dc(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function io(o,c,h,g){if(o=o.options,c){c={};for(var v=0;v<h.length;v++)c["$"+h[v]]=!0;for(h=0;h<o.length;h++)v=c.hasOwnProperty("$"+o[h].value),o[h].selected!==v&&(o[h].selected=v),v&&g&&(o[h].defaultSelected=!0)}else{for(h=""+Sr(h),c=null,v=0;v<o.length;v++){if(o[v].value===h){o[v].selected=!0,g&&(o[v].defaultSelected=!0);return}c!==null||o[v].disabled||(c=o[v])}c!==null&&(c.selected=!0)}}function kn(o,c,h){if(c!=null&&(c=""+Sr(c),c!==o.value&&(o.value=c),h==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=h!=null?""+Sr(h):""}function Pc(o,c,h,g){if(c==null){if(g!=null){if(h!=null)throw Error(s(92));if(Z(g)){if(1<g.length)throw Error(s(93));g=g[0]}h=g}h==null&&(h=""),c=h}h=Sr(c),o.defaultValue=h,g=o.textContent,g===h&&g!==""&&g!==null&&(o.value=g)}function vi(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var Oc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gp(o,c,h){var g=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?g?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":g?o.setProperty(c,h):typeof h!="number"||h===0||Oc.has(c)?c==="float"?o.cssFloat=h:o[c]=(""+h).trim():o[c]=h+"px"}function vf(o,c,h){if(c!=null&&typeof c!="object")throw Error(s(62));if(o=o.style,h!=null){for(var g in h)!h.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var v in c)g=c[v],c.hasOwnProperty(v)&&h[v]!==g&&gp(o,v,g)}else for(var N in c)c.hasOwnProperty(N)&&gp(o,N,c[N])}function bf(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ab=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ob=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ou(o){return ob.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var ao=null;function bi(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var oo=null,lo=null;function wf(o){var c=Kr(o);if(c&&(o=c.stateNode)){var h=o[Et]||null;e:switch(o=c.stateNode,c.type){case"input":if(Qr(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+ps(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var v=g[Et]||null;if(!v)throw Error(s(90));Qr(g,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(c=0;c<h.length;c++)g=h[c],g.form===o.form&&yf(g)}break e;case"textarea":kn(o,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&io(o,!!h.multiple,c,!1)}}}var ha=!1;function pp(o,c,h){if(ha)return o(c,h);ha=!0;try{var g=o(c);return g}finally{if(ha=!1,(oo!==null||lo!==null)&&(cx(),oo&&(c=oo,o=lo,lo=oo=null,wf(c),o)))for(c=0;c<o.length;c++)wf(o[c])}}function Lc(o,c){var h=o.stateNode;if(h===null)return null;var g=h[Et]||null;if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(s(231,c,typeof h));return h}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wi=!1;if(qi)try{var Vc={};Object.defineProperty(Vc,"passive",{get:function(){wi=!0}}),window.addEventListener("test",Vc,Vc),window.removeEventListener("test",Vc,Vc)}catch{wi=!1}var fa=null,fl=null,co=null;function _f(){if(co)return co;var o,c=fl,h=c.length,g,v="value"in fa?fa.value:fa.textContent,N=v.length;for(o=0;o<h&&c[o]===v[o];o++);var U=h-o;for(g=1;g<=U&&c[h-g]===v[N-g];g++);return co=v.slice(o,1<g?1-g:void 0)}function ma(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function ga(){return!0}function jf(){return!1}function qs(o){function c(h,g,v,N,U){this._reactName=h,this._targetInst=v,this.type=g,this.nativeEvent=N,this.target=U,this.currentTarget=null;for(var $ in o)o.hasOwnProperty($)&&(h=o[$],this[$]=h?h(N):N[$]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?ga:jf,this.isPropagationStopped=jf,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),c}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lu=qs(xn),Uc=m({},xn,{view:0,detail:0}),xp=qs(Uc),cu,du,pa,Fc=m({},Uc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$c,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==pa&&(pa&&o.type==="mousemove"?(cu=o.screenX-pa.screenX,du=o.screenY-pa.screenY):du=cu=0,pa=o),cu)},movementY:function(o){return"movementY"in o?o.movementY:du}}),_i=qs(Fc),yp=m({},Fc,{dataTransfer:0}),lb=qs(yp),Bc=m({},Uc,{relatedTarget:0}),uu=qs(Bc),Nf=m({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),hu=qs(Nf),vp=m({},xn,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),fu=qs(vp),cb=m({},xn,{data:0}),Sf=qs(cb),zc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ef(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=wp[o])?!!c[o]:!1}function $c(){return Ef}var _p=m({},Uc,{key:function(o){if(o.key){var c=zc[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=ma(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?bp[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$c,charCode:function(o){return o.type==="keypress"?ma(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ma(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),mu=qs(_p),jp=m({},Fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cf=qs(jp),uo=m({},Uc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$c}),Np=qs(uo),Sp=m({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ep=qs(Sp),Cp=m({},Fc,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),gu=qs(Cp),Er=m({},xn,{newState:0,oldState:0}),Tp=qs(Er),Ap=[9,13,27,32],xa=qi&&"CompositionEvent"in window,y=null;qi&&"documentMode"in document&&(y=document.documentMode);var k=qi&&"TextEvent"in window&&!y,L=qi&&(!xa||y&&8<y&&11>=y),G=" ",ie=!1;function me(o,c){switch(o){case"keyup":return Ap.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Le(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var tn=!1;function Ms(o,c){switch(o){case"compositionend":return Le(c);case"keypress":return c.which!==32?null:(ie=!0,G);case"textInput":return o=c.data,o===G&&ie?null:o;default:return null}}function nn(o,c){if(tn)return o==="compositionend"||!xa&&me(o,c)?(o=_f(),co=fl=fa=null,tn=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return L&&c.locale!=="ko"?null:c.data;default:return null}}var Hs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ps(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!Hs[o.type]:c==="textarea"}function ho(o,c,h,g){oo?lo?lo.push(g):lo=[g]:oo=g,c=gx(c,"onChange"),0<c.length&&(h=new lu("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var nr=null,ya=null;function Tf(o){OC(o,0)}function kp(o){var c=Xr(o);if(yf(c))return o}function sE(o,c){if(o==="change")return c}var rE=!1;if(qi){var db;if(qi){var ub="oninput"in document;if(!ub){var iE=document.createElement("div");iE.setAttribute("oninput","return;"),ub=typeof iE.oninput=="function"}db=ub}else db=!1;rE=db&&(!document.documentMode||9<document.documentMode)}function aE(){nr&&(nr.detachEvent("onpropertychange",oE),ya=nr=null)}function oE(o){if(o.propertyName==="value"&&kp(ya)){var c=[];ho(c,ya,o,bi(o)),pp(Tf,c)}}function YV(o,c,h){o==="focusin"?(aE(),nr=c,ya=h,nr.attachEvent("onpropertychange",oE)):o==="focusout"&&aE()}function KV(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return kp(ya)}function XV(o,c){if(o==="click")return kp(c)}function QV(o,c){if(o==="input"||o==="change")return kp(c)}function ZV(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Zr=typeof Object.is=="function"?Object.is:ZV;function Af(o,c){if(Zr(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var v=h[g];if(!Ye.call(c,v)||!Zr(o[v],c[v]))return!1}return!0}function lE(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function cE(o,c){var h=lE(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=lE(h)}}function dE(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?dE(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function uE(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Dc(o.document);c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=Dc(o.document)}return c}function hb(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var JV=qi&&"documentMode"in document&&11>=document.documentMode,pu=null,fb=null,kf=null,mb=!1;function hE(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;mb||pu==null||pu!==Dc(g)||(g=pu,"selectionStart"in g&&hb(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),kf&&Af(kf,g)||(kf=g,g=gx(fb,"onSelect"),0<g.length&&(c=new lu("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=pu)))}function qc(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var xu={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionrun:qc("Transition","TransitionRun"),transitionstart:qc("Transition","TransitionStart"),transitioncancel:qc("Transition","TransitionCancel"),transitionend:qc("Transition","TransitionEnd")},gb={},fE={};qi&&(fE=document.createElement("div").style,"AnimationEvent"in window||(delete xu.animationend.animation,delete xu.animationiteration.animation,delete xu.animationstart.animation),"TransitionEvent"in window||delete xu.transitionend.transition);function Hc(o){if(gb[o])return gb[o];if(!xu[o])return o;var c=xu[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in fE)return gb[o]=c[h];return o}var mE=Hc("animationend"),gE=Hc("animationiteration"),pE=Hc("animationstart"),eU=Hc("transitionrun"),tU=Hc("transitionstart"),nU=Hc("transitioncancel"),xE=Hc("transitionend"),yE=new Map,pb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pb.push("scrollEnd");function Hi(o,c){yE.set(o,c),$i(c,[o])}var vE=new WeakMap;function ji(o,c){if(typeof o=="object"&&o!==null){var h=vE.get(o);return h!==void 0?h:(c={value:o,source:c,stack:iu(c)},vE.set(o,c),c)}return{value:o,source:c,stack:iu(c)}}var Ni=[],yu=0,xb=0;function Rp(){for(var o=yu,c=xb=yu=0;c<o;){var h=Ni[c];Ni[c++]=null;var g=Ni[c];Ni[c++]=null;var v=Ni[c];Ni[c++]=null;var N=Ni[c];if(Ni[c++]=null,g!==null&&v!==null){var U=g.pending;U===null?v.next=v:(v.next=U.next,U.next=v),g.pending=v}N!==0&&bE(h,v,N)}}function Ip(o,c,h,g){Ni[yu++]=o,Ni[yu++]=c,Ni[yu++]=h,Ni[yu++]=g,xb|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function yb(o,c,h,g){return Ip(o,c,h,g),Dp(o)}function vu(o,c){return Ip(o,null,null,c),Dp(o)}function bE(o,c,h){o.lanes|=h;var g=o.alternate;g!==null&&(g.lanes|=h);for(var v=!1,N=o.return;N!==null;)N.childLanes|=h,g=N.alternate,g!==null&&(g.childLanes|=h),N.tag===22&&(o=N.stateNode,o===null||o._visibility&1||(v=!0)),o=N,N=N.return;return o.tag===3?(N=o.stateNode,v&&c!==null&&(v=31-Jt(h),o=N.hiddenUpdates,g=o[v],g===null?o[v]=[c]:g.push(c),c.lane=h|536870912),N):null}function Dp(o){if(50<tm)throw tm=0,Nw=null,Error(s(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var bu={};function sU(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(o,c,h,g){return new sU(o,c,h,g)}function vb(o){return o=o.prototype,!(!o||!o.isReactComponent)}function fo(o,c){var h=o.alternate;return h===null?(h=Jr(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function wE(o,c){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,c=h.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Mp(o,c,h,g,v,N){var U=0;if(g=o,typeof o=="function")vb(o)&&(U=1);else if(typeof o=="string")U=iF(o,h,fe.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case T:return o=Jr(31,h,c,v),o.elementType=T,o.lanes=N,o;case j:return Wc(h.children,v,N,c);case S:U=8,v|=24;break;case _:return o=Jr(12,h,c,v|2),o.elementType=_,o.lanes=N,o;case V:return o=Jr(13,h,c,v),o.elementType=V,o.lanes=N,o;case z:return o=Jr(19,h,c,v),o.elementType=z,o.lanes=N,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case E:case I:U=10;break e;case C:U=9;break e;case M:U=11;break e;case D:U=14;break e;case A:U=16,g=null;break e}U=29,h=Error(s(130,o===null?"null":typeof o,"")),g=null}return c=Jr(U,h,c,v),c.elementType=o,c.type=g,c.lanes=N,c}function Wc(o,c,h,g){return o=Jr(7,o,g,c),o.lanes=h,o}function bb(o,c,h){return o=Jr(6,o,null,c),o.lanes=h,o}function wb(o,c,h){return c=Jr(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var wu=[],_u=0,Pp=null,Op=0,Si=[],Ei=0,Gc=null,mo=1,go="";function Yc(o,c){wu[_u++]=Op,wu[_u++]=Pp,Pp=o,Op=c}function _E(o,c,h){Si[Ei++]=mo,Si[Ei++]=go,Si[Ei++]=Gc,Gc=o;var g=mo;o=go;var v=32-Jt(g)-1;g&=~(1<<v),h+=1;var N=32-Jt(c)+v;if(30<N){var U=v-v%5;N=(g&(1<<U)-1).toString(32),g>>=U,v-=U,mo=1<<32-Jt(c)+v|h<<v|g,go=N+o}else mo=1<<N|h<<v|g,go=o}function _b(o){o.return!==null&&(Yc(o,1),_E(o,1,0))}function jb(o){for(;o===Pp;)Pp=wu[--_u],wu[_u]=null,Op=wu[--_u],wu[_u]=null;for(;o===Gc;)Gc=Si[--Ei],Si[Ei]=null,go=Si[--Ei],Si[Ei]=null,mo=Si[--Ei],Si[Ei]=null}var Cr=null,rs=null,mn=!1,Kc=null,va=!1,Nb=Error(s(519));function Xc(o){var c=Error(s(418,""));throw Df(ji(c,o)),Nb}function jE(o){var c=o.stateNode,h=o.type,g=o.memoizedProps;switch(c[Mt]=o,c[Et]=g,h){case"dialog":Yt("cancel",c),Yt("close",c);break;case"iframe":case"object":case"embed":Yt("load",c);break;case"video":case"audio":for(h=0;h<sm.length;h++)Yt(sm[h],c);break;case"source":Yt("error",c);break;case"img":case"image":case"link":Yt("error",c),Yt("load",c);break;case"details":Yt("toggle",c);break;case"input":Yt("invalid",c),Mc(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),au(c);break;case"select":Yt("invalid",c);break;case"textarea":Yt("invalid",c),Pc(c,g.value,g.defaultValue,g.children),au(c)}h=g.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||g.suppressHydrationWarning===!0||FC(c.textContent,h)?(g.popover!=null&&(Yt("beforetoggle",c),Yt("toggle",c)),g.onScroll!=null&&Yt("scroll",c),g.onScrollEnd!=null&&Yt("scrollend",c),g.onClick!=null&&(c.onclick=px),c=!0):c=!1,c||Xc(o)}function NE(o){for(Cr=o.return;Cr;)switch(Cr.tag){case 5:case 13:va=!1;return;case 27:case 3:va=!0;return;default:Cr=Cr.return}}function Rf(o){if(o!==Cr)return!1;if(!mn)return NE(o),mn=!0,!1;var c=o.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||Fw(o.type,o.memoizedProps)),h=!h),h&&rs&&Xc(o),NE(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(h=o.data,h==="/$"){if(c===0){rs=Gi(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;o=o.nextSibling}rs=null}}else c===27?(c=rs,Al(o.type)?(o=qw,qw=null,rs=o):rs=c):rs=Cr?Gi(o.stateNode.nextSibling):null;return!0}function If(){rs=Cr=null,mn=!1}function SE(){var o=Kc;return o!==null&&(Mr===null?Mr=o:Mr.push.apply(Mr,o),Kc=null),o}function Df(o){Kc===null?Kc=[o]:Kc.push(o)}var Sb=K(null),Qc=null,po=null;function ml(o,c,h){te(Sb,c._currentValue),c._currentValue=h}function xo(o){o._currentValue=Sb.current,ne(Sb)}function Eb(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function Cb(o,c,h,g){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var N=v.dependencies;if(N!==null){var U=v.child;N=N.firstContext;e:for(;N!==null;){var $=N;N=v;for(var Q=0;Q<c.length;Q++)if($.context===c[Q]){N.lanes|=h,$=N.alternate,$!==null&&($.lanes|=h),Eb(N.return,h,o),g||(U=null);break e}N=$.next}}else if(v.tag===18){if(U=v.return,U===null)throw Error(s(341));U.lanes|=h,N=U.alternate,N!==null&&(N.lanes|=h),Eb(U,h,o),U=null}else U=v.child;if(U!==null)U.return=v;else for(U=v;U!==null;){if(U===o){U=null;break}if(v=U.sibling,v!==null){v.return=U.return,U=v;break}U=U.return}v=U}}function Mf(o,c,h,g){o=null;for(var v=c,N=!1;v!==null;){if(!N){if((v.flags&524288)!==0)N=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var U=v.alternate;if(U===null)throw Error(s(387));if(U=U.memoizedProps,U!==null){var $=v.type;Zr(v.pendingProps.value,U.value)||(o!==null?o.push($):o=[$])}}else if(v===ve.current){if(U=v.alternate,U===null)throw Error(s(387));U.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push(cm):o=[cm])}v=v.return}o!==null&&Cb(c,o,h,g),c.flags|=262144}function Lp(o){for(o=o.firstContext;o!==null;){if(!Zr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Zc(o){Qc=o,po=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function hr(o){return EE(Qc,o)}function Vp(o,c){return Qc===null&&Zc(o),EE(o,c)}function EE(o,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},po===null){if(o===null)throw Error(s(308));po=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else po=po.next=c;return h}var rU=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(h,g){o.push(g)}};this.abort=function(){c.aborted=!0,o.forEach(function(h){return h()})}},iU=t.unstable_scheduleCallback,aU=t.unstable_NormalPriority,Os={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tb(){return{controller:new rU,data:new Map,refCount:0}}function Pf(o){o.refCount--,o.refCount===0&&iU(aU,function(){o.controller.abort()})}var Of=null,Ab=0,ju=0,Nu=null;function oU(o,c){if(Of===null){var h=Of=[];Ab=0,ju=Rw(),Nu={status:"pending",value:void 0,then:function(g){h.push(g)}}}return Ab++,c.then(CE,CE),c}function CE(){if(--Ab===0&&Of!==null){Nu!==null&&(Nu.status="fulfilled");var o=Of;Of=null,ju=0,Nu=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function lU(o,c){var h=[],g={status:"pending",value:null,reason:null,then:function(v){h.push(v)}};return o.then(function(){g.status="fulfilled",g.value=c;for(var v=0;v<h.length;v++)(0,h[v])(c)},function(v){for(g.status="rejected",g.reason=v,v=0;v<h.length;v++)(0,h[v])(void 0)}),g}var TE=q.S;q.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&oU(o,c),TE!==null&&TE(o,c)};var Jc=K(null);function kb(){var o=Jc.current;return o!==null?o:Vn.pooledCache}function Up(o,c){c===null?te(Jc,Jc.current):te(Jc,c.pool)}function AE(){var o=kb();return o===null?null:{parent:Os._currentValue,pool:o}}var Lf=Error(s(460)),kE=Error(s(474)),Fp=Error(s(542)),Rb={then:function(){}};function RE(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Bp(){}function IE(o,c,h){switch(h=o[h],h===void 0?o.push(c):h!==c&&(c.then(Bp,Bp),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,ME(o),o;default:if(typeof c.status=="string")c.then(Bp,Bp);else{if(o=Vn,o!==null&&100<o.shellSuspendCounter)throw Error(s(482));o=c,o.status="pending",o.then(function(g){if(c.status==="pending"){var v=c;v.status="fulfilled",v.value=g}},function(g){if(c.status==="pending"){var v=c;v.status="rejected",v.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,ME(o),o}throw Vf=c,Lf}}var Vf=null;function DE(){if(Vf===null)throw Error(s(459));var o=Vf;return Vf=null,o}function ME(o){if(o===Lf||o===Fp)throw Error(s(483))}var gl=!1;function Ib(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Db(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function pl(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function xl(o,c,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(jn&2)!==0){var v=g.pending;return v===null?c.next=c:(c.next=v.next,v.next=c),g.pending=c,c=Dp(o),bE(o,null,h),c}return Ip(o,g,c,h),Dp(o)}function Uf(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,Fn(o,h)}}function Mb(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var v=null,N=null;if(h=h.firstBaseUpdate,h!==null){do{var U={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};N===null?v=N=U:N=N.next=U,h=h.next}while(h!==null);N===null?v=N=c:N=N.next=c}else v=N=c;h={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:N,shared:g.shared,callbacks:g.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}var Pb=!1;function Ff(){if(Pb){var o=Nu;if(o!==null)throw o}}function Bf(o,c,h,g){Pb=!1;var v=o.updateQueue;gl=!1;var N=v.firstBaseUpdate,U=v.lastBaseUpdate,$=v.shared.pending;if($!==null){v.shared.pending=null;var Q=$,oe=Q.next;Q.next=null,U===null?N=oe:U.next=oe,U=Q;var ye=o.alternate;ye!==null&&(ye=ye.updateQueue,$=ye.lastBaseUpdate,$!==U&&($===null?ye.firstBaseUpdate=oe:$.next=oe,ye.lastBaseUpdate=Q))}if(N!==null){var we=v.baseState;U=0,ye=oe=Q=null,$=N;do{var de=$.lane&-536870913,ue=de!==$.lane;if(ue?(sn&de)===de:(g&de)===de){de!==0&&de===ju&&(Pb=!0),ye!==null&&(ye=ye.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var St=o,vt=$;de=c;var Dn=h;switch(vt.tag){case 1:if(St=vt.payload,typeof St=="function"){we=St.call(Dn,we,de);break e}we=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=vt.payload,de=typeof St=="function"?St.call(Dn,we,de):St,de==null)break e;we=m({},we,de);break e;case 2:gl=!0}}de=$.callback,de!==null&&(o.flags|=64,ue&&(o.flags|=8192),ue=v.callbacks,ue===null?v.callbacks=[de]:ue.push(de))}else ue={lane:de,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ye===null?(oe=ye=ue,Q=we):ye=ye.next=ue,U|=de;if($=$.next,$===null){if($=v.shared.pending,$===null)break;ue=$,$=ue.next,ue.next=null,v.lastBaseUpdate=ue,v.shared.pending=null}}while(!0);ye===null&&(Q=we),v.baseState=Q,v.firstBaseUpdate=oe,v.lastBaseUpdate=ye,N===null&&(v.shared.lanes=0),Sl|=U,o.lanes=U,o.memoizedState=we}}function PE(o,c){if(typeof o!="function")throw Error(s(191,o));o.call(c)}function OE(o,c){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)PE(h[o],c)}var Su=K(null),zp=K(0);function LE(o,c){o=No,te(zp,o),te(Su,c),No=o|c.baseLanes}function Ob(){te(zp,No),te(Su,Su.current)}function Lb(){No=zp.current,ne(Su),ne(zp)}var yl=0,Ft=null,Rn=null,xs=null,$p=!1,Eu=!1,ed=!1,qp=0,zf=0,Cu=null,cU=0;function as(){throw Error(s(321))}function Vb(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Zr(o[h],c[h]))return!1;return!0}function Ub(o,c,h,g,v,N){return yl=N,Ft=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,q.H=o===null||o.memoizedState===null?b2:w2,ed=!1,N=h(g,v),ed=!1,Eu&&(N=UE(c,h,g,v)),VE(o),N}function VE(o){q.H=Xp;var c=Rn!==null&&Rn.next!==null;if(yl=0,xs=Rn=Ft=null,$p=!1,zf=0,Cu=null,c)throw Error(s(300));o===null||Ws||(o=o.dependencies,o!==null&&Lp(o)&&(Ws=!0))}function UE(o,c,h,g){Ft=o;var v=0;do{if(Eu&&(Cu=null),zf=0,Eu=!1,25<=v)throw Error(s(301));if(v+=1,xs=Rn=null,o.updateQueue!=null){var N=o.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}q.H=pU,N=c(h,g)}while(Eu);return N}function dU(){var o=q.H,c=o.useState()[0];return c=typeof c.then=="function"?$f(c):c,o=o.useState()[0],(Rn!==null?Rn.memoizedState:null)!==o&&(Ft.flags|=1024),c}function Fb(){var o=qp!==0;return qp=0,o}function Bb(o,c,h){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~h}function zb(o){if($p){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}$p=!1}yl=0,xs=Rn=Ft=null,Eu=!1,zf=qp=0,Cu=null}function Ir(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xs===null?Ft.memoizedState=xs=o:xs=xs.next=o,xs}function ys(){if(Rn===null){var o=Ft.alternate;o=o!==null?o.memoizedState:null}else o=Rn.next;var c=xs===null?Ft.memoizedState:xs.next;if(c!==null)xs=c,Rn=o;else{if(o===null)throw Ft.alternate===null?Error(s(467)):Error(s(310));Rn=o,o={memoizedState:Rn.memoizedState,baseState:Rn.baseState,baseQueue:Rn.baseQueue,queue:Rn.queue,next:null},xs===null?Ft.memoizedState=xs=o:xs=xs.next=o}return xs}function $b(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $f(o){var c=zf;return zf+=1,Cu===null&&(Cu=[]),o=IE(Cu,o,c),c=Ft,(xs===null?c.memoizedState:xs.next)===null&&(c=c.alternate,q.H=c===null||c.memoizedState===null?b2:w2),o}function Hp(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return $f(o);if(o.$$typeof===I)return hr(o)}throw Error(s(438,String(o)))}function qb(o){var c=null,h=Ft.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var g=Ft.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(v){return v.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=$b(),Ft.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(o),g=0;g<o;g++)h[g]=R;return c.index++,h}function yo(o,c){return typeof c=="function"?c(o):c}function Wp(o){var c=ys();return Hb(c,Rn,o)}function Hb(o,c,h){var g=o.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=h;var v=o.baseQueue,N=g.pending;if(N!==null){if(v!==null){var U=v.next;v.next=N.next,N.next=U}c.baseQueue=v=N,g.pending=null}if(N=o.baseState,v===null)o.memoizedState=N;else{c=v.next;var $=U=null,Q=null,oe=c,ye=!1;do{var we=oe.lane&-536870913;if(we!==oe.lane?(sn&we)===we:(yl&we)===we){var de=oe.revertLane;if(de===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),we===ju&&(ye=!0);else if((yl&de)===de){oe=oe.next,de===ju&&(ye=!0);continue}else we={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Q===null?($=Q=we,U=N):Q=Q.next=we,Ft.lanes|=de,Sl|=de;we=oe.action,ed&&h(N,we),N=oe.hasEagerState?oe.eagerState:h(N,we)}else de={lane:we,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Q===null?($=Q=de,U=N):Q=Q.next=de,Ft.lanes|=we,Sl|=we;oe=oe.next}while(oe!==null&&oe!==c);if(Q===null?U=N:Q.next=$,!Zr(N,o.memoizedState)&&(Ws=!0,ye&&(h=Nu,h!==null)))throw h;o.memoizedState=N,o.baseState=U,o.baseQueue=Q,g.lastRenderedState=N}return v===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function Wb(o){var c=ys(),h=c.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=o;var g=h.dispatch,v=h.pending,N=c.memoizedState;if(v!==null){h.pending=null;var U=v=v.next;do N=o(N,U.action),U=U.next;while(U!==v);Zr(N,c.memoizedState)||(Ws=!0),c.memoizedState=N,c.baseQueue===null&&(c.baseState=N),h.lastRenderedState=N}return[N,g]}function FE(o,c,h){var g=Ft,v=ys(),N=mn;if(N){if(h===void 0)throw Error(s(407));h=h()}else h=c();var U=!Zr((Rn||v).memoizedState,h);U&&(v.memoizedState=h,Ws=!0),v=v.queue;var $=$E.bind(null,g,v,o);if(qf(2048,8,$,[o]),v.getSnapshot!==c||U||xs!==null&&xs.memoizedState.tag&1){if(g.flags|=2048,Tu(9,Gp(),zE.bind(null,g,v,h,c),null),Vn===null)throw Error(s(349));N||(yl&124)!==0||BE(g,c,h)}return h}function BE(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=Ft.updateQueue,c===null?(c=$b(),Ft.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function zE(o,c,h,g){c.value=h,c.getSnapshot=g,qE(c)&&HE(o)}function $E(o,c,h){return h(function(){qE(c)&&HE(o)})}function qE(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Zr(o,h)}catch{return!0}}function HE(o){var c=vu(o,2);c!==null&&ri(c,o,2)}function Gb(o){var c=Ir();if(typeof o=="function"){var h=o;if(o=h(),ed){xt(!0);try{h()}finally{xt(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:o},c}function WE(o,c,h,g){return o.baseState=h,Hb(o,Rn,typeof g=="function"?g:yo)}function uU(o,c,h,g,v){if(Kp(o))throw Error(s(485));if(o=c.action,o!==null){var N={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){N.listeners.push(U)}};q.T!==null?h(!0):N.isTransition=!1,g(N),h=c.pending,h===null?(N.next=c.pending=N,GE(c,N)):(N.next=h.next,c.pending=h.next=N)}}function GE(o,c){var h=c.action,g=c.payload,v=o.state;if(c.isTransition){var N=q.T,U={};q.T=U;try{var $=h(v,g),Q=q.S;Q!==null&&Q(U,$),YE(o,c,$)}catch(oe){Yb(o,c,oe)}finally{q.T=N}}else try{N=h(v,g),YE(o,c,N)}catch(oe){Yb(o,c,oe)}}function YE(o,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(g){KE(o,c,g)},function(g){return Yb(o,c,g)}):KE(o,c,h)}function KE(o,c,h){c.status="fulfilled",c.value=h,XE(c),o.state=h,c=o.pending,c!==null&&(h=c.next,h===c?o.pending=null:(h=h.next,c.next=h,GE(o,h)))}function Yb(o,c,h){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=h,XE(c),c=c.next;while(c!==g)}o.action=null}function XE(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function QE(o,c){return c}function ZE(o,c){if(mn){var h=Vn.formState;if(h!==null){e:{var g=Ft;if(mn){if(rs){t:{for(var v=rs,N=va;v.nodeType!==8;){if(!N){v=null;break t}if(v=Gi(v.nextSibling),v===null){v=null;break t}}N=v.data,v=N==="F!"||N==="F"?v:null}if(v){rs=Gi(v.nextSibling),g=v.data==="F!";break e}}Xc(g)}g=!1}g&&(c=h[0])}}return h=Ir(),h.memoizedState=h.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:QE,lastRenderedState:c},h.queue=g,h=x2.bind(null,Ft,g),g.dispatch=h,g=Gb(!1),N=Jb.bind(null,Ft,!1,g.queue),g=Ir(),v={state:c,dispatch:null,action:o,pending:null},g.queue=v,h=uU.bind(null,Ft,v,N,h),v.dispatch=h,g.memoizedState=o,[c,h,!1]}function JE(o){var c=ys();return e2(c,Rn,o)}function e2(o,c,h){if(c=Hb(o,c,QE)[0],o=Wp(yo)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var g=$f(c)}catch(U){throw U===Lf?Fp:U}else g=c;c=ys();var v=c.queue,N=v.dispatch;return h!==c.memoizedState&&(Ft.flags|=2048,Tu(9,Gp(),hU.bind(null,v,h),null)),[g,N,o]}function hU(o,c){o.action=c}function t2(o){var c=ys(),h=Rn;if(h!==null)return e2(c,h,o);ys(),c=c.memoizedState,h=ys();var g=h.queue.dispatch;return h.memoizedState=o,[c,g,!1]}function Tu(o,c,h,g){return o={tag:o,create:h,deps:g,inst:c,next:null},c=Ft.updateQueue,c===null&&(c=$b(),Ft.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o),o}function Gp(){return{destroy:void 0,resource:void 0}}function n2(){return ys().memoizedState}function Yp(o,c,h,g){var v=Ir();g=g===void 0?null:g,Ft.flags|=o,v.memoizedState=Tu(1|c,Gp(),h,g)}function qf(o,c,h,g){var v=ys();g=g===void 0?null:g;var N=v.memoizedState.inst;Rn!==null&&g!==null&&Vb(g,Rn.memoizedState.deps)?v.memoizedState=Tu(c,N,h,g):(Ft.flags|=o,v.memoizedState=Tu(1|c,N,h,g))}function s2(o,c){Yp(8390656,8,o,c)}function r2(o,c){qf(2048,8,o,c)}function i2(o,c){return qf(4,2,o,c)}function a2(o,c){return qf(4,4,o,c)}function o2(o,c){if(typeof c=="function"){o=o();var h=c(o);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function l2(o,c,h){h=h!=null?h.concat([o]):null,qf(4,4,o2.bind(null,c,o),h)}function Kb(){}function c2(o,c){var h=ys();c=c===void 0?null:c;var g=h.memoizedState;return c!==null&&Vb(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function d2(o,c){var h=ys();c=c===void 0?null:c;var g=h.memoizedState;if(c!==null&&Vb(c,g[1]))return g[0];if(g=o(),ed){xt(!0);try{o()}finally{xt(!1)}}return h.memoizedState=[g,c],g}function Xb(o,c,h){return h===void 0||(yl&1073741824)!==0?o.memoizedState=c:(o.memoizedState=h,o=fC(),Ft.lanes|=o,Sl|=o,h)}function u2(o,c,h,g){return Zr(h,c)?h:Su.current!==null?(o=Xb(o,h,g),Zr(o,c)||(Ws=!0),o):(yl&42)===0?(Ws=!0,o.memoizedState=h):(o=fC(),Ft.lanes|=o,Sl|=o,c)}function h2(o,c,h,g,v){var N=Y.p;Y.p=N!==0&&8>N?N:8;var U=q.T,$={};q.T=$,Jb(o,!1,c,h);try{var Q=v(),oe=q.S;if(oe!==null&&oe($,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var ye=lU(Q,g);Hf(o,c,ye,si(o))}else Hf(o,c,g,si(o))}catch(we){Hf(o,c,{then:function(){},status:"rejected",reason:we},si())}finally{Y.p=N,q.T=U}}function fU(){}function Qb(o,c,h,g){if(o.tag!==5)throw Error(s(476));var v=f2(o).queue;h2(o,v,c,W,h===null?fU:function(){return m2(o),h(g)})}function f2(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:W},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:h},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function m2(o){var c=f2(o).next.queue;Hf(o,c,{},si())}function Zb(){return hr(cm)}function g2(){return ys().memoizedState}function p2(){return ys().memoizedState}function mU(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var h=si();o=pl(h);var g=xl(c,o,h);g!==null&&(ri(g,c,h),Uf(g,c,h)),c={cache:Tb()},o.payload=c;return}c=c.return}}function gU(o,c,h){var g=si();h={lane:g,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Kp(o)?y2(c,h):(h=yb(o,c,h,g),h!==null&&(ri(h,o,g),v2(h,c,g)))}function x2(o,c,h){var g=si();Hf(o,c,h,g)}function Hf(o,c,h,g){var v={lane:g,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Kp(o))y2(c,v);else{var N=o.alternate;if(o.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var U=c.lastRenderedState,$=N(U,h);if(v.hasEagerState=!0,v.eagerState=$,Zr($,U))return Ip(o,c,v,0),Vn===null&&Rp(),!1}catch{}finally{}if(h=yb(o,c,v,g),h!==null)return ri(h,o,g),v2(h,c,g),!0}return!1}function Jb(o,c,h,g){if(g={lane:2,revertLane:Rw(),action:g,hasEagerState:!1,eagerState:null,next:null},Kp(o)){if(c)throw Error(s(479))}else c=yb(o,h,g,2),c!==null&&ri(c,o,2)}function Kp(o){var c=o.alternate;return o===Ft||c!==null&&c===Ft}function y2(o,c){Eu=$p=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function v2(o,c,h){if((h&4194048)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,Fn(o,h)}}var Xp={readContext:hr,use:Hp,useCallback:as,useContext:as,useEffect:as,useImperativeHandle:as,useLayoutEffect:as,useInsertionEffect:as,useMemo:as,useReducer:as,useRef:as,useState:as,useDebugValue:as,useDeferredValue:as,useTransition:as,useSyncExternalStore:as,useId:as,useHostTransitionStatus:as,useFormState:as,useActionState:as,useOptimistic:as,useMemoCache:as,useCacheRefresh:as},b2={readContext:hr,use:Hp,useCallback:function(o,c){return Ir().memoizedState=[o,c===void 0?null:c],o},useContext:hr,useEffect:s2,useImperativeHandle:function(o,c,h){h=h!=null?h.concat([o]):null,Yp(4194308,4,o2.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Yp(4194308,4,o,c)},useInsertionEffect:function(o,c){Yp(4,2,o,c)},useMemo:function(o,c){var h=Ir();c=c===void 0?null:c;var g=o();if(ed){xt(!0);try{o()}finally{xt(!1)}}return h.memoizedState=[g,c],g},useReducer:function(o,c,h){var g=Ir();if(h!==void 0){var v=h(c);if(ed){xt(!0);try{h(c)}finally{xt(!1)}}}else v=c;return g.memoizedState=g.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},g.queue=o,o=o.dispatch=gU.bind(null,Ft,o),[g.memoizedState,o]},useRef:function(o){var c=Ir();return o={current:o},c.memoizedState=o},useState:function(o){o=Gb(o);var c=o.queue,h=x2.bind(null,Ft,c);return c.dispatch=h,[o.memoizedState,h]},useDebugValue:Kb,useDeferredValue:function(o,c){var h=Ir();return Xb(h,o,c)},useTransition:function(){var o=Gb(!1);return o=h2.bind(null,Ft,o.queue,!0,!1),Ir().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,h){var g=Ft,v=Ir();if(mn){if(h===void 0)throw Error(s(407));h=h()}else{if(h=c(),Vn===null)throw Error(s(349));(sn&124)!==0||BE(g,c,h)}v.memoizedState=h;var N={value:h,getSnapshot:c};return v.queue=N,s2($E.bind(null,g,N,o),[o]),g.flags|=2048,Tu(9,Gp(),zE.bind(null,g,N,h,c),null),h},useId:function(){var o=Ir(),c=Vn.identifierPrefix;if(mn){var h=go,g=mo;h=(g&~(1<<32-Jt(g)-1)).toString(32)+h,c="«"+c+"R"+h,h=qp++,0<h&&(c+="H"+h.toString(32)),c+="»"}else h=cU++,c="«"+c+"r"+h.toString(32)+"»";return o.memoizedState=c},useHostTransitionStatus:Zb,useFormState:ZE,useActionState:ZE,useOptimistic:function(o){var c=Ir();c.memoizedState=c.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=Jb.bind(null,Ft,!0,h),h.dispatch=c,[o,c]},useMemoCache:qb,useCacheRefresh:function(){return Ir().memoizedState=mU.bind(null,Ft)}},w2={readContext:hr,use:Hp,useCallback:c2,useContext:hr,useEffect:r2,useImperativeHandle:l2,useInsertionEffect:i2,useLayoutEffect:a2,useMemo:d2,useReducer:Wp,useRef:n2,useState:function(){return Wp(yo)},useDebugValue:Kb,useDeferredValue:function(o,c){var h=ys();return u2(h,Rn.memoizedState,o,c)},useTransition:function(){var o=Wp(yo)[0],c=ys().memoizedState;return[typeof o=="boolean"?o:$f(o),c]},useSyncExternalStore:FE,useId:g2,useHostTransitionStatus:Zb,useFormState:JE,useActionState:JE,useOptimistic:function(o,c){var h=ys();return WE(h,Rn,o,c)},useMemoCache:qb,useCacheRefresh:p2},pU={readContext:hr,use:Hp,useCallback:c2,useContext:hr,useEffect:r2,useImperativeHandle:l2,useInsertionEffect:i2,useLayoutEffect:a2,useMemo:d2,useReducer:Wb,useRef:n2,useState:function(){return Wb(yo)},useDebugValue:Kb,useDeferredValue:function(o,c){var h=ys();return Rn===null?Xb(h,o,c):u2(h,Rn.memoizedState,o,c)},useTransition:function(){var o=Wb(yo)[0],c=ys().memoizedState;return[typeof o=="boolean"?o:$f(o),c]},useSyncExternalStore:FE,useId:g2,useHostTransitionStatus:Zb,useFormState:t2,useActionState:t2,useOptimistic:function(o,c){var h=ys();return Rn!==null?WE(h,Rn,o,c):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:qb,useCacheRefresh:p2},Au=null,Wf=0;function Qp(o){var c=Wf;return Wf+=1,Au===null&&(Au=[]),IE(Au,o,c)}function Gf(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Zp(o,c){throw c.$$typeof===p?Error(s(525)):(o=Object.prototype.toString.call(c),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function _2(o){var c=o._init;return c(o._payload)}function j2(o){function c(se,ee){if(o){var ae=se.deletions;ae===null?(se.deletions=[ee],se.flags|=16):ae.push(ee)}}function h(se,ee){if(!o)return null;for(;ee!==null;)c(se,ee),ee=ee.sibling;return null}function g(se){for(var ee=new Map;se!==null;)se.key!==null?ee.set(se.key,se):ee.set(se.index,se),se=se.sibling;return ee}function v(se,ee){return se=fo(se,ee),se.index=0,se.sibling=null,se}function N(se,ee,ae){return se.index=ae,o?(ae=se.alternate,ae!==null?(ae=ae.index,ae<ee?(se.flags|=67108866,ee):ae):(se.flags|=67108866,ee)):(se.flags|=1048576,ee)}function U(se){return o&&se.alternate===null&&(se.flags|=67108866),se}function $(se,ee,ae,be){return ee===null||ee.tag!==6?(ee=bb(ae,se.mode,be),ee.return=se,ee):(ee=v(ee,ae),ee.return=se,ee)}function Q(se,ee,ae,be){var st=ae.type;return st===j?ye(se,ee,ae.props.children,be,ae.key):ee!==null&&(ee.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===A&&_2(st)===ee.type)?(ee=v(ee,ae.props),Gf(ee,ae),ee.return=se,ee):(ee=Mp(ae.type,ae.key,ae.props,null,se.mode,be),Gf(ee,ae),ee.return=se,ee)}function oe(se,ee,ae,be){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ae.containerInfo||ee.stateNode.implementation!==ae.implementation?(ee=wb(ae,se.mode,be),ee.return=se,ee):(ee=v(ee,ae.children||[]),ee.return=se,ee)}function ye(se,ee,ae,be,st){return ee===null||ee.tag!==7?(ee=Wc(ae,se.mode,be,st),ee.return=se,ee):(ee=v(ee,ae),ee.return=se,ee)}function we(se,ee,ae){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=bb(""+ee,se.mode,ae),ee.return=se,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case x:return ae=Mp(ee.type,ee.key,ee.props,null,se.mode,ae),Gf(ae,ee),ae.return=se,ae;case w:return ee=wb(ee,se.mode,ae),ee.return=se,ee;case A:var be=ee._init;return ee=be(ee._payload),we(se,ee,ae)}if(Z(ee)||O(ee))return ee=Wc(ee,se.mode,ae,null),ee.return=se,ee;if(typeof ee.then=="function")return we(se,Qp(ee),ae);if(ee.$$typeof===I)return we(se,Vp(se,ee),ae);Zp(se,ee)}return null}function de(se,ee,ae,be){var st=ee!==null?ee.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return st!==null?null:$(se,ee,""+ae,be);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case x:return ae.key===st?Q(se,ee,ae,be):null;case w:return ae.key===st?oe(se,ee,ae,be):null;case A:return st=ae._init,ae=st(ae._payload),de(se,ee,ae,be)}if(Z(ae)||O(ae))return st!==null?null:ye(se,ee,ae,be,null);if(typeof ae.then=="function")return de(se,ee,Qp(ae),be);if(ae.$$typeof===I)return de(se,ee,Vp(se,ae),be);Zp(se,ae)}return null}function ue(se,ee,ae,be,st){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return se=se.get(ae)||null,$(ee,se,""+be,st);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case x:return se=se.get(be.key===null?ae:be.key)||null,Q(ee,se,be,st);case w:return se=se.get(be.key===null?ae:be.key)||null,oe(ee,se,be,st);case A:var qt=be._init;return be=qt(be._payload),ue(se,ee,ae,be,st)}if(Z(be)||O(be))return se=se.get(ae)||null,ye(ee,se,be,st,null);if(typeof be.then=="function")return ue(se,ee,ae,Qp(be),st);if(be.$$typeof===I)return ue(se,ee,ae,Vp(ee,be),st);Zp(ee,be)}return null}function St(se,ee,ae,be){for(var st=null,qt=null,mt=ee,wt=ee=0,Ys=null;mt!==null&&wt<ae.length;wt++){mt.index>wt?(Ys=mt,mt=null):Ys=mt.sibling;var dn=de(se,mt,ae[wt],be);if(dn===null){mt===null&&(mt=Ys);break}o&&mt&&dn.alternate===null&&c(se,mt),ee=N(dn,ee,wt),qt===null?st=dn:qt.sibling=dn,qt=dn,mt=Ys}if(wt===ae.length)return h(se,mt),mn&&Yc(se,wt),st;if(mt===null){for(;wt<ae.length;wt++)mt=we(se,ae[wt],be),mt!==null&&(ee=N(mt,ee,wt),qt===null?st=mt:qt.sibling=mt,qt=mt);return mn&&Yc(se,wt),st}for(mt=g(mt);wt<ae.length;wt++)Ys=ue(mt,se,wt,ae[wt],be),Ys!==null&&(o&&Ys.alternate!==null&&mt.delete(Ys.key===null?wt:Ys.key),ee=N(Ys,ee,wt),qt===null?st=Ys:qt.sibling=Ys,qt=Ys);return o&&mt.forEach(function(Ml){return c(se,Ml)}),mn&&Yc(se,wt),st}function vt(se,ee,ae,be){if(ae==null)throw Error(s(151));for(var st=null,qt=null,mt=ee,wt=ee=0,Ys=null,dn=ae.next();mt!==null&&!dn.done;wt++,dn=ae.next()){mt.index>wt?(Ys=mt,mt=null):Ys=mt.sibling;var Ml=de(se,mt,dn.value,be);if(Ml===null){mt===null&&(mt=Ys);break}o&&mt&&Ml.alternate===null&&c(se,mt),ee=N(Ml,ee,wt),qt===null?st=Ml:qt.sibling=Ml,qt=Ml,mt=Ys}if(dn.done)return h(se,mt),mn&&Yc(se,wt),st;if(mt===null){for(;!dn.done;wt++,dn=ae.next())dn=we(se,dn.value,be),dn!==null&&(ee=N(dn,ee,wt),qt===null?st=dn:qt.sibling=dn,qt=dn);return mn&&Yc(se,wt),st}for(mt=g(mt);!dn.done;wt++,dn=ae.next())dn=ue(mt,se,wt,dn.value,be),dn!==null&&(o&&dn.alternate!==null&&mt.delete(dn.key===null?wt:dn.key),ee=N(dn,ee,wt),qt===null?st=dn:qt.sibling=dn,qt=dn);return o&&mt.forEach(function(xF){return c(se,xF)}),mn&&Yc(se,wt),st}function Dn(se,ee,ae,be){if(typeof ae=="object"&&ae!==null&&ae.type===j&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case x:e:{for(var st=ae.key;ee!==null;){if(ee.key===st){if(st=ae.type,st===j){if(ee.tag===7){h(se,ee.sibling),be=v(ee,ae.props.children),be.return=se,se=be;break e}}else if(ee.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===A&&_2(st)===ee.type){h(se,ee.sibling),be=v(ee,ae.props),Gf(be,ae),be.return=se,se=be;break e}h(se,ee);break}else c(se,ee);ee=ee.sibling}ae.type===j?(be=Wc(ae.props.children,se.mode,be,ae.key),be.return=se,se=be):(be=Mp(ae.type,ae.key,ae.props,null,se.mode,be),Gf(be,ae),be.return=se,se=be)}return U(se);case w:e:{for(st=ae.key;ee!==null;){if(ee.key===st)if(ee.tag===4&&ee.stateNode.containerInfo===ae.containerInfo&&ee.stateNode.implementation===ae.implementation){h(se,ee.sibling),be=v(ee,ae.children||[]),be.return=se,se=be;break e}else{h(se,ee);break}else c(se,ee);ee=ee.sibling}be=wb(ae,se.mode,be),be.return=se,se=be}return U(se);case A:return st=ae._init,ae=st(ae._payload),Dn(se,ee,ae,be)}if(Z(ae))return St(se,ee,ae,be);if(O(ae)){if(st=O(ae),typeof st!="function")throw Error(s(150));return ae=st.call(ae),vt(se,ee,ae,be)}if(typeof ae.then=="function")return Dn(se,ee,Qp(ae),be);if(ae.$$typeof===I)return Dn(se,ee,Vp(se,ae),be);Zp(se,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,ee!==null&&ee.tag===6?(h(se,ee.sibling),be=v(ee,ae),be.return=se,se=be):(h(se,ee),be=bb(ae,se.mode,be),be.return=se,se=be),U(se)):h(se,ee)}return function(se,ee,ae,be){try{Wf=0;var st=Dn(se,ee,ae,be);return Au=null,st}catch(mt){if(mt===Lf||mt===Fp)throw mt;var qt=Jr(29,mt,null,se.mode);return qt.lanes=be,qt.return=se,qt}finally{}}}var ku=j2(!0),N2=j2(!1),Ci=K(null),ba=null;function vl(o){var c=o.alternate;te(Ls,Ls.current&1),te(Ci,o),ba===null&&(c===null||Su.current!==null||c.memoizedState!==null)&&(ba=o)}function S2(o){if(o.tag===22){if(te(Ls,Ls.current),te(Ci,o),ba===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(ba=o)}}else bl()}function bl(){te(Ls,Ls.current),te(Ci,Ci.current)}function vo(o){ne(Ci),ba===o&&(ba=null),ne(Ls)}var Ls=K(0);function Jp(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||$w(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function ew(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:m({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var tw={enqueueSetState:function(o,c,h){o=o._reactInternals;var g=si(),v=pl(g);v.payload=c,h!=null&&(v.callback=h),c=xl(o,v,g),c!==null&&(ri(c,o,g),Uf(c,o,g))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=si(),v=pl(g);v.tag=1,v.payload=c,h!=null&&(v.callback=h),c=xl(o,v,g),c!==null&&(ri(c,o,g),Uf(c,o,g))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=si(),g=pl(h);g.tag=2,c!=null&&(g.callback=c),c=xl(o,g,h),c!==null&&(ri(c,o,h),Uf(c,o,h))}};function E2(o,c,h,g,v,N,U){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,N,U):c.prototype&&c.prototype.isPureReactComponent?!Af(h,g)||!Af(v,N):!0}function C2(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&tw.enqueueReplaceState(c,c.state,null)}function td(o,c){var h=c;if("ref"in c){h={};for(var g in c)g!=="ref"&&(h[g]=c[g])}if(o=o.defaultProps){h===c&&(h=m({},h));for(var v in o)h[v]===void 0&&(h[v]=o[v])}return h}var ex=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function T2(o){ex(o)}function A2(o){console.error(o)}function k2(o){ex(o)}function tx(o,c){try{var h=o.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function R2(o,c,h){try{var g=o.onCaughtError;g(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function nw(o,c,h){return h=pl(h),h.tag=3,h.payload={element:null},h.callback=function(){tx(o,c)},h}function I2(o){return o=pl(o),o.tag=3,o}function D2(o,c,h,g){var v=h.type.getDerivedStateFromError;if(typeof v=="function"){var N=g.value;o.payload=function(){return v(N)},o.callback=function(){R2(c,h,g)}}var U=h.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(o.callback=function(){R2(c,h,g),typeof v!="function"&&(El===null?El=new Set([this]):El.add(this));var $=g.stack;this.componentDidCatch(g.value,{componentStack:$!==null?$:""})})}function xU(o,c,h,g,v){if(h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=h.alternate,c!==null&&Mf(c,h,v,!0),h=Ci.current,h!==null){switch(h.tag){case 13:return ba===null?Ew():h.alternate===null&&is===0&&(is=3),h.flags&=-257,h.flags|=65536,h.lanes=v,g===Rb?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([g]):c.add(g),Tw(o,g,v)),!1;case 22:return h.flags|=65536,g===Rb?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([g]):h.add(g)),Tw(o,g,v)),!1}throw Error(s(435,h.tag))}return Tw(o,g,v),Ew(),!1}if(mn)return c=Ci.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=v,g!==Nb&&(o=Error(s(422),{cause:g}),Df(ji(o,h)))):(g!==Nb&&(c=Error(s(423),{cause:g}),Df(ji(c,h))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,g=ji(g,h),v=nw(o.stateNode,g,v),Mb(o,v),is!==4&&(is=2)),!1;var N=Error(s(520),{cause:g});if(N=ji(N,h),em===null?em=[N]:em.push(N),is!==4&&(is=2),c===null)return!0;g=ji(g,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,o=v&-v,h.lanes|=o,o=nw(h.stateNode,g,o),Mb(h,o),!1;case 1:if(c=h.type,N=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(El===null||!El.has(N))))return h.flags|=65536,v&=-v,h.lanes|=v,v=I2(v),D2(v,o,h,g),Mb(h,v),!1}h=h.return}while(h!==null);return!1}var M2=Error(s(461)),Ws=!1;function sr(o,c,h,g){c.child=o===null?N2(c,null,h,g):ku(c,o.child,h,g)}function P2(o,c,h,g,v){h=h.render;var N=c.ref;if("ref"in g){var U={};for(var $ in g)$!=="ref"&&(U[$]=g[$])}else U=g;return Zc(c),g=Ub(o,c,h,U,N,v),$=Fb(),o!==null&&!Ws?(Bb(o,c,v),bo(o,c,v)):(mn&&$&&_b(c),c.flags|=1,sr(o,c,g,v),c.child)}function O2(o,c,h,g,v){if(o===null){var N=h.type;return typeof N=="function"&&!vb(N)&&N.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=N,L2(o,c,N,g,v)):(o=Mp(h.type,null,g,c,c.mode,v),o.ref=c.ref,o.return=c,c.child=o)}if(N=o.child,!dw(o,v)){var U=N.memoizedProps;if(h=h.compare,h=h!==null?h:Af,h(U,g)&&o.ref===c.ref)return bo(o,c,v)}return c.flags|=1,o=fo(N,g),o.ref=c.ref,o.return=c,c.child=o}function L2(o,c,h,g,v){if(o!==null){var N=o.memoizedProps;if(Af(N,g)&&o.ref===c.ref)if(Ws=!1,c.pendingProps=g=N,dw(o,v))(o.flags&131072)!==0&&(Ws=!0);else return c.lanes=o.lanes,bo(o,c,v)}return sw(o,c,h,g,v)}function V2(o,c,h){var g=c.pendingProps,v=g.children,N=o!==null?o.memoizedState:null;if(g.mode==="hidden"){if((c.flags&128)!==0){if(g=N!==null?N.baseLanes|h:h,o!==null){for(v=c.child=o.child,N=0;v!==null;)N=N|v.lanes|v.childLanes,v=v.sibling;c.childLanes=N&~g}else c.childLanes=0,c.child=null;return U2(o,c,g,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Up(c,N!==null?N.cachePool:null),N!==null?LE(c,N):Ob(),S2(c);else return c.lanes=c.childLanes=536870912,U2(o,c,N!==null?N.baseLanes|h:h,h)}else N!==null?(Up(c,N.cachePool),LE(c,N),bl(),c.memoizedState=null):(o!==null&&Up(c,null),Ob(),bl());return sr(o,c,v,h),c.child}function U2(o,c,h,g){var v=kb();return v=v===null?null:{parent:Os._currentValue,pool:v},c.memoizedState={baseLanes:h,cachePool:v},o!==null&&Up(c,null),Ob(),S2(c),o!==null&&Mf(o,c,g,!0),null}function nx(o,c){var h=c.ref;if(h===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(s(284));(o===null||o.ref!==h)&&(c.flags|=4194816)}}function sw(o,c,h,g,v){return Zc(c),h=Ub(o,c,h,g,void 0,v),g=Fb(),o!==null&&!Ws?(Bb(o,c,v),bo(o,c,v)):(mn&&g&&_b(c),c.flags|=1,sr(o,c,h,v),c.child)}function F2(o,c,h,g,v,N){return Zc(c),c.updateQueue=null,h=UE(c,g,h,v),VE(o),g=Fb(),o!==null&&!Ws?(Bb(o,c,N),bo(o,c,N)):(mn&&g&&_b(c),c.flags|=1,sr(o,c,h,N),c.child)}function B2(o,c,h,g,v){if(Zc(c),c.stateNode===null){var N=bu,U=h.contextType;typeof U=="object"&&U!==null&&(N=hr(U)),N=new h(g,N),c.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=tw,c.stateNode=N,N._reactInternals=c,N=c.stateNode,N.props=g,N.state=c.memoizedState,N.refs={},Ib(c),U=h.contextType,N.context=typeof U=="object"&&U!==null?hr(U):bu,N.state=c.memoizedState,U=h.getDerivedStateFromProps,typeof U=="function"&&(ew(c,h,U,g),N.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(U=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),U!==N.state&&tw.enqueueReplaceState(N,N.state,null),Bf(c,g,N,v),Ff(),N.state=c.memoizedState),typeof N.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(o===null){N=c.stateNode;var $=c.memoizedProps,Q=td(h,$);N.props=Q;var oe=N.context,ye=h.contextType;U=bu,typeof ye=="object"&&ye!==null&&(U=hr(ye));var we=h.getDerivedStateFromProps;ye=typeof we=="function"||typeof N.getSnapshotBeforeUpdate=="function",$=c.pendingProps!==$,ye||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||($||oe!==U)&&C2(c,N,g,U),gl=!1;var de=c.memoizedState;N.state=de,Bf(c,g,N,v),Ff(),oe=c.memoizedState,$||de!==oe||gl?(typeof we=="function"&&(ew(c,h,we,g),oe=c.memoizedState),(Q=gl||E2(c,h,Q,g,de,oe,U))?(ye||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(c.flags|=4194308)):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=oe),N.props=g,N.state=oe,N.context=U,g=Q):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{N=c.stateNode,Db(o,c),U=c.memoizedProps,ye=td(h,U),N.props=ye,we=c.pendingProps,de=N.context,oe=h.contextType,Q=bu,typeof oe=="object"&&oe!==null&&(Q=hr(oe)),$=h.getDerivedStateFromProps,(oe=typeof $=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(U!==we||de!==Q)&&C2(c,N,g,Q),gl=!1,de=c.memoizedState,N.state=de,Bf(c,g,N,v),Ff();var ue=c.memoizedState;U!==we||de!==ue||gl||o!==null&&o.dependencies!==null&&Lp(o.dependencies)?(typeof $=="function"&&(ew(c,h,$,g),ue=c.memoizedState),(ye=gl||E2(c,h,ye,g,de,ue,Q)||o!==null&&o.dependencies!==null&&Lp(o.dependencies))?(oe||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(g,ue,Q),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(g,ue,Q)),typeof N.componentDidUpdate=="function"&&(c.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof N.componentDidUpdate!="function"||U===o.memoizedProps&&de===o.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&de===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=ue),N.props=g,N.state=ue,N.context=Q,g=ye):(typeof N.componentDidUpdate!="function"||U===o.memoizedProps&&de===o.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&de===o.memoizedState||(c.flags|=1024),g=!1)}return N=g,nx(o,c),g=(c.flags&128)!==0,N||g?(N=c.stateNode,h=g&&typeof h.getDerivedStateFromError!="function"?null:N.render(),c.flags|=1,o!==null&&g?(c.child=ku(c,o.child,null,v),c.child=ku(c,null,h,v)):sr(o,c,h,v),c.memoizedState=N.state,o=c.child):o=bo(o,c,v),o}function z2(o,c,h,g){return If(),c.flags|=256,sr(o,c,h,g),c.child}var rw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function iw(o){return{baseLanes:o,cachePool:AE()}}function aw(o,c,h){return o=o!==null?o.childLanes&~h:0,c&&(o|=Ti),o}function $2(o,c,h){var g=c.pendingProps,v=!1,N=(c.flags&128)!==0,U;if((U=N)||(U=o!==null&&o.memoizedState===null?!1:(Ls.current&2)!==0),U&&(v=!0,c.flags&=-129),U=(c.flags&32)!==0,c.flags&=-33,o===null){if(mn){if(v?vl(c):bl(),mn){var $=rs,Q;if(Q=$){e:{for(Q=$,$=va;Q.nodeType!==8;){if(!$){$=null;break e}if(Q=Gi(Q.nextSibling),Q===null){$=null;break e}}$=Q}$!==null?(c.memoizedState={dehydrated:$,treeContext:Gc!==null?{id:mo,overflow:go}:null,retryLane:536870912,hydrationErrors:null},Q=Jr(18,null,null,0),Q.stateNode=$,Q.return=c,c.child=Q,Cr=c,rs=null,Q=!0):Q=!1}Q||Xc(c)}if($=c.memoizedState,$!==null&&($=$.dehydrated,$!==null))return $w($)?c.lanes=32:c.lanes=536870912,null;vo(c)}return $=g.children,g=g.fallback,v?(bl(),v=c.mode,$=sx({mode:"hidden",children:$},v),g=Wc(g,v,h,null),$.return=c,g.return=c,$.sibling=g,c.child=$,v=c.child,v.memoizedState=iw(h),v.childLanes=aw(o,U,h),c.memoizedState=rw,g):(vl(c),ow(c,$))}if(Q=o.memoizedState,Q!==null&&($=Q.dehydrated,$!==null)){if(N)c.flags&256?(vl(c),c.flags&=-257,c=lw(o,c,h)):c.memoizedState!==null?(bl(),c.child=o.child,c.flags|=128,c=null):(bl(),v=g.fallback,$=c.mode,g=sx({mode:"visible",children:g.children},$),v=Wc(v,$,h,null),v.flags|=2,g.return=c,v.return=c,g.sibling=v,c.child=g,ku(c,o.child,null,h),g=c.child,g.memoizedState=iw(h),g.childLanes=aw(o,U,h),c.memoizedState=rw,c=v);else if(vl(c),$w($)){if(U=$.nextSibling&&$.nextSibling.dataset,U)var oe=U.dgst;U=oe,g=Error(s(419)),g.stack="",g.digest=U,Df({value:g,source:null,stack:null}),c=lw(o,c,h)}else if(Ws||Mf(o,c,h,!1),U=(h&o.childLanes)!==0,Ws||U){if(U=Vn,U!==null&&(g=h&-h,g=(g&42)!==0?1:cn(g),g=(g&(U.suspendedLanes|h))!==0?0:g,g!==0&&g!==Q.retryLane))throw Q.retryLane=g,vu(o,g),ri(U,o,g),M2;$.data==="$?"||Ew(),c=lw(o,c,h)}else $.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=Q.treeContext,rs=Gi($.nextSibling),Cr=c,mn=!0,Kc=null,va=!1,o!==null&&(Si[Ei++]=mo,Si[Ei++]=go,Si[Ei++]=Gc,mo=o.id,go=o.overflow,Gc=c),c=ow(c,g.children),c.flags|=4096);return c}return v?(bl(),v=g.fallback,$=c.mode,Q=o.child,oe=Q.sibling,g=fo(Q,{mode:"hidden",children:g.children}),g.subtreeFlags=Q.subtreeFlags&65011712,oe!==null?v=fo(oe,v):(v=Wc(v,$,h,null),v.flags|=2),v.return=c,g.return=c,g.sibling=v,c.child=g,g=v,v=c.child,$=o.child.memoizedState,$===null?$=iw(h):(Q=$.cachePool,Q!==null?(oe=Os._currentValue,Q=Q.parent!==oe?{parent:oe,pool:oe}:Q):Q=AE(),$={baseLanes:$.baseLanes|h,cachePool:Q}),v.memoizedState=$,v.childLanes=aw(o,U,h),c.memoizedState=rw,g):(vl(c),h=o.child,o=h.sibling,h=fo(h,{mode:"visible",children:g.children}),h.return=c,h.sibling=null,o!==null&&(U=c.deletions,U===null?(c.deletions=[o],c.flags|=16):U.push(o)),c.child=h,c.memoizedState=null,h)}function ow(o,c){return c=sx({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function sx(o,c){return o=Jr(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function lw(o,c,h){return ku(c,o.child,null,h),o=ow(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function q2(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),Eb(o.return,c,h)}function cw(o,c,h,g,v){var N=o.memoizedState;N===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:v}:(N.isBackwards=c,N.rendering=null,N.renderingStartTime=0,N.last=g,N.tail=h,N.tailMode=v)}function H2(o,c,h){var g=c.pendingProps,v=g.revealOrder,N=g.tail;if(sr(o,c,g.children,h),g=Ls.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&q2(o,h,c);else if(o.tag===19)q2(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}switch(te(Ls,g),v){case"forwards":for(h=c.child,v=null;h!==null;)o=h.alternate,o!==null&&Jp(o)===null&&(v=h),h=h.sibling;h=v,h===null?(v=c.child,c.child=null):(v=h.sibling,h.sibling=null),cw(c,!1,v,h,N);break;case"backwards":for(h=null,v=c.child,c.child=null;v!==null;){if(o=v.alternate,o!==null&&Jp(o)===null){c.child=v;break}o=v.sibling,v.sibling=h,h=v,v=o}cw(c,!0,h,null,N);break;case"together":cw(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function bo(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),Sl|=c.lanes,(h&c.childLanes)===0)if(o!==null){if(Mf(o,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(s(153));if(c.child!==null){for(o=c.child,h=fo(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=fo(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function dw(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Lp(o)))}function yU(o,c,h){switch(c.tag){case 3:le(c,c.stateNode.containerInfo),ml(c,Os,o.memoizedState.cache),If();break;case 27:case 5:Pe(c);break;case 4:le(c,c.stateNode.containerInfo);break;case 10:ml(c,c.type,c.memoizedProps.value);break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(vl(c),c.flags|=128,null):(h&c.child.childLanes)!==0?$2(o,c,h):(vl(c),o=bo(o,c,h),o!==null?o.sibling:null);vl(c);break;case 19:var v=(o.flags&128)!==0;if(g=(h&c.childLanes)!==0,g||(Mf(o,c,h,!1),g=(h&c.childLanes)!==0),v){if(g)return H2(o,c,h);c.flags|=128}if(v=c.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),te(Ls,Ls.current),g)break;return null;case 22:case 23:return c.lanes=0,V2(o,c,h);case 24:ml(c,Os,o.memoizedState.cache)}return bo(o,c,h)}function W2(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps)Ws=!0;else{if(!dw(o,h)&&(c.flags&128)===0)return Ws=!1,yU(o,c,h);Ws=(o.flags&131072)!==0}else Ws=!1,mn&&(c.flags&1048576)!==0&&_E(c,Op,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var g=c.elementType,v=g._init;if(g=v(g._payload),c.type=g,typeof g=="function")vb(g)?(o=td(g,o),c.tag=1,c=B2(null,c,g,o,h)):(c.tag=0,c=sw(null,c,g,o,h));else{if(g!=null){if(v=g.$$typeof,v===M){c.tag=11,c=P2(null,c,g,o,h);break e}else if(v===D){c.tag=14,c=O2(null,c,g,o,h);break e}}throw c=J(g)||g,Error(s(306,c,""))}}return c;case 0:return sw(o,c,c.type,c.pendingProps,h);case 1:return g=c.type,v=td(g,c.pendingProps),B2(o,c,g,v,h);case 3:e:{if(le(c,c.stateNode.containerInfo),o===null)throw Error(s(387));g=c.pendingProps;var N=c.memoizedState;v=N.element,Db(o,c),Bf(c,g,null,h);var U=c.memoizedState;if(g=U.cache,ml(c,Os,g),g!==N.cache&&Cb(c,[Os],h,!0),Ff(),g=U.element,N.isDehydrated)if(N={element:g,isDehydrated:!1,cache:U.cache},c.updateQueue.baseState=N,c.memoizedState=N,c.flags&256){c=z2(o,c,g,h);break e}else if(g!==v){v=ji(Error(s(424)),c),Df(v),c=z2(o,c,g,h);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(rs=Gi(o.firstChild),Cr=c,mn=!0,Kc=null,va=!0,h=N2(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(If(),g===v){c=bo(o,c,h);break e}sr(o,c,g,h)}c=c.child}return c;case 26:return nx(o,c),o===null?(h=XC(c.type,null,c.pendingProps,null))?c.memoizedState=h:mn||(h=c.type,o=c.pendingProps,g=xx(Ee.current).createElement(h),g[Mt]=c,g[Et]=o,ir(g,h,o),Yn(g),c.stateNode=g):c.memoizedState=XC(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Pe(c),o===null&&mn&&(g=c.stateNode=GC(c.type,c.pendingProps,Ee.current),Cr=c,va=!0,v=rs,Al(c.type)?(qw=v,rs=Gi(g.firstChild)):rs=v),sr(o,c,c.pendingProps.children,h),nx(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&mn&&((v=g=rs)&&(g=WU(g,c.type,c.pendingProps,va),g!==null?(c.stateNode=g,Cr=c,rs=Gi(g.firstChild),va=!1,v=!0):v=!1),v||Xc(c)),Pe(c),v=c.type,N=c.pendingProps,U=o!==null?o.memoizedProps:null,g=N.children,Fw(v,N)?g=null:U!==null&&Fw(v,U)&&(c.flags|=32),c.memoizedState!==null&&(v=Ub(o,c,dU,null,null,h),cm._currentValue=v),nx(o,c),sr(o,c,g,h),c.child;case 6:return o===null&&mn&&((o=h=rs)&&(h=GU(h,c.pendingProps,va),h!==null?(c.stateNode=h,Cr=c,rs=null,o=!0):o=!1),o||Xc(c)),null;case 13:return $2(o,c,h);case 4:return le(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=ku(c,null,g,h):sr(o,c,g,h),c.child;case 11:return P2(o,c,c.type,c.pendingProps,h);case 7:return sr(o,c,c.pendingProps,h),c.child;case 8:return sr(o,c,c.pendingProps.children,h),c.child;case 12:return sr(o,c,c.pendingProps.children,h),c.child;case 10:return g=c.pendingProps,ml(c,c.type,g.value),sr(o,c,g.children,h),c.child;case 9:return v=c.type._context,g=c.pendingProps.children,Zc(c),v=hr(v),g=g(v),c.flags|=1,sr(o,c,g,h),c.child;case 14:return O2(o,c,c.type,c.pendingProps,h);case 15:return L2(o,c,c.type,c.pendingProps,h);case 19:return H2(o,c,h);case 31:return g=c.pendingProps,h=c.mode,g={mode:g.mode,children:g.children},o===null?(h=sx(g,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=fo(o.child,g),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return V2(o,c,h);case 24:return Zc(c),g=hr(Os),o===null?(v=kb(),v===null&&(v=Vn,N=Tb(),v.pooledCache=N,N.refCount++,N!==null&&(v.pooledCacheLanes|=h),v=N),c.memoizedState={parent:g,cache:v},Ib(c),ml(c,Os,v)):((o.lanes&h)!==0&&(Db(o,c),Bf(c,null,null,h),Ff()),v=o.memoizedState,N=c.memoizedState,v.parent!==g?(v={parent:g,cache:g},c.memoizedState=v,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=v),ml(c,Os,g)):(g=N.cache,ml(c,Os,g),g!==v.cache&&Cb(c,[Os],h,!0))),sr(o,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(s(156,c.tag))}function wo(o){o.flags|=4}function G2(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!tT(c)){if(c=Ci.current,c!==null&&((sn&4194048)===sn?ba!==null:(sn&62914560)!==sn&&(sn&536870912)===0||c!==ba))throw Vf=Rb,kE;o.flags|=8192}}function rx(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?_n():536870912,o.lanes|=c,Mu|=c)}function Yf(o,c){if(!mn)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Kn(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var v=o.child;v!==null;)h|=v.lanes|v.childLanes,g|=v.subtreeFlags&65011712,g|=v.flags&65011712,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)h|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function vU(o,c,h){var g=c.pendingProps;switch(jb(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(c),null;case 1:return Kn(c),null;case 3:return h=c.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),xo(Os),Ne(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(Rf(c)?wo(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,SE())),Kn(c),null;case 26:return h=c.memoizedState,o===null?(wo(c),h!==null?(Kn(c),G2(c,h)):(Kn(c),c.flags&=-16777217)):h?h!==o.memoizedState?(wo(c),Kn(c),G2(c,h)):(Kn(c),c.flags&=-16777217):(o.memoizedProps!==g&&wo(c),Kn(c),c.flags&=-16777217),null;case 27:Ge(c),h=Ee.current;var v=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==g&&wo(c);else{if(!g){if(c.stateNode===null)throw Error(s(166));return Kn(c),null}o=fe.current,Rf(c)?jE(c):(o=GC(v,g,h),c.stateNode=o,wo(c))}return Kn(c),null;case 5:if(Ge(c),h=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==g&&wo(c);else{if(!g){if(c.stateNode===null)throw Error(s(166));return Kn(c),null}if(o=fe.current,Rf(c))jE(c);else{switch(v=xx(Ee.current),o){case 1:o=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:o=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":o=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":o=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":o=v.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof g.is=="string"?v.createElement("select",{is:g.is}):v.createElement("select"),g.multiple?o.multiple=!0:g.size&&(o.size=g.size);break;default:o=typeof g.is=="string"?v.createElement(h,{is:g.is}):v.createElement(h)}}o[Mt]=c,o[Et]=g;e:for(v=c.child;v!==null;){if(v.tag===5||v.tag===6)o.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===c)break e;for(;v.sibling===null;){if(v.return===null||v.return===c)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}c.stateNode=o;e:switch(ir(o,h,g),h){case"button":case"input":case"select":case"textarea":o=!!g.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&wo(c)}}return Kn(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==g&&wo(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(s(166));if(o=Ee.current,Rf(c)){if(o=c.stateNode,h=c.memoizedProps,g=null,v=Cr,v!==null)switch(v.tag){case 27:case 5:g=v.memoizedProps}o[Mt]=c,o=!!(o.nodeValue===h||g!==null&&g.suppressHydrationWarning===!0||FC(o.nodeValue,h)),o||Xc(c)}else o=xx(o).createTextNode(g),o[Mt]=c,c.stateNode=o}return Kn(c),null;case 13:if(g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=Rf(c),g!==null&&g.dehydrated!==null){if(o===null){if(!v)throw Error(s(318));if(v=c.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[Mt]=c}else If(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Kn(c),v=!1}else v=SE(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=v),v=!0;if(!v)return c.flags&256?(vo(c),c):(vo(c),null)}if(vo(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=g!==null,o=o!==null&&o.memoizedState!==null,h){g=c.child,v=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(v=g.alternate.memoizedState.cachePool.pool);var N=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(N=g.memoizedState.cachePool.pool),N!==v&&(g.flags|=2048)}return h!==o&&h&&(c.child.flags|=8192),rx(c,c.updateQueue),Kn(c),null;case 4:return Ne(),o===null&&Pw(c.stateNode.containerInfo),Kn(c),null;case 10:return xo(c.type),Kn(c),null;case 19:if(ne(Ls),v=c.memoizedState,v===null)return Kn(c),null;if(g=(c.flags&128)!==0,N=v.rendering,N===null)if(g)Yf(v,!1);else{if(is!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(N=Jp(o),N!==null){for(c.flags|=128,Yf(v,!1),o=N.updateQueue,c.updateQueue=o,rx(c,o),c.subtreeFlags=0,o=h,h=c.child;h!==null;)wE(h,o),h=h.sibling;return te(Ls,Ls.current&1|2),c.child}o=o.sibling}v.tail!==null&&ct()>ox&&(c.flags|=128,g=!0,Yf(v,!1),c.lanes=4194304)}else{if(!g)if(o=Jp(N),o!==null){if(c.flags|=128,g=!0,o=o.updateQueue,c.updateQueue=o,rx(c,o),Yf(v,!0),v.tail===null&&v.tailMode==="hidden"&&!N.alternate&&!mn)return Kn(c),null}else 2*ct()-v.renderingStartTime>ox&&h!==536870912&&(c.flags|=128,g=!0,Yf(v,!1),c.lanes=4194304);v.isBackwards?(N.sibling=c.child,c.child=N):(o=v.last,o!==null?o.sibling=N:c.child=N,v.last=N)}return v.tail!==null?(c=v.tail,v.rendering=c,v.tail=c.sibling,v.renderingStartTime=ct(),c.sibling=null,o=Ls.current,te(Ls,g?o&1|2:o&1),c):(Kn(c),null);case 22:case 23:return vo(c),Lb(),g=c.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(h&536870912)!==0&&(c.flags&128)===0&&(Kn(c),c.subtreeFlags&6&&(c.flags|=8192)):Kn(c),h=c.updateQueue,h!==null&&rx(c,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==h&&(c.flags|=2048),o!==null&&ne(Jc),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),xo(Os),Kn(c),null;case 25:return null;case 30:return null}throw Error(s(156,c.tag))}function bU(o,c){switch(jb(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return xo(Os),Ne(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Ge(c),null;case 13:if(vo(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(s(340));If()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return ne(Ls),null;case 4:return Ne(),null;case 10:return xo(c.type),null;case 22:case 23:return vo(c),Lb(),o!==null&&ne(Jc),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return xo(Os),null;case 25:return null;default:return null}}function Y2(o,c){switch(jb(c),c.tag){case 3:xo(Os),Ne();break;case 26:case 27:case 5:Ge(c);break;case 4:Ne();break;case 13:vo(c);break;case 19:ne(Ls);break;case 10:xo(c.type);break;case 22:case 23:vo(c),Lb(),o!==null&&ne(Jc);break;case 24:xo(Os)}}function Kf(o,c){try{var h=c.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var v=g.next;h=v;do{if((h.tag&o)===o){g=void 0;var N=h.create,U=h.inst;g=N(),U.destroy=g}h=h.next}while(h!==v)}}catch($){Pn(c,c.return,$)}}function wl(o,c,h){try{var g=c.updateQueue,v=g!==null?g.lastEffect:null;if(v!==null){var N=v.next;g=N;do{if((g.tag&o)===o){var U=g.inst,$=U.destroy;if($!==void 0){U.destroy=void 0,v=c;var Q=h,oe=$;try{oe()}catch(ye){Pn(v,Q,ye)}}}g=g.next}while(g!==N)}}catch(ye){Pn(c,c.return,ye)}}function K2(o){var c=o.updateQueue;if(c!==null){var h=o.stateNode;try{OE(c,h)}catch(g){Pn(o,o.return,g)}}}function X2(o,c,h){h.props=td(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(g){Pn(o,c,g)}}function Xf(o,c){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof h=="function"?o.refCleanup=h(g):h.current=g}}catch(v){Pn(o,c,v)}}function wa(o,c){var h=o.ref,g=o.refCleanup;if(h!==null)if(typeof g=="function")try{g()}catch(v){Pn(o,c,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(v){Pn(o,c,v)}else h.current=null}function Q2(o){var c=o.type,h=o.memoizedProps,g=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&g.focus();break e;case"img":h.src?g.src=h.src:h.srcSet&&(g.srcset=h.srcSet)}}catch(v){Pn(o,o.return,v)}}function uw(o,c,h){try{var g=o.stateNode;BU(g,o.type,h,c),g[Et]=c}catch(v){Pn(o,o.return,v)}}function Z2(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Al(o.type)||o.tag===4}function hw(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Z2(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Al(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function fw(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(o),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=px));else if(g!==4&&(g===27&&Al(o.type)&&(h=o.stateNode,c=null),o=o.child,o!==null))for(fw(o,c,h),o=o.sibling;o!==null;)fw(o,c,h),o=o.sibling}function ix(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(g===27&&Al(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(ix(o,c,h),o=o.sibling;o!==null;)ix(o,c,h),o=o.sibling}function J2(o){var c=o.stateNode,h=o.memoizedProps;try{for(var g=o.type,v=c.attributes;v.length;)c.removeAttributeNode(v[0]);ir(c,g,h),c[Mt]=o,c[Et]=h}catch(N){Pn(o,o.return,N)}}var _o=!1,os=!1,mw=!1,eC=typeof WeakSet=="function"?WeakSet:Set,Gs=null;function wU(o,c){if(o=o.containerInfo,Vw=jx,o=uE(o),hb(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var v=g.anchorOffset,N=g.focusNode;g=g.focusOffset;try{h.nodeType,N.nodeType}catch{h=null;break e}var U=0,$=-1,Q=-1,oe=0,ye=0,we=o,de=null;t:for(;;){for(var ue;we!==h||v!==0&&we.nodeType!==3||($=U+v),we!==N||g!==0&&we.nodeType!==3||(Q=U+g),we.nodeType===3&&(U+=we.nodeValue.length),(ue=we.firstChild)!==null;)de=we,we=ue;for(;;){if(we===o)break t;if(de===h&&++oe===v&&($=U),de===N&&++ye===g&&(Q=U),(ue=we.nextSibling)!==null)break;we=de,de=we.parentNode}we=ue}h=$===-1||Q===-1?null:{start:$,end:Q}}else h=null}h=h||{start:0,end:0}}else h=null;for(Uw={focusedElem:o,selectionRange:h},jx=!1,Gs=c;Gs!==null;)if(c=Gs,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,Gs=o;else for(;Gs!==null;){switch(c=Gs,N=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&N!==null){o=void 0,h=c,v=N.memoizedProps,N=N.memoizedState,g=h.stateNode;try{var St=td(h.type,v,h.elementType===h.type);o=g.getSnapshotBeforeUpdate(St,N),g.__reactInternalSnapshotBeforeUpdate=o}catch(vt){Pn(h,h.return,vt)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,h=o.nodeType,h===9)zw(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":zw(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(s(163))}if(o=c.sibling,o!==null){o.return=c.return,Gs=o;break}Gs=c.return}}function tC(o,c,h){var g=h.flags;switch(h.tag){case 0:case 11:case 15:_l(o,h),g&4&&Kf(5,h);break;case 1:if(_l(o,h),g&4)if(o=h.stateNode,c===null)try{o.componentDidMount()}catch(U){Pn(h,h.return,U)}else{var v=td(h.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(v,c,o.__reactInternalSnapshotBeforeUpdate)}catch(U){Pn(h,h.return,U)}}g&64&&K2(h),g&512&&Xf(h,h.return);break;case 3:if(_l(o,h),g&64&&(o=h.updateQueue,o!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{OE(o,c)}catch(U){Pn(h,h.return,U)}}break;case 27:c===null&&g&4&&J2(h);case 26:case 5:_l(o,h),c===null&&g&4&&Q2(h),g&512&&Xf(h,h.return);break;case 12:_l(o,h);break;case 13:_l(o,h),g&4&&rC(o,h),g&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=kU.bind(null,h),YU(o,h))));break;case 22:if(g=h.memoizedState!==null||_o,!g){c=c!==null&&c.memoizedState!==null||os,v=_o;var N=os;_o=g,(os=c)&&!N?jl(o,h,(h.subtreeFlags&8772)!==0):_l(o,h),_o=v,os=N}break;case 30:break;default:_l(o,h)}}function nC(o){var c=o.alternate;c!==null&&(o.alternate=null,nC(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&Gr(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Wn=null,Dr=!1;function jo(o,c,h){for(h=h.child;h!==null;)sC(o,c,h),h=h.sibling}function sC(o,c,h){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Me,h)}catch{}switch(h.tag){case 26:os||wa(h,c),jo(o,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:os||wa(h,c);var g=Wn,v=Dr;Al(h.type)&&(Wn=h.stateNode,Dr=!1),jo(o,c,h),im(h.stateNode),Wn=g,Dr=v;break;case 5:os||wa(h,c);case 6:if(g=Wn,v=Dr,Wn=null,jo(o,c,h),Wn=g,Dr=v,Wn!==null)if(Dr)try{(Wn.nodeType===9?Wn.body:Wn.nodeName==="HTML"?Wn.ownerDocument.body:Wn).removeChild(h.stateNode)}catch(N){Pn(h,c,N)}else try{Wn.removeChild(h.stateNode)}catch(N){Pn(h,c,N)}break;case 18:Wn!==null&&(Dr?(o=Wn,HC(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),fm(o)):HC(Wn,h.stateNode));break;case 4:g=Wn,v=Dr,Wn=h.stateNode.containerInfo,Dr=!0,jo(o,c,h),Wn=g,Dr=v;break;case 0:case 11:case 14:case 15:os||wl(2,h,c),os||wl(4,h,c),jo(o,c,h);break;case 1:os||(wa(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"&&X2(h,c,g)),jo(o,c,h);break;case 21:jo(o,c,h);break;case 22:os=(g=os)||h.memoizedState!==null,jo(o,c,h),os=g;break;default:jo(o,c,h)}}function rC(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{fm(o)}catch(h){Pn(c,c.return,h)}}function _U(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new eC),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new eC),c;default:throw Error(s(435,o.tag))}}function gw(o,c){var h=_U(o);c.forEach(function(g){var v=RU.bind(null,o,g);h.has(g)||(h.add(g),g.then(v,v))})}function ei(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var v=h[g],N=o,U=c,$=U;e:for(;$!==null;){switch($.tag){case 27:if(Al($.type)){Wn=$.stateNode,Dr=!1;break e}break;case 5:Wn=$.stateNode,Dr=!1;break e;case 3:case 4:Wn=$.stateNode.containerInfo,Dr=!0;break e}$=$.return}if(Wn===null)throw Error(s(160));sC(N,U,v),Wn=null,Dr=!1,N=v.alternate,N!==null&&(N.return=null),v.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)iC(c,o),c=c.sibling}var Wi=null;function iC(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ei(c,o),ti(o),g&4&&(wl(3,o,o.return),Kf(3,o),wl(5,o,o.return));break;case 1:ei(c,o),ti(o),g&512&&(os||h===null||wa(h,h.return)),g&64&&_o&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?g:h.concat(g))));break;case 26:var v=Wi;if(ei(c,o),ti(o),g&512&&(os||h===null||wa(h,h.return)),g&4){var N=h!==null?h.memoizedState:null;if(g=o.memoizedState,h===null)if(g===null)if(o.stateNode===null){e:{g=o.type,h=o.memoizedProps,v=v.ownerDocument||v;t:switch(g){case"title":N=v.getElementsByTagName("title")[0],(!N||N[Wr]||N[Mt]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=v.createElement(g),v.head.insertBefore(N,v.querySelector("head > title"))),ir(N,g,h),N[Mt]=o,Yn(N),g=N;break e;case"link":var U=JC("link","href",v).get(g+(h.href||""));if(U){for(var $=0;$<U.length;$++)if(N=U[$],N.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&N.getAttribute("rel")===(h.rel==null?null:h.rel)&&N.getAttribute("title")===(h.title==null?null:h.title)&&N.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){U.splice($,1);break t}}N=v.createElement(g),ir(N,g,h),v.head.appendChild(N);break;case"meta":if(U=JC("meta","content",v).get(g+(h.content||""))){for($=0;$<U.length;$++)if(N=U[$],N.getAttribute("content")===(h.content==null?null:""+h.content)&&N.getAttribute("name")===(h.name==null?null:h.name)&&N.getAttribute("property")===(h.property==null?null:h.property)&&N.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&N.getAttribute("charset")===(h.charSet==null?null:h.charSet)){U.splice($,1);break t}}N=v.createElement(g),ir(N,g,h),v.head.appendChild(N);break;default:throw Error(s(468,g))}N[Mt]=o,Yn(N),g=N}o.stateNode=g}else eT(v,o.type,o.stateNode);else o.stateNode=ZC(v,g,o.memoizedProps);else N!==g?(N===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):N.count--,g===null?eT(v,o.type,o.stateNode):ZC(v,g,o.memoizedProps)):g===null&&o.stateNode!==null&&uw(o,o.memoizedProps,h.memoizedProps)}break;case 27:ei(c,o),ti(o),g&512&&(os||h===null||wa(h,h.return)),h!==null&&g&4&&uw(o,o.memoizedProps,h.memoizedProps);break;case 5:if(ei(c,o),ti(o),g&512&&(os||h===null||wa(h,h.return)),o.flags&32){v=o.stateNode;try{vi(v,"")}catch(ue){Pn(o,o.return,ue)}}g&4&&o.stateNode!=null&&(v=o.memoizedProps,uw(o,v,h!==null?h.memoizedProps:v)),g&1024&&(mw=!0);break;case 6:if(ei(c,o),ti(o),g&4){if(o.stateNode===null)throw Error(s(162));g=o.memoizedProps,h=o.stateNode;try{h.nodeValue=g}catch(ue){Pn(o,o.return,ue)}}break;case 3:if(bx=null,v=Wi,Wi=yx(c.containerInfo),ei(c,o),Wi=v,ti(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{fm(c.containerInfo)}catch(ue){Pn(o,o.return,ue)}mw&&(mw=!1,aC(o));break;case 4:g=Wi,Wi=yx(o.stateNode.containerInfo),ei(c,o),ti(o),Wi=g;break;case 12:ei(c,o),ti(o);break;case 13:ei(c,o),ti(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(ww=ct()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,gw(o,g)));break;case 22:v=o.memoizedState!==null;var Q=h!==null&&h.memoizedState!==null,oe=_o,ye=os;if(_o=oe||v,os=ye||Q,ei(c,o),os=ye,_o=oe,ti(o),g&8192)e:for(c=o.stateNode,c._visibility=v?c._visibility&-2:c._visibility|1,v&&(h===null||Q||_o||os||nd(o)),h=null,c=o;;){if(c.tag===5||c.tag===26){if(h===null){Q=h=c;try{if(N=Q.stateNode,v)U=N.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{$=Q.stateNode;var we=Q.memoizedProps.style,de=we!=null&&we.hasOwnProperty("display")?we.display:null;$.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(ue){Pn(Q,Q.return,ue)}}}else if(c.tag===6){if(h===null){Q=c;try{Q.stateNode.nodeValue=v?"":Q.memoizedProps}catch(ue){Pn(Q,Q.return,ue)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=o.updateQueue,g!==null&&(h=g.retryQueue,h!==null&&(g.retryQueue=null,gw(o,h))));break;case 19:ei(c,o),ti(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,gw(o,g)));break;case 30:break;case 21:break;default:ei(c,o),ti(o)}}function ti(o){var c=o.flags;if(c&2){try{for(var h,g=o.return;g!==null;){if(Z2(g)){h=g;break}g=g.return}if(h==null)throw Error(s(160));switch(h.tag){case 27:var v=h.stateNode,N=hw(o);ix(o,N,v);break;case 5:var U=h.stateNode;h.flags&32&&(vi(U,""),h.flags&=-33);var $=hw(o);ix(o,$,U);break;case 3:case 4:var Q=h.stateNode.containerInfo,oe=hw(o);fw(o,oe,Q);break;default:throw Error(s(161))}}catch(ye){Pn(o,o.return,ye)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function aC(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;aC(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function _l(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)tC(o,c.alternate,c),c=c.sibling}function nd(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:wl(4,c,c.return),nd(c);break;case 1:wa(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&X2(c,c.return,h),nd(c);break;case 27:im(c.stateNode);case 26:case 5:wa(c,c.return),nd(c);break;case 22:c.memoizedState===null&&nd(c);break;case 30:nd(c);break;default:nd(c)}o=o.sibling}}function jl(o,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,v=o,N=c,U=N.flags;switch(N.tag){case 0:case 11:case 15:jl(v,N,h),Kf(4,N);break;case 1:if(jl(v,N,h),g=N,v=g.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(oe){Pn(g,g.return,oe)}if(g=N,v=g.updateQueue,v!==null){var $=g.stateNode;try{var Q=v.shared.hiddenCallbacks;if(Q!==null)for(v.shared.hiddenCallbacks=null,v=0;v<Q.length;v++)PE(Q[v],$)}catch(oe){Pn(g,g.return,oe)}}h&&U&64&&K2(N),Xf(N,N.return);break;case 27:J2(N);case 26:case 5:jl(v,N,h),h&&g===null&&U&4&&Q2(N),Xf(N,N.return);break;case 12:jl(v,N,h);break;case 13:jl(v,N,h),h&&U&4&&rC(v,N);break;case 22:N.memoizedState===null&&jl(v,N,h),Xf(N,N.return);break;case 30:break;default:jl(v,N,h)}c=c.sibling}}function pw(o,c){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&Pf(h))}function xw(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Pf(o))}function _a(o,c,h,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)oC(o,c,h,g),c=c.sibling}function oC(o,c,h,g){var v=c.flags;switch(c.tag){case 0:case 11:case 15:_a(o,c,h,g),v&2048&&Kf(9,c);break;case 1:_a(o,c,h,g);break;case 3:_a(o,c,h,g),v&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Pf(o)));break;case 12:if(v&2048){_a(o,c,h,g),o=c.stateNode;try{var N=c.memoizedProps,U=N.id,$=N.onPostCommit;typeof $=="function"&&$(U,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Q){Pn(c,c.return,Q)}}else _a(o,c,h,g);break;case 13:_a(o,c,h,g);break;case 23:break;case 22:N=c.stateNode,U=c.alternate,c.memoizedState!==null?N._visibility&2?_a(o,c,h,g):Qf(o,c):N._visibility&2?_a(o,c,h,g):(N._visibility|=2,Ru(o,c,h,g,(c.subtreeFlags&10256)!==0)),v&2048&&pw(U,c);break;case 24:_a(o,c,h,g),v&2048&&xw(c.alternate,c);break;default:_a(o,c,h,g)}}function Ru(o,c,h,g,v){for(v=v&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var N=o,U=c,$=h,Q=g,oe=U.flags;switch(U.tag){case 0:case 11:case 15:Ru(N,U,$,Q,v),Kf(8,U);break;case 23:break;case 22:var ye=U.stateNode;U.memoizedState!==null?ye._visibility&2?Ru(N,U,$,Q,v):Qf(N,U):(ye._visibility|=2,Ru(N,U,$,Q,v)),v&&oe&2048&&pw(U.alternate,U);break;case 24:Ru(N,U,$,Q,v),v&&oe&2048&&xw(U.alternate,U);break;default:Ru(N,U,$,Q,v)}c=c.sibling}}function Qf(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=o,g=c,v=g.flags;switch(g.tag){case 22:Qf(h,g),v&2048&&pw(g.alternate,g);break;case 24:Qf(h,g),v&2048&&xw(g.alternate,g);break;default:Qf(h,g)}c=c.sibling}}var Zf=8192;function Iu(o){if(o.subtreeFlags&Zf)for(o=o.child;o!==null;)lC(o),o=o.sibling}function lC(o){switch(o.tag){case 26:Iu(o),o.flags&Zf&&o.memoizedState!==null&&oF(Wi,o.memoizedState,o.memoizedProps);break;case 5:Iu(o);break;case 3:case 4:var c=Wi;Wi=yx(o.stateNode.containerInfo),Iu(o),Wi=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=Zf,Zf=16777216,Iu(o),Zf=c):Iu(o));break;default:Iu(o)}}function cC(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function Jf(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var g=c[h];Gs=g,uC(g,o)}cC(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)dC(o),o=o.sibling}function dC(o){switch(o.tag){case 0:case 11:case 15:Jf(o),o.flags&2048&&wl(9,o,o.return);break;case 3:Jf(o);break;case 12:Jf(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,ax(o)):Jf(o);break;default:Jf(o)}}function ax(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var g=c[h];Gs=g,uC(g,o)}cC(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:wl(8,c,c.return),ax(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,ax(c));break;default:ax(c)}o=o.sibling}}function uC(o,c){for(;Gs!==null;){var h=Gs;switch(h.tag){case 0:case 11:case 15:wl(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var g=h.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Pf(h.memoizedState.cache)}if(g=h.child,g!==null)g.return=h,Gs=g;else e:for(h=o;Gs!==null;){g=Gs;var v=g.sibling,N=g.return;if(nC(g),g===h){Gs=null;break e}if(v!==null){v.return=N,Gs=v;break e}Gs=N}}}var jU={getCacheForType:function(o){var c=hr(Os),h=c.data.get(o);return h===void 0&&(h=o(),c.data.set(o,h)),h}},NU=typeof WeakMap=="function"?WeakMap:Map,jn=0,Vn=null,Gt=null,sn=0,Nn=0,ni=null,Nl=!1,Du=!1,yw=!1,No=0,is=0,Sl=0,sd=0,vw=0,Ti=0,Mu=0,em=null,Mr=null,bw=!1,ww=0,ox=1/0,lx=null,El=null,rr=0,Cl=null,Pu=null,Ou=0,_w=0,jw=null,hC=null,tm=0,Nw=null;function si(){if((jn&2)!==0&&sn!==0)return sn&-sn;if(q.T!==null){var o=ju;return o!==0?o:Rw()}return fn()}function fC(){Ti===0&&(Ti=(sn&536870912)===0||mn?en():536870912);var o=Ci.current;return o!==null&&(o.flags|=32),Ti}function ri(o,c,h){(o===Vn&&(Nn===2||Nn===9)||o.cancelPendingCommit!==null)&&(Lu(o,0),Tl(o,sn,Ti,!1)),Mn(o,h),((jn&2)===0||o!==Vn)&&(o===Vn&&((jn&2)===0&&(sd|=h),is===4&&Tl(o,sn,Ti,!1)),ja(o))}function mC(o,c,h){if((jn&6)!==0)throw Error(s(327));var g=!h&&(c&124)===0&&(c&o.expiredLanes)===0||wn(o,c),v=g?CU(o,c):Cw(o,c,!0),N=g;do{if(v===0){Du&&!g&&Tl(o,c,0,!1);break}else{if(h=o.current.alternate,N&&!SU(h)){v=Cw(o,c,!1),N=!1;continue}if(v===2){if(N=c,o.errorRecoveryDisabledLanes&N)var U=0;else U=o.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){c=U;e:{var $=o;v=em;var Q=$.current.memoizedState.isDehydrated;if(Q&&(Lu($,U).flags|=256),U=Cw($,U,!1),U!==2){if(yw&&!Q){$.errorRecoveryDisabledLanes|=N,sd|=N,v=4;break e}N=Mr,Mr=v,N!==null&&(Mr===null?Mr=N:Mr.push.apply(Mr,N))}v=U}if(N=!1,v!==2)continue}}if(v===1){Lu(o,0),Tl(o,c,0,!0);break}e:{switch(g=o,N=v,N){case 0:case 1:throw Error(s(345));case 4:if((c&4194048)!==c)break;case 6:Tl(g,c,Ti,!Nl);break e;case 2:Mr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((c&62914560)===c&&(v=ww+300-ct(),10<v)){if(Tl(g,c,Ti,!Nl),Pt(g,0,!0)!==0)break e;g.timeoutHandle=$C(gC.bind(null,g,h,Mr,lx,bw,c,Ti,sd,Mu,Nl,N,2,-0,0),v);break e}gC(g,h,Mr,lx,bw,c,Ti,sd,Mu,Nl,N,0,-0,0)}}break}while(!0);ja(o)}function gC(o,c,h,g,v,N,U,$,Q,oe,ye,we,de,ue){if(o.timeoutHandle=-1,we=c.subtreeFlags,(we&8192||(we&16785408)===16785408)&&(lm={stylesheets:null,count:0,unsuspend:aF},lC(c),we=lF(),we!==null)){o.cancelPendingCommit=we(_C.bind(null,o,c,N,h,g,v,U,$,Q,ye,1,de,ue)),Tl(o,N,U,!oe);return}_C(o,c,N,h,g,v,U,$,Q)}function SU(o){for(var c=o;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var g=0;g<h.length;g++){var v=h[g],N=v.getSnapshot;v=v.value;try{if(!Zr(N(),v))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Tl(o,c,h,g){c&=~vw,c&=~sd,o.suspendedLanes|=c,o.pingedLanes&=~c,g&&(o.warmLanes|=c),g=o.expirationTimes;for(var v=c;0<v;){var N=31-Jt(v),U=1<<N;g[N]=-1,v&=~U}h!==0&&Nt(o,h,c)}function cx(){return(jn&6)===0?(nm(0),!1):!0}function Sw(){if(Gt!==null){if(Nn===0)var o=Gt.return;else o=Gt,po=Qc=null,zb(o),Au=null,Wf=0,o=Gt;for(;o!==null;)Y2(o.alternate,o),o=o.return;Gt=null}}function Lu(o,c){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,$U(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),Sw(),Vn=o,Gt=h=fo(o.current,null),sn=c,Nn=0,ni=null,Nl=!1,Du=wn(o,c),yw=!1,Mu=Ti=vw=sd=Sl=is=0,Mr=em=null,bw=!1,(c&8)!==0&&(c|=c&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=c;0<g;){var v=31-Jt(g),N=1<<v;c|=o[v],g&=~N}return No=c,Rp(),h}function pC(o,c){Ft=null,q.H=Xp,c===Lf||c===Fp?(c=DE(),Nn=3):c===kE?(c=DE(),Nn=4):Nn=c===M2?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ni=c,Gt===null&&(is=1,tx(o,ji(c,o.current)))}function xC(){var o=q.H;return q.H=Xp,o===null?Xp:o}function yC(){var o=q.A;return q.A=jU,o}function Ew(){is=4,Nl||(sn&4194048)!==sn&&Ci.current!==null||(Du=!0),(Sl&134217727)===0&&(sd&134217727)===0||Vn===null||Tl(Vn,sn,Ti,!1)}function Cw(o,c,h){var g=jn;jn|=2;var v=xC(),N=yC();(Vn!==o||sn!==c)&&(lx=null,Lu(o,c)),c=!1;var U=is;e:do try{if(Nn!==0&&Gt!==null){var $=Gt,Q=ni;switch(Nn){case 8:Sw(),U=6;break e;case 3:case 2:case 9:case 6:Ci.current===null&&(c=!0);var oe=Nn;if(Nn=0,ni=null,Vu(o,$,Q,oe),h&&Du){U=0;break e}break;default:oe=Nn,Nn=0,ni=null,Vu(o,$,Q,oe)}}EU(),U=is;break}catch(ye){pC(o,ye)}while(!0);return c&&o.shellSuspendCounter++,po=Qc=null,jn=g,q.H=v,q.A=N,Gt===null&&(Vn=null,sn=0,Rp()),U}function EU(){for(;Gt!==null;)vC(Gt)}function CU(o,c){var h=jn;jn|=2;var g=xC(),v=yC();Vn!==o||sn!==c?(lx=null,ox=ct()+500,Lu(o,c)):Du=wn(o,c);e:do try{if(Nn!==0&&Gt!==null){c=Gt;var N=ni;t:switch(Nn){case 1:Nn=0,ni=null,Vu(o,c,N,1);break;case 2:case 9:if(RE(N)){Nn=0,ni=null,bC(c);break}c=function(){Nn!==2&&Nn!==9||Vn!==o||(Nn=7),ja(o)},N.then(c,c);break e;case 3:Nn=7;break e;case 4:Nn=5;break e;case 7:RE(N)?(Nn=0,ni=null,bC(c)):(Nn=0,ni=null,Vu(o,c,N,7));break;case 5:var U=null;switch(Gt.tag){case 26:U=Gt.memoizedState;case 5:case 27:var $=Gt;if(!U||tT(U)){Nn=0,ni=null;var Q=$.sibling;if(Q!==null)Gt=Q;else{var oe=$.return;oe!==null?(Gt=oe,dx(oe)):Gt=null}break t}}Nn=0,ni=null,Vu(o,c,N,5);break;case 6:Nn=0,ni=null,Vu(o,c,N,6);break;case 8:Sw(),is=6;break e;default:throw Error(s(462))}}TU();break}catch(ye){pC(o,ye)}while(!0);return po=Qc=null,q.H=g,q.A=v,jn=h,Gt!==null?0:(Vn=null,sn=0,Rp(),is)}function TU(){for(;Gt!==null&&!je();)vC(Gt)}function vC(o){var c=W2(o.alternate,o,No);o.memoizedProps=o.pendingProps,c===null?dx(o):Gt=c}function bC(o){var c=o,h=c.alternate;switch(c.tag){case 15:case 0:c=F2(h,c,c.pendingProps,c.type,void 0,sn);break;case 11:c=F2(h,c,c.pendingProps,c.type.render,c.ref,sn);break;case 5:zb(c);default:Y2(h,c),c=Gt=wE(c,No),c=W2(h,c,No)}o.memoizedProps=o.pendingProps,c===null?dx(o):Gt=c}function Vu(o,c,h,g){po=Qc=null,zb(c),Au=null,Wf=0;var v=c.return;try{if(xU(o,v,c,h,sn)){is=1,tx(o,ji(h,o.current)),Gt=null;return}}catch(N){if(v!==null)throw Gt=v,N;is=1,tx(o,ji(h,o.current)),Gt=null;return}c.flags&32768?(mn||g===1?o=!0:Du||(sn&536870912)!==0?o=!1:(Nl=o=!0,(g===2||g===9||g===3||g===6)&&(g=Ci.current,g!==null&&g.tag===13&&(g.flags|=16384))),wC(c,o)):dx(c)}function dx(o){var c=o;do{if((c.flags&32768)!==0){wC(c,Nl);return}o=c.return;var h=vU(c.alternate,c,No);if(h!==null){Gt=h;return}if(c=c.sibling,c!==null){Gt=c;return}Gt=c=o}while(c!==null);is===0&&(is=5)}function wC(o,c){do{var h=bU(o.alternate,o);if(h!==null){h.flags&=32767,Gt=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(o=o.sibling,o!==null)){Gt=o;return}Gt=o=h}while(o!==null);is=6,Gt=null}function _C(o,c,h,g,v,N,U,$,Q){o.cancelPendingCommit=null;do ux();while(rr!==0);if((jn&6)!==0)throw Error(s(327));if(c!==null){if(c===o.current)throw Error(s(177));if(N=c.lanes|c.childLanes,N|=xb,Fe(o,h,N,U,$,Q),o===Vn&&(Gt=Vn=null,sn=0),Pu=c,Cl=o,Ou=h,_w=N,jw=v,hC=g,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,IU(re,function(){return CC(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||g){g=q.T,q.T=null,v=Y.p,Y.p=2,U=jn,jn|=4;try{wU(o,c,h)}finally{jn=U,Y.p=v,q.T=g}}rr=1,jC(),NC(),SC()}}function jC(){if(rr===1){rr=0;var o=Cl,c=Pu,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=q.T,q.T=null;var g=Y.p;Y.p=2;var v=jn;jn|=4;try{iC(c,o);var N=Uw,U=uE(o.containerInfo),$=N.focusedElem,Q=N.selectionRange;if(U!==$&&$&&$.ownerDocument&&dE($.ownerDocument.documentElement,$)){if(Q!==null&&hb($)){var oe=Q.start,ye=Q.end;if(ye===void 0&&(ye=oe),"selectionStart"in $)$.selectionStart=oe,$.selectionEnd=Math.min(ye,$.value.length);else{var we=$.ownerDocument||document,de=we&&we.defaultView||window;if(de.getSelection){var ue=de.getSelection(),St=$.textContent.length,vt=Math.min(Q.start,St),Dn=Q.end===void 0?vt:Math.min(Q.end,St);!ue.extend&&vt>Dn&&(U=Dn,Dn=vt,vt=U);var se=cE($,vt),ee=cE($,Dn);if(se&&ee&&(ue.rangeCount!==1||ue.anchorNode!==se.node||ue.anchorOffset!==se.offset||ue.focusNode!==ee.node||ue.focusOffset!==ee.offset)){var ae=we.createRange();ae.setStart(se.node,se.offset),ue.removeAllRanges(),vt>Dn?(ue.addRange(ae),ue.extend(ee.node,ee.offset)):(ae.setEnd(ee.node,ee.offset),ue.addRange(ae))}}}}for(we=[],ue=$;ue=ue.parentNode;)ue.nodeType===1&&we.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<we.length;$++){var be=we[$];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}jx=!!Vw,Uw=Vw=null}finally{jn=v,Y.p=g,q.T=h}}o.current=c,rr=2}}function NC(){if(rr===2){rr=0;var o=Cl,c=Pu,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=q.T,q.T=null;var g=Y.p;Y.p=2;var v=jn;jn|=4;try{tC(o,c.alternate,c)}finally{jn=v,Y.p=g,q.T=h}}rr=3}}function SC(){if(rr===4||rr===3){rr=0,qe();var o=Cl,c=Pu,h=Ou,g=hC;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?rr=5:(rr=0,Pu=Cl=null,EC(o,o.pendingLanes));var v=o.pendingLanes;if(v===0&&(El=null),Is(h),c=c.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Me,c,void 0,(c.current.flags&128)===128)}catch{}if(g!==null){c=q.T,v=Y.p,Y.p=2,q.T=null;try{for(var N=o.onRecoverableError,U=0;U<g.length;U++){var $=g[U];N($.value,{componentStack:$.stack})}}finally{q.T=c,Y.p=v}}(Ou&3)!==0&&ux(),ja(o),v=o.pendingLanes,(h&4194090)!==0&&(v&42)!==0?o===Nw?tm++:(tm=0,Nw=o):tm=0,nm(0)}}function EC(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Pf(c)))}function ux(o){return jC(),NC(),SC(),CC()}function CC(){if(rr!==5)return!1;var o=Cl,c=_w;_w=0;var h=Is(Ou),g=q.T,v=Y.p;try{Y.p=32>h?32:h,q.T=null,h=jw,jw=null;var N=Cl,U=Ou;if(rr=0,Pu=Cl=null,Ou=0,(jn&6)!==0)throw Error(s(331));var $=jn;if(jn|=4,dC(N.current),oC(N,N.current,U,h),jn=$,nm(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Me,N)}catch{}return!0}finally{Y.p=v,q.T=g,EC(o,c)}}function TC(o,c,h){c=ji(h,c),c=nw(o.stateNode,c,2),o=xl(o,c,2),o!==null&&(Mn(o,2),ja(o))}function Pn(o,c,h){if(o.tag===3)TC(o,o,h);else for(;c!==null;){if(c.tag===3){TC(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(El===null||!El.has(g))){o=ji(h,o),h=I2(2),g=xl(c,h,2),g!==null&&(D2(h,g,c,o),Mn(g,2),ja(g));break}}c=c.return}}function Tw(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new NU;var v=new Set;g.set(c,v)}else v=g.get(c),v===void 0&&(v=new Set,g.set(c,v));v.has(h)||(yw=!0,v.add(h),o=AU.bind(null,o,c,h),c.then(o,o))}function AU(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Vn===o&&(sn&h)===h&&(is===4||is===3&&(sn&62914560)===sn&&300>ct()-ww?(jn&2)===0&&Lu(o,0):vw|=h,Mu===sn&&(Mu=0)),ja(o)}function AC(o,c){c===0&&(c=_n()),o=vu(o,c),o!==null&&(Mn(o,c),ja(o))}function kU(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),AC(o,h)}function RU(o,c){var h=0;switch(o.tag){case 13:var g=o.stateNode,v=o.memoizedState;v!==null&&(h=v.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(c),AC(o,h)}function IU(o,c){return ot(o,c)}var hx=null,Uu=null,Aw=!1,fx=!1,kw=!1,rd=0;function ja(o){o!==Uu&&o.next===null&&(Uu===null?hx=Uu=o:Uu=Uu.next=o),fx=!0,Aw||(Aw=!0,MU())}function nm(o,c){if(!kw&&fx){kw=!0;do for(var h=!1,g=hx;g!==null;){if(o!==0){var v=g.pendingLanes;if(v===0)var N=0;else{var U=g.suspendedLanes,$=g.pingedLanes;N=(1<<31-Jt(42|o)+1)-1,N&=v&~(U&~$),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(h=!0,DC(g,N))}else N=sn,N=Pt(g,g===Vn?N:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(N&3)===0||wn(g,N)||(h=!0,DC(g,N));g=g.next}while(h);kw=!1}}function DU(){kC()}function kC(){fx=Aw=!1;var o=0;rd!==0&&(zU()&&(o=rd),rd=0);for(var c=ct(),h=null,g=hx;g!==null;){var v=g.next,N=RC(g,c);N===0?(g.next=null,h===null?hx=v:h.next=v,v===null&&(Uu=h)):(h=g,(o!==0||(N&3)!==0)&&(fx=!0)),g=v}nm(o)}function RC(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,v=o.expirationTimes,N=o.pendingLanes&-62914561;0<N;){var U=31-Jt(N),$=1<<U,Q=v[U];Q===-1?(($&h)===0||($&g)!==0)&&(v[U]=Wt($,c)):Q<=c&&(o.expiredLanes|=$),N&=~$}if(c=Vn,h=sn,h=Pt(o,o===c?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,h===0||o===c&&(Nn===2||Nn===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&Dt(g),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||wn(o,h)){if(c=h&-h,c===o.callbackPriority)return c;switch(g!==null&&Dt(g),Is(h)){case 2:case 8:h=X;break;case 32:h=re;break;case 268435456:h=Ae;break;default:h=re}return g=IC.bind(null,o),h=ot(h,g),o.callbackPriority=c,o.callbackNode=h,c}return g!==null&&g!==null&&Dt(g),o.callbackPriority=2,o.callbackNode=null,2}function IC(o,c){if(rr!==0&&rr!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(ux()&&o.callbackNode!==h)return null;var g=sn;return g=Pt(o,o===Vn?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(mC(o,g,c),RC(o,ct()),o.callbackNode!=null&&o.callbackNode===h?IC.bind(null,o):null)}function DC(o,c){if(ux())return null;mC(o,c,!0)}function MU(){qU(function(){(jn&6)!==0?ot(pt,DU):kC()})}function Rw(){return rd===0&&(rd=en()),rd}function MC(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:ou(""+o)}function PC(o,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,o.id&&h.setAttribute("form",o.id),c.parentNode.insertBefore(h,c),o=new FormData(o),h.parentNode.removeChild(h),o}function PU(o,c,h,g,v){if(c==="submit"&&h&&h.stateNode===v){var N=MC((v[Et]||null).action),U=g.submitter;U&&(c=(c=U[Et]||null)?MC(c.formAction):U.getAttribute("formAction"),c!==null&&(N=c,U=null));var $=new lu("action","action",null,g,v);o.push({event:$,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(rd!==0){var Q=U?PC(v,U):new FormData(v);Qb(h,{pending:!0,data:Q,method:v.method,action:N},null,Q)}}else typeof N=="function"&&($.preventDefault(),Q=U?PC(v,U):new FormData(v),Qb(h,{pending:!0,data:Q,method:v.method,action:N},N,Q))},currentTarget:v}]})}}for(var Iw=0;Iw<pb.length;Iw++){var Dw=pb[Iw],OU=Dw.toLowerCase(),LU=Dw[0].toUpperCase()+Dw.slice(1);Hi(OU,"on"+LU)}Hi(mE,"onAnimationEnd"),Hi(gE,"onAnimationIteration"),Hi(pE,"onAnimationStart"),Hi("dblclick","onDoubleClick"),Hi("focusin","onFocus"),Hi("focusout","onBlur"),Hi(eU,"onTransitionRun"),Hi(tU,"onTransitionStart"),Hi(nU,"onTransitionCancel"),Hi(xE,"onTransitionEnd"),so("onMouseEnter",["mouseout","mouseover"]),so("onMouseLeave",["mouseout","mouseover"]),so("onPointerEnter",["pointerout","pointerover"]),so("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sm));function OC(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],v=g.event;g=g.listeners;e:{var N=void 0;if(c)for(var U=g.length-1;0<=U;U--){var $=g[U],Q=$.instance,oe=$.currentTarget;if($=$.listener,Q!==N&&v.isPropagationStopped())break e;N=$,v.currentTarget=oe;try{N(v)}catch(ye){ex(ye)}v.currentTarget=null,N=Q}else for(U=0;U<g.length;U++){if($=g[U],Q=$.instance,oe=$.currentTarget,$=$.listener,Q!==N&&v.isPropagationStopped())break e;N=$,v.currentTarget=oe;try{N(v)}catch(ye){ex(ye)}v.currentTarget=null,N=Q}}}}function Yt(o,c){var h=c[Hn];h===void 0&&(h=c[Hn]=new Set);var g=o+"__bubble";h.has(g)||(LC(c,o,2,!1),h.add(g))}function Mw(o,c,h){var g=0;c&&(g|=4),LC(h,o,g,c)}var mx="_reactListening"+Math.random().toString(36).slice(2);function Pw(o){if(!o[mx]){o[mx]=!0,gf.forEach(function(h){h!=="selectionchange"&&(VU.has(h)||Mw(h,!1,o),Mw(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[mx]||(c[mx]=!0,Mw("selectionchange",!1,c))}}function LC(o,c,h,g){switch(oT(c)){case 2:var v=uF;break;case 8:v=hF;break;default:v=Kw}h=v.bind(null,c,h,o),v=void 0,!wi||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(v=!0),g?v!==void 0?o.addEventListener(c,h,{capture:!0,passive:v}):o.addEventListener(c,h,!0):v!==void 0?o.addEventListener(c,h,{passive:v}):o.addEventListener(c,h,!1)}function Ow(o,c,h,g,v){var N=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var U=g.tag;if(U===3||U===4){var $=g.stateNode.containerInfo;if($===v)break;if(U===4)for(U=g.return;U!==null;){var Q=U.tag;if((Q===3||Q===4)&&U.stateNode.containerInfo===v)return;U=U.return}for(;$!==null;){if(U=Yr($),U===null)return;if(Q=U.tag,Q===5||Q===6||Q===26||Q===27){g=N=U;continue e}$=$.parentNode}}g=g.return}pp(function(){var oe=N,ye=bi(h),we=[];e:{var de=yE.get(o);if(de!==void 0){var ue=lu,St=o;switch(o){case"keypress":if(ma(h)===0)break e;case"keydown":case"keyup":ue=mu;break;case"focusin":St="focus",ue=uu;break;case"focusout":St="blur",ue=uu;break;case"beforeblur":case"afterblur":ue=uu;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=_i;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=lb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Np;break;case mE:case gE:case pE:ue=hu;break;case xE:ue=Ep;break;case"scroll":case"scrollend":ue=xp;break;case"wheel":ue=gu;break;case"copy":case"cut":case"paste":ue=fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Cf;break;case"toggle":case"beforetoggle":ue=Tp}var vt=(c&4)!==0,Dn=!vt&&(o==="scroll"||o==="scrollend"),se=vt?de!==null?de+"Capture":null:de;vt=[];for(var ee=oe,ae;ee!==null;){var be=ee;if(ae=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||ae===null||se===null||(be=Lc(ee,se),be!=null&&vt.push(rm(ee,be,ae))),Dn)break;ee=ee.return}0<vt.length&&(de=new ue(de,St,null,h,ye),we.push({event:de,listeners:vt}))}}if((c&7)===0){e:{if(de=o==="mouseover"||o==="pointerover",ue=o==="mouseout"||o==="pointerout",de&&h!==ao&&(St=h.relatedTarget||h.fromElement)&&(Yr(St)||St[Ot]))break e;if((ue||de)&&(de=ye.window===ye?ye:(de=ye.ownerDocument)?de.defaultView||de.parentWindow:window,ue?(St=h.relatedTarget||h.toElement,ue=oe,St=St?Yr(St):null,St!==null&&(Dn=a(St),vt=St.tag,St!==Dn||vt!==5&&vt!==27&&vt!==6)&&(St=null)):(ue=null,St=oe),ue!==St)){if(vt=_i,be="onMouseLeave",se="onMouseEnter",ee="mouse",(o==="pointerout"||o==="pointerover")&&(vt=Cf,be="onPointerLeave",se="onPointerEnter",ee="pointer"),Dn=ue==null?de:Xr(ue),ae=St==null?de:Xr(St),de=new vt(be,ee+"leave",ue,h,ye),de.target=Dn,de.relatedTarget=ae,be=null,Yr(ye)===oe&&(vt=new vt(se,ee+"enter",St,h,ye),vt.target=ae,vt.relatedTarget=Dn,be=vt),Dn=be,ue&&St)t:{for(vt=ue,se=St,ee=0,ae=vt;ae;ae=Fu(ae))ee++;for(ae=0,be=se;be;be=Fu(be))ae++;for(;0<ee-ae;)vt=Fu(vt),ee--;for(;0<ae-ee;)se=Fu(se),ae--;for(;ee--;){if(vt===se||se!==null&&vt===se.alternate)break t;vt=Fu(vt),se=Fu(se)}vt=null}else vt=null;ue!==null&&VC(we,de,ue,vt,!1),St!==null&&Dn!==null&&VC(we,Dn,St,vt,!0)}}e:{if(de=oe?Xr(oe):window,ue=de.nodeName&&de.nodeName.toLowerCase(),ue==="select"||ue==="input"&&de.type==="file")var st=sE;else if(Ps(de))if(rE)st=QV;else{st=KV;var qt=YV}else ue=de.nodeName,!ue||ue.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?oe&&bf(oe.elementType)&&(st=sE):st=XV;if(st&&(st=st(o,oe))){ho(we,st,h,ye);break e}qt&&qt(o,de,oe),o==="focusout"&&oe&&de.type==="number"&&oe.memoizedProps.value!=null&&hl(de,"number",de.value)}switch(qt=oe?Xr(oe):window,o){case"focusin":(Ps(qt)||qt.contentEditable==="true")&&(pu=qt,fb=oe,kf=null);break;case"focusout":kf=fb=pu=null;break;case"mousedown":mb=!0;break;case"contextmenu":case"mouseup":case"dragend":mb=!1,hE(we,h,ye);break;case"selectionchange":if(JV)break;case"keydown":case"keyup":hE(we,h,ye)}var mt;if(xa)e:{switch(o){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else tn?me(o,h)&&(wt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(wt="onCompositionStart");wt&&(L&&h.locale!=="ko"&&(tn||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&tn&&(mt=_f()):(fa=ye,fl="value"in fa?fa.value:fa.textContent,tn=!0)),qt=gx(oe,wt),0<qt.length&&(wt=new Sf(wt,o,null,h,ye),we.push({event:wt,listeners:qt}),mt?wt.data=mt:(mt=Le(h),mt!==null&&(wt.data=mt)))),(mt=k?Ms(o,h):nn(o,h))&&(wt=gx(oe,"onBeforeInput"),0<wt.length&&(qt=new Sf("onBeforeInput","beforeinput",null,h,ye),we.push({event:qt,listeners:wt}),qt.data=mt)),PU(we,o,oe,h,ye)}OC(we,c)})}function rm(o,c,h){return{instance:o,listener:c,currentTarget:h}}function gx(o,c){for(var h=c+"Capture",g=[];o!==null;){var v=o,N=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||N===null||(v=Lc(o,h),v!=null&&g.unshift(rm(o,v,N)),v=Lc(o,c),v!=null&&g.push(rm(o,v,N))),o.tag===3)return g;o=o.return}return[]}function Fu(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function VC(o,c,h,g,v){for(var N=c._reactName,U=[];h!==null&&h!==g;){var $=h,Q=$.alternate,oe=$.stateNode;if($=$.tag,Q!==null&&Q===g)break;$!==5&&$!==26&&$!==27||oe===null||(Q=oe,v?(oe=Lc(h,N),oe!=null&&U.unshift(rm(h,oe,Q))):v||(oe=Lc(h,N),oe!=null&&U.push(rm(h,oe,Q)))),h=h.return}U.length!==0&&o.push({event:c,listeners:U})}var UU=/\r\n?/g,FU=/\u0000|\uFFFD/g;function UC(o){return(typeof o=="string"?o:""+o).replace(UU,`
`).replace(FU,"")}function FC(o,c){return c=UC(c),UC(o)===c}function px(){}function In(o,c,h,g,v,N){switch(h){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||vi(o,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&vi(o,""+g);break;case"className":ua(o,"class",g);break;case"tabIndex":ua(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ua(o,h,g);break;case"style":vf(o,g,N);break;case"data":if(c!=="object"){ua(o,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||h!=="href")){o.removeAttribute(h);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(h);break}g=ou(""+g),o.setAttribute(h,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(h==="formAction"?(c!=="input"&&In(o,c,"name",v.name,v,null),In(o,c,"formEncType",v.formEncType,v,null),In(o,c,"formMethod",v.formMethod,v,null),In(o,c,"formTarget",v.formTarget,v,null)):(In(o,c,"encType",v.encType,v,null),In(o,c,"method",v.method,v,null),In(o,c,"target",v.target,v,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(h);break}g=ou(""+g),o.setAttribute(h,g);break;case"onClick":g!=null&&(o.onclick=px);break;case"onScroll":g!=null&&Yt("scroll",o);break;case"onScrollEnd":g!=null&&Yt("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(h=g.__html,h!=null){if(v.children!=null)throw Error(s(60));o.innerHTML=h}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}h=ou(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,""+g):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":g===!0?o.setAttribute(h,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,g):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(h,g):o.removeAttribute(h);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(h):o.setAttribute(h,g);break;case"popover":Yt("beforetoggle",o),Yt("toggle",o),ul(o,"popover",g);break;case"xlinkActuate":tr(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":tr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":tr(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":tr(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":tr(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":tr(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":tr(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":tr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":tr(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":ul(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=ab.get(h)||h,ul(o,h,g))}}function Lw(o,c,h,g,v,N){switch(h){case"style":vf(o,g,N);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(h=g.__html,h!=null){if(v.children!=null)throw Error(s(60));o.innerHTML=h}}break;case"children":typeof g=="string"?vi(o,g):(typeof g=="number"||typeof g=="bigint")&&vi(o,""+g);break;case"onScroll":g!=null&&Yt("scroll",o);break;case"onScrollEnd":g!=null&&Yt("scrollend",o);break;case"onClick":g!=null&&(o.onclick=px);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nu.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(v=h.endsWith("Capture"),c=h.slice(2,v?h.length-7:void 0),N=o[Et]||null,N=N!=null?N[h]:null,typeof N=="function"&&o.removeEventListener(c,N,v),typeof g=="function")){typeof N!="function"&&N!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(c,g,v);break e}h in o?o[h]=g:g===!0?o.setAttribute(h,""):ul(o,h,g)}}}function ir(o,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",o),Yt("load",o);var g=!1,v=!1,N;for(N in h)if(h.hasOwnProperty(N)){var U=h[N];if(U!=null)switch(N){case"src":g=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:In(o,c,N,U,h,null)}}v&&In(o,c,"srcSet",h.srcSet,h,null),g&&In(o,c,"src",h.src,h,null);return;case"input":Yt("invalid",o);var $=N=U=v=null,Q=null,oe=null;for(g in h)if(h.hasOwnProperty(g)){var ye=h[g];if(ye!=null)switch(g){case"name":v=ye;break;case"type":U=ye;break;case"checked":Q=ye;break;case"defaultChecked":oe=ye;break;case"value":N=ye;break;case"defaultValue":$=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(s(137,c));break;default:In(o,c,g,ye,h,null)}}Mc(o,N,$,Q,oe,U,v,!1),au(o);return;case"select":Yt("invalid",o),g=U=N=null;for(v in h)if(h.hasOwnProperty(v)&&($=h[v],$!=null))switch(v){case"value":N=$;break;case"defaultValue":U=$;break;case"multiple":g=$;default:In(o,c,v,$,h,null)}c=N,h=U,o.multiple=!!g,c!=null?io(o,!!g,c,!1):h!=null&&io(o,!!g,h,!0);return;case"textarea":Yt("invalid",o),N=v=g=null;for(U in h)if(h.hasOwnProperty(U)&&($=h[U],$!=null))switch(U){case"value":g=$;break;case"defaultValue":v=$;break;case"children":N=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(s(91));break;default:In(o,c,U,$,h,null)}Pc(o,g,v,N),au(o);return;case"option":for(Q in h)if(h.hasOwnProperty(Q)&&(g=h[Q],g!=null))switch(Q){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:In(o,c,Q,g,h,null)}return;case"dialog":Yt("beforetoggle",o),Yt("toggle",o),Yt("cancel",o),Yt("close",o);break;case"iframe":case"object":Yt("load",o);break;case"video":case"audio":for(g=0;g<sm.length;g++)Yt(sm[g],o);break;case"image":Yt("error",o),Yt("load",o);break;case"details":Yt("toggle",o);break;case"embed":case"source":case"link":Yt("error",o),Yt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in h)if(h.hasOwnProperty(oe)&&(g=h[oe],g!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:In(o,c,oe,g,h,null)}return;default:if(bf(c)){for(ye in h)h.hasOwnProperty(ye)&&(g=h[ye],g!==void 0&&Lw(o,c,ye,g,h,void 0));return}}for($ in h)h.hasOwnProperty($)&&(g=h[$],g!=null&&In(o,c,$,g,h,null))}function BU(o,c,h,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,N=null,U=null,$=null,Q=null,oe=null,ye=null;for(ue in h){var we=h[ue];if(h.hasOwnProperty(ue)&&we!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":Q=we;default:g.hasOwnProperty(ue)||In(o,c,ue,null,g,we)}}for(var de in g){var ue=g[de];if(we=h[de],g.hasOwnProperty(de)&&(ue!=null||we!=null))switch(de){case"type":N=ue;break;case"name":v=ue;break;case"checked":oe=ue;break;case"defaultChecked":ye=ue;break;case"value":U=ue;break;case"defaultValue":$=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(s(137,c));break;default:ue!==we&&In(o,c,de,ue,g,we)}}Qr(o,U,$,Q,oe,ye,N,v);return;case"select":ue=U=$=de=null;for(N in h)if(Q=h[N],h.hasOwnProperty(N)&&Q!=null)switch(N){case"value":break;case"multiple":ue=Q;default:g.hasOwnProperty(N)||In(o,c,N,null,g,Q)}for(v in g)if(N=g[v],Q=h[v],g.hasOwnProperty(v)&&(N!=null||Q!=null))switch(v){case"value":de=N;break;case"defaultValue":$=N;break;case"multiple":U=N;default:N!==Q&&In(o,c,v,N,g,Q)}c=$,h=U,g=ue,de!=null?io(o,!!h,de,!1):!!g!=!!h&&(c!=null?io(o,!!h,c,!0):io(o,!!h,h?[]:"",!1));return;case"textarea":ue=de=null;for($ in h)if(v=h[$],h.hasOwnProperty($)&&v!=null&&!g.hasOwnProperty($))switch($){case"value":break;case"children":break;default:In(o,c,$,null,g,v)}for(U in g)if(v=g[U],N=h[U],g.hasOwnProperty(U)&&(v!=null||N!=null))switch(U){case"value":de=v;break;case"defaultValue":ue=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==N&&In(o,c,U,v,g,N)}kn(o,de,ue);return;case"option":for(var St in h)if(de=h[St],h.hasOwnProperty(St)&&de!=null&&!g.hasOwnProperty(St))switch(St){case"selected":o.selected=!1;break;default:In(o,c,St,null,g,de)}for(Q in g)if(de=g[Q],ue=h[Q],g.hasOwnProperty(Q)&&de!==ue&&(de!=null||ue!=null))switch(Q){case"selected":o.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:In(o,c,Q,de,g,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in h)de=h[vt],h.hasOwnProperty(vt)&&de!=null&&!g.hasOwnProperty(vt)&&In(o,c,vt,null,g,de);for(oe in g)if(de=g[oe],ue=h[oe],g.hasOwnProperty(oe)&&de!==ue&&(de!=null||ue!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(s(137,c));break;default:In(o,c,oe,de,g,ue)}return;default:if(bf(c)){for(var Dn in h)de=h[Dn],h.hasOwnProperty(Dn)&&de!==void 0&&!g.hasOwnProperty(Dn)&&Lw(o,c,Dn,void 0,g,de);for(ye in g)de=g[ye],ue=h[ye],!g.hasOwnProperty(ye)||de===ue||de===void 0&&ue===void 0||Lw(o,c,ye,de,g,ue);return}}for(var se in h)de=h[se],h.hasOwnProperty(se)&&de!=null&&!g.hasOwnProperty(se)&&In(o,c,se,null,g,de);for(we in g)de=g[we],ue=h[we],!g.hasOwnProperty(we)||de===ue||de==null&&ue==null||In(o,c,we,de,g,ue)}var Vw=null,Uw=null;function xx(o){return o.nodeType===9?o:o.ownerDocument}function BC(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zC(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function Fw(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Bw=null;function zU(){var o=window.event;return o&&o.type==="popstate"?o===Bw?!1:(Bw=o,!0):(Bw=null,!1)}var $C=typeof setTimeout=="function"?setTimeout:void 0,$U=typeof clearTimeout=="function"?clearTimeout:void 0,qC=typeof Promise=="function"?Promise:void 0,qU=typeof queueMicrotask=="function"?queueMicrotask:typeof qC<"u"?function(o){return qC.resolve(null).then(o).catch(HU)}:$C;function HU(o){setTimeout(function(){throw o})}function Al(o){return o==="head"}function HC(o,c){var h=c,g=0,v=0;do{var N=h.nextSibling;if(o.removeChild(h),N&&N.nodeType===8)if(h=N.data,h==="/$"){if(0<g&&8>g){h=g;var U=o.ownerDocument;if(h&1&&im(U.documentElement),h&2&&im(U.body),h&4)for(h=U.head,im(h),U=h.firstChild;U;){var $=U.nextSibling,Q=U.nodeName;U[Wr]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&U.rel.toLowerCase()==="stylesheet"||h.removeChild(U),U=$}}if(v===0){o.removeChild(N),fm(c);return}v--}else h==="$"||h==="$?"||h==="$!"?v++:g=h.charCodeAt(0)-48;else g=0;h=N}while(h);fm(c)}function zw(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":zw(h),Gr(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function WU(o,c,h,g){for(;o.nodeType===1;){var v=h;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[Wr])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(N=o.getAttribute("rel"),N==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(N!==v.rel||o.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||o.getAttribute("title")!==(v.title==null?null:v.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(N=o.getAttribute("src"),(N!==(v.src==null?null:v.src)||o.getAttribute("type")!==(v.type==null?null:v.type)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&N&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var N=v.name==null?null:""+v.name;if(v.type==="hidden"&&o.getAttribute("name")===N)return o}else return o;if(o=Gi(o.nextSibling),o===null)break}return null}function GU(o,c,h){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=Gi(o.nextSibling),o===null))return null;return o}function $w(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function YU(o,c){var h=o.ownerDocument;if(o.data!=="$?"||h.readyState==="complete")c();else{var g=function(){c(),h.removeEventListener("DOMContentLoaded",g)};h.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function Gi(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var qw=null;function WC(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}function GC(o,c,h){switch(c=xx(h),o){case"html":if(o=c.documentElement,!o)throw Error(s(452));return o;case"head":if(o=c.head,!o)throw Error(s(453));return o;case"body":if(o=c.body,!o)throw Error(s(454));return o;default:throw Error(s(451))}}function im(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);Gr(o)}var Ai=new Map,YC=new Set;function yx(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var So=Y.d;Y.d={f:KU,r:XU,D:QU,C:ZU,L:JU,m:eF,X:nF,S:tF,M:sF};function KU(){var o=So.f(),c=cx();return o||c}function XU(o){var c=Kr(o);c!==null&&c.tag===5&&c.type==="form"?m2(c):So.r(o)}var Bu=typeof document>"u"?null:document;function KC(o,c,h){var g=Bu;if(g&&typeof c=="string"&&c){var v=ps(c);v='link[rel="'+o+'"][href="'+v+'"]',typeof h=="string"&&(v+='[crossorigin="'+h+'"]'),YC.has(v)||(YC.add(v),o={rel:o,crossOrigin:h,href:c},g.querySelector(v)===null&&(c=g.createElement("link"),ir(c,"link",o),Yn(c),g.head.appendChild(c)))}}function QU(o){So.D(o),KC("dns-prefetch",o,null)}function ZU(o,c){So.C(o,c),KC("preconnect",o,c)}function JU(o,c,h){So.L(o,c,h);var g=Bu;if(g&&o&&c){var v='link[rel="preload"][as="'+ps(c)+'"]';c==="image"&&h&&h.imageSrcSet?(v+='[imagesrcset="'+ps(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(v+='[imagesizes="'+ps(h.imageSizes)+'"]')):v+='[href="'+ps(o)+'"]';var N=v;switch(c){case"style":N=zu(o);break;case"script":N=$u(o)}Ai.has(N)||(o=m({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:o,as:c},h),Ai.set(N,o),g.querySelector(v)!==null||c==="style"&&g.querySelector(am(N))||c==="script"&&g.querySelector(om(N))||(c=g.createElement("link"),ir(c,"link",o),Yn(c),g.head.appendChild(c)))}}function eF(o,c){So.m(o,c);var h=Bu;if(h&&o){var g=c&&typeof c.as=="string"?c.as:"script",v='link[rel="modulepreload"][as="'+ps(g)+'"][href="'+ps(o)+'"]',N=v;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=$u(o)}if(!Ai.has(N)&&(o=m({rel:"modulepreload",href:o},c),Ai.set(N,o),h.querySelector(v)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(om(N)))return}g=h.createElement("link"),ir(g,"link",o),Yn(g),h.head.appendChild(g)}}}function tF(o,c,h){So.S(o,c,h);var g=Bu;if(g&&o){var v=Ds(g).hoistableStyles,N=zu(o);c=c||"default";var U=v.get(N);if(!U){var $={loading:0,preload:null};if(U=g.querySelector(am(N)))$.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":c},h),(h=Ai.get(N))&&Hw(o,h);var Q=U=g.createElement("link");Yn(Q),ir(Q,"link",o),Q._p=new Promise(function(oe,ye){Q.onload=oe,Q.onerror=ye}),Q.addEventListener("load",function(){$.loading|=1}),Q.addEventListener("error",function(){$.loading|=2}),$.loading|=4,vx(U,c,g)}U={type:"stylesheet",instance:U,count:1,state:$},v.set(N,U)}}}function nF(o,c){So.X(o,c);var h=Bu;if(h&&o){var g=Ds(h).hoistableScripts,v=$u(o),N=g.get(v);N||(N=h.querySelector(om(v)),N||(o=m({src:o,async:!0},c),(c=Ai.get(v))&&Ww(o,c),N=h.createElement("script"),Yn(N),ir(N,"link",o),h.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},g.set(v,N))}}function sF(o,c){So.M(o,c);var h=Bu;if(h&&o){var g=Ds(h).hoistableScripts,v=$u(o),N=g.get(v);N||(N=h.querySelector(om(v)),N||(o=m({src:o,async:!0,type:"module"},c),(c=Ai.get(v))&&Ww(o,c),N=h.createElement("script"),Yn(N),ir(N,"link",o),h.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},g.set(v,N))}}function XC(o,c,h,g){var v=(v=Ee.current)?yx(v):null;if(!v)throw Error(s(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=zu(h.href),h=Ds(v).hoistableStyles,g=h.get(c),g||(g={type:"style",instance:null,count:0,state:null},h.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=zu(h.href);var N=Ds(v).hoistableStyles,U=N.get(o);if(U||(v=v.ownerDocument||v,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(o,U),(N=v.querySelector(am(o)))&&!N._p&&(U.instance=N,U.state.loading=5),Ai.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Ai.set(o,h),N||rF(v,o,h,U.state))),c&&g===null)throw Error(s(528,""));return U}if(c&&g!==null)throw Error(s(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=$u(h),h=Ds(v).hoistableScripts,g=h.get(c),g||(g={type:"script",instance:null,count:0,state:null},h.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,o))}}function zu(o){return'href="'+ps(o)+'"'}function am(o){return'link[rel="stylesheet"]['+o+"]"}function QC(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function rF(o,c,h,g){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=o.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),ir(c,"link",h),Yn(c),o.head.appendChild(c))}function $u(o){return'[src="'+ps(o)+'"]'}function om(o){return"script[async]"+o}function ZC(o,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var g=o.querySelector('style[data-href~="'+ps(h.href)+'"]');if(g)return c.instance=g,Yn(g),g;var v=m({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),Yn(g),ir(g,"style",v),vx(g,h.precedence,o),c.instance=g;case"stylesheet":v=zu(h.href);var N=o.querySelector(am(v));if(N)return c.state.loading|=4,c.instance=N,Yn(N),N;g=QC(h),(v=Ai.get(v))&&Hw(g,v),N=(o.ownerDocument||o).createElement("link"),Yn(N);var U=N;return U._p=new Promise(function($,Q){U.onload=$,U.onerror=Q}),ir(N,"link",g),c.state.loading|=4,vx(N,h.precedence,o),c.instance=N;case"script":return N=$u(h.src),(v=o.querySelector(om(N)))?(c.instance=v,Yn(v),v):(g=h,(v=Ai.get(N))&&(g=m({},h),Ww(g,v)),o=o.ownerDocument||o,v=o.createElement("script"),Yn(v),ir(v,"link",g),o.head.appendChild(v),c.instance=v);case"void":return null;default:throw Error(s(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,vx(g,h.precedence,o));return c.instance}function vx(o,c,h){for(var g=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=g.length?g[g.length-1]:null,N=v,U=0;U<g.length;U++){var $=g[U];if($.dataset.precedence===c)N=$;else if(N!==v)break}N?N.parentNode.insertBefore(o,N.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(o,c.firstChild))}function Hw(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function Ww(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var bx=null;function JC(o,c,h){if(bx===null){var g=new Map,v=bx=new Map;v.set(h,g)}else v=bx,g=v.get(h),g||(g=new Map,v.set(h,g));if(g.has(o))return g;for(g.set(o,null),h=h.getElementsByTagName(o),v=0;v<h.length;v++){var N=h[v];if(!(N[Wr]||N[Mt]||o==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var U=N.getAttribute(c)||"";U=o+U;var $=g.get(U);$?$.push(N):g.set(U,[N])}}return g}function eT(o,c,h){o=o.ownerDocument||o,o.head.insertBefore(h,c==="title"?o.querySelector("head > title"):null)}function iF(o,c,h){if(h===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function tT(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var lm=null;function aF(){}function oF(o,c,h){if(lm===null)throw Error(s(475));var g=lm;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=zu(h.href),N=o.querySelector(am(v));if(N){o=N._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(g.count++,g=wx.bind(g),o.then(g,g)),c.state.loading|=4,c.instance=N,Yn(N);return}N=o.ownerDocument||o,h=QC(h),(v=Ai.get(v))&&Hw(h,v),N=N.createElement("link"),Yn(N);var U=N;U._p=new Promise(function($,Q){U.onload=$,U.onerror=Q}),ir(N,"link",h),c.instance=N}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(g.count++,c=wx.bind(g),o.addEventListener("load",c),o.addEventListener("error",c))}}function lF(){if(lm===null)throw Error(s(475));var o=lm;return o.stylesheets&&o.count===0&&Gw(o,o.stylesheets),0<o.count?function(c){var h=setTimeout(function(){if(o.stylesheets&&Gw(o,o.stylesheets),o.unsuspend){var g=o.unsuspend;o.unsuspend=null,g()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(h)}}:null}function wx(){if(this.count--,this.count===0){if(this.stylesheets)Gw(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var _x=null;function Gw(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,_x=new Map,c.forEach(cF,o),_x=null,wx.call(o))}function cF(o,c){if(!(c.state.loading&4)){var h=_x.get(o);if(h)var g=h.get(null);else{h=new Map,_x.set(o,h);for(var v=o.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<v.length;N++){var U=v[N];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(h.set(U.dataset.precedence,U),g=U)}g&&h.set(null,g)}v=c.instance,U=v.getAttribute("data-precedence"),N=h.get(U)||g,N===g&&h.set(null,v),h.set(U,v),this.count++,g=wx.bind(this),v.addEventListener("load",g),v.addEventListener("error",g),N?N.parentNode.insertBefore(v,N.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(v,o.firstChild)),c.state.loading|=4}}var cm={$$typeof:I,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function dF(o,c,h,g,v,N,U,$){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ss(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ss(0),this.hiddenUpdates=ss(null),this.identifierPrefix=g,this.onUncaughtError=v,this.onCaughtError=N,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function nT(o,c,h,g,v,N,U,$,Q,oe,ye,we){return o=new dF(o,c,h,U,$,Q,oe,we),c=1,N===!0&&(c|=24),N=Jr(3,null,null,c),o.current=N,N.stateNode=o,c=Tb(),c.refCount++,o.pooledCache=c,c.refCount++,N.memoizedState={element:g,isDehydrated:h,cache:c},Ib(N),o}function sT(o){return o?(o=bu,o):bu}function rT(o,c,h,g,v,N){v=sT(v),g.context===null?g.context=v:g.pendingContext=v,g=pl(c),g.payload={element:h},N=N===void 0?null:N,N!==null&&(g.callback=N),h=xl(o,g,c),h!==null&&(ri(h,o,c),Uf(h,o,c))}function iT(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function Yw(o,c){iT(o,c),(o=o.alternate)&&iT(o,c)}function aT(o){if(o.tag===13){var c=vu(o,67108864);c!==null&&ri(c,o,67108864),Yw(o,67108864)}}var jx=!0;function uF(o,c,h,g){var v=q.T;q.T=null;var N=Y.p;try{Y.p=2,Kw(o,c,h,g)}finally{Y.p=N,q.T=v}}function hF(o,c,h,g){var v=q.T;q.T=null;var N=Y.p;try{Y.p=8,Kw(o,c,h,g)}finally{Y.p=N,q.T=v}}function Kw(o,c,h,g){if(jx){var v=Xw(g);if(v===null)Ow(o,c,g,Nx,h),lT(o,g);else if(mF(v,o,c,h,g))g.stopPropagation();else if(lT(o,g),c&4&&-1<fF.indexOf(o)){for(;v!==null;){var N=Kr(v);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var U=pe(N.pendingLanes);if(U!==0){var $=N;for($.pendingLanes|=2,$.entangledLanes|=2;U;){var Q=1<<31-Jt(U);$.entanglements[1]|=Q,U&=~Q}ja(N),(jn&6)===0&&(ox=ct()+500,nm(0))}}break;case 13:$=vu(N,2),$!==null&&ri($,N,2),cx(),Yw(N,2)}if(N=Xw(g),N===null&&Ow(o,c,g,Nx,h),N===v)break;v=N}v!==null&&g.stopPropagation()}else Ow(o,c,g,null,h)}}function Xw(o){return o=bi(o),Qw(o)}var Nx=null;function Qw(o){if(Nx=null,o=Yr(o),o!==null){var c=a(o);if(c===null)o=null;else{var h=c.tag;if(h===13){if(o=l(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return Nx=o,null}function oT(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dt()){case pt:return 2;case X:return 8;case re:case he:return 32;case Ae:return 268435456;default:return 32}default:return 32}}var Zw=!1,kl=null,Rl=null,Il=null,dm=new Map,um=new Map,Dl=[],fF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lT(o,c){switch(o){case"focusin":case"focusout":kl=null;break;case"dragenter":case"dragleave":Rl=null;break;case"mouseover":case"mouseout":Il=null;break;case"pointerover":case"pointerout":dm.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":um.delete(c.pointerId)}}function hm(o,c,h,g,v,N){return o===null||o.nativeEvent!==N?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:N,targetContainers:[v]},c!==null&&(c=Kr(c),c!==null&&aT(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,v!==null&&c.indexOf(v)===-1&&c.push(v),o)}function mF(o,c,h,g,v){switch(c){case"focusin":return kl=hm(kl,o,c,h,g,v),!0;case"dragenter":return Rl=hm(Rl,o,c,h,g,v),!0;case"mouseover":return Il=hm(Il,o,c,h,g,v),!0;case"pointerover":var N=v.pointerId;return dm.set(N,hm(dm.get(N)||null,o,c,h,g,v)),!0;case"gotpointercapture":return N=v.pointerId,um.set(N,hm(um.get(N)||null,o,c,h,g,v)),!0}return!1}function cT(o){var c=Yr(o.target);if(c!==null){var h=a(c);if(h!==null){if(c=h.tag,c===13){if(c=l(h),c!==null){o.blockedOn=c,ge(o.priority,function(){if(h.tag===13){var g=si();g=cn(g);var v=vu(h,g);v!==null&&ri(v,h,g),Yw(h,g)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Sx(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=Xw(o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);ao=g,h.target.dispatchEvent(g),ao=null}else return c=Kr(h),c!==null&&aT(c),o.blockedOn=h,!1;c.shift()}return!0}function dT(o,c,h){Sx(o)&&h.delete(c)}function gF(){Zw=!1,kl!==null&&Sx(kl)&&(kl=null),Rl!==null&&Sx(Rl)&&(Rl=null),Il!==null&&Sx(Il)&&(Il=null),dm.forEach(dT),um.forEach(dT)}function Ex(o,c){o.blockedOn===c&&(o.blockedOn=null,Zw||(Zw=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,gF)))}var Cx=null;function uT(o){Cx!==o&&(Cx=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Cx===o&&(Cx=null);for(var c=0;c<o.length;c+=3){var h=o[c],g=o[c+1],v=o[c+2];if(typeof g!="function"){if(Qw(g||h)===null)continue;break}var N=Kr(h);N!==null&&(o.splice(c,3),c-=3,Qb(N,{pending:!0,data:v,method:h.method,action:g},g,v))}}))}function fm(o){function c(Q){return Ex(Q,o)}kl!==null&&Ex(kl,o),Rl!==null&&Ex(Rl,o),Il!==null&&Ex(Il,o),dm.forEach(c),um.forEach(c);for(var h=0;h<Dl.length;h++){var g=Dl[h];g.blockedOn===o&&(g.blockedOn=null)}for(;0<Dl.length&&(h=Dl[0],h.blockedOn===null);)cT(h),h.blockedOn===null&&Dl.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(g=0;g<h.length;g+=3){var v=h[g],N=h[g+1],U=v[Et]||null;if(typeof N=="function")U||uT(h);else if(U){var $=null;if(N&&N.hasAttribute("formAction")){if(v=N,U=N[Et]||null)$=U.formAction;else if(Qw(v)!==null)continue}else $=U.action;typeof $=="function"?h[g+1]=$:(h.splice(g,3),g-=3),uT(h)}}}function Jw(o){this._internalRoot=o}Tx.prototype.render=Jw.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(s(409));var h=c.current,g=si();rT(h,g,o,c,null,null)},Tx.prototype.unmount=Jw.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;rT(o.current,2,null,o,null,null),cx(),c[Ot]=null}};function Tx(o){this._internalRoot=o}Tx.prototype.unstable_scheduleHydration=function(o){if(o){var c=fn();o={blockedOn:null,target:o,priority:c};for(var h=0;h<Dl.length&&c!==0&&c<Dl[h].priority;h++);Dl.splice(h,0,o),h===0&&cT(o)}};var hT=e.version;if(hT!=="19.1.0")throw Error(s(527,hT,"19.1.0"));Y.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=u(c),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var pF={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ax=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ax.isDisabled&&Ax.supportsFiber)try{Me=Ax.inject(pF),Ke=Ax}catch{}}return gm.createRoot=function(o,c){if(!r(o))throw Error(s(299));var h=!1,g="",v=T2,N=A2,U=k2,$=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(N=c.onCaughtError),c.onRecoverableError!==void 0&&(U=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&($=c.unstable_transitionCallbacks)),c=nT(o,1,!1,null,null,h,g,v,N,U,$,null),o[Ot]=c.current,Pw(o),new Jw(c)},gm.hydrateRoot=function(o,c,h){if(!r(o))throw Error(s(299));var g=!1,v="",N=T2,U=A2,$=k2,Q=null,oe=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(N=h.onUncaughtError),h.onCaughtError!==void 0&&(U=h.onCaughtError),h.onRecoverableError!==void 0&&($=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(Q=h.unstable_transitionCallbacks),h.formState!==void 0&&(oe=h.formState)),c=nT(o,1,!0,c,h??null,g,v,N,U,$,Q,oe),c.context=sT(null),h=c.current,g=si(),g=cn(g),v=pl(g),v.callback=null,xl(h,v,g),h=g,c.current.lanes=h,Mn(c,h),ja(c),o[Ot]=c.current,Pw(o),new Tx(c)},gm.version="19.1.0",gm}var _T;function TF(){if(_T)return n_.exports;_T=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),n_.exports=CF(),n_.exports}var AF=TF();const kF="modulepreload",RF=function(t){return"/"+t},jT={},Ah=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let l=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));r=l(n.map(f=>{if(f=RF(f),f in jT)return;jT[f]=!0;const m=f.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":kF,m||(x.as="script"),x.crossOrigin="",x.href=f,u&&x.setAttribute("nonce",u),document.head.appendChild(x),m)return new Promise((w,j)=>{x.addEventListener("load",w),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return r.then(l=>{for(const d of l||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};var pm={},NT;function IF(){if(NT)return pm;NT=1,Object.defineProperty(pm,"__esModule",{value:!0}),pm.parse=l,pm.serialize=f;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,a=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function l(x,w){const j=new a,S=x.length;if(S<2)return j;const _=(w==null?void 0:w.decode)||m;let E=0;do{const C=x.indexOf("=",E);if(C===-1)break;const I=x.indexOf(";",E),M=I===-1?S:I;if(C>M){E=x.lastIndexOf(";",C-1)+1;continue}const V=d(x,E,C),z=u(x,C,V),D=x.slice(V,z);if(j[D]===void 0){let A=d(x,C+1,M),T=u(x,M,A);const R=_(x.slice(A,T));j[D]=R}E=M+1}while(E<S);return j}function d(x,w,j){do{const S=x.charCodeAt(w);if(S!==32&&S!==9)return w}while(++w<j);return j}function u(x,w,j){for(;w>j;){const S=x.charCodeAt(--w);if(S!==32&&S!==9)return w+1}return j}function f(x,w,j){const S=(j==null?void 0:j.encode)||encodeURIComponent;if(!t.test(x))throw new TypeError(`argument name is invalid: ${x}`);const _=S(w);if(!e.test(_))throw new TypeError(`argument val is invalid: ${w}`);let E=x+"="+_;if(!j)return E;if(j.maxAge!==void 0){if(!Number.isInteger(j.maxAge))throw new TypeError(`option maxAge is invalid: ${j.maxAge}`);E+="; Max-Age="+j.maxAge}if(j.domain){if(!n.test(j.domain))throw new TypeError(`option domain is invalid: ${j.domain}`);E+="; Domain="+j.domain}if(j.path){if(!s.test(j.path))throw new TypeError(`option path is invalid: ${j.path}`);E+="; Path="+j.path}if(j.expires){if(!p(j.expires)||!Number.isFinite(j.expires.valueOf()))throw new TypeError(`option expires is invalid: ${j.expires}`);E+="; Expires="+j.expires.toUTCString()}if(j.httpOnly&&(E+="; HttpOnly"),j.secure&&(E+="; Secure"),j.partitioned&&(E+="; Partitioned"),j.priority)switch(typeof j.priority=="string"?j.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${j.priority}`)}if(j.sameSite)switch(typeof j.sameSite=="string"?j.sameSite.toLowerCase():j.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${j.sameSite}`)}return E}function m(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function p(x){return r.call(x)==="[object Date]"}return pm}IF();var ST="popstate";function DF(t={}){function e(s,r){let{pathname:a,search:l,hash:d}=s.location;return lj("",{pathname:a,search:l,hash:d},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:rg(r)}return PF(e,n,null,t)}function Gn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function na(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MF(){return Math.random().toString(36).substring(2,10)}function ET(t,e){return{usr:t.state,key:t.key,idx:e}}function lj(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Gh(e):e,state:n,key:e&&e.key||s||MF()}}function rg({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Gh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function PF(t,e,n,s={}){let{window:r=document.defaultView,v5Compat:a=!1}=s,l=r.history,d="POP",u=null,f=m();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function m(){return(l.state||{idx:null}).idx}function p(){d="POP";let _=m(),E=_==null?null:_-f;f=_,u&&u({action:d,location:S.location,delta:E})}function x(_,E){d="PUSH";let C=lj(S.location,_,E);f=m()+1;let I=ET(C,f),M=S.createHref(C);try{l.pushState(I,"",M)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;r.location.assign(M)}a&&u&&u({action:d,location:S.location,delta:1})}function w(_,E){d="REPLACE";let C=lj(S.location,_,E);f=m();let I=ET(C,f),M=S.createHref(C);l.replaceState(I,"",M),a&&u&&u({action:d,location:S.location,delta:0})}function j(_){return OF(_)}let S={get action(){return d},get location(){return t(r,l)},listen(_){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(ST,p),u=_,()=>{r.removeEventListener(ST,p),u=null}},createHref(_){return e(r,_)},createURL:j,encodeLocation(_){let E=j(_);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:x,replace:w,go(_){return l.go(_)}};return S}function OF(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Gn(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:rg(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function C4(t,e,n="/"){return LF(t,e,n,!1)}function LF(t,e,n,s){let r=typeof e=="string"?Gh(e):e,a=Yo(r.pathname||"/",n);if(a==null)return null;let l=T4(t);VF(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let f=KF(a);d=GF(l[u],f,s)}return d}function T4(t,e=[],n=[],s=""){let r=(a,l,d)=>{let u={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};u.relativePath.startsWith("/")&&(Gn(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length));let f=Fo([s,u.relativePath]),m=n.concat(u);a.children&&a.children.length>0&&(Gn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),T4(a.children,e,m,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:HF(f,a.index),routesMeta:m})};return t.forEach((a,l)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))r(a,l);else for(let u of A4(a.path))r(a,l,u)}),e}function A4(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return r?[a,""]:[a];let l=A4(s.join("/")),d=[];return d.push(...l.map(u=>u===""?a:[a,u].join("/"))),r&&d.push(...l),d.map(u=>t.startsWith("/")&&u===""?"/":u)}function VF(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WF(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var UF=/^:[\w-]+$/,FF=3,BF=2,zF=1,$F=10,qF=-2,CT=t=>t==="*";function HF(t,e){let n=t.split("/"),s=n.length;return n.some(CT)&&(s+=qF),e&&(s+=BF),n.filter(r=>!CT(r)).reduce((r,a)=>r+(UF.test(a)?FF:a===""?zF:$F),s)}function WF(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function GF(t,e,n=!1){let{routesMeta:s}=t,r={},a="/",l=[];for(let d=0;d<s.length;++d){let u=s[d],f=d===s.length-1,m=a==="/"?e:e.slice(a.length)||"/",p=Py({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},m),x=u.route;if(!p&&f&&n&&!s[s.length-1].route.index&&(p=Py({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!p)return null;Object.assign(r,p.params),l.push({params:r,pathname:Fo([a,p.pathname]),pathnameBase:JF(Fo([a,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(a=Fo([a,p.pathnameBase]))}return l}function Py(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=YF(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let a=r[0],l=a.replace(/(.)\/+$/,"$1"),d=r.slice(1);return{params:s.reduce((f,{paramName:m,isOptional:p},x)=>{if(m==="*"){let j=d[x]||"";l=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const w=d[x];return p&&!w?f[m]=void 0:f[m]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:t}}function YF(t,e=!1,n=!0){na(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(s.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function KF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return na(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Yo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function XF(t,e="/"){let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?Gh(t):t;return{pathname:n?n.startsWith("/")?n:QF(n,e):e,search:e9(s),hash:t9(r)}}function QF(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function a_(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function T1(t){let e=ZF(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function A1(t,e,n,s=!1){let r;typeof t=="string"?r=Gh(t):(r={...t},Gn(!r.pathname||!r.pathname.includes("?"),a_("?","pathname","search",r)),Gn(!r.pathname||!r.pathname.includes("#"),a_("#","pathname","hash",r)),Gn(!r.search||!r.search.includes("#"),a_("#","search","hash",r)));let a=t===""||r.pathname==="",l=a?"/":r.pathname,d;if(l==null)d=n;else{let p=e.length-1;if(!s&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),p-=1;r.pathname=x.join("/")}d=p>=0?e[p]:"/"}let u=XF(r,d),f=l&&l!=="/"&&l.endsWith("/"),m=(a||l===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||m)&&(u.pathname+="/"),u}var Fo=t=>t.join("/").replace(/\/\/+/g,"/"),JF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),e9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,t9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function n9(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var k4=["POST","PUT","PATCH","DELETE"];new Set(k4);var s9=["GET",...k4];new Set(s9);var Yh=b.createContext(null);Yh.displayName="DataRouter";var q0=b.createContext(null);q0.displayName="DataRouterState";var R4=b.createContext({isTransitioning:!1});R4.displayName="ViewTransition";var r9=b.createContext(new Map);r9.displayName="Fetchers";var i9=b.createContext(null);i9.displayName="Await";var oa=b.createContext(null);oa.displayName="Navigation";var Og=b.createContext(null);Og.displayName="Location";var Fi=b.createContext({outlet:null,matches:[],isDataRoute:!1});Fi.displayName="Route";var k1=b.createContext(null);k1.displayName="RouteError";function a9(t,{relative:e}={}){Gn(Kh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=b.useContext(oa),{hash:r,pathname:a,search:l}=Lg(t,{relative:e}),d=a;return n!=="/"&&(d=a==="/"?n:Fo([n,a])),s.createHref({pathname:d,search:l,hash:r})}function Kh(){return b.useContext(Og)!=null}function Hr(){return Gn(Kh(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Og).location}var I4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function D4(t){b.useContext(oa).static||b.useLayoutEffect(t)}function ks(){let{isDataRoute:t}=b.useContext(Fi);return t?b9():o9()}function o9(){Gn(Kh(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(Yh),{basename:e,navigator:n}=b.useContext(oa),{matches:s}=b.useContext(Fi),{pathname:r}=Hr(),a=JSON.stringify(T1(s)),l=b.useRef(!1);return D4(()=>{l.current=!0}),b.useCallback((u,f={})=>{if(na(l.current,I4),!l.current)return;if(typeof u=="number"){n.go(u);return}let m=A1(u,JSON.parse(a),r,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Fo([e,m.pathname])),(f.replace?n.replace:n.push)(m,f.state,f)},[e,n,a,r,t])}var l9=b.createContext(null);function M4(t){let e=b.useContext(Fi).outlet;return e&&b.createElement(l9.Provider,{value:t},e)}function Nc(){let{matches:t}=b.useContext(Fi),e=t[t.length-1];return e?e.params:{}}function Lg(t,{relative:e}={}){let{matches:n}=b.useContext(Fi),{pathname:s}=Hr(),r=JSON.stringify(T1(n));return b.useMemo(()=>A1(t,JSON.parse(r),s,e==="path"),[t,r,s,e])}function c9(t,e){return P4(t,e)}function P4(t,e,n,s){var E;Gn(Kh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=b.useContext(oa),{matches:a}=b.useContext(Fi),l=a[a.length-1],d=l?l.params:{},u=l?l.pathname:"/",f=l?l.pathnameBase:"/",m=l&&l.route;{let C=m&&m.path||"";O4(u,!m||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let p=Hr(),x;if(e){let C=typeof e=="string"?Gh(e):e;Gn(f==="/"||((E=C.pathname)==null?void 0:E.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=p;let w=x.pathname||"/",j=w;if(f!=="/"){let C=f.replace(/^\//,"").split("/");j="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=C4(t,{pathname:j});na(m||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),na(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=m9(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Fo([f,r.encodeLocation?r.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Fo([f,r.encodeLocation?r.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,n,s);return e&&_?b.createElement(Og.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function d9(){let t=v9(),e=n9(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:a},"ErrorBoundary")," or"," ",b.createElement("code",{style:a},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:r},n):null,l)}var u9=b.createElement(d9,null),h9=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?b.createElement(Fi.Provider,{value:this.props.routeContext},b.createElement(k1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function f9({routeContext:t,match:e,children:n}){let s=b.useContext(Yh);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(Fi.Provider,{value:t},n)}function m9(t,e=[],n=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,a=n==null?void 0:n.errors;if(a!=null){let u=r.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);Gn(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,u+1))}let l=!1,d=-1;if(n)for(let u=0;u<r.length;u++){let f=r[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:m,errors:p}=n,x=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||x){l=!0,d>=0?r=r.slice(0,d+1):r=[r[0]];break}}}return r.reduceRight((u,f,m)=>{let p,x=!1,w=null,j=null;n&&(p=a&&f.route.id?a[f.route.id]:void 0,w=f.route.errorElement||u9,l&&(d<0&&m===0?(O4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,j=null):d===m&&(x=!0,j=f.route.hydrateFallbackElement||null)));let S=e.concat(r.slice(0,m+1)),_=()=>{let E;return p?E=w:x?E=j:f.route.Component?E=b.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=u,b.createElement(f9,{match:f,routeContext:{outlet:u,matches:S,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?b.createElement(h9,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):_()},null)}function R1(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function g9(t){let e=b.useContext(Yh);return Gn(e,R1(t)),e}function p9(t){let e=b.useContext(q0);return Gn(e,R1(t)),e}function x9(t){let e=b.useContext(Fi);return Gn(e,R1(t)),e}function I1(t){let e=x9(t),n=e.matches[e.matches.length-1];return Gn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function y9(){return I1("useRouteId")}function v9(){var s;let t=b.useContext(k1),e=p9("useRouteError"),n=I1("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function b9(){let{router:t}=g9("useNavigate"),e=I1("useNavigate"),n=b.useRef(!1);return D4(()=>{n.current=!0}),b.useCallback(async(r,a={})=>{na(n.current,I4),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...a}))},[t,e])}var TT={};function O4(t,e,n){!e&&!TT[t]&&(TT[t]=!0,na(!1,n))}b.memo(w9);function w9({routes:t,future:e,state:n}){return P4(t,void 0,n,e)}function oi({to:t,replace:e,state:n,relative:s}){Gn(Kh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=b.useContext(oa);na(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=b.useContext(Fi),{pathname:l}=Hr(),d=ks(),u=A1(t,T1(a),l,s==="path"),f=JSON.stringify(u);return b.useEffect(()=>{d(JSON.parse(f),{replace:e,state:n,relative:s})},[d,f,s,e,n]),null}function _9(t){return M4(t.context)}function At(t){Gn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function j9({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:r,static:a=!1}){Gn(!Kh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:l,navigator:r,static:a,future:{}}),[l,r,a]);typeof n=="string"&&(n=Gh(n));let{pathname:u="/",search:f="",hash:m="",state:p=null,key:x="default"}=n,w=b.useMemo(()=>{let j=Yo(u,l);return j==null?null:{location:{pathname:j,search:f,hash:m,state:p,key:x},navigationType:s}},[l,u,f,m,p,x,s]);return na(w!=null,`<Router basename="${l}"> is not able to match the URL "${u}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:b.createElement(oa.Provider,{value:d},b.createElement(Og.Provider,{children:e,value:w}))}function N9({children:t,location:e}){return c9(cj(t),e)}function cj(t,e=[]){let n=[];return b.Children.forEach(t,(s,r)=>{if(!b.isValidElement(s))return;let a=[...e,r];if(s.type===b.Fragment){n.push.apply(n,cj(s.props.children,a));return}Gn(s.type===At,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Gn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=cj(s.props.children,a)),n.push(l)}),n}var fy="get",my="application/x-www-form-urlencoded";function H0(t){return t!=null&&typeof t.tagName=="string"}function S9(t){return H0(t)&&t.tagName.toLowerCase()==="button"}function E9(t){return H0(t)&&t.tagName.toLowerCase()==="form"}function C9(t){return H0(t)&&t.tagName.toLowerCase()==="input"}function T9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function A9(t,e){return t.button===0&&(!e||e==="_self")&&!T9(t)}var kx=null;function k9(){if(kx===null)try{new FormData(document.createElement("form"),0),kx=!1}catch{kx=!0}return kx}var R9=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function o_(t){return t!=null&&!R9.has(t)?(na(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${my}"`),null):t}function I9(t,e){let n,s,r,a,l;if(E9(t)){let d=t.getAttribute("action");s=d?Yo(d,e):null,n=t.getAttribute("method")||fy,r=o_(t.getAttribute("enctype"))||my,a=new FormData(t)}else if(S9(t)||C9(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||d.getAttribute("action");if(s=u?Yo(u,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||fy,r=o_(t.getAttribute("formenctype"))||o_(d.getAttribute("enctype"))||my,a=new FormData(d,t),!k9()){let{name:f,type:m,value:p}=t;if(m==="image"){let x=f?`${f}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else f&&a.append(f,p)}}else{if(H0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=fy,s=null,r=my,l=t}return a&&r==="text/plain"&&(l=a,a=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:a,body:l}}function D1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function D9(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function M9(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function P9(t,e,n){let s=await Promise.all(t.map(async r=>{let a=e.routes[r.route.id];if(a){let l=await D9(a,n);return l.links?l.links():[]}return[]}));return U9(s.flat(1).filter(M9).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function AT(t,e,n,s,r,a){let l=(u,f)=>n[f]?u.route.id!==n[f].route.id:!0,d=(u,f)=>{var m;return n[f].pathname!==u.pathname||((m=n[f].route.path)==null?void 0:m.endsWith("*"))&&n[f].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,f)=>l(u,f)||d(u,f)):a==="data"?e.filter((u,f)=>{var p;let m=s.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(l(u,f)||d(u,f))return!0;if(u.route.shouldRevalidate){let x=u.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function O9(t,e,{includeHydrateFallback:n}={}){return L9(t.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function L9(t){return[...new Set(t)]}function V9(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function U9(t,e){let n=new Set;return new Set(e),t.reduce((s,r)=>{let a=JSON.stringify(V9(r));return n.has(a)||(n.add(a),s.push({key:a,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var F9=new Set([100,101,204,205]);function B9(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Yo(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function L4(){let t=b.useContext(Yh);return D1(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function z9(){let t=b.useContext(q0);return D1(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var M1=b.createContext(void 0);M1.displayName="FrameworkContext";function V4(){let t=b.useContext(M1);return D1(t,"You must render this element inside a <HydratedRouter> element"),t}function $9(t,e){let n=b.useContext(M1),[s,r]=b.useState(!1),[a,l]=b.useState(!1),{onFocus:d,onBlur:u,onMouseEnter:f,onMouseLeave:m,onTouchStart:p}=e,x=b.useRef(null);b.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let S=E=>{E.forEach(C=>{l(C.isIntersecting)})},_=new IntersectionObserver(S,{threshold:.5});return x.current&&_.observe(x.current),()=>{_.disconnect()}}},[t]),b.useEffect(()=>{if(s){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[s]);let w=()=>{r(!0)},j=()=>{r(!1),l(!1)};return n?t!=="intent"?[a,x,{}]:[a,x,{onFocus:xm(d,w),onBlur:xm(u,j),onMouseEnter:xm(f,w),onMouseLeave:xm(m,j),onTouchStart:xm(p,w)}]:[!1,x,{}]}function xm(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function q9({page:t,...e}){let{router:n}=L4(),s=b.useMemo(()=>C4(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?b.createElement(W9,{page:t,matches:s,...e}):null}function H9(t){let{manifest:e,routeModules:n}=V4(),[s,r]=b.useState([]);return b.useEffect(()=>{let a=!1;return P9(t,e,n).then(l=>{a||r(l)}),()=>{a=!0}},[t,e,n]),s}function W9({page:t,matches:e,...n}){let s=Hr(),{manifest:r,routeModules:a}=V4(),{basename:l}=L4(),{loaderData:d,matches:u}=z9(),f=b.useMemo(()=>AT(t,e,u,r,s,"data"),[t,e,u,r,s]),m=b.useMemo(()=>AT(t,e,u,r,s,"assets"),[t,e,u,r,s]),p=b.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let j=new Set,S=!1;if(e.forEach(E=>{var I;let C=r.routes[E.route.id];!C||!C.hasLoader||(!f.some(M=>M.route.id===E.route.id)&&E.route.id in d&&((I=a[E.route.id])!=null&&I.shouldRevalidate)||C.hasClientLoader?S=!0:j.add(E.route.id))}),j.size===0)return[];let _=B9(t,l);return S&&j.size>0&&_.searchParams.set("_routes",e.filter(E=>j.has(E.route.id)).map(E=>E.route.id).join(",")),[_.pathname+_.search]},[l,d,s,r,f,e,t,a]),x=b.useMemo(()=>O9(m,r),[m,r]),w=H9(m);return b.createElement(b.Fragment,null,p.map(j=>b.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...n})),x.map(j=>b.createElement("link",{key:j,rel:"modulepreload",href:j,...n})),w.map(({key:j,link:S})=>b.createElement("link",{key:j,...S})))}function G9(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var U4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{U4&&(window.__reactRouterVersion="7.6.3")}catch{}function Y9({basename:t,children:e,window:n}){let s=b.useRef();s.current==null&&(s.current=DF({window:n,v5Compat:!0}));let r=s.current,[a,l]=b.useState({action:r.action,location:r.location}),d=b.useCallback(u=>{b.startTransition(()=>l(u))},[l]);return b.useLayoutEffect(()=>r.listen(d),[r,d]),b.createElement(j9,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:r})}var F4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$n=b.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:r,reloadDocument:a,replace:l,state:d,target:u,to:f,preventScrollReset:m,viewTransition:p,...x},w){let{basename:j}=b.useContext(oa),S=typeof f=="string"&&F4.test(f),_,E=!1;if(typeof f=="string"&&S&&(_=f,U4))try{let T=new URL(window.location.href),R=f.startsWith("//")?new URL(T.protocol+f):new URL(f),P=Yo(R.pathname,j);R.origin===T.origin&&P!=null?f=P+R.search+R.hash:E=!0}catch{na(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=a9(f,{relative:r}),[I,M,V]=$9(s,x),z=Q9(f,{replace:l,state:d,target:u,preventScrollReset:m,relative:r,viewTransition:p});function D(T){e&&e(T),T.defaultPrevented||z(T)}let A=b.createElement("a",{...x,...V,href:_||C,onClick:E||a?e:D,ref:G9(w,M),target:u,"data-discover":!S&&n==="render"?"true":void 0});return I&&!S?b.createElement(b.Fragment,null,A,b.createElement(q9,{page:C})):A});$n.displayName="Link";var Ul=b.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:r=!1,style:a,to:l,viewTransition:d,children:u,...f},m){let p=Lg(l,{relative:f.relative}),x=Hr(),w=b.useContext(q0),{navigator:j,basename:S}=b.useContext(oa),_=w!=null&&nB(p)&&d===!0,E=j.encodeLocation?j.encodeLocation(p).pathname:p.pathname,C=x.pathname,I=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(C=C.toLowerCase(),I=I?I.toLowerCase():null,E=E.toLowerCase()),I&&S&&(I=Yo(I,S)||I);const M=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let V=C===E||!r&&C.startsWith(E)&&C.charAt(M)==="/",z=I!=null&&(I===E||!r&&I.startsWith(E)&&I.charAt(E.length)==="/"),D={isActive:V,isPending:z,isTransitioning:_},A=V?e:void 0,T;typeof s=="function"?T=s(D):T=[s,V?"active":null,z?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(D):a;return b.createElement($n,{...f,"aria-current":A,className:T,ref:m,style:R,to:l,viewTransition:d},typeof u=="function"?u(D):u)});Ul.displayName="NavLink";var K9=b.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:r,state:a,method:l=fy,action:d,onSubmit:u,relative:f,preventScrollReset:m,viewTransition:p,...x},w)=>{let j=eB(),S=tB(d,{relative:f}),_=l.toLowerCase()==="get"?"get":"post",E=typeof d=="string"&&F4.test(d),C=I=>{if(u&&u(I),I.defaultPrevented)return;I.preventDefault();let M=I.nativeEvent.submitter,V=(M==null?void 0:M.getAttribute("formmethod"))||l;j(M||I.currentTarget,{fetcherKey:e,method:V,navigate:n,replace:r,state:a,relative:f,preventScrollReset:m,viewTransition:p})};return b.createElement("form",{ref:w,method:_,action:S,onSubmit:s?u:C,...x,"data-discover":!E&&t==="render"?"true":void 0})});K9.displayName="Form";function X9(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function B4(t){let e=b.useContext(Yh);return Gn(e,X9(t)),e}function Q9(t,{target:e,replace:n,state:s,preventScrollReset:r,relative:a,viewTransition:l}={}){let d=ks(),u=Hr(),f=Lg(t,{relative:a});return b.useCallback(m=>{if(A9(m,e)){m.preventDefault();let p=n!==void 0?n:rg(u)===rg(f);d(t,{replace:p,state:s,preventScrollReset:r,relative:a,viewTransition:l})}},[u,d,f,n,s,e,t,r,a,l])}var Z9=0,J9=()=>`__${String(++Z9)}__`;function eB(){let{router:t}=B4("useSubmit"),{basename:e}=b.useContext(oa),n=y9();return b.useCallback(async(s,r={})=>{let{action:a,method:l,encType:d,formData:u,body:f}=I9(s,e);if(r.navigate===!1){let m=r.fetcherKey||J9();await t.fetch(m,n,r.action||a,{preventScrollReset:r.preventScrollReset,formData:u,body:f,formMethod:r.method||l,formEncType:r.encType||d,flushSync:r.flushSync})}else await t.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:u,body:f,formMethod:r.method||l,formEncType:r.encType||d,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function tB(t,{relative:e}={}){let{basename:n}=b.useContext(oa),s=b.useContext(Fi);Gn(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),a={...Lg(t||".",{relative:e})},l=Hr();if(t==null){a.search=l.search;let d=new URLSearchParams(a.search),u=d.getAll("index");if(u.some(m=>m==="")){d.delete("index"),u.filter(p=>p).forEach(p=>d.append("index",p));let m=d.toString();a.search=m?`?${m}`:""}}return(!t||t===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Fo([n,a.pathname])),rg(a)}function nB(t,e={}){let n=b.useContext(R4);Gn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=B4("useViewTransitionState"),r=Lg(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Yo(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=Yo(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Py(r.pathname,l)!=null||Py(r.pathname,a)!=null}[...F9];var Vg=E4();const sB=N4(Vg),rB=()=>{};var kT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},iB=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const a=t[n++];e[s++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=t[n++],l=t[n++],d=t[n++],u=((r&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],l=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(a&63)<<6|l&63)}}return e.join("")},$4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const a=t[r],l=r+1<t.length,d=l?t[r+1]:0,u=r+2<t.length,f=u?t[r+2]:0,m=a>>2,p=(a&3)<<4|d>>4;let x=(d&15)<<2|f>>6,w=f&63;u||(w=64,l||(x=64)),s.push(n[m],n[p],n[x],n[w])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(z4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const a=n[t.charAt(r++)],d=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||d==null||f==null||p==null)throw new aB;const x=a<<2|d>>4;if(s.push(x),f!==64){const w=d<<4&240|f>>2;if(s.push(w),p!==64){const j=f<<6&192|p;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oB=function(t){const e=z4(t);return $4.encodeByteArray(e,!0)},Oy=function(t){return oB(t).replace(/\./g,"")},q4=function(t){try{return $4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB=()=>lB().__FIREBASE_DEFAULTS__,dB=()=>{if(typeof process>"u"||typeof kT>"u")return;const t=kT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&q4(t[1]);return e&&JSON.parse(e)},W0=()=>{try{return rB()||cB()||dB()||uB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},H4=t=>{var e,n;return(n=(e=W0())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},P1=t=>{const e=H4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},W4=()=>{var t;return(t=W0())===null||t===void 0?void 0:t.config},G4=t=>{var e;return(e=W0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function G0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Oy(JSON.stringify(n)),Oy(JSON.stringify(l)),""].join(".")}const zm={};function fB(){const t={prod:[],emulator:[]};for(const e of Object.keys(zm))zm[e]?t.emulator.push(e):t.prod.push(e);return t}function mB(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let RT=!1;function Y0(t,e){if(typeof window>"u"||typeof document>"u"||!ol(window.location.host)||zm[t]===e||zm[t]||RT)return;zm[t]=e;function n(x){return`__firebase__banner__${x}`}const s="__firebase__banner",a=fB().prod.length>0;function l(){const x=document.getElementById(s);x&&x.remove()}function d(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function u(x,w){x.setAttribute("width","24"),x.setAttribute("id",w),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{RT=!0,l()},x}function m(x,w){x.setAttribute("id",w),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function p(){const x=mB(s),w=n("text"),j=document.getElementById(w)||document.createElement("span"),S=n("learnmore"),_=document.getElementById(S)||document.createElement("a"),E=n("preprendIcon"),C=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const I=x.element;d(I),m(_,S);const M=f();u(C,E),I.append(C,j,_,M),document.body.appendChild(I)}a?(j.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gB(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wr())}function pB(){var t;const e=(t=W0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yB(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vB(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bB(){const t=wr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wB(){return!pB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _B(){try{return typeof indexedDB=="object"}catch{return!1}}function jB(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;e(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB="FirebaseError";class Ja extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=NB,Object.setPrototypeOf(this,Ja.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ug.prototype.create)}}class Ug{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],l=a?SB(a,s):"Error",d=`${this.serviceName}: ${l} (${r}).`;return new Ja(r,d,s)}}function SB(t,e){return t.replace(EB,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const EB=/\{\$([^}]+)}/g;function CB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ad(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const a=t[r],l=e[r];if(IT(a)&&IT(l)){if(!Ad(a,l))return!1}else if(a!==l)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function IT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function km(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,a]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(a)}}),e}function Rm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TB(t,e){const n=new AB(t,e);return n.subscribe.bind(n)}class AB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");kB(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=l_),r.error===void 0&&(r.error=l_),r.complete===void 0&&(r.complete=l_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function l_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t){return t&&t._delegate?t._delegate:t}class Ko{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new hB;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DB(e))try{this.getOrInitializeService({instanceIdentifier:gd})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});s.resolve(a)}catch{}}}}clearInstance(e=gd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gd){return this.instances.has(e)}getOptions(e=gd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);s===d&&l.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:IB(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=gd){return this.component?this.component.multipleInstances?e:gd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IB(t){return t===gd?void 0:t}function DB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RB(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xt||(Xt={}));const PB={debug:Xt.DEBUG,verbose:Xt.VERBOSE,info:Xt.INFO,warn:Xt.WARN,error:Xt.ERROR,silent:Xt.SILENT},OB=Xt.INFO,LB={[Xt.DEBUG]:"log",[Xt.VERBOSE]:"log",[Xt.INFO]:"info",[Xt.WARN]:"warn",[Xt.ERROR]:"error"},VB=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=LB[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class O1{constructor(e){this.name=e,this._logLevel=OB,this._logHandler=VB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xt.DEBUG,...e),this._logHandler(this,Xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xt.VERBOSE,...e),this._logHandler(this,Xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xt.INFO,...e),this._logHandler(this,Xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xt.WARN,...e),this._logHandler(this,Xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xt.ERROR,...e),this._logHandler(this,Xt.ERROR,...e)}}const UB=(t,e)=>e.some(n=>t instanceof n);let DT,MT;function FB(){return DT||(DT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BB(){return MT||(MT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K4=new WeakMap,dj=new WeakMap,X4=new WeakMap,c_=new WeakMap,L1=new WeakMap;function zB(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(tc(t.result)),r()},l=()=>{s(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&K4.set(n,t)}).catch(()=>{}),L1.set(e,t),e}function $B(t){if(dj.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),r()},l=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});dj.set(t,e)}let uj={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dj.get(t);if(e==="objectStoreNames")return t.objectStoreNames||X4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qB(t){uj=t(uj)}function HB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(d_(this),e,...n);return X4.set(s,e.sort?e.sort():[e]),tc(s)}:BB().includes(t)?function(...e){return t.apply(d_(this),e),tc(K4.get(this))}:function(...e){return tc(t.apply(d_(this),e))}}function WB(t){return typeof t=="function"?HB(t):(t instanceof IDBTransaction&&$B(t),UB(t,FB())?new Proxy(t,uj):t)}function tc(t){if(t instanceof IDBRequest)return zB(t);if(c_.has(t))return c_.get(t);const e=WB(t);return e!==t&&(c_.set(t,e),L1.set(e,t)),e}const d_=t=>L1.get(t);function GB(t,e,{blocked:n,upgrade:s,blocking:r,terminated:a}={}){const l=indexedDB.open(t,e),d=tc(l);return s&&l.addEventListener("upgradeneeded",u=>{s(tc(l.result),u.oldVersion,u.newVersion,tc(l.transaction),u)}),n&&l.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),d.then(u=>{a&&u.addEventListener("close",()=>a()),r&&u.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const YB=["get","getKey","getAll","getAllKeys","count"],KB=["put","add","delete","clear"],u_=new Map;function PT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(u_.get(e))return u_.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=KB.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||YB.includes(n)))return;const a=async function(l,...d){const u=this.transaction(l,r?"readwrite":"readonly");let f=u.store;return s&&(f=f.index(d.shift())),(await Promise.all([f[n](...d),r&&u.done]))[0]};return u_.set(e,a),a}qB(t=>({...t,get:(e,n,s)=>PT(e,n)||t.get(e,n,s),has:(e,n)=>!!PT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QB(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function QB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hj="@firebase/app",OT="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=new O1("@firebase/app"),ZB="@firebase/app-compat",JB="@firebase/analytics-compat",ez="@firebase/analytics",tz="@firebase/app-check-compat",nz="@firebase/app-check",sz="@firebase/auth",rz="@firebase/auth-compat",iz="@firebase/database",az="@firebase/data-connect",oz="@firebase/database-compat",lz="@firebase/functions",cz="@firebase/functions-compat",dz="@firebase/installations",uz="@firebase/installations-compat",hz="@firebase/messaging",fz="@firebase/messaging-compat",mz="@firebase/performance",gz="@firebase/performance-compat",pz="@firebase/remote-config",xz="@firebase/remote-config-compat",yz="@firebase/storage",vz="@firebase/storage-compat",bz="@firebase/firestore",wz="@firebase/ai",_z="@firebase/firestore-compat",jz="firebase",Nz="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj="[DEFAULT]",Sz={[hj]:"fire-core",[ZB]:"fire-core-compat",[ez]:"fire-analytics",[JB]:"fire-analytics-compat",[nz]:"fire-app-check",[tz]:"fire-app-check-compat",[sz]:"fire-auth",[rz]:"fire-auth-compat",[iz]:"fire-rtdb",[az]:"fire-data-connect",[oz]:"fire-rtdb-compat",[lz]:"fire-fn",[cz]:"fire-fn-compat",[dz]:"fire-iid",[uz]:"fire-iid-compat",[hz]:"fire-fcm",[fz]:"fire-fcm-compat",[mz]:"fire-perf",[gz]:"fire-perf-compat",[pz]:"fire-rc",[xz]:"fire-rc-compat",[yz]:"fire-gcs",[vz]:"fire-gcs-compat",[bz]:"fire-fst",[_z]:"fire-fst-compat",[wz]:"fire-vertex","fire-js":"fire-js",[jz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=new Map,Ez=new Map,mj=new Map;function LT(t,e){try{t.container.addComponent(e)}catch(n){Xo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cc(t){const e=t.name;if(mj.has(e))return Xo.debug(`There were multiple attempts to register component ${e}.`),!1;mj.set(e,t);for(const n of ig.values())LT(n,t);for(const n of Ez.values())LT(n,t);return!0}function Bg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nc=new Ug("app","Firebase",Cz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ko("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=Nz;function Ly(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:fj,automaticDataCollectionEnabled:!0},e),r=s.name;if(typeof r!="string"||!r)throw nc.create("bad-app-name",{appName:String(r)});if(n||(n=W4()),!n)throw nc.create("no-options");const a=ig.get(r);if(a){if(Ad(n,a.options)&&Ad(s,a.config))return a;throw nc.create("duplicate-app",{appName:r})}const l=new MB(r);for(const u of mj.values())l.addComponent(u);const d=new Tz(n,s,l);return ig.set(r,d),d}function K0(t=fj){const e=ig.get(t);if(!e&&t===fj&&W4())return Ly();if(!e)throw nc.create("no-app",{appName:t});return e}function Q4(){return Array.from(ig.values())}function Mi(t,e,n){var s;let r=(s=Sz[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${r}" with version "${e}":`];a&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xo.warn(d.join(" "));return}cc(new Ko(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az="firebase-heartbeat-database",kz=1,ag="firebase-heartbeat-store";let h_=null;function Z4(){return h_||(h_=GB(Az,kz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ag)}catch(n){console.warn(n)}}}}).catch(t=>{throw nc.create("idb-open",{originalErrorMessage:t.message})})),h_}async function Rz(t){try{const n=(await Z4()).transaction(ag),s=await n.objectStore(ag).get(J4(t));return await n.done,s}catch(e){if(e instanceof Ja)Xo.warn(e.message);else{const n=nc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xo.warn(n.message)}}}async function VT(t,e){try{const s=(await Z4()).transaction(ag,"readwrite");await s.objectStore(ag).put(e,J4(t)),await s.done}catch(n){if(n instanceof Ja)Xo.warn(n.message);else{const s=nc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xo.warn(s.message)}}}function J4(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=1024,Dz=30;class Mz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Oz(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=UT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>Dz){const l=Lz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Xo.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=UT(),{heartbeatsToSend:s,unsentEntries:r}=Pz(this._heartbeatsCache.heartbeats),a=Oy(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Xo.warn(n),""}}}function UT(){return new Date().toISOString().substring(0,10)}function Pz(t,e=Iz){const n=[];let s=t.slice();for(const r of t){const a=n.find(l=>l.agent===r.agent);if(a){if(a.dates.push(r.date),FT(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),FT(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Oz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _B()?jB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Rz(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return VT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return VT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function FT(t){return Oy(JSON.stringify({version:2,heartbeats:t})).length}function Lz(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(t){cc(new Ko("platform-logger",e=>new XB(e),"PRIVATE")),cc(new Ko("heartbeat",e=>new Mz(e),"PRIVATE")),Mi(hj,OT,t),Mi(hj,OT,"esm2017"),Mi("fire-js","")}Vz("");var Uz="firebase",Fz="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi(Uz,Fz,"app");var BT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sc,eD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,A){function T(){}T.prototype=A.prototype,D.D=A.prototype,D.prototype=new T,D.prototype.constructor=D,D.C=function(R,P,O){for(var F=Array(arguments.length-2),J=2;J<arguments.length;J++)F[J-2]=arguments[J];return A.prototype[P].apply(R,F)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,A,T){T||(T=0);var R=Array(16);if(typeof A=="string")for(var P=0;16>P;++P)R[P]=A.charCodeAt(T++)|A.charCodeAt(T++)<<8|A.charCodeAt(T++)<<16|A.charCodeAt(T++)<<24;else for(P=0;16>P;++P)R[P]=A[T++]|A[T++]<<8|A[T++]<<16|A[T++]<<24;A=D.g[0],T=D.g[1],P=D.g[2];var O=D.g[3],F=A+(O^T&(P^O))+R[0]+3614090360&4294967295;A=T+(F<<7&4294967295|F>>>25),F=O+(P^A&(T^P))+R[1]+3905402710&4294967295,O=A+(F<<12&4294967295|F>>>20),F=P+(T^O&(A^T))+R[2]+606105819&4294967295,P=O+(F<<17&4294967295|F>>>15),F=T+(A^P&(O^A))+R[3]+3250441966&4294967295,T=P+(F<<22&4294967295|F>>>10),F=A+(O^T&(P^O))+R[4]+4118548399&4294967295,A=T+(F<<7&4294967295|F>>>25),F=O+(P^A&(T^P))+R[5]+1200080426&4294967295,O=A+(F<<12&4294967295|F>>>20),F=P+(T^O&(A^T))+R[6]+2821735955&4294967295,P=O+(F<<17&4294967295|F>>>15),F=T+(A^P&(O^A))+R[7]+4249261313&4294967295,T=P+(F<<22&4294967295|F>>>10),F=A+(O^T&(P^O))+R[8]+1770035416&4294967295,A=T+(F<<7&4294967295|F>>>25),F=O+(P^A&(T^P))+R[9]+2336552879&4294967295,O=A+(F<<12&4294967295|F>>>20),F=P+(T^O&(A^T))+R[10]+4294925233&4294967295,P=O+(F<<17&4294967295|F>>>15),F=T+(A^P&(O^A))+R[11]+2304563134&4294967295,T=P+(F<<22&4294967295|F>>>10),F=A+(O^T&(P^O))+R[12]+1804603682&4294967295,A=T+(F<<7&4294967295|F>>>25),F=O+(P^A&(T^P))+R[13]+4254626195&4294967295,O=A+(F<<12&4294967295|F>>>20),F=P+(T^O&(A^T))+R[14]+2792965006&4294967295,P=O+(F<<17&4294967295|F>>>15),F=T+(A^P&(O^A))+R[15]+1236535329&4294967295,T=P+(F<<22&4294967295|F>>>10),F=A+(P^O&(T^P))+R[1]+4129170786&4294967295,A=T+(F<<5&4294967295|F>>>27),F=O+(T^P&(A^T))+R[6]+3225465664&4294967295,O=A+(F<<9&4294967295|F>>>23),F=P+(A^T&(O^A))+R[11]+643717713&4294967295,P=O+(F<<14&4294967295|F>>>18),F=T+(O^A&(P^O))+R[0]+3921069994&4294967295,T=P+(F<<20&4294967295|F>>>12),F=A+(P^O&(T^P))+R[5]+3593408605&4294967295,A=T+(F<<5&4294967295|F>>>27),F=O+(T^P&(A^T))+R[10]+38016083&4294967295,O=A+(F<<9&4294967295|F>>>23),F=P+(A^T&(O^A))+R[15]+3634488961&4294967295,P=O+(F<<14&4294967295|F>>>18),F=T+(O^A&(P^O))+R[4]+3889429448&4294967295,T=P+(F<<20&4294967295|F>>>12),F=A+(P^O&(T^P))+R[9]+568446438&4294967295,A=T+(F<<5&4294967295|F>>>27),F=O+(T^P&(A^T))+R[14]+3275163606&4294967295,O=A+(F<<9&4294967295|F>>>23),F=P+(A^T&(O^A))+R[3]+4107603335&4294967295,P=O+(F<<14&4294967295|F>>>18),F=T+(O^A&(P^O))+R[8]+1163531501&4294967295,T=P+(F<<20&4294967295|F>>>12),F=A+(P^O&(T^P))+R[13]+2850285829&4294967295,A=T+(F<<5&4294967295|F>>>27),F=O+(T^P&(A^T))+R[2]+4243563512&4294967295,O=A+(F<<9&4294967295|F>>>23),F=P+(A^T&(O^A))+R[7]+1735328473&4294967295,P=O+(F<<14&4294967295|F>>>18),F=T+(O^A&(P^O))+R[12]+2368359562&4294967295,T=P+(F<<20&4294967295|F>>>12),F=A+(T^P^O)+R[5]+4294588738&4294967295,A=T+(F<<4&4294967295|F>>>28),F=O+(A^T^P)+R[8]+2272392833&4294967295,O=A+(F<<11&4294967295|F>>>21),F=P+(O^A^T)+R[11]+1839030562&4294967295,P=O+(F<<16&4294967295|F>>>16),F=T+(P^O^A)+R[14]+4259657740&4294967295,T=P+(F<<23&4294967295|F>>>9),F=A+(T^P^O)+R[1]+2763975236&4294967295,A=T+(F<<4&4294967295|F>>>28),F=O+(A^T^P)+R[4]+1272893353&4294967295,O=A+(F<<11&4294967295|F>>>21),F=P+(O^A^T)+R[7]+4139469664&4294967295,P=O+(F<<16&4294967295|F>>>16),F=T+(P^O^A)+R[10]+3200236656&4294967295,T=P+(F<<23&4294967295|F>>>9),F=A+(T^P^O)+R[13]+681279174&4294967295,A=T+(F<<4&4294967295|F>>>28),F=O+(A^T^P)+R[0]+3936430074&4294967295,O=A+(F<<11&4294967295|F>>>21),F=P+(O^A^T)+R[3]+3572445317&4294967295,P=O+(F<<16&4294967295|F>>>16),F=T+(P^O^A)+R[6]+76029189&4294967295,T=P+(F<<23&4294967295|F>>>9),F=A+(T^P^O)+R[9]+3654602809&4294967295,A=T+(F<<4&4294967295|F>>>28),F=O+(A^T^P)+R[12]+3873151461&4294967295,O=A+(F<<11&4294967295|F>>>21),F=P+(O^A^T)+R[15]+530742520&4294967295,P=O+(F<<16&4294967295|F>>>16),F=T+(P^O^A)+R[2]+3299628645&4294967295,T=P+(F<<23&4294967295|F>>>9),F=A+(P^(T|~O))+R[0]+4096336452&4294967295,A=T+(F<<6&4294967295|F>>>26),F=O+(T^(A|~P))+R[7]+1126891415&4294967295,O=A+(F<<10&4294967295|F>>>22),F=P+(A^(O|~T))+R[14]+2878612391&4294967295,P=O+(F<<15&4294967295|F>>>17),F=T+(O^(P|~A))+R[5]+4237533241&4294967295,T=P+(F<<21&4294967295|F>>>11),F=A+(P^(T|~O))+R[12]+1700485571&4294967295,A=T+(F<<6&4294967295|F>>>26),F=O+(T^(A|~P))+R[3]+2399980690&4294967295,O=A+(F<<10&4294967295|F>>>22),F=P+(A^(O|~T))+R[10]+4293915773&4294967295,P=O+(F<<15&4294967295|F>>>17),F=T+(O^(P|~A))+R[1]+2240044497&4294967295,T=P+(F<<21&4294967295|F>>>11),F=A+(P^(T|~O))+R[8]+1873313359&4294967295,A=T+(F<<6&4294967295|F>>>26),F=O+(T^(A|~P))+R[15]+4264355552&4294967295,O=A+(F<<10&4294967295|F>>>22),F=P+(A^(O|~T))+R[6]+2734768916&4294967295,P=O+(F<<15&4294967295|F>>>17),F=T+(O^(P|~A))+R[13]+1309151649&4294967295,T=P+(F<<21&4294967295|F>>>11),F=A+(P^(T|~O))+R[4]+4149444226&4294967295,A=T+(F<<6&4294967295|F>>>26),F=O+(T^(A|~P))+R[11]+3174756917&4294967295,O=A+(F<<10&4294967295|F>>>22),F=P+(A^(O|~T))+R[2]+718787259&4294967295,P=O+(F<<15&4294967295|F>>>17),F=T+(O^(P|~A))+R[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(P+(F<<21&4294967295|F>>>11))&4294967295,D.g[2]=D.g[2]+P&4294967295,D.g[3]=D.g[3]+O&4294967295}s.prototype.u=function(D,A){A===void 0&&(A=D.length);for(var T=A-this.blockSize,R=this.B,P=this.h,O=0;O<A;){if(P==0)for(;O<=T;)r(this,D,O),O+=this.blockSize;if(typeof D=="string"){for(;O<A;)if(R[P++]=D.charCodeAt(O++),P==this.blockSize){r(this,R),P=0;break}}else for(;O<A;)if(R[P++]=D[O++],P==this.blockSize){r(this,R),P=0;break}}this.h=P,this.o+=A},s.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;var T=8*this.o;for(A=D.length-8;A<D.length;++A)D[A]=T&255,T/=256;for(this.u(D),D=Array(16),A=T=0;4>A;++A)for(var R=0;32>R;R+=8)D[T++]=this.g[A]>>>R&255;return D};function a(D,A){var T=d;return Object.prototype.hasOwnProperty.call(T,D)?T[D]:T[D]=A(D)}function l(D,A){this.h=A;for(var T=[],R=!0,P=D.length-1;0<=P;P--){var O=D[P]|0;R&&O==A||(T[P]=O,R=!1)}this.g=T}var d={};function u(D){return-128<=D&&128>D?a(D,function(A){return new l([A|0],0>A?-1:0)}):new l([D|0],0>D?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return _(f(-D));for(var A=[],T=1,R=0;D>=T;R++)A[R]=D/T|0,T*=4294967296;return new l(A,0)}function m(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return _(m(D.substring(1),A));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=f(Math.pow(A,8)),R=p,P=0;P<D.length;P+=8){var O=Math.min(8,D.length-P),F=parseInt(D.substring(P,P+O),A);8>O?(O=f(Math.pow(A,O)),R=R.j(O).add(f(F))):(R=R.j(T),R=R.add(f(F)))}return R}var p=u(0),x=u(1),w=u(16777216);t=l.prototype,t.m=function(){if(S(this))return-_(this).m();for(var D=0,A=1,T=0;T<this.g.length;T++){var R=this.i(T);D+=(0<=R?R:4294967296+R)*A,A*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(j(this))return"0";if(S(this))return"-"+_(this).toString(D);for(var A=f(Math.pow(D,6)),T=this,R="";;){var P=M(T,A).g;T=E(T,P.j(A));var O=((0<T.g.length?T.g[0]:T.h)>>>0).toString(D);if(T=P,j(T))return O+R;for(;6>O.length;)O="0"+O;R=O+R}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function j(D){if(D.h!=0)return!1;for(var A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function S(D){return D.h==-1}t.l=function(D){return D=E(this,D),S(D)?-1:j(D)?0:1};function _(D){for(var A=D.g.length,T=[],R=0;R<A;R++)T[R]=~D.g[R];return new l(T,~D.h).add(x)}t.abs=function(){return S(this)?_(this):this},t.add=function(D){for(var A=Math.max(this.g.length,D.g.length),T=[],R=0,P=0;P<=A;P++){var O=R+(this.i(P)&65535)+(D.i(P)&65535),F=(O>>>16)+(this.i(P)>>>16)+(D.i(P)>>>16);R=F>>>16,O&=65535,F&=65535,T[P]=F<<16|O}return new l(T,T[T.length-1]&-2147483648?-1:0)};function E(D,A){return D.add(_(A))}t.j=function(D){if(j(this)||j(D))return p;if(S(this))return S(D)?_(this).j(_(D)):_(_(this).j(D));if(S(D))return _(this.j(_(D)));if(0>this.l(w)&&0>D.l(w))return f(this.m()*D.m());for(var A=this.g.length+D.g.length,T=[],R=0;R<2*A;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(var P=0;P<D.g.length;P++){var O=this.i(R)>>>16,F=this.i(R)&65535,J=D.i(P)>>>16,Z=D.i(P)&65535;T[2*R+2*P]+=F*Z,C(T,2*R+2*P),T[2*R+2*P+1]+=O*Z,C(T,2*R+2*P+1),T[2*R+2*P+1]+=F*J,C(T,2*R+2*P+1),T[2*R+2*P+2]+=O*J,C(T,2*R+2*P+2)}for(R=0;R<A;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=A;R<2*A;R++)T[R]=0;return new l(T,0)};function C(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function I(D,A){this.g=D,this.h=A}function M(D,A){if(j(A))throw Error("division by zero");if(j(D))return new I(p,p);if(S(D))return A=M(_(D),A),new I(_(A.g),_(A.h));if(S(A))return A=M(D,_(A)),new I(_(A.g),A.h);if(30<D.g.length){if(S(D)||S(A))throw Error("slowDivide_ only works with positive integers.");for(var T=x,R=A;0>=R.l(D);)T=V(T),R=V(R);var P=z(T,1),O=z(R,1);for(R=z(R,2),T=z(T,2);!j(R);){var F=O.add(R);0>=F.l(D)&&(P=P.add(T),O=F),R=z(R,1),T=z(T,1)}return A=E(D,P.j(A)),new I(P,A)}for(P=p;0<=D.l(A);){for(T=Math.max(1,Math.floor(D.m()/A.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),O=f(T),F=O.j(A);S(F)||0<F.l(D);)T-=R,O=f(T),F=O.j(A);j(O)&&(O=x),P=P.add(O),D=E(D,F)}return new I(P,D)}t.A=function(D){return M(this,D).h},t.and=function(D){for(var A=Math.max(this.g.length,D.g.length),T=[],R=0;R<A;R++)T[R]=this.i(R)&D.i(R);return new l(T,this.h&D.h)},t.or=function(D){for(var A=Math.max(this.g.length,D.g.length),T=[],R=0;R<A;R++)T[R]=this.i(R)|D.i(R);return new l(T,this.h|D.h)},t.xor=function(D){for(var A=Math.max(this.g.length,D.g.length),T=[],R=0;R<A;R++)T[R]=this.i(R)^D.i(R);return new l(T,this.h^D.h)};function V(D){for(var A=D.g.length+1,T=[],R=0;R<A;R++)T[R]=D.i(R)<<1|D.i(R-1)>>>31;return new l(T,D.h)}function z(D,A){var T=A>>5;A%=32;for(var R=D.g.length-T,P=[],O=0;O<R;O++)P[O]=0<A?D.i(O+T)>>>A|D.i(O+T+1)<<32-A:D.i(O+T);return new l(P,D.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,eD=s,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=m,sc=l}).apply(typeof BT<"u"?BT:typeof self<"u"?self:typeof window<"u"?window:{});var Rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tD,Im,nD,gy,gj,sD,rD,iD;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,k,L){return y==Array.prototype||y==Object.prototype||(y[k]=L.value),y};function n(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rx=="object"&&Rx];for(var k=0;k<y.length;++k){var L=y[k];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var s=n(this);function r(y,k){if(k)e:{var L=s;y=y.split(".");for(var G=0;G<y.length-1;G++){var ie=y[G];if(!(ie in L))break e;L=L[ie]}y=y[y.length-1],G=L[y],k=k(G),k!=G&&k!=null&&e(L,y,{configurable:!0,writable:!0,value:k})}}function a(y,k){y instanceof String&&(y+="");var L=0,G=!1,ie={next:function(){if(!G&&L<y.length){var me=L++;return{value:k(me,y[me]),done:!1}}return G=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}r("Array.prototype.values",function(y){return y||function(){return a(this,function(k,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function u(y){var k=typeof y;return k=k!="object"?k:y?Array.isArray(y)?"array":k:"null",k=="array"||k=="object"&&typeof y.length=="number"}function f(y){var k=typeof y;return k=="object"&&y!=null||k=="function"}function m(y,k,L){return y.call.apply(y.bind,arguments)}function p(y,k,L){if(!y)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,G),y.apply(k,ie)}}return function(){return y.apply(k,arguments)}}function x(y,k,L){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,x.apply(null,arguments)}function w(y,k){var L=Array.prototype.slice.call(arguments,1);return function(){var G=L.slice();return G.push.apply(G,arguments),y.apply(this,G)}}function j(y,k){function L(){}L.prototype=k.prototype,y.aa=k.prototype,y.prototype=new L,y.prototype.constructor=y,y.Qb=function(G,ie,me){for(var Le=Array(arguments.length-2),tn=2;tn<arguments.length;tn++)Le[tn-2]=arguments[tn];return k.prototype[ie].apply(G,Le)}}function S(y){const k=y.length;if(0<k){const L=Array(k);for(let G=0;G<k;G++)L[G]=y[G];return L}return[]}function _(y,k){for(let L=1;L<arguments.length;L++){const G=arguments[L];if(u(G)){const ie=y.length||0,me=G.length||0;y.length=ie+me;for(let Le=0;Le<me;Le++)y[ie+Le]=G[Le]}else y.push(G)}}class E{constructor(k,L){this.i=k,this.j=L,this.h=0,this.g=null}get(){let k;return 0<this.h?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function C(y){return/^[\s\xa0]*$/.test(y)}function I(){var y=d.navigator;return y&&(y=y.userAgent)?y:""}function M(y){return M[" "](y),y}M[" "]=function(){};var V=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function z(y,k,L){for(const G in y)k.call(L,y[G],G,y)}function D(y,k){for(const L in y)k.call(void 0,y[L],L,y)}function A(y){const k={};for(const L in y)k[L]=y[L];return k}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(y,k){let L,G;for(let ie=1;ie<arguments.length;ie++){G=arguments[ie];for(L in G)y[L]=G[L];for(let me=0;me<T.length;me++)L=T[me],Object.prototype.hasOwnProperty.call(G,L)&&(y[L]=G[L])}}function P(y){var k=1;y=y.split(":");const L=[];for(;0<k&&y.length;)L.push(y.shift()),k--;return y.length&&L.push(y.join(":")),L}function O(y){d.setTimeout(()=>{throw y},0)}function F(){var y=H;let k=null;return y.g&&(k=y.g,y.g=y.g.next,y.g||(y.h=null),k.next=null),k}class J{constructor(){this.h=this.g=null}add(k,L){const G=Z.get();G.set(k,L),this.h?this.h.next=G:this.g=G,this.h=G}}var Z=new E(()=>new q,y=>y.reset());class q{constructor(){this.next=this.g=this.h=null}set(k,L){this.h=k,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,W=!1,H=new J,B=()=>{const y=d.Promise.resolve(void 0);Y=()=>{y.then(K)}};var K=()=>{for(var y;y=F();){try{y.h.call(y.g)}catch(L){O(L)}var k=Z;k.j(y),100>k.h&&(k.h++,y.next=k.g,k.g=y)}W=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(y,k){this.type=y,this.g=this.target=k,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var y=!1,k=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const L=()=>{};d.addEventListener("test",L,k),d.removeEventListener("test",L,k)}catch{}return y}();function ke(y,k){if(te.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var L=this.type=y.type,G=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=k,k=y.relatedTarget){if(V){e:{try{M(k.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(k=null)}}else L=="mouseover"?k=y.fromElement:L=="mouseout"&&(k=y.toElement);this.relatedTarget=k,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Ee[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&ke.aa.h.call(this)}}j(ke,te);var Ee={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),le=0;function Ne(y,k,L,G,ie){this.listener=y,this.proxy=null,this.src=k,this.type=L,this.capture=!!G,this.ha=ie,this.key=++le,this.da=this.fa=!1}function Pe(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Ge(y){this.src=y,this.g={},this.h=0}Ge.prototype.add=function(y,k,L,G,ie){var me=y.toString();y=this.g[me],y||(y=this.g[me]=[],this.h++);var Le=ot(y,k,G,ie);return-1<Le?(k=y[Le],L||(k.fa=!1)):(k=new Ne(k,this.src,me,!!G,ie),k.fa=L,y.push(k)),k};function Ye(y,k){var L=k.type;if(L in y.g){var G=y.g[L],ie=Array.prototype.indexOf.call(G,k,void 0),me;(me=0<=ie)&&Array.prototype.splice.call(G,ie,1),me&&(Pe(k),y.g[L].length==0&&(delete y.g[L],y.h--))}}function ot(y,k,L,G){for(var ie=0;ie<y.length;++ie){var me=y[ie];if(!me.da&&me.listener==k&&me.capture==!!L&&me.ha==G)return ie}return-1}var Dt="closure_lm_"+(1e6*Math.random()|0),je={};function qe(y,k,L,G,ie){if(Array.isArray(k)){for(var me=0;me<k.length;me++)qe(y,k[me],L,G,ie);return null}return L=Te(L),y&&y[ve]?y.K(k,L,f(G)?!!G.capture:!1,ie):ct(y,k,L,!1,G,ie)}function ct(y,k,L,G,ie,me){if(!k)throw Error("Invalid event type");var Le=f(ie)?!!ie.capture:!!ie,tn=Ae(y);if(tn||(y[Dt]=tn=new Ge(y)),L=tn.add(k,L,G,Le,me),L.proxy)return L;if(G=dt(),L.proxy=G,G.src=y,G.listener=L,y.addEventListener)fe||(ie=Le),ie===void 0&&(ie=!1),y.addEventListener(k.toString(),G,ie);else if(y.attachEvent)y.attachEvent(re(k.toString()),G);else if(y.addListener&&y.removeListener)y.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return L}function dt(){function y(L){return k.call(y.src,y.listener,L)}const k=he;return y}function pt(y,k,L,G,ie){if(Array.isArray(k))for(var me=0;me<k.length;me++)pt(y,k[me],L,G,ie);else G=f(G)?!!G.capture:!!G,L=Te(L),y&&y[ve]?(y=y.i,k=String(k).toString(),k in y.g&&(me=y.g[k],L=ot(me,L,G,ie),-1<L&&(Pe(me[L]),Array.prototype.splice.call(me,L,1),me.length==0&&(delete y.g[k],y.h--)))):y&&(y=Ae(y))&&(k=y.g[k.toString()],y=-1,k&&(y=ot(k,L,G,ie)),(L=-1<y?k[y]:null)&&X(L))}function X(y){if(typeof y!="number"&&y&&!y.da){var k=y.src;if(k&&k[ve])Ye(k.i,y);else{var L=y.type,G=y.proxy;k.removeEventListener?k.removeEventListener(L,G,y.capture):k.detachEvent?k.detachEvent(re(L),G):k.addListener&&k.removeListener&&k.removeListener(G),(L=Ae(k))?(Ye(L,y),L.h==0&&(L.src=null,k[Dt]=null)):Pe(y)}}}function re(y){return y in je?je[y]:je[y]="on"+y}function he(y,k){if(y.da)y=!0;else{k=new ke(k,this);var L=y.listener,G=y.ha||y.src;y.fa&&X(y),y=L.call(G,k)}return y}function Ae(y){return y=y[Dt],y instanceof Ge?y:null}var Re="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(y){return typeof y=="function"?y:(y[Re]||(y[Re]=function(k){return y.handleEvent(k)}),y[Re])}function Me(){ne.call(this),this.i=new Ge(this),this.M=this,this.F=null}j(Me,ne),Me.prototype[ve]=!0,Me.prototype.removeEventListener=function(y,k,L,G){pt(this,y,k,L,G)};function Ke(y,k){var L,G=y.F;if(G)for(L=[];G;G=G.F)L.push(G);if(y=y.M,G=k.type||k,typeof k=="string")k=new te(k,y);else if(k instanceof te)k.target=k.target||y;else{var ie=k;k=new te(G,y),R(k,ie)}if(ie=!0,L)for(var me=L.length-1;0<=me;me--){var Le=k.g=L[me];ie=xt(Le,G,!0,k)&&ie}if(Le=k.g=y,ie=xt(Le,G,!0,k)&&ie,ie=xt(Le,G,!1,k)&&ie,L)for(me=0;me<L.length;me++)Le=k.g=L[me],ie=xt(Le,G,!1,k)&&ie}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var y=this.i,k;for(k in y.g){for(var L=y.g[k],G=0;G<L.length;G++)Pe(L[G]);delete y.g[k],y.h--}}this.F=null},Me.prototype.K=function(y,k,L,G){return this.i.add(String(y),k,!1,L,G)},Me.prototype.L=function(y,k,L,G){return this.i.add(String(y),k,!0,L,G)};function xt(y,k,L,G){if(k=y.i.g[String(k)],!k)return!0;k=k.concat();for(var ie=!0,me=0;me<k.length;++me){var Le=k[me];if(Le&&!Le.da&&Le.capture==L){var tn=Le.listener,Ms=Le.ha||Le.src;Le.fa&&Ye(y.i,Le),ie=tn.call(Ms,G)!==!1&&ie}}return ie&&!G.defaultPrevented}function Jt(y,k,L){if(typeof y=="function")L&&(y=x(y,L));else if(y&&typeof y.handleEvent=="function")y=x(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(k)?-1:d.setTimeout(y,k||0)}function dr(y){y.g=Jt(()=>{y.g=null,y.i&&(y.i=!1,dr(y))},y.l);const k=y.h;y.h=null,y.m.apply(null,k)}class Rs extends ne{constructor(k,L){super(),this.m=k,this.l=L,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:dr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ur(y){ne.call(this),this.h=y,this.g={}}j(ur,ne);var zs=[];function $s(y){z(y.g,function(k,L){this.g.hasOwnProperty(L)&&X(k)},y),y.g={}}ur.prototype.N=function(){ur.aa.N.call(this),$s(this)},ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pe=d.JSON.stringify,Pt=d.JSON.parse,wn=class{stringify(y){return d.JSON.stringify(y,void 0)}parse(y){return d.JSON.parse(y,void 0)}};function Wt(){}Wt.prototype.h=null;function en(y){return y.h||(y.h=y.i())}function _n(){}var ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mn(){te.call(this,"d")}j(Mn,te);function Fe(){te.call(this,"c")}j(Fe,te);var Nt={},Fn=null;function cn(){return Fn=Fn||new Me}Nt.La="serverreachability";function Is(y){te.call(this,Nt.La,y)}j(Is,te);function fn(y){const k=cn();Ke(k,new Is(k))}Nt.STAT_EVENT="statevent";function ge(y,k){te.call(this,Nt.STAT_EVENT,y),this.stat=k}j(ge,te);function Ce(y){const k=cn();Ke(k,new ge(k,y))}Nt.Ma="timingevent";function Mt(y,k){te.call(this,Nt.Ma,y),this.size=k}j(Mt,te);function Et(y,k){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){y()},k)}function Ot(){this.g=!0}Ot.prototype.xa=function(){this.g=!1};function Hn(y,k,L,G,ie,me){y.info(function(){if(y.g)if(me)for(var Le="",tn=me.split("&"),Ms=0;Ms<tn.length;Ms++){var nn=tn[Ms].split("=");if(1<nn.length){var Hs=nn[0];nn=nn[1];var Ps=Hs.split("_");Le=2<=Ps.length&&Ps[1]=="type"?Le+(Hs+"="+nn+"&"):Le+(Hs+"=redacted&")}}else Le=null;else Le=me;return"XMLHTTP REQ ("+G+") [attempt "+ie+"]: "+k+`
`+L+`
`+Le})}function Nr(y,k,L,G,ie,me,Le){y.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ie+"]: "+k+`
`+L+`
`+me+" "+Le})}function gs(y,k,L,G){y.info(function(){return"XMLHTTP TEXT ("+k+"): "+Wr(y,L)+(G?" "+G:"")})}function da(y,k){y.info(function(){return"TIMEOUT: "+k})}Ot.prototype.info=function(){};function Wr(y,k){if(!y.g)return k;if(!k)return null;try{var L=JSON.parse(k);if(L){for(y=0;y<L.length;y++)if(Array.isArray(L[y])){var G=L[y];if(!(2>G.length)){var ie=G[1];if(Array.isArray(ie)&&!(1>ie.length)){var me=ie[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Le=1;Le<ie.length;Le++)ie[Le]=""}}}}return pe(L)}catch{return k}}var Gr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kr;function Xr(){}j(Xr,Wt),Xr.prototype.g=function(){return new XMLHttpRequest},Xr.prototype.i=function(){return{}},Kr=new Xr;function Ds(y,k,L,G){this.j=y,this.i=k,this.l=L,this.R=G||1,this.U=new ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yn}function Yn(){this.i=null,this.g="",this.h=!1}var gf={},nu={};function $i(y,k,L){y.L=1,y.v=Pc(Qr(k)),y.m=L,y.P=!0,so(y,null)}function so(y,k){y.F=Date.now(),Rc(y),y.A=Qr(y.v);var L=y.A,G=y.R;Array.isArray(G)||(G=[String(G)]),wf(L.i,"t",G),y.C=0,L=y.j.J,y.h=new Yn,y.g=Ep(y.j,L?k:null,!y.m),0<y.O&&(y.M=new Rs(x(y.Y,y,y.g),y.O)),k=y.U,L=y.g,G=y.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(zs[0]=ie.toString()),ie=zs);for(var me=0;me<ie.length;me++){var Le=qe(L,ie[me],G||k.handleEvent,!1,k.h||k);if(!Le)break;k.g[Le.key]=Le}k=y.H?A(y.H):{},y.m?(y.u||(y.u="POST"),k["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,k)):(y.u="GET",y.g.ea(y.A,y.u,null,k)),fn(),Hn(y.i,y.u,y.A,y.l,y.R,y.m)}Ds.prototype.ca=function(y){y=y.target;const k=this.M;k&&_i(y)==3?k.j():this.Y(y)},Ds.prototype.Y=function(y){try{if(y==this.g)e:{const Ps=_i(this.g);var k=this.g.Ba();const ho=this.g.Z();if(!(3>Ps)&&(Ps!=3||this.g&&(this.h.h||this.g.oa()||yp(this.g)))){this.J||Ps!=4||k==7||(k==8||0>=ho?fn(3):fn(2)),ul(this);var L=this.g.Z();this.X=L;t:if(up(this)){var G=yp(this.g);y="";var ie=G.length,me=_i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tr(this),ua(this);var Le="";break t}this.h.i=new d.TextDecoder}for(k=0;k<ie;k++)this.h.h=!0,y+=this.h.i.decode(G[k],{stream:!(me&&k==ie-1)});G.length=0,this.h.g+=y,this.C=0,Le=this.h.g}else Le=this.g.oa();if(this.o=L==200,Nr(this.i,this.u,this.A,this.l,this.R,Ps,L),this.o){if(this.T&&!this.K){t:{if(this.g){var tn,Ms=this.g;if((tn=Ms.g?Ms.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(tn)){var nn=tn;break t}}nn=null}if(L=nn)gs(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ic(this,L);else{this.o=!1,this.s=3,Ce(12),tr(this),ua(this);break e}}if(this.P){L=!0;let nr;for(;!this.J&&this.C<Le.length;)if(nr=hp(this,Le),nr==nu){Ps==4&&(this.s=4,Ce(14),L=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(nr==gf){this.s=4,Ce(15),gs(this.i,this.l,Le,"[Invalid Chunk]"),L=!1;break}else gs(this.i,this.l,nr,null),Ic(this,nr);if(up(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ps!=4||Le.length!=0||this.h.h||(this.s=1,Ce(16),L=!1),this.o=this.o&&L,!L)gs(this.i,this.l,Le,"[Invalid Chunked Response]"),tr(this),ua(this);else if(0<Le.length&&!this.W){this.W=!0;var Hs=this.j;Hs.g==this&&Hs.ba&&!Hs.M&&(Hs.j.info("Great, no buffering proxy detected. Bytes received: "+Le.length),$c(Hs),Hs.M=!0,Ce(11))}}else gs(this.i,this.l,Le,null),Ic(this,Le);Ps==4&&tr(this),this.o&&!this.J&&(Ps==4?jp(this.j,this):(this.o=!1,Rc(this)))}else lb(this.g),L==400&&0<Le.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),tr(this),ua(this)}}}catch{}finally{}};function up(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function hp(y,k){var L=y.C,G=k.indexOf(`
`,L);return G==-1?nu:(L=Number(k.substring(L,G)),isNaN(L)?gf:(G+=1,G+L>k.length?nu:(k=k.slice(G,G+L),y.C=G+L,k)))}Ds.prototype.cancel=function(){this.J=!0,tr(this)};function Rc(y){y.S=Date.now()+y.I,fp(y,y.I)}function fp(y,k){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Et(x(y.ba,y),k)}function ul(y){y.B&&(d.clearTimeout(y.B),y.B=null)}Ds.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(da(this.i,this.A),this.L!=2&&(fn(),Ce(17)),tr(this),this.s=2,ua(this)):fp(this,this.S-y)};function ua(y){y.j.G==0||y.J||jp(y.j,y)}function tr(y){ul(y);var k=y.M;k&&typeof k.ma=="function"&&k.ma(),y.M=null,$s(y.U),y.g&&(k=y.g,y.g=null,k.abort(),k.ma())}function Ic(y,k){try{var L=y.j;if(L.G!=0&&(L.g==y||pf(L.h,y))){if(!y.K&&pf(L.h,y)&&L.G==3){try{var G=L.Da.g.parse(k)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ie=G;if(ie[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<y.F)mu(L),hu(L);else break e;Ef(L),Ce(18)}}else L.za=ie[1],0<L.za-L.T&&37500>ie[2]&&L.F&&L.v==0&&!L.C&&(L.C=Et(x(L.Za,L),6e3));if(1>=ru(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else uo(L,11)}else if((y.K||L.g==y)&&mu(L),!C(k))for(ie=L.Da.g.parse(k),k=0;k<ie.length;k++){let nn=ie[k];if(L.T=nn[0],nn=nn[1],L.G==2)if(nn[0]=="c"){L.K=nn[1],L.ia=nn[2];const Hs=nn[3];Hs!=null&&(L.la=Hs,L.j.info("VER="+L.la));const Ps=nn[4];Ps!=null&&(L.Aa=Ps,L.j.info("SVER="+L.Aa));const ho=nn[5];ho!=null&&typeof ho=="number"&&0<ho&&(G=1.5*ho,L.L=G,L.j.info("backChannelRequestTimeoutMs_="+G)),G=L;const nr=y.g;if(nr){const ya=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ya){var me=G.h;me.g||ya.indexOf("spdy")==-1&&ya.indexOf("quic")==-1&&ya.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(iu(me,me.h),me.h=null))}if(G.D){const Tf=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Tf&&(G.ya=Tf,kn(G.I,G.D,Tf))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-y.F,L.j.info("Handshake RTT: "+L.R+"ms")),G=L;var Le=y;if(G.qa=Sp(G,G.J?G.ia:null,G.W),Le.K){Sr(G.h,Le);var tn=Le,Ms=G.L;Ms&&(tn.I=Ms),tn.B&&(ul(tn),Rc(tn)),G.g=Le}else wp(G);0<L.i.length&&fu(L)}else nn[0]!="stop"&&nn[0]!="close"||uo(L,7);else L.G==3&&(nn[0]=="stop"||nn[0]=="close"?nn[0]=="stop"?uo(L,7):Nf(L):nn[0]!="noop"&&L.l&&L.l.ta(nn),L.v=0)}}fn(4)}catch{}}var mp=class{constructor(y,k){this.g=y,this.map=k}};function ro(y){this.l=y||10,d.PerformanceNavigationTiming?(y=d.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function su(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function ru(y){return y.h?1:y.g?y.g.size:0}function pf(y,k){return y.h?y.h==k:y.g?y.g.has(k):!1}function iu(y,k){y.g?y.g.add(k):y.h=k}function Sr(y,k){y.h&&y.h==k?y.h=null:y.g&&y.g.has(k)&&y.g.delete(k)}ro.prototype.cancel=function(){if(this.i=xf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function xf(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let k=y.i;for(const L of y.g.values())k=k.concat(L.D);return k}return S(y.i)}function rb(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(u(y)){for(var k=[],L=y.length,G=0;G<L;G++)k.push(y[G]);return k}k=[],L=0;for(G in y)k[L++]=y[G];return k}function au(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(u(y)||typeof y=="string"){var k=[];y=y.length;for(var L=0;L<y;L++)k.push(L);return k}k=[],L=0;for(const G in y)k[L++]=G;return k}}}function yf(y,k){if(y.forEach&&typeof y.forEach=="function")y.forEach(k,void 0);else if(u(y)||typeof y=="string")Array.prototype.forEach.call(y,k,void 0);else for(var L=au(y),G=rb(y),ie=G.length,me=0;me<ie;me++)k.call(void 0,G[me],L&&L[me],y)}var Dc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ib(y,k){if(y){y=y.split("&");for(var L=0;L<y.length;L++){var G=y[L].indexOf("="),ie=null;if(0<=G){var me=y[L].substring(0,G);ie=y[L].substring(G+1)}else me=y[L];k(me,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function ps(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof ps){this.h=y.h,Mc(this,y.j),this.o=y.o,this.g=y.g,hl(this,y.s),this.l=y.l;var k=y.i,L=new ao;L.i=k.i,k.g&&(L.g=new Map(k.g),L.h=k.h),io(this,L),this.m=y.m}else y&&(k=String(y).match(Dc))?(this.h=!1,Mc(this,k[1]||"",!0),this.o=vi(k[2]||""),this.g=vi(k[3]||"",!0),hl(this,k[4]),this.l=vi(k[5]||"",!0),io(this,k[6]||"",!0),this.m=vi(k[7]||"")):(this.h=!1,this.i=new ao(null,this.h))}ps.prototype.toString=function(){var y=[],k=this.j;k&&y.push(Oc(k,vf,!0),":");var L=this.g;return(L||k=="file")&&(y.push("//"),(k=this.o)&&y.push(Oc(k,vf,!0),"@"),y.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&y.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&y.push("/"),y.push(Oc(L,L.charAt(0)=="/"?ab:bf,!0))),(L=this.i.toString())&&y.push("?",L),(L=this.m)&&y.push("#",Oc(L,ou)),y.join("")};function Qr(y){return new ps(y)}function Mc(y,k,L){y.j=L?vi(k,!0):k,y.j&&(y.j=y.j.replace(/:$/,""))}function hl(y,k){if(k){if(k=Number(k),isNaN(k)||0>k)throw Error("Bad port number "+k);y.s=k}else y.s=null}function io(y,k,L){k instanceof ao?(y.i=k,pp(y.i,y.h)):(L||(k=Oc(k,ob)),y.i=new ao(k,y.h))}function kn(y,k,L){y.i.set(k,L)}function Pc(y){return kn(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function vi(y,k){return y?k?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Oc(y,k,L){return typeof y=="string"?(y=encodeURI(y).replace(k,gp),L&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function gp(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var vf=/[#\/\?@]/g,bf=/[#\?:]/g,ab=/[#\?]/g,ob=/[#\?@]/g,ou=/#/g;function ao(y,k){this.h=this.g=null,this.i=y||null,this.j=!!k}function bi(y){y.g||(y.g=new Map,y.h=0,y.i&&ib(y.i,function(k,L){y.add(decodeURIComponent(k.replace(/\+/g," ")),L)}))}t=ao.prototype,t.add=function(y,k){bi(this),this.i=null,y=ha(this,y);var L=this.g.get(y);return L||this.g.set(y,L=[]),L.push(k),this.h+=1,this};function oo(y,k){bi(y),k=ha(y,k),y.g.has(k)&&(y.i=null,y.h-=y.g.get(k).length,y.g.delete(k))}function lo(y,k){return bi(y),k=ha(y,k),y.g.has(k)}t.forEach=function(y,k){bi(this),this.g.forEach(function(L,G){L.forEach(function(ie){y.call(k,ie,G,this)},this)},this)},t.na=function(){bi(this);const y=Array.from(this.g.values()),k=Array.from(this.g.keys()),L=[];for(let G=0;G<k.length;G++){const ie=y[G];for(let me=0;me<ie.length;me++)L.push(k[G])}return L},t.V=function(y){bi(this);let k=[];if(typeof y=="string")lo(this,y)&&(k=k.concat(this.g.get(ha(this,y))));else{y=Array.from(this.g.values());for(let L=0;L<y.length;L++)k=k.concat(y[L])}return k},t.set=function(y,k){return bi(this),this.i=null,y=ha(this,y),lo(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[k]),this.h+=1,this},t.get=function(y,k){return y?(y=this.V(y),0<y.length?String(y[0]):k):k};function wf(y,k,L){oo(y,k),0<L.length&&(y.i=null,y.g.set(ha(y,k),S(L)),y.h+=L.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],k=Array.from(this.g.keys());for(var L=0;L<k.length;L++){var G=k[L];const me=encodeURIComponent(String(G)),Le=this.V(G);for(G=0;G<Le.length;G++){var ie=me;Le[G]!==""&&(ie+="="+encodeURIComponent(String(Le[G]))),y.push(ie)}}return this.i=y.join("&")};function ha(y,k){return k=String(k),y.j&&(k=k.toLowerCase()),k}function pp(y,k){k&&!y.j&&(bi(y),y.i=null,y.g.forEach(function(L,G){var ie=G.toLowerCase();G!=ie&&(oo(this,G),wf(this,ie,L))},y)),y.j=k}function Lc(y,k){const L=new Ot;if(d.Image){const G=new Image;G.onload=w(wi,L,"TestLoadImage: loaded",!0,k,G),G.onerror=w(wi,L,"TestLoadImage: error",!1,k,G),G.onabort=w(wi,L,"TestLoadImage: abort",!1,k,G),G.ontimeout=w(wi,L,"TestLoadImage: timeout",!1,k,G),d.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=y}else k(!1)}function qi(y,k){const L=new Ot,G=new AbortController,ie=setTimeout(()=>{G.abort(),wi(L,"TestPingServer: timeout",!1,k)},1e4);fetch(y,{signal:G.signal}).then(me=>{clearTimeout(ie),me.ok?wi(L,"TestPingServer: ok",!0,k):wi(L,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(ie),wi(L,"TestPingServer: error",!1,k)})}function wi(y,k,L,G,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),G(L)}catch{}}function Vc(){this.g=new wn}function fa(y,k,L){const G=L||"";try{yf(y,function(ie,me){let Le=ie;f(ie)&&(Le=pe(ie)),k.push(G+me+"="+encodeURIComponent(Le))})}catch(ie){throw k.push(G+"type="+encodeURIComponent("_badmap")),ie}}function fl(y){this.l=y.Ub||null,this.j=y.eb||!1}j(fl,Wt),fl.prototype.g=function(){return new co(this.l,this.j)},fl.prototype.i=function(y){return function(){return y}}({});function co(y,k){Me.call(this),this.D=y,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(co,Me),t=co.prototype,t.open=function(y,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=k,this.readyState=1,ga(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const k={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(k.body=y),(this.D||d).fetch(new Request(this.A,k)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ma(this)),this.readyState=0},t.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,ga(this)),this.g&&(this.readyState=3,ga(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_f(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function _f(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}t.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var k=y.value?y.value:new Uint8Array(0);(k=this.v.decode(k,{stream:!y.done}))&&(this.response=this.responseText+=k)}y.done?ma(this):ga(this),this.readyState==3&&_f(this)}},t.Ra=function(y){this.g&&(this.response=this.responseText=y,ma(this))},t.Qa=function(y){this.g&&(this.response=y,ma(this))},t.ga=function(){this.g&&ma(this)};function ma(y){y.readyState=4,y.l=null,y.j=null,y.v=null,ga(y)}t.setRequestHeader=function(y,k){this.u.append(y,k)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],k=this.h.entries();for(var L=k.next();!L.done;)L=L.value,y.push(L[0]+": "+L[1]),L=k.next();return y.join(`\r
`)};function ga(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(co.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function jf(y){let k="";return z(y,function(L,G){k+=G,k+=":",k+=L,k+=`\r
`}),k}function qs(y,k,L){e:{for(G in L){var G=!1;break e}G=!0}G||(L=jf(L),typeof y=="string"?L!=null&&encodeURIComponent(String(L)):kn(y,k,L))}function xn(y){Me.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(xn,Me);var lu=/^https?$/i,Uc=["POST","PUT"];t=xn.prototype,t.Ha=function(y){this.J=y},t.ea=function(y,k,L,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);k=k?k.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kr.g(),this.v=this.o?en(this.o):en(Kr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(k,String(y),!0),this.B=!1}catch(me){xp(this,me);return}if(y=L||"",L=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ie in G)L.set(ie,G[ie]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const me of G.keys())L.set(me,G.get(me));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(L.keys()).find(me=>me.toLowerCase()=="content-type"),ie=d.FormData&&y instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Uc,k,void 0))||G||ie||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Le]of L)this.g.setRequestHeader(me,Le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fc(this),this.u=!0,this.g.send(y),this.u=!1}catch(me){xp(this,me)}};function xp(y,k){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=k,y.m=5,cu(y),pa(y)}function cu(y){y.A||(y.A=!0,Ke(y,"complete"),Ke(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,Ke(this,"complete"),Ke(this,"abort"),pa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pa(this,!0)),xn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?du(this):this.bb())},t.bb=function(){du(this)};function du(y){if(y.h&&typeof l<"u"&&(!y.v[1]||_i(y)!=4||y.Z()!=2)){if(y.u&&_i(y)==4)Jt(y.Ea,0,y);else if(Ke(y,"readystatechange"),_i(y)==4){y.h=!1;try{const Le=y.Z();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var L;if(!(L=k)){var G;if(G=Le===0){var ie=String(y.D).match(Dc)[1]||null;!ie&&d.self&&d.self.location&&(ie=d.self.location.protocol.slice(0,-1)),G=!lu.test(ie?ie.toLowerCase():"")}L=G}if(L)Ke(y,"complete"),Ke(y,"success");else{y.m=6;try{var me=2<_i(y)?y.g.statusText:""}catch{me=""}y.l=me+" ["+y.Z()+"]",cu(y)}}finally{pa(y)}}}}function pa(y,k){if(y.g){Fc(y);const L=y.g,G=y.v[0]?()=>{}:null;y.g=null,y.v=null,k||Ke(y,"ready");try{L.onreadystatechange=G}catch{}}}function Fc(y){y.I&&(d.clearTimeout(y.I),y.I=null)}t.isActive=function(){return!!this.g};function _i(y){return y.g?y.g.readyState:0}t.Z=function(){try{return 2<_i(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(y){if(this.g){var k=this.g.responseText;return y&&k.indexOf(y)==0&&(k=k.substring(y.length)),Pt(k)}};function yp(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function lb(y){const k={};y=(y.g&&2<=_i(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<y.length;G++){if(C(y[G]))continue;var L=P(y[G]);const ie=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const me=k[ie]||[];k[ie]=me,me.push(L)}D(k,function(G){return G.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bc(y,k,L){return L&&L.internalChannelParams&&L.internalChannelParams[y]||k}function uu(y){this.Aa=0,this.i=[],this.j=new Ot,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bc("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bc("baseRetryDelayMs",5e3,y),this.cb=Bc("retryDelaySeedMs",1e4,y),this.Wa=Bc("forwardChannelMaxRetries",2,y),this.wa=Bc("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new ro(y&&y.concurrentRequestLimit),this.Da=new Vc,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=uu.prototype,t.la=8,t.G=1,t.connect=function(y,k,L,G){Ce(0),this.W=y,this.H=k||{},L&&G!==void 0&&(this.H.OSID=L,this.H.OAID=G),this.F=this.X,this.I=Sp(this,null,this.W),fu(this)};function Nf(y){if(vp(y),y.G==3){var k=y.U++,L=Qr(y.I);if(kn(L,"SID",y.K),kn(L,"RID",k),kn(L,"TYPE","terminate"),zc(y,L),k=new Ds(y,y.j,k),k.L=2,k.v=Pc(Qr(L)),L=!1,d.navigator&&d.navigator.sendBeacon)try{L=d.navigator.sendBeacon(k.v.toString(),"")}catch{}!L&&d.Image&&(new Image().src=k.v,L=!0),L||(k.g=Ep(k.j,null),k.g.ea(k.v)),k.F=Date.now(),Rc(k)}Np(y)}function hu(y){y.g&&($c(y),y.g.cancel(),y.g=null)}function vp(y){hu(y),y.u&&(d.clearTimeout(y.u),y.u=null),mu(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&d.clearTimeout(y.s),y.s=null)}function fu(y){if(!su(y.h)&&!y.s){y.s=!0;var k=y.Ga;Y||B(),W||(Y(),W=!0),H.add(k,y),y.B=0}}function cb(y,k){return ru(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=k.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Et(x(y.Ga,y,k),Cf(y,y.B)),y.B++,!0)}t.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const ie=new Ds(this,this.j,y);let me=this.o;if(this.S&&(me?(me=A(me),R(me,this.S)):me=this.S),this.m!==null||this.O||(ie.H=me,me=null),this.P)e:{for(var k=0,L=0;L<this.i.length;L++){t:{var G=this.i[L];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(k+=G,4096<k){k=L;break e}if(k===4096||L===this.i.length-1){k=L+1;break e}}k=1e3}else k=1e3;k=bp(this,ie,k),L=Qr(this.I),kn(L,"RID",y),kn(L,"CVER",22),this.D&&kn(L,"X-HTTP-Session-Id",this.D),zc(this,L),me&&(this.O?k="headers="+encodeURIComponent(String(jf(me)))+"&"+k:this.m&&qs(L,this.m,me)),iu(this.h,ie),this.Ua&&kn(L,"TYPE","init"),this.P?(kn(L,"$req",k),kn(L,"SID","null"),ie.T=!0,$i(ie,L,null)):$i(ie,L,k),this.G=2}}else this.G==3&&(y?Sf(this,y):this.i.length==0||su(this.h)||Sf(this))};function Sf(y,k){var L;k?L=k.l:L=y.U++;const G=Qr(y.I);kn(G,"SID",y.K),kn(G,"RID",L),kn(G,"AID",y.T),zc(y,G),y.m&&y.o&&qs(G,y.m,y.o),L=new Ds(y,y.j,L,y.B+1),y.m===null&&(L.H=y.o),k&&(y.i=k.D.concat(y.i)),k=bp(y,L,1e3),L.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),iu(y.h,L),$i(L,G,k)}function zc(y,k){y.H&&z(y.H,function(L,G){kn(k,G,L)}),y.l&&yf({},function(L,G){kn(k,G,L)})}function bp(y,k,L){L=Math.min(y.i.length,L);var G=y.l?x(y.l.Na,y.l,y):null;e:{var ie=y.i;let me=-1;for(;;){const Le=["count="+L];me==-1?0<L?(me=ie[0].g,Le.push("ofs="+me)):me=0:Le.push("ofs="+me);let tn=!0;for(let Ms=0;Ms<L;Ms++){let nn=ie[Ms].g;const Hs=ie[Ms].map;if(nn-=me,0>nn)me=Math.max(0,ie[Ms].g-100),tn=!1;else try{fa(Hs,Le,"req"+nn+"_")}catch{G&&G(Hs)}}if(tn){G=Le.join("&");break e}}}return y=y.i.splice(0,L),k.D=y,G}function wp(y){if(!y.g&&!y.u){y.Y=1;var k=y.Fa;Y||B(),W||(Y(),W=!0),H.add(k,y),y.v=0}}function Ef(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Et(x(y.Fa,y),Cf(y,y.v)),y.v++,!0)}t.Fa=function(){if(this.u=null,_p(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Et(x(this.ab,this),y)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),hu(this),_p(this))};function $c(y){y.A!=null&&(d.clearTimeout(y.A),y.A=null)}function _p(y){y.g=new Ds(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var k=Qr(y.qa);kn(k,"RID","rpc"),kn(k,"SID",y.K),kn(k,"AID",y.T),kn(k,"CI",y.F?"0":"1"),!y.F&&y.ja&&kn(k,"TO",y.ja),kn(k,"TYPE","xmlhttp"),zc(y,k),y.m&&y.o&&qs(k,y.m,y.o),y.L&&(y.g.I=y.L);var L=y.g;y=y.ia,L.L=1,L.v=Pc(Qr(k)),L.m=null,L.P=!0,so(L,y)}t.Za=function(){this.C!=null&&(this.C=null,hu(this),Ef(this),Ce(19))};function mu(y){y.C!=null&&(d.clearTimeout(y.C),y.C=null)}function jp(y,k){var L=null;if(y.g==k){mu(y),$c(y),y.g=null;var G=2}else if(pf(y.h,k))L=k.D,Sr(y.h,k),G=1;else return;if(y.G!=0){if(k.o)if(G==1){L=k.m?k.m.length:0,k=Date.now()-k.F;var ie=y.B;G=cn(),Ke(G,new Mt(G,L)),fu(y)}else wp(y);else if(ie=k.s,ie==3||ie==0&&0<k.X||!(G==1&&cb(y,k)||G==2&&Ef(y)))switch(L&&0<L.length&&(k=y.h,k.i=k.i.concat(L)),ie){case 1:uo(y,5);break;case 4:uo(y,10);break;case 3:uo(y,6);break;default:uo(y,2)}}}function Cf(y,k){let L=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(L*=2),L*k}function uo(y,k){if(y.j.info("Error code "+k),k==2){var L=x(y.fb,y),G=y.Xa;const ie=!G;G=new ps(G||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Mc(G,"https"),Pc(G),ie?Lc(G.toString(),L):qi(G.toString(),L)}else Ce(2);y.G=0,y.l&&y.l.sa(k),Np(y),vp(y)}t.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))};function Np(y){if(y.G=0,y.ka=[],y.l){const k=xf(y.h);(k.length!=0||y.i.length!=0)&&(_(y.ka,k),_(y.ka,y.i),y.h.i.length=0,S(y.i),y.i.length=0),y.l.ra()}}function Sp(y,k,L){var G=L instanceof ps?Qr(L):new ps(L);if(G.g!="")k&&(G.g=k+"."+G.g),hl(G,G.s);else{var ie=d.location;G=ie.protocol,k=k?k+"."+ie.hostname:ie.hostname,ie=+ie.port;var me=new ps(null);G&&Mc(me,G),k&&(me.g=k),ie&&hl(me,ie),L&&(me.l=L),G=me}return L=y.D,k=y.ya,L&&k&&kn(G,L,k),kn(G,"VER",y.la),zc(y,G),G}function Ep(y,k,L){if(k&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return k=y.Ca&&!y.pa?new xn(new fl({eb:L})):new xn(y.pa),k.Ha(y.J),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cp(){}t=Cp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function gu(){}gu.prototype.g=function(y,k){return new Er(y,k)};function Er(y,k){Me.call(this),this.g=new uu(k),this.l=y,this.h=k&&k.messageUrlParams||null,y=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(y?y["X-WebChannel-Content-Type"]=k.messageContentType:y={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.va&&(y?y["X-WebChannel-Client-Profile"]=k.va:y={"X-WebChannel-Client-Profile":k.va}),this.g.S=y,(y=k&&k.Sb)&&!C(y)&&(this.g.m=y),this.v=k&&k.supportsCrossDomainXhr||!1,this.u=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!C(k)&&(this.g.D=k,y=this.h,y!==null&&k in y&&(y=this.h,k in y&&delete y[k])),this.j=new xa(this)}j(Er,Me),Er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Er.prototype.close=function(){Nf(this.g)},Er.prototype.o=function(y){var k=this.g;if(typeof y=="string"){var L={};L.__data__=y,y=L}else this.u&&(L={},L.__data__=pe(y),y=L);k.i.push(new mp(k.Ya++,y)),k.G==3&&fu(k)},Er.prototype.N=function(){this.g.l=null,delete this.j,Nf(this.g),delete this.g,Er.aa.N.call(this)};function Tp(y){Mn.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var k=y.__sm__;if(k){e:{for(const L in k){y=L;break e}y=void 0}(this.i=y)&&(y=this.i,k=k!==null&&y in k?k[y]:void 0),this.data=k}else this.data=y}j(Tp,Mn);function Ap(){Fe.call(this),this.status=1}j(Ap,Fe);function xa(y){this.g=y}j(xa,Cp),xa.prototype.ua=function(){Ke(this.g,"a")},xa.prototype.ta=function(y){Ke(this.g,new Tp(y))},xa.prototype.sa=function(y){Ke(this.g,new Ap)},xa.prototype.ra=function(){Ke(this.g,"b")},gu.prototype.createWebChannel=gu.prototype.g,Er.prototype.send=Er.prototype.o,Er.prototype.open=Er.prototype.m,Er.prototype.close=Er.prototype.close,iD=function(){return new gu},rD=function(){return cn()},sD=Nt,gj={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gr.NO_ERROR=0,Gr.TIMEOUT=8,Gr.HTTP_ERROR=6,gy=Gr,Yr.COMPLETE="complete",nD=Yr,_n.EventType=ss,ss.OPEN="a",ss.CLOSE="b",ss.ERROR="c",ss.MESSAGE="d",Me.prototype.listen=Me.prototype.K,Im=_n,xn.prototype.listenOnce=xn.prototype.L,xn.prototype.getLastError=xn.prototype.Ka,xn.prototype.getLastErrorCode=xn.prototype.Ba,xn.prototype.getStatus=xn.prototype.Z,xn.prototype.getResponseJson=xn.prototype.Oa,xn.prototype.getResponseText=xn.prototype.oa,xn.prototype.send=xn.prototype.ea,xn.prototype.setWithCredentials=xn.prototype.Ha,tD=xn}).apply(typeof Rx<"u"?Rx:typeof self<"u"?self:typeof window<"u"?window:{});const zT="@firebase/firestore",$T="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pr.UNAUTHENTICATED=new pr(null),pr.GOOGLE_CREDENTIALS=new pr("google-credentials-uid"),pr.FIRST_PARTY=new pr("first-party-uid"),pr.MOCK_USER=new pr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xh="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new O1("@firebase/firestore");function eh(){return kd.logLevel}function Ze(t,...e){if(kd.logLevel<=Xt.DEBUG){const n=e.map(V1);kd.debug(`Firestore (${Xh}): ${t}`,...n)}}function Qo(t,...e){if(kd.logLevel<=Xt.ERROR){const n=e.map(V1);kd.error(`Firestore (${Xh}): ${t}`,...n)}}function Zo(t,...e){if(kd.logLevel<=Xt.WARN){const n=e.map(V1);kd.warn(`Firestore (${Xh}): ${t}`,...n)}}function V1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,aD(t,s,n)}function aD(t,e,n){let s=`FIRESTORE (${Xh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Qo(s),new Error(s)}function gn(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||aD(e,r,s)}function Tt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends Ja{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pr.UNAUTHENTICATED))}shutdown(){}}class Bz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zz{constructor(e){this.t=e,this.currentUser=pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){gn(this.o===void 0,42304);let s=this.i;const r=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let a=new Va;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Va,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},d=u=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(u=>d(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?d(u):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Va)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(gn(typeof s.accessToken=="string",31837,{l:s}),new oD(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gn(e===null||typeof e=="string",2055,{h:e}),new pr(e)}}class $z{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=pr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qz{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new $z(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hz{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){gn(this.o===void 0,3512);const s=a=>{a.error!=null&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,Ze("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>s(a))};const r=a=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(gn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=Wz(40);for(let a=0;a<r.length;++a)s.length<20&&r[a]<n&&(s+=e.charAt(r[a]%62))}return s}}function $t(t,e){return t<e?-1:t>e?1:0}function pj(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),r=e.codePointAt(n);if(s!==r){if(s<128&&r<128)return $t(s,r);{const a=cD(),l=Gz(a.encode(HT(t,n)),a.encode(HT(e,n)));return l!==0?l:$t(s,r)}}n+=s>65535?2:1}return $t(t.length,e.length)}function HT(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Gz(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return $t(t[n],e[n]);return $t(t.length,e.length)}function kh(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="__name__";class Ca{constructor(e,n,s){n===void 0?n=0:n>e.length&&jt(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&jt(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Ca.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ca?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const a=Ca.compareSegments(e.get(r),n.get(r));if(a!==0)return a}return $t(e.length,n.length)}static compareSegments(e,n){const s=Ca.isNumericId(e),r=Ca.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Ca.extractNumericId(e).compare(Ca.extractNumericId(n)):pj(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sc.fromString(e.substring(4,e.length-2))}}class On extends Ca{construct(e,n,s){return new On(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ve(xe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new On(n)}static emptyPath(){return new On([])}}const Yz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xs extends Ca{construct(e,n,s){return new Xs(e,n,s)}static isValidIdentifier(e){return Yz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===WT}static keyField(){return new Xs([WT])}static fromServerFormat(e){const n=[];let s="",r=0;const a=()=>{if(s.length===0)throw new Ve(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let l=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new Ve(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ve(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,r+=2}else d==="`"?(l=!l,r++):d!=="."||l?(s+=d,r++):(a(),r++)}if(a(),l)throw new Ve(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xs(n)}static emptyPath(){return new Xs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.path=e}static fromPath(e){return new ft(On.fromString(e))}static fromName(e){return new ft(On.fromString(e).popFirst(5))}static empty(){return new ft(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&On.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return On.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ft(new On(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t,e,n){if(!n)throw new Ve(xe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uD(t,e,n,s){if(e===!0&&s===!0)throw new Ve(xe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function GT(t){if(!ft.isDocumentKey(t))throw new Ve(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function YT(t){if(ft.isDocumentKey(t))throw new Ve(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Q0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":jt(12329,{type:typeof t})}function lr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ve(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Q0(t);throw new Ve(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Kz(t,e){if(e<=0)throw new Ve(xe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t,e){const n={typeString:t};return e&&(n.value=e),n}function zg(t,e){if(!hD(t))throw new Ve(xe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,a="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const l=t[s];if(r&&typeof l!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${s}' field to equal '${a.value}'`;break}}if(n)throw new Ve(xe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=-62135596800,XT=1e6;class Tn{static now(){return Tn.fromMillis(Date.now())}static fromDate(e){return Tn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*XT);return new Tn(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<KT)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/XT}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zg(e,Tn._jsonSchema))return new Tn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tn._jsonSchemaVersion="firestore/timestamp/1.0",Tn._jsonSchema={type:Cs("string",Tn._jsonSchemaVersion),seconds:Cs("number"),nanoseconds:Cs("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{static fromTimestamp(e){return new kt(e)}static min(){return new kt(new Tn(0,0))}static max(){return new kt(new Tn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=-1;function Xz(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=kt.fromTimestamp(s===1e9?new Tn(n+1,0):new Tn(n,s));return new dc(r,ft.empty(),e)}function Qz(t){return new dc(t.readTime,t.key,og)}class dc{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new dc(kt.min(),ft.empty(),og)}static max(){return new dc(kt.max(),ft.empty(),og)}}function Zz(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ft.comparator(t.documentKey,e.documentKey),n!==0?n:$t(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qh(t){if(t.code!==xe.FAILED_PRECONDITION||t.message!==Jz)throw t;Ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&jt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e((s,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(s,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.reject(n)}static resolve(e){return new _e((n,s)=>{n(e)})}static reject(e){return new _e((n,s)=>{s(e)})}static waitFor(e){return new _e((n,s)=>{let r=0,a=0,l=!1;e.forEach(d=>{++r,d.next(()=>{++a,l&&a===r&&n()},u=>s(u))}),l=!0,a===r&&n()})}static or(e){let n=_e.resolve(!1);for(const s of e)n=n.next(r=>r?_e.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,a)=>{s.push(n.call(this,r,a))}),this.waitFor(s)}static mapArray(e,n){return new _e((s,r)=>{const a=e.length,l=new Array(a);let d=0;for(let u=0;u<a;u++){const f=u;n(e[f]).next(m=>{l[f]=m,++d,d===a&&s(l)},m=>r(m))}})}static doWhile(e,n){return new _e((s,r)=>{const a=()=>{e()===!0?n().next(()=>{a()},r):s()};a()})}}function t8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this._e(s),this.ae=s=>n.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Z0.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=-1;function J0(t){return t==null}function Vy(t){return t===0&&1/t==-1/0}function n8(t){return typeof t=="number"&&Number.isInteger(t)&&!Vy(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="";function s8(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=QT(e)),e=r8(t.get(n),e);return QT(e)}function r8(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const a=t.charAt(r);switch(a){case"\0":n+="";break;case fD:n+="";break;default:n+=a}}return n}function QT(t){return t+fD+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Sc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function i8(t,e){const n=[];for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.push(e(t[s],s,t));return n}function mD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){this.comparator=e,this.root=n||ar.EMPTY}insert(e,n){return new ts(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(e){return new ts(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ar.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ix(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ix(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ix(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ix(this.root,e,this.comparator,!0)}}class Ix{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?s(e.key,n):1,n&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ar{constructor(e,n,s,r,a){this.key=e,this.value=n,this.color=s??ar.RED,this.left=r??ar.EMPTY,this.right=a??ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,a){return new ar(e??this.key,n??this.value,s??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const a=s(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,n,s),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ar.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw jt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw jt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw jt(27949);return e+(this.isRed()?0:1)}}ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1;ar.EMPTY=new class{constructor(){this.size=0}get key(){throw jt(57766)}get value(){throw jt(16141)}get color(){throw jt(16727)}get left(){throw jt(29726)}get right(){throw jt(36894)}copy(e,n,s,r,a){return this}insert(e,n,s){return new ar(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.comparator=e,this.data=new ts(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new JT(this.data.getIterator())}getIteratorFrom(e){return new JT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Bs)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=s.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Bs(this.comparator);return n.data=e,n}}class JT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.fields=e,e.sort(Xs.comparator)}static empty(){return new di([])}unionWith(e){let n=new Bs(Xs.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new di(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return kh(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new gD("Invalid base64 string: "+a):a}}(e);return new er(n)}static fromUint8Array(e){const n=function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a}(e);return new er(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}er.EMPTY_BYTE_STRING=new er("");const a8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uc(t){if(gn(!!t,39018),typeof t=="string"){let e=0;const n=a8.exec(t);if(gn(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ls(t.seconds),nanos:ls(t.nanos)}}function ls(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hc(t){return typeof t=="string"?er.fromBase64String(t):er.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="server_timestamp",xD="__type__",yD="__previous_value__",vD="__local_write_time__";function ev(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[xD])===null||n===void 0?void 0:n.stringValue)===pD}function tv(t){const e=t.mapValue.fields[yD];return ev(e)?tv(e):e}function lg(t){const e=uc(t.mapValue.fields[vD].timestampValue);return new Tn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e,n,s,r,a,l,d,u,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=m}}const Uy="(default)";class Rh{constructor(e,n){this.projectId=e,this.database=n||Uy}static empty(){return new Rh("","")}get isDefaultDatabase(){return this.database===Uy}isEqual(e){return e instanceof Rh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="__type__",l8="__max__",Dx={mapValue:{}},wD="__vector__",Fy="value";function fc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ev(t)?4:d8(t)?9007199254740991:c8(t)?10:11:jt(28295,{value:t})}function Ka(t,e){if(t===e)return!0;const n=fc(t);if(n!==fc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lg(t).isEqual(lg(e));case 3:return function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=uc(r.timestampValue),d=uc(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,a){return hc(r.bytesValue).isEqual(hc(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,a){return ls(r.geoPointValue.latitude)===ls(a.geoPointValue.latitude)&&ls(r.geoPointValue.longitude)===ls(a.geoPointValue.longitude)}(t,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return ls(r.integerValue)===ls(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=ls(r.doubleValue),d=ls(a.doubleValue);return l===d?Vy(l)===Vy(d):isNaN(l)&&isNaN(d)}return!1}(t,e);case 9:return kh(t.arrayValue.values||[],e.arrayValue.values||[],Ka);case 10:case 11:return function(r,a){const l=r.mapValue.fields||{},d=a.mapValue.fields||{};if(ZT(l)!==ZT(d))return!1;for(const u in l)if(l.hasOwnProperty(u)&&(d[u]===void 0||!Ka(l[u],d[u])))return!1;return!0}(t,e);default:return jt(52216,{left:t})}}function cg(t,e){return(t.values||[]).find(n=>Ka(n,e))!==void 0}function Ih(t,e){if(t===e)return 0;const n=fc(t),s=fc(e);if(n!==s)return $t(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return $t(t.booleanValue,e.booleanValue);case 2:return function(a,l){const d=ls(a.integerValue||a.doubleValue),u=ls(l.integerValue||l.doubleValue);return d<u?-1:d>u?1:d===u?0:isNaN(d)?isNaN(u)?0:-1:1}(t,e);case 3:return eA(t.timestampValue,e.timestampValue);case 4:return eA(lg(t),lg(e));case 5:return pj(t.stringValue,e.stringValue);case 6:return function(a,l){const d=hc(a),u=hc(l);return d.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,l){const d=a.split("/"),u=l.split("/");for(let f=0;f<d.length&&f<u.length;f++){const m=$t(d[f],u[f]);if(m!==0)return m}return $t(d.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,l){const d=$t(ls(a.latitude),ls(l.latitude));return d!==0?d:$t(ls(a.longitude),ls(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tA(t.arrayValue,e.arrayValue);case 10:return function(a,l){var d,u,f,m;const p=a.fields||{},x=l.fields||{},w=(d=p[Fy])===null||d===void 0?void 0:d.arrayValue,j=(u=x[Fy])===null||u===void 0?void 0:u.arrayValue,S=$t(((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0,((m=j==null?void 0:j.values)===null||m===void 0?void 0:m.length)||0);return S!==0?S:tA(w,j)}(t.mapValue,e.mapValue);case 11:return function(a,l){if(a===Dx.mapValue&&l===Dx.mapValue)return 0;if(a===Dx.mapValue)return 1;if(l===Dx.mapValue)return-1;const d=a.fields||{},u=Object.keys(d),f=l.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const x=pj(u[p],m[p]);if(x!==0)return x;const w=Ih(d[u[p]],f[m[p]]);if(w!==0)return w}return $t(u.length,m.length)}(t.mapValue,e.mapValue);default:throw jt(23264,{le:n})}}function eA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $t(t,e);const n=uc(t),s=uc(e),r=$t(n.seconds,s.seconds);return r!==0?r:$t(n.nanos,s.nanos)}function tA(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const a=Ih(n[r],s[r]);if(a)return a}return $t(n.length,s.length)}function Dh(t){return xj(t)}function xj(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=uc(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ft.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const a of n.values||[])r?r=!1:s+=",",s+=xj(a);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const l of s)a?a=!1:r+=",",r+=`${l}:${xj(n.fields[l])}`;return r+"}"}(t.mapValue):jt(61005,{value:t})}function py(t){switch(fc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tv(t);return e?16+py(e):16;case 5:return 2*t.stringValue.length;case 6:return hc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,a)=>r+py(a),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Sc(s.fields,(a,l)=>{r+=a.length+py(l)}),r}(t.mapValue);default:throw jt(13486,{value:t})}}function By(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function yj(t){return!!t&&"integerValue"in t}function F1(t){return!!t&&"arrayValue"in t}function nA(t){return!!t&&"nullValue"in t}function sA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xy(t){return!!t&&"mapValue"in t}function c8(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[bD])===null||n===void 0?void 0:n.stringValue)===wD}function $m(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Sc(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=$m(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$m(t.arrayValue.values[n]);return e}return Object.assign({},t)}function d8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===l8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.value=e}static empty(){return new Br({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!xy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$m(n)}setAll(e){let n=Xs.emptyPath(),s={},r=[];e.forEach((l,d)=>{if(!n.isImmediateParentOf(d)){const u=this.getFieldsMap(n);this.applyChanges(u,s,r),s={},r=[],n=d.popLast()}l?s[d.lastSegment()]=$m(l):r.push(d.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,s,r)}delete(e){const n=this.field(e.popLast());xy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ka(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];xy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Sc(n,(r,a)=>e[r]=a);for(const r of s)delete e[r]}clone(){return new Br($m(this.value))}}function _D(t){const e=[];return Sc(t.fields,(n,s)=>{const r=new Xs([n]);if(xy(s)){const a=_D(s.mapValue).fields;if(a.length===0)e.push(r);else for(const l of a)e.push(r.child(l))}else e.push(r)}),new di(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,s,r,a,l,d){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new xr(e,0,kt.min(),kt.min(),kt.min(),Br.empty(),0)}static newFoundDocument(e,n,s,r){return new xr(e,1,n,kt.min(),s,r,0)}static newNoDocument(e,n){return new xr(e,2,n,kt.min(),kt.min(),Br.empty(),0)}static newUnknownDocument(e,n){return new xr(e,3,n,kt.min(),kt.min(),Br.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n){this.position=e,this.inclusive=n}}function rA(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const a=e[r],l=t.position[r];if(a.field.isKeyField()?s=ft.comparator(ft.fromName(l.referenceValue),n.key):s=Ih(l,n.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function iA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ka(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n="asc"){this.field=e,this.dir=n}}function u8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{}class _s extends jD{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new f8(e,n,s):n==="array-contains"?new p8(e,s):n==="in"?new x8(e,s):n==="not-in"?new y8(e,s):n==="array-contains-any"?new v8(e,s):new _s(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new m8(e,s):new g8(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ih(n,this.value)):n!==null&&fc(this.value)===fc(n)&&this.matchesComparison(Ih(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return jt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sa extends jD{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new sa(e,n)}matches(e){return ND(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function ND(t){return t.op==="and"}function SD(t){return h8(t)&&ND(t)}function h8(t){for(const e of t.filters)if(e instanceof sa)return!1;return!0}function vj(t){if(t instanceof _s)return t.field.canonicalString()+t.op.toString()+Dh(t.value);if(SD(t))return t.filters.map(e=>vj(e)).join(",");{const e=t.filters.map(n=>vj(n)).join(",");return`${t.op}(${e})`}}function ED(t,e){return t instanceof _s?function(s,r){return r instanceof _s&&s.op===r.op&&s.field.isEqual(r.field)&&Ka(s.value,r.value)}(t,e):t instanceof sa?function(s,r){return r instanceof sa&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((a,l,d)=>a&&ED(l,r.filters[d]),!0):!1}(t,e):void jt(19439)}function CD(t){return t instanceof _s?function(n){return`${n.field.canonicalString()} ${n.op} ${Dh(n.value)}`}(t):t instanceof sa?function(n){return n.op.toString()+" {"+n.getFilters().map(CD).join(" ,")+"}"}(t):"Filter"}class f8 extends _s{constructor(e,n,s){super(e,n,s),this.key=ft.fromName(s.referenceValue)}matches(e){const n=ft.comparator(e.key,this.key);return this.matchesComparison(n)}}class m8 extends _s{constructor(e,n){super(e,"in",n),this.keys=TD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class g8 extends _s{constructor(e,n){super(e,"not-in",n),this.keys=TD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function TD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ft.fromName(s.referenceValue))}class p8 extends _s{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return F1(n)&&cg(n.arrayValue,this.value)}}class x8 extends _s{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cg(this.value.arrayValue,n)}}class y8 extends _s{constructor(e,n){super(e,"not-in",n)}matches(e){if(cg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!cg(this.value.arrayValue,n)}}class v8 extends _s{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!F1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>cg(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e,n=null,s=[],r=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=a,this.startAt=l,this.endAt=d,this.Pe=null}}function aA(t,e=null,n=[],s=[],r=null,a=null,l=null){return new b8(t,e,n,s,r,a,l)}function B1(t){const e=Tt(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>vj(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),J0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Dh(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Dh(s)).join(",")),e.Pe=n}return e.Pe}function z1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!u8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ED(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iA(t.startAt,e.startAt)&&iA(t.endAt,e.endAt)}function bj(t){return ft.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n=null,s=[],r=[],a=null,l="F",d=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function w8(t,e,n,s,r,a,l,d){return new Gd(t,e,n,s,r,a,l,d)}function nv(t){return new Gd(t)}function oA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $1(t){return t.collectionGroup!==null}function uh(t){const e=Tt(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new Bs(Xs.comparator);return l.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(d=d.add(f.field))})}),d})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new dg(a,s))}),n.has(Xs.keyField().canonicalString())||e.Te.push(new dg(Xs.keyField(),s))}return e.Te}function Ua(t){const e=Tt(t);return e.Ie||(e.Ie=AD(e,uh(t))),e.Ie}function _8(t){const e=Tt(t);return e.de||(e.de=AD(e,t.explicitOrderBy)),e.de}function AD(t,e){if(t.limitType==="F")return aA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const a=r.dir==="desc"?"asc":"desc";return new dg(r.field,a)});const n=t.endAt?new Mh(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Mh(t.startAt.position,t.startAt.inclusive):null;return aA(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function wj(t,e){const n=t.filters.concat([e]);return new Gd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function zy(t,e,n){return new Gd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sv(t,e){return z1(Ua(t),Ua(e))&&t.limitType===e.limitType}function kD(t){return`${B1(Ua(t))}|lt:${t.limitType}`}function th(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>CD(r)).join(", ")}]`),J0(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Dh(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Dh(r)).join(",")),`Target(${s})`}(Ua(t))}; limitType=${t.limitType})`}function rv(t,e){return e.isFoundDocument()&&function(s,r){const a=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):ft.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(t,e)&&function(s,r){for(const a of uh(s))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const a of s.filters)if(!a.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(l,d,u){const f=rA(l,d,u);return l.inclusive?f<=0:f<0}(s.startAt,uh(s),r)||s.endAt&&!function(l,d,u){const f=rA(l,d,u);return l.inclusive?f>=0:f>0}(s.endAt,uh(s),r))}(t,e)}function j8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RD(t){return(e,n)=>{let s=!1;for(const r of uh(t)){const a=N8(r,e,n);if(a!==0)return a;s=s||r.field.isKeyField()}return 0}}function N8(t,e,n){const s=t.field.isKeyField()?ft.comparator(e.key,n.key):function(a,l,d){const u=l.data.field(a),f=d.data.field(a);return u!==null&&f!==null?Ih(u,f):jt(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return jt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,a]of s)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Sc(this.inner,(n,s)=>{for(const[r,a]of s)e(r,a)})}isEmpty(){return mD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8=new ts(ft.comparator);function Jo(){return S8}const ID=new ts(ft.comparator);function Dm(...t){let e=ID;for(const n of t)e=e.insert(n.key,n);return e}function DD(t){let e=ID;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function _d(){return qm()}function MD(){return qm()}function qm(){return new Yd(t=>t.toString(),(t,e)=>t.isEqual(e))}const E8=new ts(ft.comparator),C8=new Bs(ft.comparator);function Qt(...t){let e=C8;for(const n of t)e=e.add(n);return e}const T8=new Bs($t);function A8(){return T8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vy(e)?"-0":e}}function PD(t){return{integerValue:""+t}}function k8(t,e){return n8(e)?PD(e):q1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this._=void 0}}function R8(t,e,n){return t instanceof ug?function(r,a){const l={fields:{[xD]:{stringValue:pD},[vD]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&ev(a)&&(a=tv(a)),a&&(l.fields[yD]=a),{mapValue:l}}(n,e):t instanceof hg?LD(t,e):t instanceof fg?VD(t,e):function(r,a){const l=OD(r,a),d=lA(l)+lA(r.Ee);return yj(l)&&yj(r.Ee)?PD(d):q1(r.serializer,d)}(t,e)}function I8(t,e,n){return t instanceof hg?LD(t,e):t instanceof fg?VD(t,e):n}function OD(t,e){return t instanceof $y?function(s){return yj(s)||function(a){return!!a&&"doubleValue"in a}(s)}(e)?e:{integerValue:0}:null}class ug extends iv{}class hg extends iv{constructor(e){super(),this.elements=e}}function LD(t,e){const n=UD(e);for(const s of t.elements)n.some(r=>Ka(r,s))||n.push(s);return{arrayValue:{values:n}}}class fg extends iv{constructor(e){super(),this.elements=e}}function VD(t,e){let n=UD(e);for(const s of t.elements)n=n.filter(r=>!Ka(r,s));return{arrayValue:{values:n}}}class $y extends iv{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function lA(t){return ls(t.integerValue||t.doubleValue)}function UD(t){return F1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,n){this.field=e,this.transform=n}}function M8(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof hg&&r instanceof hg||s instanceof fg&&r instanceof fg?kh(s.elements,r.elements,Ka):s instanceof $y&&r instanceof $y?Ka(s.Ee,r.Ee):s instanceof ug&&r instanceof ug}(t.transform,e.transform)}class P8{constructor(e,n){this.version=e,this.transformResults=n}}class kr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yy(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class av{}function FD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ov(t.key,kr.none()):new $g(t.key,t.data,kr.none());{const n=t.data,s=Br.empty();let r=new Bs(Xs.comparator);for(let a of e.fields)if(!r.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?s.delete(a):s.set(a,l),r=r.add(a)}return new Ec(t.key,s,new di(r.toArray()),kr.none())}}function O8(t,e,n){t instanceof $g?function(r,a,l){const d=r.value.clone(),u=dA(r.fieldTransforms,a,l.transformResults);d.setAll(u),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):t instanceof Ec?function(r,a,l){if(!yy(r.precondition,a))return void a.convertToUnknownDocument(l.version);const d=dA(r.fieldTransforms,a,l.transformResults),u=a.data;u.setAll(BD(r)),u.setAll(d),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(t,e,n):function(r,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Hm(t,e,n,s){return t instanceof $g?function(a,l,d,u){if(!yy(a.precondition,l))return d;const f=a.value.clone(),m=uA(a.fieldTransforms,u,l);return f.setAll(m),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(t,e,n,s):t instanceof Ec?function(a,l,d,u){if(!yy(a.precondition,l))return d;const f=uA(a.fieldTransforms,u,l),m=l.data;return m.setAll(BD(a)),m.setAll(f),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(a,l,d){return yy(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d}(t,e,n)}function L8(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),a=OD(s.transform,r||null);a!=null&&(n===null&&(n=Br.empty()),n.set(s.field,a))}return n||null}function cA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&kh(s,r,(a,l)=>M8(a,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $g extends av{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ec extends av{constructor(e,n,s,r,a=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function BD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function dA(t,e,n){const s=new Map;gn(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const a=t[r],l=a.transform,d=e.data.field(a.field);s.set(a.field,I8(l,d,n[r]))}return s}function uA(t,e,n){const s=new Map;for(const r of t){const a=r.transform,l=n.data.field(r.field);s.set(r.field,R8(a,l,e))}return s}class ov extends av{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class V8 extends av{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&O8(a,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Hm(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Hm(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=MD();return this.mutations.forEach(r=>{const a=e.get(r.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=n.has(r.key)?null:d;const u=FD(l,d);u!==null&&s.set(r.key,u),l.isValidDocument()||l.convertToNoDocument(kt.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Qt())}isEqual(e){return this.batchId===e.batchId&&kh(this.mutations,e.mutations,(n,s)=>cA(n,s))&&kh(this.baseMutations,e.baseMutations,(n,s)=>cA(n,s))}}class H1{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){gn(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let r=function(){return E8}();const a=e.mutations;for(let l=0;l<a.length;l++)r=r.insert(a[l].key,s[l].version);return new H1(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F8=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e,n,s){this.alias=e,this.aggregateType=n,this.fieldPath=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bs,rn;function $8(t){switch(t){case xe.OK:return jt(64938);case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0;default:return jt(15467,{code:t})}}function zD(t){if(t===void 0)return Qo("GRPC error has no .code"),xe.UNKNOWN;switch(t){case bs.OK:return xe.OK;case bs.CANCELLED:return xe.CANCELLED;case bs.UNKNOWN:return xe.UNKNOWN;case bs.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case bs.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case bs.INTERNAL:return xe.INTERNAL;case bs.UNAVAILABLE:return xe.UNAVAILABLE;case bs.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case bs.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case bs.NOT_FOUND:return xe.NOT_FOUND;case bs.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case bs.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case bs.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case bs.ABORTED:return xe.ABORTED;case bs.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case bs.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case bs.DATA_LOSS:return xe.DATA_LOSS;default:return jt(39323,{code:t})}}(rn=bs||(bs={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=new sc([4294967295,4294967295],0);function hA(t){const e=cD().encode(t),n=new eD;return n.update(e),new Uint8Array(n.digest())}function fA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new sc([n,s],0),new sc([r,a],0)]}class W1{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Mm(`Invalid padding: ${n}`);if(s<0)throw new Mm(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Mm(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Mm(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=sc.fromNumber(this.fe)}pe(e,n,s){let r=e.add(n.multiply(sc.fromNumber(s)));return r.compare(q8)===1&&(r=new sc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=hA(e),[s,r]=fA(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(s,r,a);if(!this.ye(l))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new W1(a,r,n);return s.forEach(d=>l.insert(d)),l}insert(e){if(this.fe===0)return;const n=hA(e),[s,r]=fA(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(s,r,a);this.we(l)}}we(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Mm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n,s,r,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,qg.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new lv(kt.min(),r,new ts($t),Jo(),Qt())}}class qg{constructor(e,n,s,r,a){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new qg(s,n,Qt(),Qt(),Qt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,s,r){this.Se=e,this.removedTargetIds=n,this.key=s,this.be=r}}class $D{constructor(e,n){this.targetId=e,this.De=n}}class qD{constructor(e,n,s=er.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class mA{constructor(){this.ve=0,this.Ce=gA(),this.Fe=er.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Qt(),n=Qt(),s=Qt();return this.Ce.forEach((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:jt(38017,{changeType:a})}}),new qg(this.Fe,this.Me,e,n,s)}ke(){this.xe=!1,this.Ce=gA()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,gn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class H8{constructor(e){this.We=e,this.Ge=new Map,this.ze=Jo(),this.je=Mx(),this.Je=Mx(),this.He=new ts($t)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const s=this.tt(n);switch(e.state){case 0:this.nt(n)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),s.Be(e.resumeToken));break;default:jt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((s,r)=>{this.nt(r)&&n(r)})}it(e){const n=e.targetId,s=e.De.count,r=this.st(n);if(r){const a=r.target;if(bj(a))if(s===0){const l=new ft(a.path);this.Xe(n,l,xr.newNoDocument(l,kt.min()))}else gn(s===1,20013,{expectedCount:s});else{const l=this.ot(n);if(l!==s){const d=this._t(e),u=d?this.ut(d,e,l):1;if(u!==0){this.rt(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:a=0}=n;let l,d;try{l=hc(s).toUint8Array()}catch(u){if(u instanceof gD)return Zo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{d=new W1(l,r,a)}catch(u){return Zo(u instanceof Mm?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return d.fe===0?null:d}ut(e,n,s){return n.De.count===s-this.ht(e,n.targetId)?0:2}ht(e,n){const s=this.We.getRemoteKeysForTarget(n);let r=0;return s.forEach(a=>{const l=this.We.lt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(n,a,null),r++)}),r}Pt(e){const n=new Map;this.Ge.forEach((a,l)=>{const d=this.st(l);if(d){if(a.current&&bj(d.target)){const u=new ft(d.target.path);this.Tt(u).has(l)||this.It(l,u)||this.Xe(l,u,xr.newNoDocument(u,e))}a.Ne&&(n.set(l,a.Le()),a.ke())}});let s=Qt();this.Je.forEach((a,l)=>{let d=!0;l.forEachWhile(u=>{const f=this.st(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(s=s.add(a))}),this.ze.forEach((a,l)=>l.setReadTime(e));const r=new lv(e,n,this.He,this.ze,s);return this.ze=Jo(),this.je=Mx(),this.Je=Mx(),this.He=new ts($t),r}Ze(e,n){if(!this.nt(e))return;const s=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,s),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,s){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),s&&(this.ze=this.ze.insert(n,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new mA,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Bs($t),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Bs($t),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Ze("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new mA),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Mx(){return new ts(ft.comparator)}function gA(){return new ts(ft.comparator)}const W8={asc:"ASCENDING",desc:"DESCENDING"},G8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y8={and:"AND",or:"OR"};class K8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _j(t,e){return t.useProto3Json||J0(e)?e:{value:e}}function qy(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function X8(t,e){return qy(t,e.toTimestamp())}function Fa(t){return gn(!!t,49232),kt.fromTimestamp(function(n){const s=uc(n);return new Tn(s.seconds,s.nanos)}(t))}function G1(t,e){return jj(t,e).canonicalString()}function jj(t,e){const n=function(r){return new On(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function WD(t){const e=On.fromString(t);return gn(ZD(e),10190,{key:e.toString()}),e}function Nj(t,e){return G1(t.databaseId,e.path)}function f_(t,e){const n=WD(e);if(n.get(1)!==t.databaseId.projectId)throw new Ve(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ve(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ft(YD(n))}function GD(t,e){return G1(t.databaseId,e)}function Q8(t){const e=WD(t);return e.length===4?On.emptyPath():YD(e)}function Sj(t){return new On(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YD(t){return gn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function pA(t,e,n){return{name:Nj(t,e),fields:n.value.mapValue.fields}}function Z8(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:jt(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=function(f,m){return f.useProto3Json?(gn(m===void 0||typeof m=="string",58123),er.fromBase64String(m||"")):(gn(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),er.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(f){const m=f.code===void 0?xe.UNKNOWN:zD(f.code);return new Ve(m,f.message||"")}(l);n=new qD(s,r,a,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=f_(t,s.document.name),a=Fa(s.document.updateTime),l=s.document.createTime?Fa(s.document.createTime):kt.min(),d=new Br({mapValue:{fields:s.document.fields}}),u=xr.newFoundDocument(r,a,l,d),f=s.targetIds||[],m=s.removedTargetIds||[];n=new vy(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=f_(t,s.document),a=s.readTime?Fa(s.readTime):kt.min(),l=xr.newNoDocument(r,a),d=s.removedTargetIds||[];n=new vy([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=f_(t,s.document),a=s.removedTargetIds||[];n=new vy([],a,r,null)}else{if(!("filter"in e))return jt(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:a}=s,l=new z8(r,a),d=s.targetId;n=new $D(d,l)}}return n}function J8(t,e){let n;if(e instanceof $g)n={update:pA(t,e.key,e.value)};else if(e instanceof ov)n={delete:Nj(t,e.key)};else if(e instanceof Ec)n={update:pA(t,e.key,e.data),updateMask:l7(e.fieldMask)};else{if(!(e instanceof V8))return jt(16599,{Rt:e.type});n={verify:Nj(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const d=l.transform;if(d instanceof ug)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof hg)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof fg)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof $y)return{fieldPath:l.field.canonicalString(),increment:d.Ee};throw jt(20930,{transform:l.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,a){return a.updateTime!==void 0?{updateTime:X8(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:jt(27497)}(t,e.precondition)),n}function e7(t,e){return t&&t.length>0?(gn(e!==void 0,14353),t.map(n=>function(r,a){let l=r.updateTime?Fa(r.updateTime):Fa(a);return l.isEqual(kt.min())&&(l=Fa(a)),new P8(l,r.transformResults||[])}(n,e))):[]}function t7(t,e){return{documents:[GD(t,e.path)]}}function KD(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=GD(t,r);const a=function(f){if(f.length!==0)return QD(sa.create(f,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const l=function(f){if(f.length!==0)return f.map(m=>function(x){return{field:zl(x.field),direction:i7(x.dir)}}(m))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const d=_j(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:n,parent:r}}function n7(t,e,n,s){const{Vt:r,parent:a}=KD(t,e),l={},d=[];let u=0;return n.forEach(f=>{const m="aggregate_"+u++;l[m]=f.alias,f.aggregateType==="count"?d.push({alias:m,count:{}}):f.aggregateType==="avg"?d.push({alias:m,avg:{field:zl(f.fieldPath)}}):f.aggregateType==="sum"&&d.push({alias:m,sum:{field:zl(f.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:d,structuredQuery:r.structuredQuery},parent:r.parent},ft:l,parent:a}}function s7(t){let e=Q8(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){gn(s===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let a=[];n.where&&(a=function(p){const x=XD(p);return x instanceof sa&&SD(x)?x.getFilters():[x]}(n.where));let l=[];n.orderBy&&(l=function(p){return p.map(x=>function(j){return new dg(nh(j.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(x))}(n.orderBy));let d=null;n.limit&&(d=function(p){let x;return x=typeof p=="object"?p.value:p,J0(x)?null:x}(n.limit));let u=null;n.startAt&&(u=function(p){const x=!!p.before,w=p.values||[];return new Mh(w,x)}(n.startAt));let f=null;return n.endAt&&(f=function(p){const x=!p.before,w=p.values||[];return new Mh(w,x)}(n.endAt)),w8(e,r,l,a,d,"F",u,f)}function r7(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return jt(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=nh(n.unaryFilter.field);return _s.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=nh(n.unaryFilter.field);return _s.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=nh(n.unaryFilter.field);return _s.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=nh(n.unaryFilter.field);return _s.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return jt(61313);default:return jt(60726)}}(t):t.fieldFilter!==void 0?function(n){return _s.create(nh(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return jt(58110);default:return jt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sa.create(n.compositeFilter.filters.map(s=>XD(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return jt(1026)}}(n.compositeFilter.op))}(t):jt(30097,{filter:t})}function i7(t){return W8[t]}function a7(t){return G8[t]}function o7(t){return Y8[t]}function zl(t){return{fieldPath:t.canonicalString()}}function nh(t){return Xs.fromServerFormat(t.fieldPath)}function QD(t){return t instanceof _s?function(n){if(n.op==="=="){if(sA(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NAN"}};if(nA(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sA(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NOT_NAN"}};if(nA(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zl(n.field),op:a7(n.op),value:n.value}}}(t):t instanceof sa?function(n){const s=n.getFilters().map(r=>QD(r));return s.length===1?s[0]:{compositeFilter:{op:o7(n.op),filters:s}}}(t):jt(54877,{filter:t})}function l7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n,s,r,a=kt.min(),l=kt.min(),d=er.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=u}withSequenceNumber(e){return new Kl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e){this.gt=e}}function d7(t){const e=s7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(){this.Dn=new h7}addToCollectionParentIndex(e,n){return this.Dn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(dc.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(dc.min())}updateCollectionGroup(e,n,s){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class h7{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Bs(On.comparator),a=!r.has(s);return this.index[n]=r.add(s),a}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Bs(On.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JD=41943040;class Lr{static withCacheSize(e){return new Lr(e,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr.DEFAULT_COLLECTION_PERCENTILE=10,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lr.DEFAULT=new Lr(JD,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lr.DISABLED=new Lr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ph(0)}static ur(){return new Ph(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="LruGarbageCollector",f7=1048576;function vA([t,e],[n,s]){const r=$t(t,n);return r===0?$t(e,s):r}class m7{constructor(e){this.Tr=e,this.buffer=new Bs(vA),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();vA(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class g7{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ze(yA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zh(n)?Ze(yA,"Ignoring IndexedDB error during garbage collection: ",n):await Qh(n)}await this.Rr(3e5)})}}class p7{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(Z0.ue);const s=new m7(n);return this.Vr.forEachTarget(e,r=>s.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>s.Er(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(xA)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xA):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let s,r,a,l,d,u,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,l=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(s=p,d=Date.now(),this.removeTargets(e,s,n))).next(p=>(a=p,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(f=Date.now(),eh()<=Xt.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${r} in `+(d-l)+`ms
	Removed ${a} targets in `+(u-d)+`ms
	Removed ${p} documents in `+(f-u)+`ms
Total Duration: ${f-m}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:p})))}}function x7(t,e){return new p7(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(){this.changes=new Yd(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?_e.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Hm(s.mutation,r,di.empty(),Tn.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Qt()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Qt()){const r=_d();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(a=>{let l=Dm();return a.forEach((d,u)=>{l=l.insert(d,u.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const s=_d();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Qt()))}populateOverlays(e,n,s){const r=[];return s.forEach(a=>{n.has(a)||r.push(a)}),this.documentOverlayCache.getOverlays(e,r).next(a=>{a.forEach((l,d)=>{n.set(l,d)})})}computeViews(e,n,s,r){let a=Jo();const l=qm(),d=function(){return qm()}();return n.forEach((u,f)=>{const m=s.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Ec)?a=a.insert(f.key,f):m!==void 0?(l.set(f.key,m.mutation.getFieldMask()),Hm(m.mutation,f,m.mutation.getFieldMask(),Tn.now())):l.set(f.key,di.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((f,m)=>l.set(f,m)),n.forEach((f,m)=>{var p;return d.set(f,new v7(m,(p=l.get(f))!==null&&p!==void 0?p:null))}),d))}recalculateAndSaveOverlays(e,n){const s=qm();let r=new ts((l,d)=>l-d),a=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const d of l)d.keys().forEach(u=>{const f=n.get(u);if(f===null)return;let m=s.get(u)||di.empty();m=d.applyToLocalView(f,m),s.set(u,m);const p=(r.get(d.batchId)||Qt()).add(u);r=r.insert(d.batchId,p)})}).next(()=>{const l=[],d=r.getReverseIterator();for(;d.hasNext();){const u=d.getNext(),f=u.key,m=u.value,p=MD();m.forEach(x=>{if(!a.has(x)){const w=FD(n.get(x),s.get(x));w!==null&&p.set(x,w),a=a.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,p))}return _e.waitFor(l)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(l){return ft.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(a=>{const l=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-a.size):_e.resolve(_d());let d=og,u=a;return l.next(f=>_e.forEach(f,(m,p)=>(d<p.largestBatchId&&(d=p.largestBatchId),a.get(m)?_e.resolve():this.remoteDocumentCache.getEntry(e,m).next(x=>{u=u.insert(m,x)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,u,f,Qt())).next(m=>({batchId:d,changes:DD(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ft(n)).next(s=>{let r=Dm();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const a=n.collectionGroup;let l=Dm();return this.indexManager.getCollectionParents(e,a).next(d=>_e.forEach(d,u=>{const f=function(p,x){return new Gd(x,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,s,r).next(m=>{m.forEach((p,x)=>{l=l.insert(p,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,s,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,a,r))).next(l=>{a.forEach((u,f)=>{const m=f.getKey();l.get(m)===null&&(l=l.insert(m,xr.newInvalidDocument(m)))});let d=Dm();return l.forEach((u,f)=>{const m=a.get(u);m!==void 0&&Hm(m.mutation,f,di.empty(),Tn.now()),rv(n,f)&&(d=d.insert(u,f))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return _e.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Fa(r.createTime)}}(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(r){return{name:r.name,query:d7(r.bundledQuery),readTime:Fa(r.readTime)}}(n)),_e.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(){this.overlays=new ts(ft.comparator),this.kr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const s=_d();return _e.forEach(n,r=>this.getOverlay(e,r).next(a=>{a!==null&&s.set(r,a)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,a)=>{this.wt(e,n,a)}),_e.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.kr.get(s);return r!==void 0&&(r.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(s)),_e.resolve()}getOverlaysForCollection(e,n,s){const r=_d(),a=n.length+1,l=new ft(n.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const u=d.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&u.largestBatchId>s&&r.set(u.getKey(),u)}return _e.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let a=new ts((f,m)=>f-m);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>s){let m=a.get(f.largestBatchId);m===null&&(m=_d(),a=a.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const d=_d(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>d.set(f,m)),!(d.size()>=r)););return _e.resolve(d)}wt(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const l=this.kr.get(r.largestBatchId).delete(s.key);this.kr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(s.key,new F8(n,s));let a=this.kr.get(n);a===void 0&&(a=Qt(),this.kr.set(n,a)),this.kr.set(n,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(){this.sessionToken=er.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.qr=new Bs(Ks.Qr),this.$r=new Bs(Ks.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const s=new Ks(e,n);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Wr(new Ks(e,n))}Gr(e,n){e.forEach(s=>this.removeReference(s,n))}zr(e){const n=new ft(new On([])),s=new Ks(n,e),r=new Ks(n,e+1),a=[];return this.$r.forEachInRange([s,r],l=>{this.Wr(l),a.push(l.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ft(new On([])),s=new Ks(n,e),r=new Ks(n,e+1);let a=Qt();return this.$r.forEachInRange([s,r],l=>{a=a.add(l.key)}),a}containsKey(e){const n=new Ks(e,0),s=this.qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ks{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ft.comparator(e.key,n.key)||$t(e.Hr,n.Hr)}static Ur(e,n){return $t(e.Hr,n.Hr)||ft.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Bs(Ks.Qr)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new U8(a,n,s,r);this.mutationQueue.push(l);for(const d of r)this.Yr=this.Yr.add(new Ks(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return _e.resolve(l)}lookupMutationBatch(e,n){return _e.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.Xr(s),a=r<0?0:r;return _e.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?U1:this.er-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ks(n,0),r=new Ks(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([s,r],l=>{const d=this.Zr(l.Hr);a.push(d)}),_e.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Bs($t);return n.forEach(r=>{const a=new Ks(r,0),l=new Ks(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,l],d=>{s=s.add(d.Hr)})}),_e.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let a=s;ft.isDocumentKey(a)||(a=a.child(""));const l=new Ks(new ft(a),0);let d=new Bs($t);return this.Yr.forEachWhile(u=>{const f=u.key.path;return!!s.isPrefixOf(f)&&(f.length===r&&(d=d.add(u.Hr)),!0)},l),_e.resolve(this.ei(d))}ei(e){const n=[];return e.forEach(s=>{const r=this.Zr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){gn(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return _e.forEach(n.mutations,r=>{const a=new Ks(r.key,n.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,n){const s=new Ks(n,0),r=this.Yr.firstAfterOrEqual(s);return _e.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e){this.ni=e,this.docs=function(){return new ts(ft.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),a=r?r.size:0,l=this.ni(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return _e.resolve(s?s.document.mutableCopy():xr.newInvalidDocument(n))}getEntries(e,n){let s=Jo();return n.forEach(r=>{const a=this.docs.get(r);s=s.insert(r,a?a.document.mutableCopy():xr.newInvalidDocument(r))}),_e.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let a=Jo();const l=n.path,d=new ft(l.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(d);for(;u.hasNext();){const{key:f,value:{document:m}}=u.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||Zz(Qz(m),s)<=0||(r.has(m.key)||rv(n,m))&&(a=a.insert(m.key,m.mutableCopy()))}return _e.resolve(a)}getAllFromCollectionGroup(e,n,s,r){jt(9500)}ri(e,n){return _e.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new E7(this)}getSize(e){return _e.resolve(this.size)}}class E7 extends y7{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(s)}),_e.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(e){this.persistence=e,this.ii=new Yd(n=>B1(n),z1),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.si=0,this.oi=new Y1,this.targetCount=0,this._i=Ph.ar()}forEachTarget(e,n){return this.ii.forEach((s,r)=>n(r)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.si&&(this.si=n),_e.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ph(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.hr(n),_e.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,s){let r=0;const a=[];return this.ii.forEach((l,d)=>{d.sequenceNumber<=n&&s.get(d.targetId)===null&&(this.ii.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)}),_e.waitFor(a).next(()=>r)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const s=this.ii.get(n)||null;return _e.resolve(s)}addMatchingKeys(e,n,s){return this.oi.Kr(n,s),_e.resolve()}removeMatchingKeys(e,n,s){this.oi.Gr(n,s);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach(l=>{a.push(r.markPotentiallyOrphaned(e,l))}),_e.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const s=this.oi.Jr(n);return _e.resolve(s)}containsKey(e,n){return _e.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,n){this.ai={},this.overlays={},this.ui=new Z0(0),this.ci=!1,this.ci=!0,this.li=new j7,this.referenceDelegate=e(this),this.hi=new C7(this),this.indexManager=new u7,this.remoteDocumentCache=function(r){return new S7(r)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new c7(n),this.Ti=new w7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ai[e.toKey()];return s||(s=new N7(n,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,s){Ze("MemoryPersistence","Starting transaction:",e);const r=new T7(this.ui.next());return this.referenceDelegate.Ii(),s(r).next(a=>this.referenceDelegate.di(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}Ei(e,n){return _e.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,n)))}}class T7 extends e8{constructor(e){super(),this.currentSequenceNumber=e}}class K1{constructor(e){this.persistence=e,this.Ai=new Y1,this.Ri=null}static Vi(e){return new K1(e)}get mi(){if(this.Ri)return this.Ri;throw jt(60996)}addReference(e,n,s){return this.Ai.addReference(s,n),this.mi.delete(s.toString()),_e.resolve()}removeReference(e,n,s){return this.Ai.removeReference(s,n),this.mi.add(s.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(r=>this.mi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(a=>this.mi.add(a.toString()))}).next(()=>s.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.mi,s=>{const r=ft.fromPath(s);return this.fi(e,r).next(a=>{a||n.removeEntry(r,kt.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(s=>{s?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return _e.or([()=>_e.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Hy{constructor(e,n){this.persistence=e,this.gi=new Yd(s=>s8(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=x7(this,n)}static Vi(e,n){return new Hy(e,n)}Ii(){}di(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}yr(e){let n=0;return this.gr(e,s=>{n++}).next(()=>n)}gr(e,n){return _e.forEach(this.gi,(s,r)=>this.Sr(e,s,r).next(a=>a?_e.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ri(e,l=>this.Sr(e,l,n).next(d=>{d||(s++,a.removeEntry(l,kt.min()))})).next(()=>a.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.gi.set(s,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,s){return this.gi.set(s,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),_e.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=py(e.data.value)),n}Sr(e,n,s){return _e.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return _e.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Is=s,this.ds=r}static Es(e,n){let s=Qt(),r=Qt();for(const a of n.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new X1(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return wB()?8:t8(wr())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,s,r){const a={result:null};return this.ps(e,n).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.ys(e,n,r,s).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new A7;return this.ws(e,n,l).next(d=>{if(a.result=d,this.Rs)return this.Ss(e,n,l,d.size)})}).next(()=>a.result)}Ss(e,n,s,r){return s.documentReadCount<this.Vs?(eh()<=Xt.DEBUG&&Ze("QueryEngine","SDK will not create cache indexes for query:",th(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),_e.resolve()):(eh()<=Xt.DEBUG&&Ze("QueryEngine","Query:",th(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.fs*r?(eh()<=Xt.DEBUG&&Ze("QueryEngine","The SDK decides to create cache indexes for query:",th(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ua(n))):_e.resolve())}ps(e,n){if(oA(n))return _e.resolve(null);let s=Ua(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=zy(n,null,"F"),s=Ua(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(a=>{const l=Qt(...a);return this.gs.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,s).next(u=>{const f=this.bs(n,d);return this.Ds(n,f,l,u.readTime)?this.ps(e,zy(n,null,"F")):this.vs(e,f,n,u)}))})))}ys(e,n,s,r){return oA(n)||r.isEqual(kt.min())?_e.resolve(null):this.gs.getDocuments(e,s).next(a=>{const l=this.bs(n,a);return this.Ds(n,l,s,r)?_e.resolve(null):(eh()<=Xt.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),th(n)),this.vs(e,l,n,Xz(r,og)).next(d=>d))})}bs(e,n){let s=new Bs(RD(e));return n.forEach((r,a)=>{rv(e,a)&&(s=s.add(a))}),s}Ds(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ws(e,n,s){return eh()<=Xt.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",th(n)),this.gs.getDocumentsMatchingQuery(e,n,dc.min(),s)}vs(e,n,s,r){return this.gs.getDocumentsMatchingQuery(e,s,r).next(a=>(n.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="LocalStore",R7=3e8;class I7{constructor(e,n,s,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new ts($t),this.Ms=new Yd(a=>B1(a),z1),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new b7(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function D7(t,e,n,s){return new I7(t,e,n,s)}async function tM(t,e){const n=Tt(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(a=>(r=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(s))).next(a=>{const l=[],d=[];let u=Qt();for(const f of r){l.push(f.batchId);for(const m of f.mutations)u=u.add(m.key)}for(const f of a){d.push(f.batchId);for(const m of f.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(s,u).next(f=>({Bs:f,removedBatchIds:l,addedBatchIds:d}))})})}function M7(t,e){const n=Tt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(d,u,f,m){const p=f.batch,x=p.keys();let w=_e.resolve();return x.forEach(j=>{w=w.next(()=>m.getEntry(u,j)).next(S=>{const _=f.docVersions.get(j);gn(_!==null,48541),S.version.compareTo(_)<0&&(p.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),m.addEntry(S)))})}),w.next(()=>d.mutationQueue.removeMutationBatch(u,p))}(n,s,e,a).next(()=>a.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(d){let u=Qt();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(u=u.add(d.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function nM(t){const e=Tt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function P7(t,e){const n=Tt(t),s=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const d=[];e.targetChanges.forEach((m,p)=>{const x=r.get(p);if(!x)return;d.push(n.hi.removeMatchingKeys(a,m.removedDocuments,p).next(()=>n.hi.addMatchingKeys(a,m.addedDocuments,p)));let w=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(er.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,s)),r=r.insert(p,w),function(S,_,E){return S.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=R7?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(x,w,m)&&d.push(n.hi.updateTargetData(a,w))});let u=Jo(),f=Qt();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(a,m))}),d.push(O7(a,l,e.documentUpdates).next(m=>{u=m.Ls,f=m.ks})),!s.isEqual(kt.min())){const m=n.hi.getLastRemoteSnapshotVersion(a).next(p=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,s));d.push(m)}return _e.waitFor(d).next(()=>l.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,f)).next(()=>u)}).then(a=>(n.Fs=r,a))}function O7(t,e,n){let s=Qt(),r=Qt();return n.forEach(a=>s=s.add(a)),e.getEntries(t,s).next(a=>{let l=Jo();return n.forEach((d,u)=>{const f=a.get(d);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(d)),u.isNoDocument()&&u.version.isEqual(kt.min())?(e.removeEntry(d,u.readTime),l=l.insert(d,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),l=l.insert(d,u)):Ze(Q1,"Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",u.version)}),{Ls:l,ks:r}})}function L7(t,e){const n=Tt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=U1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function V7(t,e){const n=Tt(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.hi.getTargetData(s,e).next(a=>a?(r=a,_e.resolve(r)):n.hi.allocateTargetId(s).next(l=>(r=new Kl(e,l,"TargetPurposeListen",s.currentSequenceNumber),n.hi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Fs.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(s.targetId,s),n.Ms.set(e,s.targetId)),s})}async function Ej(t,e,n){const s=Tt(t),r=s.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",a,l=>s.persistence.referenceDelegate.removeTarget(l,r))}catch(l){if(!Zh(l))throw l;Ze(Q1,`Failed to update sequence numbers for target ${e}: ${l}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(r.target)}function bA(t,e,n){const s=Tt(t);let r=kt.min(),a=Qt();return s.persistence.runTransaction("Execute query","readwrite",l=>function(u,f,m){const p=Tt(u),x=p.Ms.get(m);return x!==void 0?_e.resolve(p.Fs.get(x)):p.hi.getTargetData(f,m)}(s,l,Ua(e)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(l,d.targetId).next(u=>{a=u})}).next(()=>s.Cs.getDocumentsMatchingQuery(l,e,n?r:kt.min(),n?a:Qt())).next(d=>(U7(s,j8(e),d),{documents:d,qs:a})))}function U7(t,e,n){let s=t.xs.get(e)||kt.min();n.forEach((r,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),t.xs.set(e,s)}class wA{constructor(){this.activeTargetIds=A8()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class F7{constructor(){this.Fo=new wA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,s){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new wA,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="ConnectivityMonitor";class jA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ze(_A,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ze(_A,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Px=null;function Cj(){return Px===null?Px=function(){return 268435456+Math.round(2147483648*Math.random())}():Px++,"0x"+Px.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="RestConnection",z7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $7{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${s}/databases/${r}`,this.Ko=this.databaseId.database===Uy?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Wo(e,n,s,r,a){const l=Cj(),d=this.Go(e,n.toUriEncodedString());Ze(m_,`Sending RPC '${e}' ${l}:`,d,s);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,r,a);const{host:f}=new URL(d),m=ol(f);return this.jo(e,d,u,s,m).then(p=>(Ze(m_,`Received RPC '${e}' ${l}: `,p),p),p=>{throw Zo(m_,`RPC '${e}' ${l} failed with error: `,p,"url: ",d,"request:",s),p})}Jo(e,n,s,r,a,l){return this.Wo(e,n,s,r,a)}zo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,a)=>e[a]=r),s&&s.headers.forEach((r,a)=>e[a]=r)}Go(e,n){const s=z7[e];return`${this.$o}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="WebChannelConnection";class H7 extends $7{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,s,r,a){const l=Cj();return new Promise((d,u)=>{const f=new tD;f.setWithCredentials(!0),f.listenOnce(nD.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case gy.NO_ERROR:const p=f.getResponseJson();Ze(mr,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(p)),d(p);break;case gy.TIMEOUT:Ze(mr,`RPC '${e}' ${l} timed out`),u(new Ve(xe.DEADLINE_EXCEEDED,"Request time out"));break;case gy.HTTP_ERROR:const x=f.getStatus();if(Ze(mr,`RPC '${e}' ${l} failed with status:`,x,"response text:",f.getResponseText()),x>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const j=w==null?void 0:w.error;if(j&&j.status&&j.message){const S=function(E){const C=E.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(C)>=0?C:xe.UNKNOWN}(j.status);u(new Ve(S,j.message))}else u(new Ve(xe.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new Ve(xe.UNAVAILABLE,"Connection failed."));break;default:jt(9055,{c_:e,streamId:l,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{Ze(mr,`RPC '${e}' ${l} completed.`)}});const m=JSON.stringify(r);Ze(mr,`RPC '${e}' ${l} sending request:`,r),f.send(n,"POST",m,s,15)})}P_(e,n,s){const r=Cj(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=iD(),d=rD(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const m=a.join("");Ze(mr,`Creating RPC '${e}' stream ${r}: ${m}`,u);const p=l.createWebChannel(m,u);this.T_(p);let x=!1,w=!1;const j=new q7({Ho:_=>{w?Ze(mr,`Not sending because RPC '${e}' stream ${r} is closed:`,_):(x||(Ze(mr,`Opening RPC '${e}' stream ${r} transport.`),p.open(),x=!0),Ze(mr,`RPC '${e}' stream ${r} sending:`,_),p.send(_))},Yo:()=>p.close()}),S=(_,E,C)=>{_.listen(E,I=>{try{C(I)}catch(M){setTimeout(()=>{throw M},0)}})};return S(p,Im.EventType.OPEN,()=>{w||(Ze(mr,`RPC '${e}' stream ${r} transport opened.`),j.s_())}),S(p,Im.EventType.CLOSE,()=>{w||(w=!0,Ze(mr,`RPC '${e}' stream ${r} transport closed`),j.__(),this.I_(p))}),S(p,Im.EventType.ERROR,_=>{w||(w=!0,Zo(mr,`RPC '${e}' stream ${r} transport errored. Name:`,_.name,"Message:",_.message),j.__(new Ve(xe.UNAVAILABLE,"The operation could not be completed")))}),S(p,Im.EventType.MESSAGE,_=>{var E;if(!w){const C=_.data[0];gn(!!C,16349);const I=C,M=(I==null?void 0:I.error)||((E=I[0])===null||E===void 0?void 0:E.error);if(M){Ze(mr,`RPC '${e}' stream ${r} received error:`,M);const V=M.status;let z=function(T){const R=bs[T];if(R!==void 0)return zD(R)}(V),D=M.message;z===void 0&&(z=xe.INTERNAL,D="Unknown error status: "+V+" with message "+M.message),w=!0,j.__(new Ve(z,D)),p.close()}else Ze(mr,`RPC '${e}' stream ${r} received:`,C),j.a_(C)}}),S(d,sD.STAT_EVENT,_=>{_.stat===gj.PROXY?Ze(mr,`RPC '${e}' stream ${r} detected buffering proxy`):_.stat===gj.NOPROXY&&Ze(mr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{j.o_()},0),j}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function g_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t){return new K8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,n,s=1e3,r=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=s,this.E_=r,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-s);r>0&&Ze("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="PersistentStream";class rM{constructor(e,n,s,r,a,l,d,u){this.Fi=e,this.w_=s,this.S_=r,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new sM(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===xe.RESOURCE_EXHAUSTED?(Qo(n.toString()),Qo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.b_===n&&this.W_(s,r)},s=>{e(()=>{const r=new Ve(xe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(r)})})}W_(e,n){const s=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{s(()=>this.G_(r))}),this.stream.onMessage(r=>{s(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Ze(NA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Ze(NA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class W7 extends rM{constructor(e,n,s,r,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,l),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=Z8(this.serializer,e),s=function(a){if(!("targetChange"in a))return kt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?kt.min():l.readTime?Fa(l.readTime):kt.min()}(e);return this.listener.J_(n,s)}H_(e){const n={};n.database=Sj(this.serializer),n.addTarget=function(a,l){let d;const u=l.target;if(d=bj(u)?{documents:t7(a,u)}:{query:KD(a,u).Vt},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=HD(a,l.resumeToken);const f=_j(a,l.expectedCount);f!==null&&(d.expectedCount=f)}else if(l.snapshotVersion.compareTo(kt.min())>0){d.readTime=qy(a,l.snapshotVersion.toTimestamp());const f=_j(a,l.expectedCount);f!==null&&(d.expectedCount=f)}return d}(this.serializer,e);const s=r7(this.serializer,e);s&&(n.labels=s),this.k_(n)}Y_(e){const n={};n.database=Sj(this.serializer),n.removeTarget=e,this.k_(n)}}class G7 extends rM{constructor(e,n,s,r,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,l),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return gn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){gn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=e7(e.writeResults,e.commitTime),s=Fa(e.commitTime);return this.listener.ta(s,n)}na(){const e={};e.database=Sj(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>J8(this.serializer,s))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{}class K7 extends Y7{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Ve(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Wo(e,jj(n,s),r,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ve(xe.UNKNOWN,a.toString())})}Jo(e,n,s,r,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.Jo(e,jj(n,s),r,l,d,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ve(xe.UNKNOWN,l.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class X7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Qo(n),this._a=!1):Ze("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="RemoteStore";class Q7{constructor(e,n,s,r,a){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(l=>{s.enqueueAndForget(async()=>{Kd(this)&&(Ze(Rd,"Restarting streams for network reachability change."),await async function(u){const f=Tt(u);f.Ia.add(4),await Hg(f),f.Aa.set("Unknown"),f.Ia.delete(4),await dv(f)}(this))})}),this.Aa=new X7(s,r)}}async function dv(t){if(Kd(t))for(const e of t.da)await e(!0)}async function Hg(t){for(const e of t.da)await e(!1)}function iM(t,e){const n=Tt(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),tN(n)?eN(n):Jh(n).x_()&&J1(n,e))}function Z1(t,e){const n=Tt(t),s=Jh(n);n.Ta.delete(e),s.x_()&&aM(n,e),n.Ta.size===0&&(s.x_()?s.B_():Kd(n)&&n.Aa.set("Unknown"))}function J1(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(kt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Jh(t).H_(e)}function aM(t,e){t.Ra.$e(e),Jh(t).Y_(e)}function eN(t){t.Ra=new H8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Jh(t).start(),t.Aa.aa()}function tN(t){return Kd(t)&&!Jh(t).M_()&&t.Ta.size>0}function Kd(t){return Tt(t).Ia.size===0}function oM(t){t.Ra=void 0}async function Z7(t){t.Aa.set("Online")}async function J7(t){t.Ta.forEach((e,n)=>{J1(t,e)})}async function e$(t,e){oM(t),tN(t)?(t.Aa.la(e),eN(t)):t.Aa.set("Unknown")}async function t$(t,e,n){if(t.Aa.set("Online"),e instanceof qD&&e.state===2&&e.cause)try{await async function(r,a){const l=a.cause;for(const d of a.targetIds)r.Ta.has(d)&&(await r.remoteSyncer.rejectListen(d,l),r.Ta.delete(d),r.Ra.removeTarget(d))}(t,e)}catch(s){Ze(Rd,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Wy(t,s)}else if(e instanceof vy?t.Ra.Ye(e):e instanceof $D?t.Ra.it(e):t.Ra.et(e),!n.isEqual(kt.min()))try{const s=await nM(t.localStore);n.compareTo(s)>=0&&await function(a,l){const d=a.Ra.Pt(l);return d.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const m=a.Ta.get(f);m&&a.Ta.set(f,m.withResumeToken(u.resumeToken,l))}}),d.targetMismatches.forEach((u,f)=>{const m=a.Ta.get(u);if(!m)return;a.Ta.set(u,m.withResumeToken(er.EMPTY_BYTE_STRING,m.snapshotVersion)),aM(a,u);const p=new Kl(m.target,u,f,m.sequenceNumber);J1(a,p)}),a.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(s){Ze(Rd,"Failed to raise snapshot:",s),await Wy(t,s)}}async function Wy(t,e,n){if(!Zh(e))throw e;t.Ia.add(1),await Hg(t),t.Aa.set("Offline"),n||(n=()=>nM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ze(Rd,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await dv(t)})}function lM(t,e){return e().catch(n=>Wy(t,n,e))}async function uv(t){const e=Tt(t),n=mc(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:U1;for(;n$(e);)try{const r=await L7(e.localStore,s);if(r===null){e.Pa.length===0&&n.B_();break}s=r.batchId,s$(e,r)}catch(r){await Wy(e,r)}cM(e)&&dM(e)}function n$(t){return Kd(t)&&t.Pa.length<10}function s$(t,e){t.Pa.push(e);const n=mc(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function cM(t){return Kd(t)&&!mc(t).M_()&&t.Pa.length>0}function dM(t){mc(t).start()}async function r$(t){mc(t).na()}async function i$(t){const e=mc(t);for(const n of t.Pa)e.X_(n.mutations)}async function a$(t,e,n){const s=t.Pa.shift(),r=H1.from(s,e,n);await lM(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await uv(t)}async function o$(t,e){e&&mc(t).Z_&&await async function(s,r){if(function(l){return $8(l)&&l!==xe.ABORTED}(r.code)){const a=s.Pa.shift();mc(s).N_(),await lM(s,()=>s.remoteSyncer.rejectFailedWrite(a.batchId,r)),await uv(s)}}(t,e),cM(t)&&dM(t)}async function SA(t,e){const n=Tt(t);n.asyncQueue.verifyOperationInProgress(),Ze(Rd,"RemoteStore received new credentials");const s=Kd(n);n.Ia.add(3),await Hg(n),s&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await dv(n)}async function l$(t,e){const n=Tt(t);e?(n.Ia.delete(2),await dv(n)):e||(n.Ia.add(2),await Hg(n),n.Aa.set("Unknown"))}function Jh(t){return t.Va||(t.Va=function(n,s,r){const a=Tt(n);return a.ia(),new W7(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{Zo:Z7.bind(null,t),e_:J7.bind(null,t),n_:e$.bind(null,t),J_:t$.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),tN(t)?eN(t):t.Aa.set("Unknown")):(await t.Va.stop(),oM(t))})),t.Va}function mc(t){return t.ma||(t.ma=function(n,s,r){const a=Tt(n);return a.ia(),new G7(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:r$.bind(null,t),n_:o$.bind(null,t),ea:i$.bind(null,t),ta:a$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await uv(t)):(await t.ma.stop(),t.Pa.length>0&&(Ze(Rd,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n,s,r,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=a,this.deferred=new Va,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,a){const l=Date.now()+s,d=new nN(e,n,l,r,a);return d.start(s),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sN(t,e){if(Qo("AsyncQueue",`${e}: ${t}`),Zh(t))return new Ve(xe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{static emptySet(e){return new hh(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ft.comparator(n.key,s.key):(n,s)=>ft.comparator(n.key,s.key),this.keyedMap=Dm(),this.sortedSet=new ts(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof hh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=s.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new hh;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.fa=new ts(ft.comparator)}track(e){const n=e.doc.key,s=this.fa.get(n);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(n,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(n):e.type===1&&s.type===2?this.fa=this.fa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):jt(63341,{At:e,ga:s}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,s)=>{e.push(s)}),e}}class Oh{constructor(e,n,s,r,a,l,d,u,f){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,s,r,a){const l=[];return n.forEach(d=>{l.push({type:0,doc:d})}),new Oh(e,n,hh.emptySet(n),l,s,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class d${constructor(){this.queries=CA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,s){const r=Tt(n),a=r.queries;r.queries=CA(),a.forEach((l,d)=>{for(const u of d.wa)u.onError(s)})})(this,new Ve(xe.ABORTED,"Firestore shutting down"))}}function CA(){return new Yd(t=>kD(t),sv)}async function rN(t,e){const n=Tt(t);let s=3;const r=e.query;let a=n.queries.get(r);a?!a.Sa()&&e.ba()&&(s=2):(a=new c$,s=e.ba()?0:1);try{switch(s){case 0:a.ya=await n.onListen(r,!0);break;case 1:a.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const d=sN(l,`Initialization of query '${th(e.query)}' failed`);return void e.onError(d)}n.queries.set(r,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&aN(n)}async function iN(t,e){const n=Tt(t),s=e.query;let r=3;const a=n.queries.get(s);if(a){const l=a.wa.indexOf(e);l>=0&&(a.wa.splice(l,1),a.wa.length===0?r=e.ba()?0:1:!a.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function u$(t,e){const n=Tt(t);let s=!1;for(const r of e){const a=r.query,l=n.queries.get(a);if(l){for(const d of l.wa)d.Ca(r)&&(s=!0);l.ya=r}}s&&aN(n)}function h$(t,e,n){const s=Tt(t),r=s.queries.get(e);if(r)for(const a of r.wa)a.onError(n);s.queries.delete(e)}function aN(t){t.Da.forEach(e=>{e.next()})}var Tj,TA;(TA=Tj||(Tj={})).Fa="default",TA.Cache="cache";class oN{constructor(e,n,s){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Oh(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const s=n!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Oh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Tj.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.key=e}}class hM{constructor(e){this.key=e}}class f${constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Qt(),this.mutatedKeys=Qt(),this.Xa=RD(e),this.eu=new hh(this.Xa)}get tu(){return this.Ha}nu(e,n){const s=n?n.ru:new EA,r=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,l=r,d=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,p)=>{const x=r.get(m),w=rv(this.query,p)?p:null,j=!!x&&this.mutatedKeys.has(x.key),S=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let _=!1;x&&w?x.data.isEqual(w.data)?j!==S&&(s.track({type:3,doc:w}),_=!0):this.iu(x,w)||(s.track({type:2,doc:w}),_=!0,(u&&this.Xa(w,u)>0||f&&this.Xa(w,f)<0)&&(d=!0)):!x&&w?(s.track({type:0,doc:w}),_=!0):x&&!w&&(s.track({type:1,doc:x}),_=!0,(u||f)&&(d=!0)),_&&(w?(l=l.add(w),a=S?a.add(m):a.delete(m)):(l=l.delete(m),a=a.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),a=a.delete(m.key),s.track({type:1,doc:m})}return{eu:l,ru:s,Ds:d,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort((m,p)=>function(w,j){const S=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jt(20277,{At:_})}};return S(w)-S(j)}(m.type,p.type)||this.Xa(m.doc,p.doc)),this.su(s),r=r!=null&&r;const d=n&&!r?this.ou():[],u=this.Za.size===0&&this.current&&!r?1:0,f=u!==this.Ya;return this.Ya=u,l.length!==0||f?{snapshot:new Oh(this.query,e.eu,a,l,e.mutatedKeys,u===0,f,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new EA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Qt(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const n=[];return e.forEach(s=>{this.Za.has(s)||n.push(new hM(s))}),this.Za.forEach(s=>{e.has(s)||n.push(new uM(s))}),n}uu(e){this.Ha=e.qs,this.Za=Qt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Oh.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const lN="SyncEngine";class m${constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class g${constructor(e){this.key=e,this.lu=!1}}class p${constructor(e,n,s,r,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new Yd(d=>kD(d),sv),this.Tu=new Map,this.Iu=new Set,this.du=new ts(ft.comparator),this.Eu=new Map,this.Au=new Y1,this.Ru={},this.Vu=new Map,this.mu=Ph.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function x$(t,e,n=!0){const s=yM(t);let r;const a=s.Pu.get(e);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.cu()):r=await fM(s,e,n,!0),r}async function y$(t,e){const n=yM(t);await fM(n,e,!0,!1)}async function fM(t,e,n,s){const r=await V7(t.localStore,Ua(e)),a=r.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let d;return s&&(d=await v$(t,e,a,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&iM(t.remoteStore,r),d}async function v$(t,e,n,s,r){t.gu=(p,x,w)=>async function(S,_,E,C){let I=_.view.nu(E);I.Ds&&(I=await bA(S.localStore,_.query,!1).then(({documents:D})=>_.view.nu(D,I)));const M=C&&C.targetChanges.get(_.targetId),V=C&&C.targetMismatches.get(_.targetId)!=null,z=_.view.applyChanges(I,S.isPrimaryClient,M,V);return kA(S,_.targetId,z._u),z.snapshot}(t,p,x,w);const a=await bA(t.localStore,e,!0),l=new f$(e,a.qs),d=l.nu(a.documents),u=qg.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),f=l.applyChanges(d,t.isPrimaryClient,u);kA(t,n,f._u);const m=new m$(e,n,l);return t.Pu.set(e,m),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function b$(t,e,n){const s=Tt(t),r=s.Pu.get(e),a=s.Tu.get(r.targetId);if(a.length>1)return s.Tu.set(r.targetId,a.filter(l=>!sv(l,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Ej(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Z1(s.remoteStore,r.targetId),Aj(s,r.targetId)}).catch(Qh)):(Aj(s,r.targetId),await Ej(s.localStore,r.targetId,!0))}async function w$(t,e){const n=Tt(t),s=n.Pu.get(e),r=n.Tu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Z1(n.remoteStore,s.targetId))}async function _$(t,e,n){const s=A$(t);try{const r=await function(l,d){const u=Tt(l),f=Tn.now(),m=d.reduce((w,j)=>w.add(j.key),Qt());let p,x;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let j=Jo(),S=Qt();return u.Os.getEntries(w,m).next(_=>{j=_,j.forEach((E,C)=>{C.isValidDocument()||(S=S.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,j)).next(_=>{p=_;const E=[];for(const C of d){const I=L8(C,p.get(C.key).overlayedDocument);I!=null&&E.push(new Ec(C.key,I,_D(I.value.mapValue),kr.exists(!0)))}return u.mutationQueue.addMutationBatch(w,f,E,d)}).next(_=>{x=_;const E=_.applyToLocalDocumentSet(p,S);return u.documentOverlayCache.saveOverlays(w,_.batchId,E)})}).then(()=>({batchId:x.batchId,changes:DD(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(l,d,u){let f=l.Ru[l.currentUser.toKey()];f||(f=new ts($t)),f=f.insert(d,u),l.Ru[l.currentUser.toKey()]=f}(s,r.batchId,n),await Wg(s,r.changes),await uv(s.remoteStore)}catch(r){const a=sN(r,"Failed to persist write");n.reject(a)}}async function mM(t,e){const n=Tt(t);try{const s=await P7(n.localStore,e);e.targetChanges.forEach((r,a)=>{const l=n.Eu.get(a);l&&(gn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.lu=!0:r.modifiedDocuments.size>0?gn(l.lu,14607):r.removedDocuments.size>0&&(gn(l.lu,42227),l.lu=!1))}),await Wg(n,s,e)}catch(s){await Qh(s)}}function AA(t,e,n){const s=Tt(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Pu.forEach((a,l)=>{const d=l.view.va(e);d.snapshot&&r.push(d.snapshot)}),function(l,d){const u=Tt(l);u.onlineState=d;let f=!1;u.queries.forEach((m,p)=>{for(const x of p.wa)x.va(d)&&(f=!0)}),f&&aN(u)}(s.eventManager,e),r.length&&s.hu.J_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function j$(t,e,n){const s=Tt(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Eu.get(e),a=r&&r.key;if(a){let l=new ts(ft.comparator);l=l.insert(a,xr.newNoDocument(a,kt.min()));const d=Qt().add(a),u=new lv(kt.min(),new Map,new ts($t),l,d);await mM(s,u),s.du=s.du.remove(a),s.Eu.delete(e),cN(s)}else await Ej(s.localStore,e,!1).then(()=>Aj(s,e,n)).catch(Qh)}async function N$(t,e){const n=Tt(t),s=e.batch.batchId;try{const r=await M7(n.localStore,e);pM(n,s,null),gM(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Wg(n,r)}catch(r){await Qh(r)}}async function S$(t,e,n){const s=Tt(t);try{const r=await function(l,d){const u=Tt(l);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,d).next(p=>(gn(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(f,p))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,d)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})}(s.localStore,e);pM(s,e,n),gM(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Wg(s,r)}catch(r){await Qh(r)}}function gM(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function pM(t,e,n){const s=Tt(t);let r=s.Ru[s.currentUser.toKey()];if(r){const a=r.get(e);a&&(n?a.reject(n):a.resolve(),r=r.remove(e)),s.Ru[s.currentUser.toKey()]=r}}function Aj(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Tu.get(e))t.Pu.delete(s),n&&t.hu.pu(s,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(s=>{t.Au.containsKey(s)||xM(t,s)})}function xM(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Z1(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),cN(t))}function kA(t,e,n){for(const s of n)s instanceof uM?(t.Au.addReference(s.key,e),E$(t,s)):s instanceof hM?(Ze(lN,"Document no longer in limbo: "+s.key),t.Au.removeReference(s.key,e),t.Au.containsKey(s.key)||xM(t,s.key)):jt(19791,{yu:s})}function E$(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Iu.has(s)||(Ze(lN,"New document in limbo: "+n),t.Iu.add(s),cN(t))}function cN(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ft(On.fromString(e)),s=t.mu.next();t.Eu.set(s,new g$(n)),t.du=t.du.insert(n,s),iM(t.remoteStore,new Kl(Ua(nv(n.path)),s,"TargetPurposeLimboResolution",Z0.ue))}}async function Wg(t,e,n){const s=Tt(t),r=[],a=[],l=[];s.Pu.isEmpty()||(s.Pu.forEach((d,u)=>{l.push(s.gu(u,e,n).then(f=>{var m;if((f||n)&&s.isPrimaryClient){const p=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;s.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(f){r.push(f);const p=X1.Es(u.targetId,f);a.push(p)}}))}),await Promise.all(l),s.hu.J_(r),await async function(u,f){const m=Tt(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>_e.forEach(f,x=>_e.forEach(x.Is,w=>m.persistence.referenceDelegate.addReference(p,x.targetId,w)).next(()=>_e.forEach(x.ds,w=>m.persistence.referenceDelegate.removeReference(p,x.targetId,w)))))}catch(p){if(!Zh(p))throw p;Ze(Q1,"Failed to update sequence numbers: "+p)}for(const p of f){const x=p.targetId;if(!p.fromCache){const w=m.Fs.get(x),j=w.snapshotVersion,S=w.withLastLimboFreeSnapshotVersion(j);m.Fs=m.Fs.insert(x,S)}}}(s.localStore,a))}async function C$(t,e){const n=Tt(t);if(!n.currentUser.isEqual(e)){Ze(lN,"User change. New user:",e.toKey());const s=await tM(n.localStore,e);n.currentUser=e,function(a,l){a.Vu.forEach(d=>{d.forEach(u=>{u.reject(new Ve(xe.CANCELLED,l))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Wg(n,s.Bs)}}function T$(t,e){const n=Tt(t),s=n.Eu.get(e);if(s&&s.lu)return Qt().add(s.key);{let r=Qt();const a=n.Tu.get(e);if(!a)return r;for(const l of a){const d=n.Pu.get(l);r=r.unionWith(d.view.tu)}return r}}function yM(t){const e=Tt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j$.bind(null,e),e.hu.J_=u$.bind(null,e.eventManager),e.hu.pu=h$.bind(null,e.eventManager),e}function A$(t){const e=Tt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S$.bind(null,e),e}class Gy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cv(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return D7(this.persistence,new k7,e.initialUser,this.serializer)}Du(e){return new eM(K1.Vi,this.serializer)}bu(e){return new F7}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gy.provider={build:()=>new Gy};class k$ extends Gy{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){gn(this.persistence.referenceDelegate instanceof Hy,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new g7(s,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Lr.withCacheSize(this.cacheSizeBytes):Lr.DEFAULT;return new eM(s=>Hy.Vi(s,n),this.serializer)}}class kj{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>AA(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=C$.bind(null,this.syncEngine),await l$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new d$}()}createDatastore(e){const n=cv(e.databaseInfo.databaseId),s=function(a){return new H7(a)}(e.databaseInfo);return function(a,l,d,u){return new K7(a,l,d,u)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,a,l,d){return new Q7(s,r,a,l,d)}(this.localStore,this.datastore,e.asyncQueue,n=>AA(this.syncEngine,n,0),function(){return jA.C()?new jA:new B7}())}createSyncEngine(e,n){return function(r,a,l,d,u,f,m){const p=new p$(r,a,l,d,u,f);return m&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const a=Tt(r);Ze(Rd,"RemoteStore shutting down."),a.Ia.add(5),await Hg(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}kj.provider={build:()=>new kj};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Qo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc="FirestoreClient";class R${constructor(e,n,s,r,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=pr.UNAUTHENTICATED,this.clientId=X0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,async l=>{Ze(gc,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(s,l=>(Ze(gc,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Va;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=sN(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function p_(t,e){t.asyncQueue.verifyOperationInProgress(),Ze(gc,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await tM(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>{Zo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Ze("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{Zo("Terminating Firestore due to IndexedDb database deletion failed",r)})}),t._offlineComponents=e}async function RA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await I$(t);Ze(gc,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>SA(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>SA(e.remoteStore,r)),t._onlineComponents=e}async function I$(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ze(gc,"Using user provided OfflineComponentProvider");try{await p_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===xe.FAILED_PRECONDITION||r.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Zo("Error using user provided cache. Falling back to memory cache: "+n),await p_(t,new Gy)}}else Ze(gc,"Using default OfflineComponentProvider"),await p_(t,new k$(void 0));return t._offlineComponents}async function uN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ze(gc,"Using user provided OnlineComponentProvider"),await RA(t,t._uninitializedComponentsProvider._online)):(Ze(gc,"Using default OnlineComponentProvider"),await RA(t,new kj))),t._onlineComponents}function D$(t){return uN(t).then(e=>e.syncEngine)}function M$(t){return uN(t).then(e=>e.datastore)}async function Yy(t){const e=await uN(t),n=e.eventManager;return n.onListen=x$.bind(null,e.syncEngine),n.onUnlisten=b$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=y$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=w$.bind(null,e.syncEngine),n}function P$(t,e,n={}){const s=new Va;return t.asyncQueue.enqueueAndForget(async()=>function(a,l,d,u,f){const m=new dN({next:x=>{m.Ou(),l.enqueueAndForget(()=>iN(a,p));const w=x.docs.has(d);!w&&x.fromCache?f.reject(new Ve(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&x.fromCache&&u&&u.source==="server"?f.reject(new Ve(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),p=new oN(nv(d.path),m,{includeMetadataChanges:!0,ka:!0});return rN(a,p)}(await Yy(t),t.asyncQueue,e,n,s)),s.promise}function O$(t,e,n={}){const s=new Va;return t.asyncQueue.enqueueAndForget(async()=>function(a,l,d,u,f){const m=new dN({next:x=>{m.Ou(),l.enqueueAndForget(()=>iN(a,p)),x.fromCache&&u.source==="server"?f.reject(new Ve(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),p=new oN(d,m,{includeMetadataChanges:!0,ka:!0});return rN(a,p)}(await Yy(t),t.asyncQueue,e,n,s)),s.promise}function L$(t,e,n){const s=new Va;return t.asyncQueue.enqueueAndForget(async()=>{try{const r=await M$(t);s.resolve(async function(l,d,u){var f;const m=Tt(l),{request:p,ft:x,parent:w}=n7(m.serializer,_8(d),u);m.connection.Qo||delete p.parent;const j=(await m.Jo("RunAggregationQuery",m.serializer.databaseId,w,p,1)).filter(_=>!!_.result);gn(j.length===1,64727);const S=(f=j[0].result)===null||f===void 0?void 0:f.aggregateFields;return Object.keys(S).reduce((_,E)=>(_[x[E]]=S[E],_),{})}(r,e,n))}catch(r){s.reject(r)}}),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="firestore.googleapis.com",DA=!0;class MA{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bM,this.ssl=DA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:DA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<f7)throw new Ve(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vM((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ve(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ve(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ve(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hv{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new lD;switch(s.type){case"firstParty":return new qz(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ve(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=IA.get(n);s&&(Ze("ComponentProvider","Removing Datastore"),IA.delete(n),s.terminate())}(this),Promise.resolve()}}function hN(t,e,n,s={}){var r;t=lr(t,hv);const a=ol(e),l=t._getSettings(),d=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;a&&(G0(`https://${u}`),Y0("Firestore",!0)),l.host!==bM&&l.host!==u&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:u,ssl:a,emulatorOptions:s});if(!Ad(f,d)&&(t._setSettings(f),s.mockUserToken)){let m,p;if(typeof s.mockUserToken=="string")m=s.mockUserToken,p=pr.MOCK_USER;else{m=Y4(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new Ve(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new pr(x)}t._authCredentials=new Bz(new oD(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new la(this.firestore,e,this._query)}}class Zn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}toJSON(){return{type:Zn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(zg(n,Zn._jsonSchema))return new Zn(e,s||null,new ft(On.fromString(n.referencePath)))}}Zn._jsonSchemaVersion="firestore/documentReference/1.0",Zn._jsonSchema={type:Cs("string",Zn._jsonSchemaVersion),referencePath:Cs("string")};class Bo extends la{constructor(e,n,s){super(e,n,nv(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new ft(e))}withConverter(e){return new Bo(this.firestore,e,this._path)}}function Ue(t,e,...n){if(t=pn(t),dD("collection","path",e),t instanceof hv){const s=On.fromString(e,...n);return YT(s),new Bo(t,null,s)}{if(!(t instanceof Zn||t instanceof Bo))throw new Ve(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(On.fromString(e,...n));return YT(s),new Bo(t.firestore,null,s)}}function Je(t,e,...n){if(t=pn(t),arguments.length===1&&(e=X0.newId()),dD("doc","path",e),t instanceof hv){const s=On.fromString(e,...n);return GT(s),new Zn(t,null,new ft(s))}{if(!(t instanceof Zn||t instanceof Bo))throw new Ve(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(On.fromString(e,...n));return GT(s),new Zn(t.firestore,t instanceof Bo?t.converter:null,new ft(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="AsyncQueue";class OA{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new sM(this,"async_queue_retry"),this.oc=()=>{const s=g_();s&&Ze(PA,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const n=g_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=g_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Va;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Zh(e))throw e;Ze(PA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,Qo("INTERNAL UNHANDLED ERROR: ",LA(s)),s}).then(s=>(this.nc=!1,s))));return this._c=n,n}enqueueAfterDelay(e,n,s){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=nN.createAndSchedule(this,e,n,s,a=>this.lc(a));return this.ec.push(r),r}ac(){this.tc&&jt(47125,{hc:LA(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function LA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const a of s)if(a in r&&typeof r[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Vi extends hv{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new OA,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new OA(e),this._firestoreClient=void 0,await e}}}function wM(t,e){const n=typeof t=="object"?t:K0(),s=typeof t=="string"?t:Uy,r=Bg(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const a=P1("firestore");a&&hN(r,...a)}return r}function Xd(t){if(t._terminated)throw new Ve(xe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||V$(t),t._firestoreClient}function V$(t){var e,n,s;const r=t._freezeSettings(),a=function(d,u,f,m){return new o8(d,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,vM(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new R$(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(d){const u=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class jM{constructor(e,n,s){this._userDataWriter=n,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ci(er.fromBase64String(e))}catch(n){throw new Ve(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ci(er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ci._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zg(e,ci._jsonSchema))return ci.fromBase64String(e.bytes)}}ci._jsonSchemaVersion="firestore/bytes/1.0",ci._jsonSchema={type:Cs("string",ci._jsonSchemaVersion),bytes:Cs("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ve(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ve(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ve(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ji._jsonSchemaVersion}}static fromJSON(e){if(zg(e,Ji._jsonSchema))return new Ji(e.latitude,e.longitude)}}Ji._jsonSchemaVersion="firestore/geoPoint/1.0",Ji._jsonSchema={type:Cs("string",Ji._jsonSchemaVersion),latitude:Cs("number"),longitude:Cs("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==r[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ea._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zg(e,ea._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ea(e.vectorValues);throw new Ve(xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ea._jsonSchemaVersion="firestore/vectorValue/1.0",ea._jsonSchema={type:Cs("string",ea._jsonSchemaVersion),vectorValues:Cs("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$=/^__.*__$/;class F${constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ec(e,this.data,this.fieldMask,n,this.fieldTransforms):new $g(e,this.data,n,this.fieldTransforms)}}class NM{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ec(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function SM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jt(40011,{Ec:t})}}class fN{constructor(e,n,s,r,a,l){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new fN(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:s,mc:!1});return r.fc(e),r}gc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:s,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ky(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(SM(this.Ec)&&U$.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class B${constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||cv(e)}Dc(e,n,s,r=!1){return new fN({Ec:e,methodName:n,bc:s,path:Xs.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tf(t){const e=t._freezeSettings(),n=cv(t._databaseId);return new B$(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mN(t,e,n,s,r,a={}){const l=t.Dc(a.merge||a.mergeFields?2:0,e,n,r);pN("Data must be an object, but it was:",l,s);const d=AM(s,l);let u,f;if(a.merge)u=new di(l.fieldMask),f=l.fieldTransforms;else if(a.mergeFields){const m=[];for(const p of a.mergeFields){const x=Rj(e,p,n);if(!l.contains(x))throw new Ve(xe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);RM(m,x)||m.push(x)}u=new di(m),f=l.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,f=l.fieldTransforms;return new F$(new Br(d),u,f)}class fv extends Gg{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fv}}class gN extends Gg{_toFieldTransform(e){return new D8(e.path,new ug)}isEqual(e){return e instanceof gN}}function EM(t,e,n,s){const r=t.Dc(1,e,n);pN("Data must be an object, but it was:",r,s);const a=[],l=Br.empty();Sc(s,(u,f)=>{const m=xN(e,u,n);f=pn(f);const p=r.gc(m);if(f instanceof fv)a.push(m);else{const x=Yg(f,p);x!=null&&(a.push(m),l.set(m,x))}});const d=new di(a);return new NM(l,d,r.fieldTransforms)}function CM(t,e,n,s,r,a){const l=t.Dc(1,e,n),d=[Rj(e,s,n)],u=[r];if(a.length%2!=0)throw new Ve(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)d.push(Rj(e,a[x])),u.push(a[x+1]);const f=[],m=Br.empty();for(let x=d.length-1;x>=0;--x)if(!RM(f,d[x])){const w=d[x];let j=u[x];j=pn(j);const S=l.gc(w);if(j instanceof fv)f.push(w);else{const _=Yg(j,S);_!=null&&(f.push(w),m.set(w,_))}}const p=new di(f);return new NM(m,p,l.fieldTransforms)}function TM(t,e,n,s=!1){return Yg(n,t.Dc(s?4:3,e))}function Yg(t,e){if(kM(t=pn(t)))return pN("Unsupported field value:",e,t),AM(t,e);if(t instanceof Gg)return function(s,r){if(!SM(r.Ec))throw r.wc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,r){const a=[];let l=0;for(const d of s){let u=Yg(d,r.yc(l));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),l++}return{arrayValue:{values:a}}}(t,e)}return function(s,r){if((s=pn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return k8(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=Tn.fromDate(s);return{timestampValue:qy(r.serializer,a)}}if(s instanceof Tn){const a=new Tn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:qy(r.serializer,a)}}if(s instanceof Ji)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ci)return{bytesValue:HD(r.serializer,s._byteString)};if(s instanceof Zn){const a=r.databaseId,l=s.firestore._databaseId;if(!l.isEqual(a))throw r.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:G1(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof ea)return function(l,d){return{mapValue:{fields:{[bD]:{stringValue:wD},[Fy]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw d.wc("VectorValues must only contain numeric values.");return q1(d.serializer,f)})}}}}}}(s,r);throw r.wc(`Unsupported field value: ${Q0(s)}`)}(t,e)}function AM(t,e){const n={};return mD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sc(t,(s,r)=>{const a=Yg(r,e.Vc(s));a!=null&&(n[s]=a)}),{mapValue:{fields:n}}}function kM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tn||t instanceof Ji||t instanceof ci||t instanceof Zn||t instanceof Gg||t instanceof ea)}function pN(t,e,n){if(!kM(n)||!hD(n)){const s=Q0(n);throw s==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+s)}}function Rj(t,e,n){if((e=pn(e))instanceof ef)return e._internalPath;if(typeof e=="string")return xN(t,e);throw Ky("Field path arguments must be of type string or ",t,!1,void 0,n)}const z$=new RegExp("[~\\*/\\[\\]]");function xN(t,e,n){if(e.search(z$)>=0)throw Ky(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ef(...e.split("."))._internalPath}catch{throw Ky(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ky(t,e,n,s,r){const a=s&&!s.isEmpty(),l=r!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let u="";return(a||l)&&(u+=" (found",a&&(u+=` in field ${s}`),l&&(u+=` in document ${r}`),u+=")"),new Ve(xe.INVALID_ARGUMENT,d+t+u)}function RM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,s,r,a){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(mv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $$ extends yN{data(){return super.data()}}function mv(t,e){return typeof e=="string"?xN(t,e):e instanceof ef?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ve(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vN{}class Kg extends vN{}function yt(t,e,...n){let s=[];e instanceof vN&&s.push(e),s=s.concat(n),function(a){const l=a.filter(u=>u instanceof gv).length,d=a.filter(u=>u instanceof Xg).length;if(l>1||l>0&&d>0)throw new Ve(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class Xg extends Kg{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Xg(e,n,s)}_apply(e){const n=this._parse(e);return MM(e._query,n),new la(e.firestore,e.converter,wj(e._query,n))}_parse(e){const n=tf(e.firestore);return function(a,l,d,u,f,m,p){let x;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Ve(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){FA(p,m);const j=[];for(const S of p)j.push(UA(u,a,S));x={arrayValue:{values:j}}}else x=UA(u,a,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||FA(p,m),x=TM(d,l,p,m==="in"||m==="not-in");return _s.create(f,m,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ht(t,e,n){const s=e,r=mv("where",t);return Xg._create(r,s,n)}class gv extends vN{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new gv(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:sa.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,a){let l=r;const d=a.getFlattenedFilters();for(const u of d)MM(l,u),l=wj(l,u)}(e._query,n),new la(e.firestore,e.converter,wj(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pv extends Kg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pv(e,n)}_apply(e){const n=function(r,a,l){if(r.startAt!==null)throw new Ve(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Ve(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dg(a,l)}(e._query,this._field,this._direction);return new la(e.firestore,e.converter,function(r,a){const l=r.explicitOrderBy.concat([a]);return new Gd(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Jn(t,e="asc"){const n=e,s=mv("orderBy",t);return pv._create(s,n)}class xv extends Kg{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new xv(e,n,s)}_apply(e){return new la(e.firestore,e.converter,zy(e._query,this._limit,this._limitType))}}function zr(t){return Kz("limit",t),xv._create("limit",t,"F")}class yv extends Kg{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new yv(e,n,s)}_apply(e){const n=q$(e,this.type,this._docOrFields,this._inclusive);return new la(e.firestore,e.converter,function(r,a){return new Gd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)}(e._query,n))}}function DM(...t){return yv._create("startAfter",t,!1)}function q$(t,e,n,s){if(n[0]=pn(n[0]),n[0]instanceof yN)return function(a,l,d,u,f){if(!u)throw new Ve(xe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const m=[];for(const p of uh(a))if(p.field.isKeyField())m.push(By(l,u.key));else{const x=u.data.field(p.field);if(ev(x))throw new Ve(xe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(x===null){const w=p.field.canonicalString();throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}m.push(x)}return new Mh(m,f)}(t._query,t.firestore._databaseId,e,n[0]._document,s);{const r=tf(t.firestore);return function(l,d,u,f,m,p){const x=l.explicitOrderBy;if(m.length>x.length)throw new Ve(xe.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let j=0;j<m.length;j++){const S=m[j];if(x[j].field.isKeyField()){if(typeof S!="string")throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof S}`);if(!$1(l)&&S.indexOf("/")!==-1)throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${S}' contains a slash.`);const _=l.path.child(On.fromString(S));if(!ft.isDocumentKey(_))throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const E=new ft(_);w.push(By(d,E))}else{const _=TM(u,f,S);w.push(_)}}return new Mh(w,p)}(t._query,t.firestore._databaseId,r,e,n,s)}}function UA(t,e,n){if(typeof(n=pn(n))=="string"){if(n==="")throw new Ve(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$1(e)&&n.indexOf("/")!==-1)throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(On.fromString(n));if(!ft.isDocumentKey(s))throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return By(t,new ft(s))}if(n instanceof Zn)return By(t,n._key);throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Q0(n)}.`)}function FA(t,e){if(!Array.isArray(t)||t.length===0)throw new Ve(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MM(t,e){const n=function(r,a){for(const l of r)for(const d of l.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ve(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PM{convertValue(e,n="none"){switch(fc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ls(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw jt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Sc(e,(r,a)=>{s[r]=this.convertValue(a,n)}),s}convertVectorValue(e){var n,s,r;const a=(r=(s=(n=e.fields)===null||n===void 0?void 0:n[Fy].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(l=>ls(l.doubleValue));return new ea(a)}convertGeoPoint(e){return new Ji(ls(e.latitude),ls(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=tv(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(lg(e));default:return null}}convertTimestamp(e){const n=uc(e);return new Tn(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=On.fromString(e);gn(ZD(s),9688,{name:e});const r=new Rh(s.get(1),s.get(3)),a=new ft(s.popFirst(5));return r.isEqual(n)||Qo(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}function OM(){return new _M("count")}class rh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rc extends yN{constructor(e,n,s,r,a,l){super(e,n,s,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(mv("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=rc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}rc._jsonSchemaVersion="firestore/documentSnapshot/1.0",rc._jsonSchema={type:Cs("string",rc._jsonSchemaVersion),bundleSource:Cs("string","DocumentSnapshot"),bundleName:Cs("string"),bundle:Cs("string")};class Wm extends rc{data(e={}){return super.data(e)}}class ic{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new rh(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Wm(this._firestore,this._userDataWriter,s.key,s,new rh(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ve(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>{const u=new Wm(r._firestore,r._userDataWriter,d.doc.key,d.doc,new rh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:u,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const u=new Wm(r._firestore,r._userDataWriter,d.doc.key,d.doc,new rh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return d.type!==0&&(f=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),m=l.indexOf(d.doc.key)),{type:H$(d.type),doc:u,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ic._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=X0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),s.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function H$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t){t=lr(t,Zn);const e=lr(t.firestore,Vi);return P$(Xd(e),t._key).then(n=>LM(e,t,n))}ic._jsonSchemaVersion="firestore/querySnapshot/1.0",ic._jsonSchema={type:Cs("string",ic._jsonSchemaVersion),bundleSource:Cs("string","QuerySnapshot"),bundleName:Cs("string"),bundle:Cs("string")};class vv extends PM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ci(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,n)}}function fs(t){t=lr(t,la);const e=lr(t.firestore,Vi),n=Xd(e),s=new vv(e);return IM(t._query),O$(n,t._query).then(r=>new ic(e,s,t,r))}function qr(t,e,n){t=lr(t,Zn);const s=lr(t.firestore,Vi),r=bN(t.converter,e,n);return nf(s,[mN(tf(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,kr.none())])}function Qn(t,e,n,...s){t=lr(t,Zn);const r=lr(t.firestore,Vi),a=tf(r);let l;return l=typeof(e=pn(e))=="string"||e instanceof ef?CM(a,"updateDoc",t._key,e,n,s):EM(a,"updateDoc",t._key,e),nf(r,[l.toMutation(t._key,kr.exists(!0))])}function Zs(t){return nf(lr(t.firestore,Vi),[new ov(t._key,kr.none())])}function cr(t,e){const n=lr(t.firestore,Vi),s=Je(t),r=bN(t.converter,e);return nf(n,[mN(tf(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,kr.exists(!1))]).then(()=>s)}function Ln(t,...e){var n,s,r;t=pn(t);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||VA(e[l])||(a=e[l++]);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(VA(e[l])){const p=e[l];e[l]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[l+1]=(s=p.error)===null||s===void 0?void 0:s.bind(p),e[l+2]=(r=p.complete)===null||r===void 0?void 0:r.bind(p)}let u,f,m;if(t instanceof Zn)f=lr(t.firestore,Vi),m=nv(t._key.path),u={next:p=>{e[l]&&e[l](LM(f,t,p))},error:e[l+1],complete:e[l+2]};else{const p=lr(t,la);f=lr(p.firestore,Vi),m=p._query;const x=new vv(f);u={next:w=>{e[l]&&e[l](new ic(f,x,p,w))},error:e[l+1],complete:e[l+2]},IM(t._query)}return function(x,w,j,S){const _=new dN(S),E=new oN(w,_,j);return x.asyncQueue.enqueueAndForget(async()=>rN(await Yy(x),E)),()=>{_.Ou(),x.asyncQueue.enqueueAndForget(async()=>iN(await Yy(x),E))}}(Xd(f),m,d,u)}function nf(t,e){return function(s,r){const a=new Va;return s.asyncQueue.enqueueAndForget(async()=>_$(await D$(s),r,a)),a.promise}(Xd(t),e)}function LM(t,e,n){const s=n.docs.get(e._key),r=new vv(t);return new rc(t,r,e._key,s,new rh(n.hasPendingWrites,n.fromCache),e.converter)}function ka(t){return VM(t,{count:OM()})}function VM(t,e){const n=lr(t.firestore,Vi),s=Xd(n),r=i8(e,(a,l)=>new B8(l,a.aggregateType,a._internalFieldPath));return L$(s,t._query,r).then(a=>function(d,u,f){const m=new vv(d);return new jM(u,m,f)}(n,t,a))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=tf(e)}set(e,n,s){this._verifyNotCommitted();const r=x_(e,this._firestore),a=bN(r.converter,n,s),l=mN(this._dataReader,"WriteBatch.set",r._key,a,r.converter!==null,s);return this._mutations.push(l.toMutation(r._key,kr.none())),this}update(e,n,s,...r){this._verifyNotCommitted();const a=x_(e,this._firestore);let l;return l=typeof(n=pn(n))=="string"||n instanceof ef?CM(this._dataReader,"WriteBatch.update",a._key,n,s,r):EM(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(l.toMutation(a._key,kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=x_(e,this._firestore);return this._mutations=this._mutations.concat(new ov(n._key,kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function x_(t,e){if((t=pn(t)).firestore!==e)throw new Ve(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function ze(){return new gN("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t){return Xd(t=lr(t,Vi)),new UM(t,e=>nf(t,e))}(function(e,n=!0){(function(r){Xh=r})(Wd),cc(new Ko("firestore",(s,{instanceIdentifier:r,options:a})=>{const l=s.getProvider("app").getImmediate(),d=new Vi(new zz(s.getProvider("auth-internal")),new Hz(l,s.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ve(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rh(f.options.projectId,m)}(l,r),l);return a=Object.assign({useFetchStreams:n},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Mi(zT,$T,e),Mi(zT,$T,"esm2017")})();const Ij=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:PM,AggregateField:_M,AggregateQuerySnapshot:jM,Bytes:ci,CollectionReference:Bo,DocumentReference:Zn,DocumentSnapshot:rc,FieldPath:ef,FieldValue:Gg,Firestore:Vi,FirestoreError:Ve,GeoPoint:Ji,Query:la,QueryCompositeFilterConstraint:gv,QueryConstraint:Kg,QueryDocumentSnapshot:Wm,QueryFieldFilterConstraint:Xg,QueryLimitConstraint:xv,QueryOrderByConstraint:pv,QuerySnapshot:ic,QueryStartAtConstraint:yv,SnapshotMetadata:rh,Timestamp:Tn,VectorValue:ea,WriteBatch:UM,_AutoId:X0,_ByteString:er,_DatabaseId:Rh,_DocumentKey:ft,_EmptyAuthCredentialsProvider:lD,_FieldPath:Xs,_cast:lr,_logWarn:Zo,_validateIsNotUsedTogether:uD,addDoc:cr,collection:Ue,connectFirestoreEmulator:hN,count:OM,deleteDoc:Zs,doc:Je,ensureFirestoreConfigured:Xd,executeWrite:nf,getAggregateFromServer:VM,getCountFromServer:ka,getDoc:_r,getDocs:fs,getFirestore:wM,limit:zr,onSnapshot:Ln,orderBy:Jn,query:yt,serverTimestamp:ze,setDoc:qr,startAfter:DM,updateDoc:Qn,where:ht,writeBatch:Ta},Symbol.toStringTag,{value:"Module"}));var Aa=function(){return Aa=Object.assign||function(e){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Aa.apply(this,arguments)};function Qg(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function W$(t,e,n){if(n||arguments.length===2)for(var s=0,r=e.length,a;s<r;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))}function FM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G$=FM,BM=new Ug("auth","Firebase",FM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=new O1("@firebase/auth");function Y$(t,...e){Xy.logLevel<=Xt.WARN&&Xy.warn(`Auth (${Wd}): ${t}`,...e)}function by(t,...e){Xy.logLevel<=Xt.ERROR&&Xy.error(`Auth (${Wd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t,...e){throw wN(t,...e)}function Ba(t,...e){return wN(t,...e)}function zM(t,e,n){const s=Object.assign(Object.assign({},G$()),{[e]:n});return new Ug("auth","Firebase",s).create(e,{appName:t.name})}function zo(t){return zM(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wN(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return BM.create(t,...e)}function _t(t,e,...n){if(!t)throw wN(e,...n)}function Po(t){const e="INTERNAL ASSERTION FAILED: "+t;throw by(e),new Error(e)}function el(t,e){t||Po(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function K$(){return BA()==="http:"||BA()==="https:"}function BA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K$()||yB()||"connection"in navigator)?navigator.onLine:!0}function Q$(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n){this.shortDelay=e,this.longDelay=n,el(n>e,"Short delay should be less than long delay!"),this.isMobile=gB()||vB()}get(){return X$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t,e){el(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Po("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Po("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Po("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eq=new Zg(3e4,6e4);function Cc(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Tc(t,e,n,s,r={}){return qM(t,r,async()=>{let a={},l={};s&&(e==="GET"?l=s:a={body:JSON.stringify(s)});const d=Fg(Object.assign({key:t.config.apiKey},l)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:u},a);return xB()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&ol(t.emulatorConfig.host)&&(f.credentials="include"),$M.fetch()(await HM(t,t.config.apiHost,n,d),f)})}async function qM(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},Z$),e);try{const r=new nq(t),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Ox(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[u,f]=d.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ox(t,"credential-already-in-use",l);if(u==="EMAIL_EXISTS")throw Ox(t,"email-already-in-use",l);if(u==="USER_DISABLED")throw Ox(t,"user-disabled",l);const m=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw zM(t,m,f);ra(t,m)}}catch(r){if(r instanceof Ja)throw r;ra(t,"network-request-failed",{message:String(r)})}}async function Jg(t,e,n,s,r={}){const a=await Tc(t,e,n,s,r);return"mfaPendingCredential"in a&&ra(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function HM(t,e,n,s){const r=`${e}${n}?${s}`,a=t,l=a.config.emulator?_N(t.config,r):`${t.config.apiScheme}://${r}`;return J$.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function tq(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nq{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ba(this.auth,"network-request-failed")),eq.get())})}}function Ox(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Ba(t,e,s);return r.customData._tokenResponse=n,r}function zA(t){return t!==void 0&&t.enterprise!==void 0}class sq{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tq(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rq(t,e){return Tc(t,"GET","/v2/recaptchaConfig",Cc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iq(t,e){return Tc(t,"POST","/v1/accounts:delete",e)}async function Qy(t,e){return Tc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aq(t,e=!1){const n=pn(t),s=await n.getIdToken(e),r=jN(s);_t(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:r,token:s,authTime:Gm(y_(r.auth_time)),issuedAtTime:Gm(y_(r.iat)),expirationTime:Gm(y_(r.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function y_(t){return Number(t)*1e3}function jN(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return by("JWT malformed, contained fewer than 3 sections"),null;try{const r=q4(n);return r?JSON.parse(r):(by("Failed to decode base64 JWT payload"),null)}catch(r){return by("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function $A(t){const e=jN(t);return _t(e,"internal-error"),_t(typeof e.exp<"u","internal-error"),_t(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mg(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ja&&oq(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function oq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gm(this.lastLoginAt),this.creationTime=Gm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zy(t){var e;const n=t.auth,s=await t.getIdToken(),r=await mg(t,Qy(n,{idToken:s}));_t(r==null?void 0:r.users.length,n,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?WM(a.providerUserInfo):[],d=dq(t.providerData,l),u=t.isAnonymous,f=!(t.email&&a.passwordHash)&&!(d!=null&&d.length),m=u?f:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Mj(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(t,p)}async function cq(t){const e=pn(t);await Zy(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dq(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function WM(t){return t.map(e=>{var{providerId:n}=e,s=Qg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uq(t,e){const n=await qM(t,{},async()=>{const s=Fg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=t.config,l=await HM(t,r,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:d,body:s};return t.emulatorConfig&&ol(t.emulatorConfig.host)&&(u.credentials="include"),$M.fetch()(l,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hq(t,e){return Tc(t,"POST","/v2/accounts:revokeToken",Cc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_t(e.idToken,"internal-error"),_t(typeof e.idToken<"u","internal-error"),_t(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$A(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_t(e.length!==0,"internal-error");const n=$A(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:a}=await uq(e,n);this.updateTokensAndExpiration(s,r,Number(a))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:a}=n,l=new fh;return s&&(_t(typeof s=="string","internal-error",{appName:e}),l.refreshToken=s),r&&(_t(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),a&&(_t(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fh,this.toJSON())}_performRefresh(){return Po("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(t,e){_t(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qi{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,a=Qg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Mj(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await mg(this,this.stsTokenManager.getToken(this.auth,e));return _t(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aq(this,e)}reload(){return cq(this)}_assign(e){this!==e&&(_t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Zy(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fr(this.auth.app))return Promise.reject(zo(this.auth));const e=await this.getIdToken();return await mg(this,iq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,a,l,d,u,f,m;const p=(s=n.displayName)!==null&&s!==void 0?s:void 0,x=(r=n.email)!==null&&r!==void 0?r:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,j=(l=n.photoURL)!==null&&l!==void 0?l:void 0,S=(d=n.tenantId)!==null&&d!==void 0?d:void 0,_=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(f=n.createdAt)!==null&&f!==void 0?f:void 0,C=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:I,emailVerified:M,isAnonymous:V,providerData:z,stsTokenManager:D}=n;_t(I&&D,e,"internal-error");const A=fh.fromJSON(this.name,D);_t(typeof I=="string",e,"internal-error"),Pl(p,e.name),Pl(x,e.name),_t(typeof M=="boolean",e,"internal-error"),_t(typeof V=="boolean",e,"internal-error"),Pl(w,e.name),Pl(j,e.name),Pl(S,e.name),Pl(_,e.name),Pl(E,e.name),Pl(C,e.name);const T=new Qi({uid:I,auth:e,email:x,emailVerified:M,displayName:p,isAnonymous:V,photoURL:j,phoneNumber:w,tenantId:S,stsTokenManager:A,createdAt:E,lastLoginAt:C});return z&&Array.isArray(z)&&(T.providerData=z.map(R=>Object.assign({},R))),_&&(T._redirectEventId=_),T}static async _fromIdTokenResponse(e,n,s=!1){const r=new fh;r.updateFromServerResponse(n);const a=new Qi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Zy(a),a}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];_t(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?WM(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),d=new fh;d.updateFromIdToken(s);const u=new Qi({uid:r.localId,auth:e,stsTokenManager:d,isAnonymous:l}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Mj(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,f),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=new Map;function Oo(t){el(t instanceof Function,"Expected a class definition");let e=qA.get(t);return e?(el(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GM.type="NONE";const HA=GM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(t,e,n){return`firebase:${t}:${e}:${n}`}class mh{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:a}=this.auth;this.fullUserKey=wy(this.userKey,r.apiKey,a),this.fullPersistenceKey=wy("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Qy(this.auth,{idToken:e}).catch(()=>{});return n?Qi._fromGetAccountInfoResponse(this.auth,n,e):null}return Qi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new mh(Oo(HA),e,s);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=r[0]||Oo(HA);const l=wy(s,e.config.apiKey,e.name);let d=null;for(const f of n)try{const m=await f._get(l);if(m){let p;if(typeof m=="string"){const x=await Qy(e,{idToken:m}).catch(()=>{});if(!x)break;p=await Qi._fromGetAccountInfoResponse(e,x,m)}else p=Qi._fromJSON(e,m);f!==a&&(d=p),a=f;break}}catch{}const u=r.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new mh(a,e,s):(a=u[0],d&&await a._set(l,d.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(l)}catch{}})),new mh(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JM(e))return"Blackberry";if(eP(e))return"Webos";if(KM(e))return"Safari";if((e.includes("chrome/")||XM(e))&&!e.includes("edge/"))return"Chrome";if(ZM(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function YM(t=wr()){return/firefox\//i.test(t)}function KM(t=wr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XM(t=wr()){return/crios\//i.test(t)}function QM(t=wr()){return/iemobile/i.test(t)}function ZM(t=wr()){return/android/i.test(t)}function JM(t=wr()){return/blackberry/i.test(t)}function eP(t=wr()){return/webos/i.test(t)}function NN(t=wr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fq(t=wr()){var e;return NN(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mq(){return bB()&&document.documentMode===10}function tP(t=wr()){return NN(t)||ZM(t)||eP(t)||JM(t)||/windows phone/i.test(t)||QM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t,e=[]){let n;switch(t){case"Browser":n=WA(wr());break;case"Worker":n=`${WA(wr())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wd}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=a=>new Promise((l,d)=>{try{const u=e(a);l(u)}catch(u){d(u)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pq(t,e={}){return Tc(t,"GET","/v2/passwordPolicy",Cc(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xq=6;class yq{constructor(e){var n,s,r,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:xq,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,a,l,d;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNumericCharacter)!==null&&l!==void 0?l:!0),u.isValid&&(u.isValid=(d=u.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),u}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vq{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GA(this),this.idTokenSubscription=new GA(this),this.beforeStateQueue=new gq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Oo(n)),this._initializationPromise=this.queue(async()=>{var s,r,a;if(!this._deleted&&(this.persistenceManager=await mh.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qy(this,{idToken:e}),s=await Qi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Fr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===d)&&(u!=null&&u.user)&&(r=u.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zy(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Q$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fr(this.app))return Promise.reject(zo(this));const n=e?pn(e):null;return n&&_t(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fr(this.app)?Promise.reject(zo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fr(this.app)?Promise.reject(zo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Oo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pq(this),n=new yq(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ug("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await hq(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Oo(e)||this._popupRedirectResolver;_t(n,this,"argument-error"),this.redirectPersistenceManager=await mh.create(this,[Oo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(_t(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,r);return()=>{l=!0,u()}}else{const u=e.addObserver(n);return()=>{l=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Y$(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qd(t){return pn(t)}class GA{constructor(e){this.auth=e,this.observer=null,this.addObserver=TB(n=>this.observer=n)}get next(){return _t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bq(t){bv=t}function sP(t){return bv.loadJS(t)}function wq(){return bv.recaptchaEnterpriseScript}function _q(){return bv.gapiScript}function jq(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Nq{constructor(){this.enterprise=new Sq}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Sq{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Eq="recaptcha-enterprise",rP="NO_RECAPTCHA";class Cq{constructor(e){this.type=Eq,this.auth=Qd(e)}async verify(e="verify",n=!1){async function s(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,d)=>{rq(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new sq(u);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,l(f.siteKey)}}).catch(u=>{d(u)})})}function r(a,l,d){const u=window.grecaptcha;zA(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(f=>{l(f)}).catch(()=>{l(rP)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Nq().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{s(this.auth).then(d=>{if(!n&&zA(window.grecaptcha))r(d,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let u=wq();u.length!==0&&(u+=d),sP(u).then(()=>{r(d,a,l)}).catch(f=>{l(f)})}}).catch(d=>{l(d)})})}}async function YA(t,e,n,s=!1,r=!1){const a=new Cq(t);let l;if(r)l=rP;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const u=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const u=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:l}):Object.assign(d,{captchaResponse:l}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Pj(t,e,n,s,r){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await YA(t,e,n,n==="getOobCode");return s(t,l)}else return s(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await YA(t,e,n,n==="getOobCode");return s(t,d)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tq(t,e){const n=Bg(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),a=n.getOptions();if(Ad(a,e??{}))return r;ra(r,"already-initialized")}return n.initialize({options:e})}function Aq(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Oo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function SN(t,e,n){const s=Qd(t);_t(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),a=iP(e),{host:l,port:d}=kq(e),u=d===null?"":`:${d}`,f={url:`${a}//${l}${u}/`},m=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){_t(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),_t(Ad(f,s.config.emulator)&&Ad(m,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=f,s.emulatorConfig=m,s.settings.appVerificationDisabledForTesting=!0,ol(l)?(G0(`${a}//${l}${u}`),Y0("Auth",!0)):r||Rq()}function iP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kq(t){const e=iP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const a=r[1];return{host:a,port:KA(s.substr(a.length+1))}}else{const[a,l]=s.split(":");return{host:a,port:KA(l)}}}function KA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Rq(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Po("not implemented")}_getIdTokenResponse(e){return Po("not implemented")}_linkToIdToken(e,n){return Po("not implemented")}_getReauthenticationResolver(e){return Po("not implemented")}}async function Iq(t,e){return Tc(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dq(t,e){return Jg(t,"POST","/v1/accounts:signInWithPassword",Cc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mq(t,e){return Jg(t,"POST","/v1/accounts:signInWithEmailLink",Cc(t,e))}async function Pq(t,e){return Jg(t,"POST","/v1/accounts:signInWithEmailLink",Cc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg extends EN{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new gg(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new gg(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pj(e,n,"signInWithPassword",Dq);case"emailLink":return Mq(e,{email:this._email,oobCode:this._password});default:ra(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pj(e,s,"signUpPassword",Iq);case"emailLink":return Pq(e,{idToken:n,email:this._email,oobCode:this._password});default:ra(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gh(t,e){return Jg(t,"POST","/v1/accounts:signInWithIdp",Cc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oq="http://localhost";class Id extends EN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Id(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ra("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,a=Qg(n,["providerId","signInMethod"]);if(!s||!r)return null;const l=new Id(s,r);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return gh(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,gh(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gh(e,n)}buildRequest(){const e={requestUri:Oq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fg(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Vq(t){const e=km(Rm(t)).link,n=e?km(Rm(e)).deep_link_id:null,s=km(Rm(t)).deep_link_id;return(s?km(Rm(s)).link:null)||s||n||e||t}class CN{constructor(e){var n,s,r,a,l,d;const u=km(Rm(e)),f=(n=u.apiKey)!==null&&n!==void 0?n:null,m=(s=u.oobCode)!==null&&s!==void 0?s:null,p=Lq((r=u.mode)!==null&&r!==void 0?r:null);_t(f&&m&&p,"argument-error"),this.apiKey=f,this.operation=p,this.code=m,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=u.lang)!==null&&l!==void 0?l:null,this.tenantId=(d=u.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=Vq(e);try{return new CN(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(){this.providerId=sf.PROVIDER_ID}static credential(e,n){return gg._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=CN.parseLink(n);return _t(s,"argument-error"),gg._fromEmailAndCode(e,s.code,s.tenantId)}}sf.PROVIDER_ID="password";sf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends aP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends ep{constructor(){super("facebook.com")}static credential(e){return Id._fromParams({providerId:$l.PROVIDER_ID,signInMethod:$l.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $l.credentialFromTaggedObject(e)}static credentialFromError(e){return $l.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $l.credential(e.oauthAccessToken)}catch{return null}}}$l.FACEBOOK_SIGN_IN_METHOD="facebook.com";$l.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends ep{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Id._fromParams({providerId:ql.PROVIDER_ID,signInMethod:ql.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ql.credentialFromTaggedObject(e)}static credentialFromError(e){return ql.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ql.credential(n,s)}catch{return null}}}ql.GOOGLE_SIGN_IN_METHOD="google.com";ql.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends ep{constructor(){super("github.com")}static credential(e){return Id._fromParams({providerId:Hl.PROVIDER_ID,signInMethod:Hl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hl.credentialFromTaggedObject(e)}static credentialFromError(e){return Hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hl.credential(e.oauthAccessToken)}catch{return null}}}Hl.GITHUB_SIGN_IN_METHOD="github.com";Hl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends ep{constructor(){super("twitter.com")}static credential(e,n){return Id._fromParams({providerId:Wl.PROVIDER_ID,signInMethod:Wl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wl.credentialFromTaggedObject(e)}static credentialFromError(e){return Wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Wl.credential(n,s)}catch{return null}}}Wl.TWITTER_SIGN_IN_METHOD="twitter.com";Wl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uq(t,e){return Jg(t,"POST","/v1/accounts:signUp",Cc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const a=await Qi._fromIdTokenResponse(e,s,r),l=XA(s);return new Dd({user:a,providerId:l,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=XA(s);return new Dd({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function XA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy extends Ja{constructor(e,n,s,r){var a;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Jy.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Jy(e,n,s,r)}}function oP(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Jy._fromErrorAndOperation(t,a,e,s):a})}async function Fq(t,e,n=!1){const s=await mg(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Dd._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bq(t,e,n=!1){const{auth:s}=t;if(Fr(s.app))return Promise.reject(zo(s));const r="reauthenticate";try{const a=await mg(t,oP(s,r,e,t),n);_t(a.idToken,s,"internal-error");const l=jN(a.idToken);_t(l,s,"internal-error");const{sub:d}=l;return _t(t.uid===d,s,"user-mismatch"),Dd._forOperation(t,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ra(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(t,e,n=!1){if(Fr(t.app))return Promise.reject(zo(t));const s="signIn",r=await oP(t,s,e),a=await Dd._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(a.user),a}async function zq(t,e){return lP(Qd(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(t){const e=Qd(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dP(t,e,n){if(Fr(t.app))return Promise.reject(zo(t));const s=Qd(t),l=await Pj(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Uq).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&cP(t),u}),d=await Dd._fromIdTokenResponse(s,"signIn",l);return await s._updateCurrentUser(d.user),d}function TN(t,e,n){return Fr(t.app)?Promise.reject(zo(t)):zq(pn(t),sf.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&cP(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(t,e){return pn(t).setPersistence(e)}function qq(t,e,n,s){return pn(t).onIdTokenChanged(e,n,s)}function Hq(t,e,n){return pn(t).beforeAuthStateChanged(e,n)}function Wq(t,e,n,s){return pn(t).onAuthStateChanged(e,n,s)}function e0(t){return pn(t).signOut()}const t0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(t0,"1"),this.storage.removeItem(t0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq=1e3,Yq=10;class hP extends uP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,d,u)=>{this.notifyListeners(l,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(s);!n&&this.localCache[s]===l||this.notifyListeners(s,l)},a=this.storage.getItem(s);mq()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Yq):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Gq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hP.type="LOCAL";const fP=hP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP extends uP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mP.type="SESSION";const gP=mP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new wv(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:a}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const d=Array.from(l).map(async f=>f(n.origin,a)),u=await Kq(d);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,l;return new Promise((d,u)=>{const f=AN("",20);r.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},s);l={messageChannel:r,onMessage(p){const x=p;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(x.data.response);break;default:clearTimeout(m),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(){return window}function Qq(t){za().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(){return typeof za().WorkerGlobalScope<"u"&&typeof za().importScripts=="function"}async function Zq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Jq(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function eH(){return pP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="firebaseLocalStorageDb",tH=1,n0="firebaseLocalStorage",yP="fbase_key";class tp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _v(t,e){return t.transaction([n0],e?"readwrite":"readonly").objectStore(n0)}function nH(){const t=indexedDB.deleteDatabase(xP);return new tp(t).toPromise()}function Oj(){const t=indexedDB.open(xP,tH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(n0,{keyPath:yP})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(n0)?e(s):(s.close(),await nH(),e(await Oj()))})})}async function QA(t,e,n){const s=_v(t,!0).put({[yP]:e,value:n});return new tp(s).toPromise()}async function sH(t,e){const n=_v(t,!1).get(e),s=await new tp(n).toPromise();return s===void 0?null:s.value}function ZA(t,e){const n=_v(t,!0).delete(e);return new tp(n).toPromise()}const rH=800,iH=3;class vP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Oj(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>iH)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wv._getInstance(eH()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Zq(),!this.activeServiceWorker)return;this.sender=new Xq(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Jq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Oj();return await QA(e,t0,"1"),await ZA(e,t0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>QA(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>sH(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ZA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=_v(r,!1).getAll();return new tp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vP.type="LOCAL";const aH=vP;new Zg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oH(t,e){return e?Oo(e):(_t(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN extends EN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lH(t){return lP(t.auth,new kN(t),t.bypassAuthState)}function cH(t){const{auth:e,user:n}=t;return _t(n,e,"internal-error"),Bq(n,new kN(t),t.bypassAuthState)}async function dH(t){const{auth:e,user:n}=t;return _t(n,e,"internal-error"),Fq(n,new kN(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n,s,r,a=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(u))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lH;case"linkViaPopup":case"linkViaRedirect":return dH;case"reauthViaPopup":case"reauthViaRedirect":return cH;default:ra(this.auth,"internal-error")}}resolve(e){el(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){el(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH=new Zg(2e3,1e4);class ih extends bP{constructor(e,n,s,r,a){super(e,n,r,a),this.provider=s,this.authWindow=null,this.pollId=null,ih.currentPopupAction&&ih.currentPopupAction.cancel(),ih.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _t(e,this.auth,"internal-error"),e}async onExecution(){el(this.filter.length===1,"Popup operations only handle one event");const e=AN();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ba(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ba(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ih.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ba(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uH.get())};e()}}ih.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hH="pendingRedirect",_y=new Map;class fH extends bP{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=_y.get(this.auth._key());if(!e){try{const s=await mH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}_y.set(this.auth._key(),e)}return this.bypassAuthState||_y.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mH(t,e){const n=xH(e),s=pH(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function gH(t,e){_y.set(t._key(),e)}function pH(t){return Oo(t._redirectPersistence)}function xH(t){return wy(hH,t.config.apiKey,t.name)}async function yH(t,e,n=!1){if(Fr(t.app))return Promise.reject(zo(t));const s=Qd(t),r=oH(s,e),l=await new fH(s,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await s._persistUserIfCurrent(l.user),await s._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vH=10*60*1e3;class bH{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!wP(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Ba(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vH&&this.cachedEventUids.clear(),this.cachedEventUids.has(JA(e))}saveEventToCache(e){this.cachedEventUids.add(JA(e)),this.lastProcessedEventTime=Date.now()}}function JA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _H(t,e={}){return Tc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NH=/^https?/;async function SH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _H(t);for(const n of e)try{if(EH(n))return}catch{}ra(t,"unauthorized-domain")}function EH(t){const e=Dj(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===s}if(!NH.test(n))return!1;if(jH.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CH=new Zg(3e4,6e4);function ek(){const t=za().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function TH(t){return new Promise((e,n)=>{var s,r,a;function l(){ek(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ek(),n(Ba(t,"network-request-failed"))},timeout:CH.get()})}if(!((r=(s=za().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((a=za().gapi)===null||a===void 0)&&a.load)l();else{const d=jq("iframefcb");return za()[d]=()=>{gapi.load?l():n(Ba(t,"network-request-failed"))},sP(`${_q()}?onload=${d}`).catch(u=>n(u))}}).catch(e=>{throw jy=null,e})}let jy=null;function AH(t){return jy=jy||TH(t),jy}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH=new Zg(5e3,15e3),RH="__/auth/iframe",IH="emulator/auth/iframe",DH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PH(t){const e=t.config;_t(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_N(e,IH):`https://${t.config.authDomain}/${RH}`,s={apiKey:e.apiKey,appName:t.name,v:Wd},r=MH.get(t.config.apiHost);r&&(s.eid=r);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${Fg(s).slice(1)}`}async function OH(t){const e=await AH(t),n=za().gapi;return _t(n,t,"internal-error"),e.open({where:document.body,url:PH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DH,dontclear:!0},s=>new Promise(async(r,a)=>{await s.restyle({setHideOnLeave:!1});const l=Ba(t,"network-request-failed"),d=za().setTimeout(()=>{a(l)},kH.get());function u(){za().clearTimeout(d),r(s)}s.ping(u).then(u,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VH=500,UH=600,FH="_blank",BH="http://localhost";class tk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zH(t,e,n,s=VH,r=UH){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const u=Object.assign(Object.assign({},LH),{width:s.toString(),height:r.toString(),top:a,left:l}),f=wr().toLowerCase();n&&(d=XM(f)?FH:n),YM(f)&&(e=e||BH,u.scrollbars="yes");const m=Object.entries(u).reduce((x,[w,j])=>`${x}${w}=${j},`,"");if(fq(f)&&d!=="_self")return $H(e||"",d),new tk(null);const p=window.open(e||"",d,m);_t(p,t,"popup-blocked");try{p.focus()}catch{}return new tk(p)}function $H(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qH="__/auth/handler",HH="emulator/auth/handler",WH=encodeURIComponent("fac");async function nk(t,e,n,s,r,a){_t(t.config.authDomain,t,"auth-domain-config-required"),_t(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Wd,eventId:r};if(e instanceof aP){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",CB(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))l[m]=p}if(e instanceof ep){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(l.scopes=m.join(","))}t.tenantId&&(l.tid=t.tenantId);const d=l;for(const m of Object.keys(d))d[m]===void 0&&delete d[m];const u=await t._getAppCheckToken(),f=u?`#${WH}=${encodeURIComponent(u)}`:"";return`${GH(t)}?${Fg(d).slice(1)}${f}`}function GH({config:t}){return t.emulator?_N(t,HH):`https://${t.authDomain}/${qH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="webStorageSupport";class YH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gP,this._completeRedirectFn=yH,this._overrideRedirectResult=gH}async _openPopup(e,n,s,r){var a;el((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await nk(e,n,s,Dj(),r);return zH(e,l,AN())}async _openRedirect(e,n,s,r){await this._originValidation(e);const a=await nk(e,n,s,Dj(),r);return Qq(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(el(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await OH(e),s=new bH(e);return n.register("authEvent",r=>(_t(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(v_,{type:v_},r=>{var a;const l=(a=r==null?void 0:r[0])===null||a===void 0?void 0:a[v_];l!==void 0&&n(!!l),ra(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tP()||KM()||NN()}}const KH=YH;var sk="@firebase/auth",rk="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZH(t){cc(new Ko("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=s.options;_t(l&&!l.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:l,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nP(t)},f=new vq(s,r,a,u);return Aq(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),cc(new Ko("auth-internal",e=>{const n=Qd(e.getProvider("auth").getImmediate());return(s=>new XH(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mi(sk,rk,QH(t)),Mi(sk,rk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JH=5*60,eW=G4("authIdTokenMaxAge")||JH;let ik=null;const tW=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>eW)return;const r=n==null?void 0:n.token;ik!==r&&(ik=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function pg(t=K0()){const e=Bg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Tq(t,{popupRedirectResolver:KH,persistence:[aH,fP,gP]}),s=G4("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(s,location.origin);if(location.origin===a.origin){const l=tW(a.toString());Hq(n,l,()=>l(n.currentUser)),qq(n,d=>l(d))}}const r=H4("auth");return r&&SN(n,`http://${r}`),n}function nW(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bq({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const a=Ba("internal-error");a.customData=r,n(a)},s.type="text/javascript",s.charset="UTF-8",nW().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZH("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="firebasestorage.googleapis.com",jP="storageBucket",sW=2*60*1e3,rW=10*60*1e3,iW=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Ja{constructor(e,n,s=0){super(b_(e),`Firebase Storage: ${n} (${b_(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ns.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return b_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qn||(qn={}));function b_(t){return"storage/"+t}function RN(){const t="An unknown error occurred, please check the error payload for server response.";return new ns(qn.UNKNOWN,t)}function aW(t){return new ns(qn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function oW(t){return new ns(qn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lW(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ns(qn.UNAUTHENTICATED,t)}function cW(){return new ns(qn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function dW(t){return new ns(qn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function NP(){return new ns(qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SP(){return new ns(qn.CANCELED,"User canceled the upload/download.")}function uW(t){return new ns(qn.INVALID_URL,"Invalid URL '"+t+"'.")}function hW(t){return new ns(qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function fW(){return new ns(qn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+jP+"' property when initializing the app?")}function EP(){return new ns(qn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function mW(){return new ns(qn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function gW(){return new ns(qn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function pW(t){return new ns(qn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Lj(t){return new ns(qn.INVALID_ARGUMENT,t)}function CP(){return new ns(qn.APP_DELETED,"The Firebase app was deleted.")}function xW(t){return new ns(qn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ym(t,e){return new ns(qn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ym(t){throw new ns(qn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=ui.makeFromUrl(e,n)}catch{return new ui(e,"")}if(s.path==="")return s;throw hW(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function a(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const l="(/(.*))?$",d=new RegExp("^gs://"+r+l,"i"),u={bucket:1,path:3};function f(M){M.path_=decodeURIComponent(M.path)}const m="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${m}/b/${r}/o${x}`,"i"),j={bucket:1,path:3},S=n===_P?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",E=new RegExp(`^https?://${S}/${r}/${_}`,"i"),I=[{regex:d,indices:u,postModify:a},{regex:w,indices:j,postModify:f},{regex:E,indices:{bucket:1,path:2},postModify:f}];for(let M=0;M<I.length;M++){const V=I[M],z=V.regex.exec(e);if(z){const D=z[V.indices.bucket];let A=z[V.indices.path];A||(A=""),s=new ui(D,A),V.postModify(s);break}}if(s==null)throw uW(e);return s}}class yW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vW(t,e,n){let s=1,r=null,a=null,l=!1,d=0;function u(){return d===2}let f=!1;function m(..._){f||(f=!0,e.apply(null,_))}function p(_){r=setTimeout(()=>{r=null,t(w,u())},_)}function x(){a&&clearTimeout(a)}function w(_,...E){if(f){x();return}if(_){x(),m.call(null,_,...E);return}if(u()||l){x(),m.call(null,_,...E);return}s<64&&(s*=2);let I;d===1?(d=2,I=0):I=(s+Math.random())*1e3,p(I)}let j=!1;function S(_){j||(j=!0,x(),!f&&(r!==null?(_||(d=2),clearTimeout(r),p(0)):_||(d=1)))}return p(0),a=setTimeout(()=>{l=!0,S(!0)},n),S}function bW(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wW(t){return t!==void 0}function _W(t){return typeof t=="function"}function jW(t){return typeof t=="object"&&!Array.isArray(t)}function jv(t){return typeof t=="string"||t instanceof String}function ak(t){return IN()&&t instanceof Blob}function IN(){return typeof Blob<"u"}function ok(t,e,n,s){if(s<e)throw Lj(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw Lj(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function TP(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var Sd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Sd||(Sd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||r||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(e,n,s,r,a,l,d,u,f,m,p,x=!0,w=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=u,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=p,this.retry=x,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,S)=>{this.resolve_=j,this.reject_=S,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new Lx(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{const u=d.loaded,f=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,f)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===Sd.NO_ERROR,u=a.getStatus();if(!d||AP(u,this.additionalRetryCodes_)&&this.retry){const m=a.getErrorCode()===Sd.ABORT;s(!1,new Lx(!1,null,m));return}const f=this.successCodes_.indexOf(u)!==-1;s(!0,new Lx(f,a))})},n=(s,r)=>{const a=this.resolve_,l=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(d,d.getResponse());wW(u)?a(u):a()}catch(u){l(u)}else if(d!==null){const u=RN();u.serverResponse=d.getErrorText(),this.errorCallback_?l(this.errorCallback_(d,u)):l(u)}else if(r.canceled){const u=this.appDelete_?CP():SP();l(u)}else{const u=NP();l(u)}};this.canceled_?n(!1,new Lx(!1,null,!0)):this.backoffId_=vW(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Lx{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function SW(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function EW(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function CW(t,e){e&&(t["X-Firebase-GMPID"]=e)}function TW(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function AW(t,e,n,s,r,a,l=!0,d=!1){const u=TP(t.urlParams),f=t.url+u,m=Object.assign({},t.headers);return CW(m,e),SW(m,n),EW(m,a),TW(m,s),new NW(f,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function RW(...t){const e=kW();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(IN())return new Blob(t);throw new ns(qn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function IW(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DW(t){if(typeof atob>"u")throw pW("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class w_{constructor(e,n){this.data=e,this.contentType=n||null}}function MW(t,e){switch(t){case Ra.RAW:return new w_(kP(e));case Ra.BASE64:case Ra.BASE64URL:return new w_(RP(t,e));case Ra.DATA_URL:return new w_(OW(e),LW(e))}throw RN()}function kP(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=s,l=t.charCodeAt(++n);s=65536|(a&1023)<<10|l&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function PW(t){let e;try{e=decodeURIComponent(t)}catch{throw Ym(Ra.DATA_URL,"Malformed data URL.")}return kP(e)}function RP(t,e){switch(t){case Ra.BASE64:{const r=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(r||a)throw Ym(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ra.BASE64URL:{const r=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(r||a)throw Ym(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=DW(e)}catch(r){throw r.message.includes("polyfill")?r:Ym(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class IP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ym(Ra.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=VW(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function OW(t){const e=new IP(t);return e.base64?RP(Ra.BASE64,e.rest):PW(e.rest)}function LW(t){return new IP(t).contentType}function VW(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n){let s=0,r="";ak(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(ak(this.data_)){const s=this.data_,r=IW(s,e,n);return r===null?null:new Mo(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Mo(s,!0)}}static getBlob(...e){if(IN()){const n=e.map(s=>s instanceof Mo?s.data_:s);return new Mo(RW.apply(null,n))}else{const n=e.map(l=>jv(l)?MW(Ra.RAW,l).data:l.data_);let s=0;n.forEach(l=>{s+=l.byteLength});const r=new Uint8Array(s);let a=0;return n.forEach(l=>{for(let d=0;d<l.length;d++)r[a++]=l[d]}),new Mo(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t){let e;try{e=JSON.parse(t)}catch{return null}return jW(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function FW(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function MP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BW(t,e){return e}class Tr{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||BW}}let Vx=null;function zW(t){return!jv(t)||t.length<2?t:MP(t)}function DN(){if(Vx)return Vx;const t=[];t.push(new Tr("bucket")),t.push(new Tr("generation")),t.push(new Tr("metageneration")),t.push(new Tr("name","fullPath",!0));function e(a,l){return zW(l)}const n=new Tr("name");n.xform=e,t.push(n);function s(a,l){return l!==void 0?Number(l):l}const r=new Tr("size");return r.xform=s,t.push(r),t.push(new Tr("timeCreated")),t.push(new Tr("updated")),t.push(new Tr("md5Hash",null,!0)),t.push(new Tr("cacheControl",null,!0)),t.push(new Tr("contentDisposition",null,!0)),t.push(new Tr("contentEncoding",null,!0)),t.push(new Tr("contentLanguage",null,!0)),t.push(new Tr("contentType",null,!0)),t.push(new Tr("metadata","customMetadata",!0)),Vx=t,Vx}function $W(t,e){function n(){const s=t.bucket,r=t.fullPath,a=new ui(s,r);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function qW(t,e,n){const s={};s.type="file";const r=n.length;for(let a=0;a<r;a++){const l=n[a];s[l.local]=l.xform(s,e[l.server])}return $W(s,t),s}function PP(t,e,n){const s=DP(e);return s===null?null:qW(t,s,n)}function HW(t,e,n,s){const r=DP(e);if(r===null||!jv(r.downloadTokens))return null;const a=r.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(f=>{const m=t.bucket,p=t.fullPath,x="/b/"+l(m)+"/o/"+l(p),w=rf(x,n,s),j=TP({alt:"media",token:f});return w+j})[0]}function OP(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const a=e[r];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class Zd{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){if(!t)throw RN()}function MN(t,e){function n(s,r){const a=PP(t,r,e);return $o(a!==null),a}return n}function WW(t,e){function n(s,r){const a=PP(t,r,e);return $o(a!==null),HW(a,r,t.host,t._protocol)}return n}function np(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=cW():r=lW():n.getStatus()===402?r=oW(t.bucket):n.getStatus()===403?r=dW(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function PN(t){const e=np(t);function n(s,r){let a=e(s,r);return s.getStatus()===404&&(a=aW(t.path)),a.serverResponse=r.serverResponse,a}return n}function GW(t,e,n){const s=e.fullServerUrl(),r=rf(s,t.host,t._protocol),a="GET",l=t.maxOperationRetryTime,d=new Zd(r,a,MN(t,n),l);return d.errorHandler=PN(e),d}function YW(t,e,n){const s=e.fullServerUrl(),r=rf(s,t.host,t._protocol),a="GET",l=t.maxOperationRetryTime,d=new Zd(r,a,WW(t,n),l);return d.errorHandler=PN(e),d}function KW(t,e){const n=e.fullServerUrl(),s=rf(n,t.host,t._protocol),r="DELETE",a=t.maxOperationRetryTime;function l(u,f){}const d=new Zd(s,r,l,a);return d.successCodes=[200,204],d.errorHandler=PN(e),d}function XW(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function LP(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=XW(null,e)),s}function VP(t,e,n,s,r){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function d(){let I="";for(let M=0;M<2;M++)I=I+Math.random().toString().slice(2);return I}const u=d();l["Content-Type"]="multipart/related; boundary="+u;const f=LP(e,s,r),m=OP(f,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+u+`\r
Content-Type: `+f.contentType+`\r
\r
`,x=`\r
--`+u+"--",w=Mo.getBlob(p,s,x);if(w===null)throw EP();const j={name:f.fullPath},S=rf(a,t.host,t._protocol),_="POST",E=t.maxUploadRetryTime,C=new Zd(S,_,MN(t,n),E);return C.urlParams=j,C.headers=l,C.body=w.uploadData(),C.errorHandler=np(e),C}class s0{constructor(e,n,s,r){this.current=e,this.total=n,this.finalized=!!s,this.metadata=r||null}}function ON(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{$o(!1)}return $o(!!n&&(e||["active"]).indexOf(n)!==-1),n}function QW(t,e,n,s,r){const a=e.bucketOnlyServerUrl(),l=LP(e,s,r),d={name:l.fullPath},u=rf(a,t.host,t._protocol),f="POST",m={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},p=OP(l,n),x=t.maxUploadRetryTime;function w(S){ON(S);let _;try{_=S.getResponseHeader("X-Goog-Upload-URL")}catch{$o(!1)}return $o(jv(_)),_}const j=new Zd(u,f,w,x);return j.urlParams=d,j.headers=m,j.body=p,j.errorHandler=np(e),j}function ZW(t,e,n,s){const r={"X-Goog-Upload-Command":"query"};function a(f){const m=ON(f,["active","final"]);let p=null;try{p=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{$o(!1)}p||$o(!1);const x=Number(p);return $o(!isNaN(x)),new s0(x,s.size(),m==="final")}const l="POST",d=t.maxUploadRetryTime,u=new Zd(n,l,a,d);return u.headers=r,u.errorHandler=np(e),u}const lk=256*1024;function JW(t,e,n,s,r,a,l,d){const u=new s0(0,0);if(l?(u.current=l.current,u.total=l.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw mW();const f=u.total-u.current;let m=f;r>0&&(m=Math.min(m,r));const p=u.current,x=p+m;let w="";m===0?w="finalize":f===m?w="upload, finalize":w="upload";const j={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${u.current}`},S=s.slice(p,x);if(S===null)throw EP();function _(M,V){const z=ON(M,["active","final"]),D=u.current+m,A=s.size();let T;return z==="final"?T=MN(e,a)(M,V):T=null,new s0(D,A,z==="final",T)}const E="POST",C=e.maxUploadRetryTime,I=new Zd(n,E,_,C);return I.headers=j,I.body=S.uploadData(),I.progressCallback=d||null,I.errorHandler=np(t),I}const Vr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function __(t){switch(t){case"running":case"pausing":case"canceling":return Vr.RUNNING;case"paused":return Vr.PAUSED;case"success":return Vr.SUCCESS;case"canceled":return Vr.CANCELED;case"error":return Vr.ERROR;default:return Vr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eG=class{constructor(e,n,s){if(_W(e)||n!=null||s!=null)this.next=e,this.error=n??void 0,this.complete=s??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class tG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Sd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Sd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Sd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,a){if(this.sent_)throw ym("cannot .send() more than once");if(ol(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ym("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ym("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ym("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ym("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class nG extends tG{initXhr(){this.xhr_.responseType="text"}}function Gl(){return new nG}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=s,this._mappings=DN(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(qn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(AP(r.status,[]))if(a)r=NP();else{this.sleepTime=Math.max(this.sleepTime*2,iW),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(qn.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,a)=>{this._resolve=r,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,s])=>{switch(this._state){case"running":e(n,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const s=QW(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,Gl,e,n);this._request=r,r.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,s)=>{const r=ZW(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(r,Gl,n,s);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=lk*this._chunkMultiplier,n=new s0(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((r,a)=>{let l;try{l=JW(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const d=this._ref.storage._makeRequest(l,Gl,r,a,!1);this._request=d,d.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){lk*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const s=GW(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(s,Gl,e,n);this._request=r,r.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const s=VP(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,Gl,e,n);this._request=r,r.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=SP(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=__(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,s,r){const a=new eG(n||void 0,s||void 0,r||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(__(this._state)){case Vr.SUCCESS:qu(this._resolve.bind(null,this.snapshot))();break;case Vr.CANCELED:case Vr.ERROR:const n=this._reject;qu(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(__(this._state)){case Vr.RUNNING:case Vr.PAUSED:e.next&&qu(e.next.bind(e,this.snapshot))();break;case Vr.SUCCESS:e.complete&&qu(e.complete.bind(e))();break;case Vr.CANCELED:case Vr.ERROR:e.error&&qu(e.error.bind(e,this._error))();break;default:e.error&&qu(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this._service=e,n instanceof ui?this._location=n:this._location=ui.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Md(e,n)}get root(){const e=new ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return MP(this._location.path)}get storage(){return this._service}get parent(){const e=UW(this._location.path);if(e===null)return null;const n=new ui(this._location.bucket,e);return new Md(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw xW(e)}}function rG(t,e,n){t._throwIfRoot("uploadBytes");const s=VP(t.storage,t._location,DN(),new Mo(e,!0),n);return t.storage.makeRequestWithTokens(s,Gl).then(r=>({metadata:r,ref:t}))}function iG(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new sG(t,new Mo(e),n)}function aG(t){t._throwIfRoot("getDownloadURL");const e=YW(t.storage,t._location,DN());return t.storage.makeRequestWithTokens(e,Gl).then(n=>{if(n===null)throw gW();return n})}function oG(t){t._throwIfRoot("deleteObject");const e=KW(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Gl)}function lG(t,e){const n=FW(t._location.path,e),s=new ui(t._location.bucket,n);return new Md(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cG(t){return/^[A-Za-z]+:\/\//.test(t)}function dG(t,e){return new Md(t,e)}function UP(t,e){if(t instanceof LN){const n=t;if(n._bucket==null)throw fW();const s=new Md(n,n._bucket);return e!=null?UP(s,e):s}else return e!==void 0?lG(t,e):t}function uG(t,e){if(e&&cG(e)){if(t instanceof LN)return dG(t,e);throw Lj("To use ref(service, url), the first argument must be a Storage instance.")}else return UP(t,e)}function ck(t,e){const n=e==null?void 0:e[jP];return n==null?null:ui.makeFromBucketSpec(n,t)}function hG(t,e,n,s={}){t.host=`${e}:${n}`;const r=ol(e);r&&(G0(`https://${t.host}/b`),Y0("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:a}=s;a&&(t._overrideAuthToken=typeof a=="string"?a:Y4(a,t.app.options.projectId))}class LN{constructor(e,n,s,r,a,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=_P,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sW,this._maxUploadRetryTime=rW,this._requests=new Set,r!=null?this._bucket=ui.makeFromBucketSpec(r,this._host):this._bucket=ck(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ui.makeFromBucketSpec(this._url,e):this._bucket=ck(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ok("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ok("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Md(this,e)}_makeRequest(e,n,s,r,a=!0){if(this._deleted)return new yW(CP());{const l=AW(e,this._appId,s,r,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const dk="@firebase/storage",uk="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="storage";function VN(t,e,n){return t=pn(t),rG(t,e,n)}function BP(t,e,n){return t=pn(t),iG(t,e,n)}function sp(t){return t=pn(t),aG(t)}function fG(t){return t=pn(t),oG(t)}function af(t,e){return t=pn(t),uG(t,e)}function mG(t=K0(),e){t=pn(t);const s=Bg(t,FP).getImmediate({identifier:e}),r=P1("storage");return r&&zP(s,...r),s}function zP(t,e,n,s={}){hG(t,e,n,s)}function gG(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new LN(n,s,r,e,Wd)}function pG(){cc(new Ko(FP,gG,"PUBLIC").setMultipleInstances(!0)),Mi(dk,uk,""),Mi(dk,uk,"esm2017")}pG();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(e,n,s,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Fr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||s.get().then(a=>this.messaging=a,()=>{}),this.appCheck||r==null||r.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="us-central1";class yG{constructor(e,n,s,r,a=Vj,l=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new xG(e,n,s,r),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=Vj}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function vG(t,e,n){const s=ol(e);t.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(G0(t.emulatorOrigin),Y0("Functions",!0))}const hk="@firebase/functions",fk="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bG="auth-internal",wG="app-check-internal",_G="messaging-internal";function jG(t){const e=(n,{instanceIdentifier:s})=>{const r=n.getProvider("app").getImmediate(),a=n.getProvider(bG),l=n.getProvider(_G),d=n.getProvider(wG);return new yG(r,a,l,d,s)};cc(new Ko($P,e,"PUBLIC").setMultipleInstances(!0)),Mi(hk,fk,t),Mi(hk,fk,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NG(t=K0(),e=Vj){const s=Bg(pn(t),$P).getImmediate({identifier:e}),r=P1("functions");return r&&qP(s,...r),s}function qP(t,e,n){vG(pn(t),e,n)}jG();const SG={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAILS:"liza@engagenatural.com,admin@engagenatural.com",VITE_AUTH_EMULATOR_PORT:"9099",VITE_DEBUG:"true",VITE_EMULATOR_HOST:"127.0.0.1",VITE_FIREBASE_API_KEY:"",VITE_FIREBASE_APP_ID:"1:314471463344:web:db0916256301b",VITE_FIREBASE_AUTH_DOMAIN:"engagenatural-app.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"314471463344",VITE_FIREBASE_PROJECT_ID:"engagenatural-dev",VITE_FIREBASE_STORAGE_BUCKET:"engagenatural-app.appspot.com",VITE_FIRESTORE_EMULATOR_PORT:"8080",VITE_FORCE_LONG_POLLING:"true",VITE_SHOW_DEMO_TOOLS:"true",VITE_STORAGE_EMULATOR_PORT:"9199",VITE_USE_EMULATOR:"true"},Ia=!0,EG=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"],Uj=EG.filter(t=>!SG[t]),CG=typeof window<"u"?window.location.hostname:"";CG.includes("deploy-preview-");Uj.length&&(globalThis.__FIREBASE_MISSING_ENV__=Uj);let Js;const mk=Q4();if(mk.length>0)Js=mk[0];else if(!Uj.length)Js=Ly({apiKey:"",authDomain:"engagenatural-app.firebaseapp.com",projectId:"engagenatural-dev",storageBucket:"engagenatural-app.appspot.com",messagingSenderId:"314471463344",appId:"1:314471463344:web:db0916256301b"});else{const t="engagenatural-dev",e={apiKey:"demo",authDomain:`${t}.firebaseapp.com`,projectId:t,storageBucket:`${t}.appspot.com`,messagingSenderId:"1234567890",appId:"demo-app-id"};Js=Ly(e)}const ce=Js?wM(Js):void 0,or=Js?pg(Js):void 0,Xa=Js?mG(Js):void 0,Fj=Js?NG(Js):void 0;Ia&&(ce&&hN(ce,"localhost",8080),or&&SN(or,"http://localhost:9099",{disableWarnings:!0}),Xa&&zP(Xa,"localhost",9199),Fj&&qP(Fj,"localhost",5001));const TG=Object.freeze(Object.defineProperty({__proto__:null,get app(){return Js},auth:or,db:ce,functions:Fj,isLocalhost:Ia,storage:Xa},Symbol.toStringTag,{value:"Module"})),HP="firebase_emulator_claims",WP="firebase_emulator_roles";function gk(){if(!Ia||!or.currentUser)return null;try{const t=localStorage.getItem(WP);return t?JSON.parse(t):(AG()||{})[or.currentUser.uid]||null}catch(t){return console.error("Error getting current user claims:",t),null}}function AG(){try{const t=localStorage.getItem(HP);return t?JSON.parse(t):{}}catch(t){return console.error("Error parsing stored emulator claims:",t),{}}}function kG(){if(!Ia)return!1;try{return localStorage.removeItem(HP),localStorage.removeItem(WP),!0}catch(t){return console.error("Error clearing emulator claims:",t),!1}}const Io={MANAGE_USERS:"manage_users",APPROVE_VERIFICATIONS:"approve_verifications",MANAGE_BRANDS:"manage_brands",MANAGE_BRAND_CONTENT:"manage_brand_content",MANAGE_BRAND_PRODUCTS:"manage_brand_products",VIEW_ANALYTICS:"view_analytics",MANAGE_CONTENT:"manage_content",SYSTEM_SETTINGS:"system_settings",VIEW_COMMUNITIES:"view_communities",POST_IN_COMMUNITIES:"post_in_communities"},RG=[{value:"super_admin",label:"Super Admin"},{value:"brand_manager",label:"Brand Manager"},{value:"staff",label:"Staff"},{value:"verified_staff",label:"Verified Staff"},{value:"retail_staff",label:"Retail Staff"},{value:"user",label:"User"},{value:"guest",label:"Guest"}],Km={SUPER_ADMIN:"super_admin",BRAND_MANAGER:"brand_manager"},IG={super_admin:Object.values(Io),brand_manager:[Io.MANAGE_BRAND_CONTENT,Io.MANAGE_BRAND_PRODUCTS,Io.VIEW_ANALYTICS],staff:[Io.VIEW_COMMUNITIES],verified_staff:[Io.VIEW_COMMUNITIES],retail_staff:[Io.VIEW_COMMUNITIES],user:[],guest:[]},DG="liza@engagenatural.com,admin@engagenatural.com".split(",").map(t=>t.trim().toLowerCase()).filter(Boolean),GP=b.createContext(null);function bn(){return b.useContext(GP)}function Ny(t){return String(t||"").trim().toLowerCase().replace(/[ -]+/g,"_")}function MG(t){if(!t)return[];const e=new Set,n=r=>{const a=Ny(r);a&&e.add(a)},s=r=>{r&&(typeof r=="string"?n(r):Array.isArray(r)?r.forEach(n):typeof r=="object"&&Object.entries(r).forEach(([a,l])=>{l&&n(a)}))};return s(t.role),s(t.roles),Array.from(e)}function PG(t){if(!t)return[];const e=new Set;return t.admin===!0&&e.add("super_admin"),t.role&&e.add(Ny(t.role)),Array.isArray(t.roles)&&t.roles.forEach(n=>e.add(Ny(n))),typeof t.roles=="object"&&Object.entries(t.roles).forEach(([n,s])=>{s&&e.add(Ny(n))}),Array.from(e)}const OG=["super_admin","brand_manager","verified_staff","retail_staff","staff","user","guest"];function LG(t,e){const n=new Set([...MG(t),...PG(e)]);n.has("admin")&&n.add("super_admin"),n.has("brand")&&n.add("brand_manager");for(const s of OG)if(n.has(s))return s;return"staff"}function VG({children:t}){const[e,n]=b.useState(null),[s,r]=b.useState(null),[a,l]=b.useState(null),[d,u]=b.useState(!0),f=or??(Js?pg(Js):null),m=b.useRef(null);b.useEffect(()=>{if(!f)return u(!1),()=>{};const j=Wq(f,async S=>{if(m.current&&(m.current(),m.current=null),n(S),l(null),!S){r(null),u(!1);return}try{const C=await S.getIdTokenResult(!0);let I=(C==null?void 0:C.claims)||null;if(Ia)try{const M=gk();M&&typeof M=="object"&&(I={...I||{},...M})}catch{}l(I)}catch{try{const C=Ia?gk():null;l(C||null)}catch{l(null)}}const _=Je(ce,"users",S.uid);(await _r(_)).exists()||await qr(_,{uid:S.uid,email:S.email||"",role:"staff",createdAt:ze(),updatedAt:ze()},{merge:!1}),m.current=Ln(_,C=>{r(C.exists()?C.data():null),u(!1)})});return()=>{j(),m.current&&m.current()}},[]);async function p(j,S){return await $q(f,fP),(await TN(f,j,S)).user}async function x(){try{m.current&&(m.current(),m.current=null),f&&await e0(f);try{Ia&&kG()}catch{}}finally{n(null),r(null),l(null),u(!1)}}const w=b.useMemo(()=>{const j=(s==null?void 0:s.approved)===!0;let _=LG(s,a);if(Ia&&(e!=null&&e.email)){const Ee=String(e.email).toLowerCase();DG.includes(Ee)&&(_=Km.SUPER_ADMIN)}const E=(s==null?void 0:s.brandId)||(a==null?void 0:a.brandId)||null,C=(s==null?void 0:s.retailerId)||null,I=(e==null?void 0:e.displayName)||(s==null?void 0:s.displayName)||(s==null?void 0:s.name)||"",M=(s==null?void 0:s.verified)===!0,V=typeof(s==null?void 0:s.verificationStatus)=="string"?s.verificationStatus:M?"approved":"pending",z=Array.isArray(s==null?void 0:s.joinedCommunities)?s.joinedCommunities:[],D=typeof(s==null?void 0:s.storeName)=="string"?s.storeName:"",A=typeof(s==null?void 0:s.level)=="number"?s.level:null,T=typeof(s==null?void 0:s.points)=="number"?s.points:0,R=typeof(s==null?void 0:s.profileImage)=="string"?s.profileImage:null,P=typeof(s==null?void 0:s.storeCode)=="string"?s.storeCode:"",O=e?{uid:e.uid,email:e.email,displayName:I,role:_,approved:j,brandId:E,retailerId:C,verified:M,verificationStatus:V,joinedCommunities:z,storeName:D,storeCode:P,level:A,points:T,profileImage:R}:null,[F,...J]=I.trim().split(" "),Z={id:(O==null?void 0:O.uid)||null,firstName:F||"",lastName:J.join(" ")||"",brandId:E},q=()=>B,Y=()=>!0,W=!!O,H=_===Km.SUPER_ADMIN,B=_===Km.BRAND_MANAGER,K=M,ne=["retail_staff","verified_staff","staff"].includes(_||""),te=!1;function fe(Ee){return W?(Array.isArray(Ee)?Ee:[Ee]).includes(_):!1}function ke(Ee){return W?H?!0:(IG[_]||[]).includes(Ee):!1}return{user:O,loading:d,signIn:p,signOut:x,isAuthenticated:W,role:_,isSuperAdmin:H,isBrandManager:B,isVerified:K,hasRole:fe,hasPermission:ke,isRetailUser:ne,isCommunityUser:te,brandId:E,PERMISSIONS:Io,isBrandManager:B,isBrandManagerFn:q,canAccessContent:Y,userProfile:Z}},[e,s,a,d]);return i.jsx(GP.Provider,{value:w,children:t})}function Bn({children:t,allowedRoles:e,requireApprovedBrandManager:n=!1,roles:s,requireApproved:r,requireVerified:a}){const{user:l,loading:d}=bn();if(d)return i.jsx("div",{className:"h-8 w-24 animate-pulse bg-gray-200 rounded"});if(!l)return i.jsx(oi,{to:"/",replace:!0});const u=Array.isArray(e)&&e.length>0&&e||Array.isArray(s)&&s.length>0&&s||[];return l.role==="super_admin"?t:u.length>0&&(typeof l.role!="string"||!u.includes(l.role))?i.jsx(oi,{to:"/",replace:!0}):(n===!0||n===void 0&&r!==!1)&&l.role==="brand_manager"&&l.approved!==!0?i.jsx(oi,{to:"/pending",replace:!0}):a&&l.role!=="super_admin"&&l.verified!==!0?i.jsx(oi,{to:"/",replace:!0}):t}function YP(t){if(!t)return"/";const{role:e}=t;return e==="super_admin"?"/admin":e==="brand_manager"?t.approved===!0?"/brand":"/pending":e==="staff"||e==="verified_staff"||e==="retail_staff"?"/staff/profile":"/"}function pk(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Nv(...t){return e=>{let n=!1;const s=t.map(r=>{const a=pk(r,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let r=0;r<s.length;r++){const a=s[r];typeof a=="function"?a():pk(t[r],null)}}}}function Kt(...t){return b.useCallback(Nv(...t),t)}function Pd(t){const e=UG(t),n=b.forwardRef((s,r)=>{const{children:a,...l}=s,d=b.Children.toArray(a),u=d.find(BG);if(u){const f=u.props.children,m=d.map(p=>p===u?b.Children.count(f)>1?b.Children.only(null):b.isValidElement(f)?f.props.children:null:p);return i.jsx(e,{...l,ref:r,children:b.isValidElement(f)?b.cloneElement(f,void 0,m):null})}return i.jsx(e,{...l,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}var UN=Pd("Slot");function UG(t){const e=b.forwardRef((n,s)=>{const{children:r,...a}=n;if(b.isValidElement(r)){const l=$G(r),d=zG(a,r.props);return r.type!==b.Fragment&&(d.ref=s?Nv(s,l):l),b.cloneElement(r,d)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var KP=Symbol("radix.slottable");function FG(t){const e=({children:n})=>i.jsx(i.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=KP,e}function BG(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===KP}function zG(t,e){const n={...e};for(const s in e){const r=t[s],a=e[s];/^on[A-Z]/.test(s)?r&&a?n[s]=(...d)=>{const u=a(...d);return r(...d),u}:r&&(n[s]=r):s==="style"?n[s]={...r,...a}:s==="className"&&(n[s]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function $G(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function XP(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=XP(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function QP(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=XP(t))&&(s&&(s+=" "),s+=e);return s}const xk=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,yk=QP,FN=(t,e)=>n=>{var s;if((e==null?void 0:e.variants)==null)return yk(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:a}=e,l=Object.keys(r).map(f=>{const m=n==null?void 0:n[f],p=a==null?void 0:a[f];if(m===null)return null;const x=xk(m)||xk(p);return r[f][x]}),d=n&&Object.entries(n).reduce((f,m)=>{let[p,x]=m;return x===void 0||(f[p]=x),f},{}),u=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((f,m)=>{let{class:p,className:x,...w}=m;return Object.entries(w).every(j=>{let[S,_]=j;return Array.isArray(_)?_.includes({...a,...d}[S]):{...a,...d}[S]===_})?[...f,p,x]:f},[]);return yk(t,l,u,n==null?void 0:n.class,n==null?void 0:n.className)},BN="-",qG=t=>{const e=WG(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:l=>{const d=l.split(BN);return d[0]===""&&d.length!==1&&d.shift(),ZP(d,e)||HG(l)},getConflictingClassGroupIds:(l,d)=>{const u=n[l]||[];return d&&s[l]?[...u,...s[l]]:u}}},ZP=(t,e)=>{var l;if(t.length===0)return e.classGroupId;const n=t[0],s=e.nextPart.get(n),r=s?ZP(t.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const a=t.join(BN);return(l=e.validators.find(({validator:d})=>d(a)))==null?void 0:l.classGroupId},vk=/^\[(.+)\]$/,HG=t=>{if(vk.test(t)){const e=vk.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},WG=t=>{const{theme:e,classGroups:n}=t,s={nextPart:new Map,validators:[]};for(const r in n)Bj(n[r],s,r,e);return s},Bj=(t,e,n,s)=>{t.forEach(r=>{if(typeof r=="string"){const a=r===""?e:bk(e,r);a.classGroupId=n;return}if(typeof r=="function"){if(GG(r)){Bj(r(s),e,n,s);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([a,l])=>{Bj(l,bk(e,a),n,s)})})},bk=(t,e)=>{let n=t;return e.split(BN).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},GG=t=>t.isThemeGetter,YG=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;const r=(a,l)=>{n.set(a,l),e++,e>t&&(e=0,s=n,n=new Map)};return{get(a){let l=n.get(a);if(l!==void 0)return l;if((l=s.get(a))!==void 0)return r(a,l),l},set(a,l){n.has(a)?n.set(a,l):r(a,l)}}},zj="!",$j=":",KG=$j.length,XG=t=>{const{prefix:e,experimentalParseClassName:n}=t;let s=r=>{const a=[];let l=0,d=0,u=0,f;for(let j=0;j<r.length;j++){let S=r[j];if(l===0&&d===0){if(S===$j){a.push(r.slice(u,j)),u=j+KG;continue}if(S==="/"){f=j;continue}}S==="["?l++:S==="]"?l--:S==="("?d++:S===")"&&d--}const m=a.length===0?r:r.substring(u),p=QG(m),x=p!==m,w=f&&f>u?f-u:void 0;return{modifiers:a,hasImportantModifier:x,baseClassName:p,maybePostfixModifierPosition:w}};if(e){const r=e+$j,a=s;s=l=>l.startsWith(r)?a(l.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(n){const r=s;s=a=>n({className:a,parseClassName:r})}return s},QG=t=>t.endsWith(zj)?t.substring(0,t.length-1):t.startsWith(zj)?t.substring(1):t,ZG=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const r=[];let a=[];return s.forEach(l=>{l[0]==="["||e[l]?(r.push(...a.sort(),l),a=[]):a.push(l)}),r.push(...a.sort()),r}},JG=t=>({cache:YG(t.cacheSize),parseClassName:XG(t),sortModifiers:ZG(t),...qG(t)}),eY=/\s+/,tY=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:a}=e,l=[],d=t.trim().split(eY);let u="";for(let f=d.length-1;f>=0;f-=1){const m=d[f],{isExternal:p,modifiers:x,hasImportantModifier:w,baseClassName:j,maybePostfixModifierPosition:S}=n(m);if(p){u=m+(u.length>0?" "+u:u);continue}let _=!!S,E=s(_?j.substring(0,S):j);if(!E){if(!_){u=m+(u.length>0?" "+u:u);continue}if(E=s(j),!E){u=m+(u.length>0?" "+u:u);continue}_=!1}const C=a(x).join(":"),I=w?C+zj:C,M=I+E;if(l.includes(M))continue;l.push(M);const V=r(E,_);for(let z=0;z<V.length;++z){const D=V[z];l.push(I+D)}u=m+(u.length>0?" "+u:u)}return u};function nY(){let t=0,e,n,s="";for(;t<arguments.length;)(e=arguments[t++])&&(n=JP(e))&&(s&&(s+=" "),s+=n);return s}const JP=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=JP(t[s]))&&(n&&(n+=" "),n+=e);return n};function sY(t,...e){let n,s,r,a=l;function l(u){const f=e.reduce((m,p)=>p(m),t());return n=JG(f),s=n.cache.get,r=n.cache.set,a=d,d(u)}function d(u){const f=s(u);if(f)return f;const m=tY(u,n);return r(u,m),m}return function(){return a(nY.apply(null,arguments))}}const Vs=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},eO=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,tO=/^\((?:(\w[\w-]*):)?(.+)\)$/i,rY=/^\d+\/\d+$/,iY=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aY=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oY=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,lY=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cY=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hu=t=>rY.test(t),Bt=t=>!!t&&!Number.isNaN(Number(t)),Ol=t=>!!t&&Number.isInteger(Number(t)),j_=t=>t.endsWith("%")&&Bt(t.slice(0,-1)),Eo=t=>iY.test(t),dY=()=>!0,uY=t=>aY.test(t)&&!oY.test(t),nO=()=>!1,hY=t=>lY.test(t),fY=t=>cY.test(t),mY=t=>!it(t)&&!at(t),gY=t=>of(t,iO,nO),it=t=>eO.test(t),id=t=>of(t,aO,uY),N_=t=>of(t,bY,Bt),wk=t=>of(t,sO,nO),pY=t=>of(t,rO,fY),Ux=t=>of(t,oO,hY),at=t=>tO.test(t),vm=t=>lf(t,aO),xY=t=>lf(t,wY),_k=t=>lf(t,sO),yY=t=>lf(t,iO),vY=t=>lf(t,rO),Fx=t=>lf(t,oO,!0),of=(t,e,n)=>{const s=eO.exec(t);return s?s[1]?e(s[1]):n(s[2]):!1},lf=(t,e,n=!1)=>{const s=tO.exec(t);return s?s[1]?e(s[1]):n:!1},sO=t=>t==="position"||t==="percentage",rO=t=>t==="image"||t==="url",iO=t=>t==="length"||t==="size"||t==="bg-size",aO=t=>t==="length",bY=t=>t==="number",wY=t=>t==="family-name",oO=t=>t==="shadow",_Y=()=>{const t=Vs("color"),e=Vs("font"),n=Vs("text"),s=Vs("font-weight"),r=Vs("tracking"),a=Vs("leading"),l=Vs("breakpoint"),d=Vs("container"),u=Vs("spacing"),f=Vs("radius"),m=Vs("shadow"),p=Vs("inset-shadow"),x=Vs("text-shadow"),w=Vs("drop-shadow"),j=Vs("blur"),S=Vs("perspective"),_=Vs("aspect"),E=Vs("ease"),C=Vs("animate"),I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],V=()=>[...M(),at,it],z=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],A=()=>[at,it,u],T=()=>[Hu,"full","auto",...A()],R=()=>[Ol,"none","subgrid",at,it],P=()=>["auto",{span:["full",Ol,at,it]},Ol,at,it],O=()=>[Ol,"auto",at,it],F=()=>["auto","min","max","fr",at,it],J=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Z=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...A()],Y=()=>[Hu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],W=()=>[t,at,it],H=()=>[...M(),_k,wk,{position:[at,it]}],B=()=>["no-repeat",{repeat:["","x","y","space","round"]}],K=()=>["auto","cover","contain",yY,gY,{size:[at,it]}],ne=()=>[j_,vm,id],te=()=>["","none","full",f,at,it],fe=()=>["",Bt,vm,id],ke=()=>["solid","dashed","dotted","double"],Ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ve=()=>[Bt,j_,_k,wk],le=()=>["","none",j,at,it],Ne=()=>["none",Bt,at,it],Pe=()=>["none",Bt,at,it],Ge=()=>[Bt,at,it],Ye=()=>[Hu,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Eo],breakpoint:[Eo],color:[dY],container:[Eo],"drop-shadow":[Eo],ease:["in","out","in-out"],font:[mY],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Eo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Eo],shadow:[Eo],spacing:["px",Bt],text:[Eo],"text-shadow":[Eo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Hu,it,at,_]}],container:["container"],columns:[{columns:[Bt,it,at,d]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:V()}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:["visible","invisible","collapse"],z:[{z:[Ol,"auto",at,it]}],basis:[{basis:[Hu,"full","auto",d,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Bt,Hu,"auto","initial","none",it]}],grow:[{grow:["",Bt,at,it]}],shrink:[{shrink:["",Bt,at,it]}],order:[{order:[Ol,"first","last","none",at,it]}],"grid-cols":[{"grid-cols":R()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":R()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...J(),"normal"]}],"justify-items":[{"justify-items":[...Z(),"normal"]}],"justify-self":[{"justify-self":["auto",...Z()]}],"align-content":[{content:["normal",...J()]}],"align-items":[{items:[...Z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Z(),{baseline:["","last"]}]}],"place-content":[{"place-content":J()}],"place-items":[{"place-items":[...Z(),"baseline"]}],"place-self":[{"place-self":["auto",...Z()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:Y()}],w:[{w:[d,"screen",...Y()]}],"min-w":[{"min-w":[d,"screen","none",...Y()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[l]},...Y()]}],h:[{h:["screen","lh",...Y()]}],"min-h":[{"min-h":["screen","lh","none",...Y()]}],"max-h":[{"max-h":["screen","lh",...Y()]}],"font-size":[{text:["base",n,vm,id]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,at,N_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",j_,it]}],"font-family":[{font:[xY,it,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,at,it]}],"line-clamp":[{"line-clamp":[Bt,"none",at,N_]}],leading:[{leading:[a,...A()]}],"list-image":[{"list-image":["none",at,it]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",at,it]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ke(),"wavy"]}],"text-decoration-thickness":[{decoration:[Bt,"from-font","auto",at,id]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[Bt,"auto",at,it]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",at,it]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",at,it]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:H()}],"bg-repeat":[{bg:B()}],"bg-size":[{bg:K()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ol,at,it],radial:["",at,it],conic:[Ol,at,it]},vY,pY]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:ne()}],"gradient-via-pos":[{via:ne()}],"gradient-to-pos":[{to:ne()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:fe()}],"border-w-x":[{"border-x":fe()}],"border-w-y":[{"border-y":fe()}],"border-w-s":[{"border-s":fe()}],"border-w-e":[{"border-e":fe()}],"border-w-t":[{"border-t":fe()}],"border-w-r":[{"border-r":fe()}],"border-w-b":[{"border-b":fe()}],"border-w-l":[{"border-l":fe()}],"divide-x":[{"divide-x":fe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":fe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ke(),"hidden","none"]}],"divide-style":[{divide:[...ke(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...ke(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Bt,at,it]}],"outline-w":[{outline:["",Bt,vm,id]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",m,Fx,Ux]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",p,Fx,Ux]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[Bt,id]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":fe()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",x,Fx,Ux]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[Bt,at,it]}],"mix-blend":[{"mix-blend":[...Ee(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ee()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Bt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ve()}],"mask-image-linear-to-pos":[{"mask-linear-to":ve()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":ve()}],"mask-image-t-to-pos":[{"mask-t-to":ve()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":ve()}],"mask-image-r-to-pos":[{"mask-r-to":ve()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":ve()}],"mask-image-b-to-pos":[{"mask-b-to":ve()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":ve()}],"mask-image-l-to-pos":[{"mask-l-to":ve()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":ve()}],"mask-image-x-to-pos":[{"mask-x-to":ve()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":ve()}],"mask-image-y-to-pos":[{"mask-y-to":ve()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[at,it]}],"mask-image-radial-from-pos":[{"mask-radial-from":ve()}],"mask-image-radial-to-pos":[{"mask-radial-to":ve()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[Bt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ve()}],"mask-image-conic-to-pos":[{"mask-conic-to":ve()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:H()}],"mask-repeat":[{mask:B()}],"mask-size":[{mask:K()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",at,it]}],filter:[{filter:["","none",at,it]}],blur:[{blur:le()}],brightness:[{brightness:[Bt,at,it]}],contrast:[{contrast:[Bt,at,it]}],"drop-shadow":[{"drop-shadow":["","none",w,Fx,Ux]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",Bt,at,it]}],"hue-rotate":[{"hue-rotate":[Bt,at,it]}],invert:[{invert:["",Bt,at,it]}],saturate:[{saturate:[Bt,at,it]}],sepia:[{sepia:["",Bt,at,it]}],"backdrop-filter":[{"backdrop-filter":["","none",at,it]}],"backdrop-blur":[{"backdrop-blur":le()}],"backdrop-brightness":[{"backdrop-brightness":[Bt,at,it]}],"backdrop-contrast":[{"backdrop-contrast":[Bt,at,it]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Bt,at,it]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Bt,at,it]}],"backdrop-invert":[{"backdrop-invert":["",Bt,at,it]}],"backdrop-opacity":[{"backdrop-opacity":[Bt,at,it]}],"backdrop-saturate":[{"backdrop-saturate":[Bt,at,it]}],"backdrop-sepia":[{"backdrop-sepia":["",Bt,at,it]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",at,it]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Bt,"initial",at,it]}],ease:[{ease:["linear","initial",E,at,it]}],delay:[{delay:[Bt,at,it]}],animate:[{animate:["none",C,at,it]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,at,it]}],"perspective-origin":[{"perspective-origin":V()}],rotate:[{rotate:Ne()}],"rotate-x":[{"rotate-x":Ne()}],"rotate-y":[{"rotate-y":Ne()}],"rotate-z":[{"rotate-z":Ne()}],scale:[{scale:Pe()}],"scale-x":[{"scale-x":Pe()}],"scale-y":[{"scale-y":Pe()}],"scale-z":[{"scale-z":Pe()}],"scale-3d":["scale-3d"],skew:[{skew:Ge()}],"skew-x":[{"skew-x":Ge()}],"skew-y":[{"skew-y":Ge()}],transform:[{transform:[at,it,"","none","gpu","cpu"]}],"transform-origin":[{origin:V()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ye()}],"translate-x":[{"translate-x":Ye()}],"translate-y":[{"translate-y":Ye()}],"translate-z":[{"translate-z":Ye()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",at,it]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",at,it]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[Bt,vm,id,N_]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},jY=sY(_Y);function Qe(...t){return jY(QP(t))}const zN=FN("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}}),Se=b.forwardRef(({className:t,variant:e,size:n,asChild:s=!1,...r},a)=>{const l=s?UN:"button";return i.jsx(l,{ref:a,"data-slot":"button",className:Qe(zN({variant:e,size:n,className:t})),...r})});Se.displayName="Button";function De({className:t,...e}){return i.jsx("div",{"data-slot":"card",className:Qe("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...e})}function et({className:t,...e}){return i.jsx("div",{"data-slot":"card-header",className:Qe("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function nt({className:t,...e}){return i.jsx("div",{"data-slot":"card-title",className:Qe("leading-none font-semibold",t),...e})}function Vt({className:t,...e}){return i.jsx("div",{"data-slot":"card-description",className:Qe("text-muted-foreground text-sm",t),...e})}function He({className:t,...e}){return i.jsx("div",{"data-slot":"card-content",className:Qe("px-6",t),...e})}function xg({className:t,...e}){return i.jsx("div",{"data-slot":"card-footer",className:Qe("flex items-center px-6 [.border-t]:pt-6",t),...e})}function gt({className:t,type:e,...n}){return i.jsx("input",{type:e,"data-slot":"input",className:Qe("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}const ta=b.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:Qe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));ta.displayName="Textarea";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SY=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),jk=t=>{const e=SY(t);return e.charAt(0).toUpperCase()+e.slice(1)},lO=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),EY=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:a,iconNode:l,...d},u)=>b.createElement("svg",{ref:u,...CY,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:lO("lucide",r),...!a&&!EY(d)&&{"aria-hidden":"true"},...d},[...l.map(([f,m])=>b.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(t,e)=>{const n=b.forwardRef(({className:s,...r},a)=>b.createElement(TY,{ref:a,iconNode:e,className:lO(`lucide-${NY(jk(t))}`,`lucide-${t}`,s),...r}));return n.displayName=jk(t),n};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Xl=Oe("activity",AY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],RY=Oe("arrow-down-right",kY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IY=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Xm=Oe("arrow-left",IY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],MY=Oe("arrow-right",DY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],OY=Oe("arrow-up-right",PY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],cO=Oe("award",LY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]],UY=Oe("battery",VY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],$N=Oe("bell",FY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],$a=Oe("book-open",BY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],$Y=Oe("brain",zY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],ph=Oe("building",qY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HY=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],WY=Oe("calculator",HY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],cf=Oe("calendar",GY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],qN=Oe("chart-column",YY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KY=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],qj=Oe("chart-no-axes-column",KY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],dO=Oe("check",XY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ah=Oe("chevron-down",QY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],JY=Oe("chevron-left",ZY);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],uO=Oe("chevron-right",eK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],nK=Oe("chevron-up",tK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],js=Oe("circle-alert",sK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rK=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ur=Oe("circle-check-big",rK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],aK=Oe("circle-help",iK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],lK=Oe("circle-x",oK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],dK=Oe("circle",cK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Qm=Oe("clock",uK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hK=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],fK=Oe("copy",hK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mK=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Lh=Oe("database",mK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gK=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],pc=Oe("dollar-sign",gK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pK=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Sv=Oe("download",pK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xK=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Nk=Oe("ellipsis-vertical",xK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yK=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],hO=Oe("ellipsis",yK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vK=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bK=Oe("eye-off",vK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wK=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zi=Oe("eye",wK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _K=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Sk=Oe("file-check",_K);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],Ek=Oe("file-question",jK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NK=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hi=Oe("file-text",NK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SK=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],EK=Oe("film",SK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CK=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ck=Oe("funnel",CK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],AK=Oe("gamepad-2",TK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],RK=Oe("globe",kK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IK=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Hj=Oe("hard-drive",IK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],fO=Oe("heart",DK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],PK=Oe("house",MK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Sy=Oe("image",OK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],mO=Oe("info",LK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VK=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],UK=Oe("layout-dashboard",VK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],Tk=Oe("library",FK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BK=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],zK=Oe("list",BK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Da=Oe("loader-circle",$K);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qK=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],r0=Oe("lock",qK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],Ak=Oe("log-in",HK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],xh=Oe("log-out",WK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],gO=Oe("mail",GK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],KK=Oe("menu",YK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],QK=Oe("message-square",XK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],i0=Oe("package",ZK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JK=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],eX=Oe("pencil",JK);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ma=Oe("plus",tX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],sX=Oe("refresh-ccw",nX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Lo=Oe("refresh-cw",rX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],a0=Oe("save",iX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],qo=Oe("search",aX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tl=Oe("settings",oX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],kk=Oe("shield-check",lX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],o0=Oe("shield",cX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],uX=Oe("shopping-cart",dX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]],fX=Oe("signal",hX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],gX=Oe("smartphone",mX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ql=Oe("square-pen",pX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],yX=Oe("tag",xX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ac=Oe("trash-2",vX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Od=Oe("trending-up",bX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bx=Oe("triangle-alert",wX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],jX=Oe("trophy",_X);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],l0=Oe("upload",NX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],HN=Oe("user-check",SX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],CX=Oe("user-plus",EX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],AX=Oe("user-x",TX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],c0=Oe("user",kX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ts=Oe("users",RX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],DX=Oe("video",IX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],PX=Oe("wifi",MX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],LX=Oe("wrench",OX);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],WN=Oe("x",VX);function tt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function UX(t,e){const n=b.createContext(e),s=a=>{const{children:l,...d}=a,u=b.useMemo(()=>d,Object.values(d));return i.jsx(n.Provider,{value:u,children:l})};s.displayName=t+"Provider";function r(a){const l=b.useContext(n);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[s,r]}function xi(t,e=[]){let n=[];function s(a,l){const d=b.createContext(l),u=n.length;n=[...n,l];const f=p=>{var E;const{scope:x,children:w,...j}=p,S=((E=x==null?void 0:x[t])==null?void 0:E[u])||d,_=b.useMemo(()=>j,Object.values(j));return i.jsx(S.Provider,{value:_,children:w})};f.displayName=a+"Provider";function m(p,x){var S;const w=((S=x==null?void 0:x[t])==null?void 0:S[u])||d,j=b.useContext(w);if(j)return j;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[f,m]}const r=()=>{const a=n.map(l=>b.createContext(l));return function(d){const u=(d==null?void 0:d[t])||a;return b.useMemo(()=>({[`__scope${t}`]:{...d,[t]:u}}),[d,u])}};return r.scopeName=t,[s,FX(r,...e)]}function FX(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const l=s.reduce((d,{useScope:u,scopeName:f})=>{const p=u(a)[`__scope${f}`];return{...d,...p}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return n.scopeName=e.scopeName,n}var As=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},BX=S4[" useId ".trim().toString()]||(()=>{}),zX=0;function qa(t){const[e,n]=b.useState(BX());return As(()=>{n(s=>s??String(zX++))},[t]),e?`radix-${e}`:""}var $X=S4[" useInsertionEffect ".trim().toString()]||As;function Ld({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[r,a,l]=qX({defaultProp:e,onChange:n}),d=t!==void 0,u=d?t:r;{const m=b.useRef(t!==void 0);b.useEffect(()=>{const p=m.current;p!==d&&console.warn(`${s} is changing from ${p?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=d},[d,s])}const f=b.useCallback(m=>{var p;if(d){const x=HX(m)?m(t):m;x!==t&&((p=l.current)==null||p.call(l,x))}else a(m)},[d,t,a,l]);return[u,f]}function qX({defaultProp:t,onChange:e}){const[n,s]=b.useState(t),r=b.useRef(n),a=b.useRef(e);return $X(()=>{a.current=e},[e]),b.useEffect(()=>{var l;r.current!==n&&((l=a.current)==null||l.call(a,n),r.current=n)},[n,r]),[n,s,a]}function HX(t){return typeof t=="function"}var WX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bt=WX.reduce((t,e)=>{const n=Pd(`Primitive.${e}`),s=b.forwardRef((r,a)=>{const{asChild:l,...d}=r,u=l?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...d,ref:a})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function pO(t,e){t&&Vg.flushSync(()=>t.dispatchEvent(e))}function Qs(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var s;return(s=e.current)==null?void 0:s.call(e,...n)},[])}function GX(t,e=globalThis==null?void 0:globalThis.document){const n=Qs(t);b.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var YX="DismissableLayer",Wj="dismissableLayer.update",KX="dismissableLayer.pointerDownOutside",XX="dismissableLayer.focusOutside",Rk,xO=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ev=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:l,onDismiss:d,...u}=t,f=b.useContext(xO),[m,p]=b.useState(null),x=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=b.useState({}),j=Kt(e,D=>p(D)),S=Array.from(f.layers),[_]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),E=S.indexOf(_),C=m?S.indexOf(m):-1,I=f.layersWithOutsidePointerEventsDisabled.size>0,M=C>=E,V=JX(D=>{const A=D.target,T=[...f.branches].some(R=>R.contains(A));!M||T||(r==null||r(D),l==null||l(D),D.defaultPrevented||d==null||d())},x),z=eQ(D=>{const A=D.target;[...f.branches].some(R=>R.contains(A))||(a==null||a(D),l==null||l(D),D.defaultPrevented||d==null||d())},x);return GX(D=>{C===f.layers.size-1&&(s==null||s(D),!D.defaultPrevented&&d&&(D.preventDefault(),d()))},x),b.useEffect(()=>{if(m)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(Rk=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),Ik(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=Rk)}},[m,x,n,f]),b.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),Ik())},[m,f]),b.useEffect(()=>{const D=()=>w({});return document.addEventListener(Wj,D),()=>document.removeEventListener(Wj,D)},[]),i.jsx(bt.div,{...u,ref:j,style:{pointerEvents:I?M?"auto":"none":void 0,...t.style},onFocusCapture:tt(t.onFocusCapture,z.onFocusCapture),onBlurCapture:tt(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:tt(t.onPointerDownCapture,V.onPointerDownCapture)})});Ev.displayName=YX;var QX="DismissableLayerBranch",ZX=b.forwardRef((t,e)=>{const n=b.useContext(xO),s=b.useRef(null),r=Kt(e,s);return b.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(bt.div,{...t,ref:r})});ZX.displayName=QX;function JX(t,e=globalThis==null?void 0:globalThis.document){const n=Qs(t),s=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const a=d=>{if(d.target&&!s.current){let u=function(){yO(KX,n,f,{discrete:!0})};const f={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=u,e.addEventListener("click",r.current,{once:!0})):u()}else e.removeEventListener("click",r.current);s.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function eQ(t,e=globalThis==null?void 0:globalThis.document){const n=Qs(t),s=b.useRef(!1);return b.useEffect(()=>{const r=a=>{a.target&&!s.current&&yO(XX,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Ik(){const t=new CustomEvent(Wj);document.dispatchEvent(t)}function yO(t,e,n,{discrete:s}){const r=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?pO(r,a):r.dispatchEvent(a)}var S_="focusScope.autoFocusOnMount",E_="focusScope.autoFocusOnUnmount",Dk={bubbles:!1,cancelable:!0},tQ="FocusScope",Cv=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...l}=t,[d,u]=b.useState(null),f=Qs(r),m=Qs(a),p=b.useRef(null),x=Kt(e,S=>u(S)),w=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(s){let S=function(I){if(w.paused||!d)return;const M=I.target;d.contains(M)?p.current=M:Fl(p.current,{select:!0})},_=function(I){if(w.paused||!d)return;const M=I.relatedTarget;M!==null&&(d.contains(M)||Fl(p.current,{select:!0}))},E=function(I){if(document.activeElement===document.body)for(const V of I)V.removedNodes.length>0&&Fl(d)};document.addEventListener("focusin",S),document.addEventListener("focusout",_);const C=new MutationObserver(E);return d&&C.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",_),C.disconnect()}}},[s,d,w.paused]),b.useEffect(()=>{if(d){Pk.add(w);const S=document.activeElement;if(!d.contains(S)){const E=new CustomEvent(S_,Dk);d.addEventListener(S_,f),d.dispatchEvent(E),E.defaultPrevented||(nQ(oQ(vO(d)),{select:!0}),document.activeElement===S&&Fl(d))}return()=>{d.removeEventListener(S_,f),setTimeout(()=>{const E=new CustomEvent(E_,Dk);d.addEventListener(E_,m),d.dispatchEvent(E),E.defaultPrevented||Fl(S??document.body,{select:!0}),d.removeEventListener(E_,m),Pk.remove(w)},0)}}},[d,f,m,w]);const j=b.useCallback(S=>{if(!n&&!s||w.paused)return;const _=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,E=document.activeElement;if(_&&E){const C=S.currentTarget,[I,M]=sQ(C);I&&M?!S.shiftKey&&E===M?(S.preventDefault(),n&&Fl(I,{select:!0})):S.shiftKey&&E===I&&(S.preventDefault(),n&&Fl(M,{select:!0})):E===C&&S.preventDefault()}},[n,s,w.paused]);return i.jsx(bt.div,{tabIndex:-1,...l,ref:x,onKeyDown:j})});Cv.displayName=tQ;function nQ(t,{select:e=!1}={}){const n=document.activeElement;for(const s of t)if(Fl(s,{select:e}),document.activeElement!==n)return}function sQ(t){const e=vO(t),n=Mk(e,t),s=Mk(e.reverse(),t);return[n,s]}function vO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Mk(t,e){for(const n of t)if(!rQ(n,{upTo:e}))return n}function rQ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function iQ(t){return t instanceof HTMLInputElement&&"select"in t}function Fl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&iQ(t)&&e&&t.select()}}var Pk=aQ();function aQ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Ok(t,e),t.unshift(e)},remove(e){var n;t=Ok(t,e),(n=t[0])==null||n.resume()}}}function Ok(t,e){const n=[...t],s=n.indexOf(e);return s!==-1&&n.splice(s,1),n}function oQ(t){return t.filter(e=>e.tagName!=="A")}var lQ="Portal",Tv=b.forwardRef((t,e)=>{var d;const{container:n,...s}=t,[r,a]=b.useState(!1);As(()=>a(!0),[]);const l=n||r&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return l?sB.createPortal(i.jsx(bt.div,{...s,ref:e}),l):null});Tv.displayName=lQ;function cQ(t,e){return b.useReducer((n,s)=>e[n][s]??n,t)}var yi=t=>{const{present:e,children:n}=t,s=dQ(e),r=typeof n=="function"?n({present:s.isPresent}):b.Children.only(n),a=Kt(s.ref,uQ(r));return typeof n=="function"||s.isPresent?b.cloneElement(r,{ref:a}):null};yi.displayName="Presence";function dQ(t){const[e,n]=b.useState(),s=b.useRef(null),r=b.useRef(t),a=b.useRef("none"),l=t?"mounted":"unmounted",[d,u]=cQ(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const f=zx(s.current);a.current=d==="mounted"?f:"none"},[d]),As(()=>{const f=s.current,m=r.current;if(m!==t){const x=a.current,w=zx(f);t?u("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?u("UNMOUNT"):u(m&&x!==w?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,u]),As(()=>{if(e){let f;const m=e.ownerDocument.defaultView??window,p=w=>{const S=zx(s.current).includes(w.animationName);if(w.target===e&&S&&(u("ANIMATION_END"),!r.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",f=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},x=w=>{w.target===e&&(a.current=zx(s.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{m.clearTimeout(f),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:b.useCallback(f=>{s.current=f?getComputedStyle(f):null,n(f)},[])}}function zx(t){return(t==null?void 0:t.animationName)||"none"}function uQ(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var C_=0;function GN(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Lk()),document.body.insertAdjacentElement("beforeend",t[1]??Lk()),C_++,()=>{C_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),C_--}},[])}function Lk(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ey="right-scroll-bar-position",Cy="width-before-scroll-bar",hQ="with-scroll-bars-hidden",fQ="--removed-body-scroll-bar-size";function T_(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function mQ(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=e,n.facade}var gQ=typeof window<"u"?b.useLayoutEffect:b.useEffect,Vk=new WeakMap;function pQ(t,e){var n=mQ(null,function(s){return t.forEach(function(r){return T_(r,s)})});return gQ(function(){var s=Vk.get(n);if(s){var r=new Set(s),a=new Set(t),l=n.current;r.forEach(function(d){a.has(d)||T_(d,null)}),a.forEach(function(d){r.has(d)||T_(d,l)})}Vk.set(n,t)},[t]),n}function xQ(t){return t}function yQ(t,e){e===void 0&&(e=xQ);var n=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var l=e(a,s);return n.push(l),function(){n=n.filter(function(d){return d!==l})}},assignSyncMedium:function(a){for(s=!0;n.length;){var l=n;n=[],l.forEach(a)}n={push:function(d){return a(d)},filter:function(){return n}}},assignMedium:function(a){s=!0;var l=[];if(n.length){var d=n;n=[],d.forEach(a),l=n}var u=function(){var m=l;l=[],m.forEach(a)},f=function(){return Promise.resolve().then(u)};f(),n={push:function(m){l.push(m),f()},filter:function(m){return l=l.filter(m),n}}}};return r}function vQ(t){t===void 0&&(t={});var e=yQ(null);return e.options=Aa({async:!0,ssr:!1},t),e}var bO=function(t){var e=t.sideCar,n=Qg(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return b.createElement(s,Aa({},n))};bO.isSideCarExport=!0;function bQ(t,e){return t.useMedium(e),bO}var wO=vQ(),A_=function(){},Av=b.forwardRef(function(t,e){var n=b.useRef(null),s=b.useState({onScrollCapture:A_,onWheelCapture:A_,onTouchMoveCapture:A_}),r=s[0],a=s[1],l=t.forwardProps,d=t.children,u=t.className,f=t.removeScrollBar,m=t.enabled,p=t.shards,x=t.sideCar,w=t.noRelative,j=t.noIsolation,S=t.inert,_=t.allowPinchZoom,E=t.as,C=E===void 0?"div":E,I=t.gapMode,M=Qg(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),V=x,z=pQ([n,e]),D=Aa(Aa({},M),r);return b.createElement(b.Fragment,null,m&&b.createElement(V,{sideCar:wO,removeScrollBar:f,shards:p,noRelative:w,noIsolation:j,inert:S,setCallbacks:a,allowPinchZoom:!!_,lockRef:n,gapMode:I}),l?b.cloneElement(b.Children.only(d),Aa(Aa({},D),{ref:z})):b.createElement(C,Aa({},D,{className:u,ref:z}),d))});Av.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Av.classNames={fullWidth:Cy,zeroRight:Ey};var wQ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _Q(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wQ();return e&&t.setAttribute("nonce",e),t}function jQ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function NQ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var SQ=function(){var t=0,e=null;return{add:function(n){t==0&&(e=_Q())&&(jQ(e,n),NQ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},EQ=function(){var t=SQ();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},_O=function(){var t=EQ(),e=function(n){var s=n.styles,r=n.dynamic;return t(s,r),null};return e},CQ={left:0,top:0,right:0,gap:0},k_=function(t){return parseInt(t||"",10)||0},TQ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[k_(n),k_(s),k_(r)]},AQ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return CQ;var e=TQ(t),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-n+e[2]-e[0])}},kQ=_O(),yh="data-scroll-locked",RQ=function(t,e,n,s){var r=t.left,a=t.top,l=t.right,d=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(hQ,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(d,"px ").concat(s,`;
  }
  body[`).concat(yh,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(d,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ey,` {
    right: `).concat(d,"px ").concat(s,`;
  }
  
  .`).concat(Cy,` {
    margin-right: `).concat(d,"px ").concat(s,`;
  }
  
  .`).concat(Ey," .").concat(Ey,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Cy," .").concat(Cy,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(yh,`] {
    `).concat(fQ,": ").concat(d,`px;
  }
`)},Uk=function(){var t=parseInt(document.body.getAttribute(yh)||"0",10);return isFinite(t)?t:0},IQ=function(){b.useEffect(function(){return document.body.setAttribute(yh,(Uk()+1).toString()),function(){var t=Uk()-1;t<=0?document.body.removeAttribute(yh):document.body.setAttribute(yh,t.toString())}},[])},DQ=function(t){var e=t.noRelative,n=t.noImportant,s=t.gapMode,r=s===void 0?"margin":s;IQ();var a=b.useMemo(function(){return AQ(r)},[r]);return b.createElement(kQ,{styles:RQ(a,!e,r,n?"":"!important")})},Gj=!1;if(typeof window<"u")try{var $x=Object.defineProperty({},"passive",{get:function(){return Gj=!0,!0}});window.addEventListener("test",$x,$x),window.removeEventListener("test",$x,$x)}catch{Gj=!1}var Wu=Gj?{passive:!1}:!1,MQ=function(t){return t.tagName==="TEXTAREA"},jO=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!MQ(t)&&n[e]==="visible")},PQ=function(t){return jO(t,"overflowY")},OQ=function(t){return jO(t,"overflowX")},Fk=function(t,e){var n=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=NO(t,s);if(r){var a=SO(t,s),l=a[1],d=a[2];if(l>d)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},LQ=function(t){var e=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;return[e,n,s]},VQ=function(t){var e=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;return[e,n,s]},NO=function(t,e){return t==="v"?PQ(e):OQ(e)},SO=function(t,e){return t==="v"?LQ(e):VQ(e)},UQ=function(t,e){return t==="h"&&e==="rtl"?-1:1},FQ=function(t,e,n,s,r){var a=UQ(t,window.getComputedStyle(e).direction),l=a*s,d=n.target,u=e.contains(d),f=!1,m=l>0,p=0,x=0;do{if(!d)break;var w=SO(t,d),j=w[0],S=w[1],_=w[2],E=S-_-a*j;(j||E)&&NO(t,d)&&(p+=E,x+=j);var C=d.parentNode;d=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!u&&d!==document.body||u&&(e.contains(d)||e===d));return(m&&Math.abs(p)<1||!m&&Math.abs(x)<1)&&(f=!0),f},qx=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Bk=function(t){return[t.deltaX,t.deltaY]},zk=function(t){return t&&"current"in t?t.current:t},BQ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},zQ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},$Q=0,Gu=[];function qQ(t){var e=b.useRef([]),n=b.useRef([0,0]),s=b.useRef(),r=b.useState($Q++)[0],a=b.useState(_O)[0],l=b.useRef(t);b.useEffect(function(){l.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var S=W$([t.lockRef.current],(t.shards||[]).map(zk),!0).filter(Boolean);return S.forEach(function(_){return _.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),S.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var d=b.useCallback(function(S,_){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!l.current.allowPinchZoom;var E=qx(S),C=n.current,I="deltaX"in S?S.deltaX:C[0]-E[0],M="deltaY"in S?S.deltaY:C[1]-E[1],V,z=S.target,D=Math.abs(I)>Math.abs(M)?"h":"v";if("touches"in S&&D==="h"&&z.type==="range")return!1;var A=Fk(D,z);if(!A)return!0;if(A?V=D:(V=D==="v"?"h":"v",A=Fk(D,z)),!A)return!1;if(!s.current&&"changedTouches"in S&&(I||M)&&(s.current=V),!V)return!0;var T=s.current||V;return FQ(T,_,S,T==="h"?I:M)},[]),u=b.useCallback(function(S){var _=S;if(!(!Gu.length||Gu[Gu.length-1]!==a)){var E="deltaY"in _?Bk(_):qx(_),C=e.current.filter(function(V){return V.name===_.type&&(V.target===_.target||_.target===V.shadowParent)&&BQ(V.delta,E)})[0];if(C&&C.should){_.cancelable&&_.preventDefault();return}if(!C){var I=(l.current.shards||[]).map(zk).filter(Boolean).filter(function(V){return V.contains(_.target)}),M=I.length>0?d(_,I[0]):!l.current.noIsolation;M&&_.cancelable&&_.preventDefault()}}},[]),f=b.useCallback(function(S,_,E,C){var I={name:S,delta:_,target:E,should:C,shadowParent:HQ(E)};e.current.push(I),setTimeout(function(){e.current=e.current.filter(function(M){return M!==I})},1)},[]),m=b.useCallback(function(S){n.current=qx(S),s.current=void 0},[]),p=b.useCallback(function(S){f(S.type,Bk(S),S.target,d(S,t.lockRef.current))},[]),x=b.useCallback(function(S){f(S.type,qx(S),S.target,d(S,t.lockRef.current))},[]);b.useEffect(function(){return Gu.push(a),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:x}),document.addEventListener("wheel",u,Wu),document.addEventListener("touchmove",u,Wu),document.addEventListener("touchstart",m,Wu),function(){Gu=Gu.filter(function(S){return S!==a}),document.removeEventListener("wheel",u,Wu),document.removeEventListener("touchmove",u,Wu),document.removeEventListener("touchstart",m,Wu)}},[]);var w=t.removeScrollBar,j=t.inert;return b.createElement(b.Fragment,null,j?b.createElement(a,{styles:zQ(r)}):null,w?b.createElement(DQ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function HQ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const WQ=bQ(wO,qQ);var kv=b.forwardRef(function(t,e){return b.createElement(Av,Aa({},t,{ref:e,sideCar:WQ}))});kv.classNames=Av.classNames;var GQ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Yu=new WeakMap,Hx=new WeakMap,Wx={},R_=0,EO=function(t){return t&&(t.host||EO(t.parentNode))},YQ=function(t,e){return e.map(function(n){if(t.contains(n))return n;var s=EO(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},KQ=function(t,e,n,s){var r=YQ(e,Array.isArray(t)?t:[t]);Wx[n]||(Wx[n]=new WeakMap);var a=Wx[n],l=[],d=new Set,u=new Set(r),f=function(p){!p||d.has(p)||(d.add(p),f(p.parentNode))};r.forEach(f);var m=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(x){if(d.has(x))m(x);else try{var w=x.getAttribute(s),j=w!==null&&w!=="false",S=(Yu.get(x)||0)+1,_=(a.get(x)||0)+1;Yu.set(x,S),a.set(x,_),l.push(x),S===1&&j&&Hx.set(x,!0),_===1&&x.setAttribute(n,"true"),j||x.setAttribute(s,"true")}catch(E){console.error("aria-hidden: cannot operate on ",x,E)}})};return m(e),d.clear(),R_++,function(){l.forEach(function(p){var x=Yu.get(p)-1,w=a.get(p)-1;Yu.set(p,x),a.set(p,w),x||(Hx.has(p)||p.removeAttribute(s),Hx.delete(p)),w||p.removeAttribute(n)}),R_--,R_||(Yu=new WeakMap,Yu=new WeakMap,Hx=new WeakMap,Wx={})}},YN=function(t,e,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),r=GQ(t);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),KQ(s,r,n,"aria-hidden")):function(){return null}},Rv="Dialog",[CO,TO]=xi(Rv),[XQ,ca]=CO(Rv),AO=t=>{const{__scopeDialog:e,children:n,open:s,defaultOpen:r,onOpenChange:a,modal:l=!0}=t,d=b.useRef(null),u=b.useRef(null),[f,m]=Ld({prop:s,defaultProp:r??!1,onChange:a,caller:Rv});return i.jsx(XQ,{scope:e,triggerRef:d,contentRef:u,contentId:qa(),titleId:qa(),descriptionId:qa(),open:f,onOpenChange:m,onOpenToggle:b.useCallback(()=>m(p=>!p),[m]),modal:l,children:n})};AO.displayName=Rv;var kO="DialogTrigger",RO=b.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=ca(kO,n),a=Kt(e,r.triggerRef);return i.jsx(bt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":QN(r.open),...s,ref:a,onClick:tt(t.onClick,r.onOpenToggle)})});RO.displayName=kO;var KN="DialogPortal",[QQ,IO]=CO(KN,{forceMount:void 0}),DO=t=>{const{__scopeDialog:e,forceMount:n,children:s,container:r}=t,a=ca(KN,e);return i.jsx(QQ,{scope:e,forceMount:n,children:b.Children.map(s,l=>i.jsx(yi,{present:n||a.open,children:i.jsx(Tv,{asChild:!0,container:r,children:l})}))})};DO.displayName=KN;var d0="DialogOverlay",MO=b.forwardRef((t,e)=>{const n=IO(d0,t.__scopeDialog),{forceMount:s=n.forceMount,...r}=t,a=ca(d0,t.__scopeDialog);return a.modal?i.jsx(yi,{present:s||a.open,children:i.jsx(JQ,{...r,ref:e})}):null});MO.displayName=d0;var ZQ=Pd("DialogOverlay.RemoveScroll"),JQ=b.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=ca(d0,n);return i.jsx(kv,{as:ZQ,allowPinchZoom:!0,shards:[r.contentRef],children:i.jsx(bt.div,{"data-state":QN(r.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),Vd="DialogContent",PO=b.forwardRef((t,e)=>{const n=IO(Vd,t.__scopeDialog),{forceMount:s=n.forceMount,...r}=t,a=ca(Vd,t.__scopeDialog);return i.jsx(yi,{present:s||a.open,children:a.modal?i.jsx(eZ,{...r,ref:e}):i.jsx(tZ,{...r,ref:e})})});PO.displayName=Vd;var eZ=b.forwardRef((t,e)=>{const n=ca(Vd,t.__scopeDialog),s=b.useRef(null),r=Kt(e,n.contentRef,s);return b.useEffect(()=>{const a=s.current;if(a)return YN(a)},[]),i.jsx(OO,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:tt(t.onCloseAutoFocus,a=>{var l;a.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:tt(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0;(l.button===2||d)&&a.preventDefault()}),onFocusOutside:tt(t.onFocusOutside,a=>a.preventDefault())})}),tZ=b.forwardRef((t,e)=>{const n=ca(Vd,t.__scopeDialog),s=b.useRef(!1),r=b.useRef(!1);return i.jsx(OO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l,d;(l=t.onCloseAutoFocus)==null||l.call(t,a),a.defaultPrevented||(s.current||(d=n.triggerRef.current)==null||d.focus(),a.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:a=>{var u,f;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=a.target;((f=n.triggerRef.current)==null?void 0:f.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&r.current&&a.preventDefault()}})}),OO=b.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:a,...l}=t,d=ca(Vd,n),u=b.useRef(null),f=Kt(e,u);return GN(),i.jsxs(i.Fragment,{children:[i.jsx(Cv,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:a,children:i.jsx(Ev,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":QN(d.open),...l,ref:f,onDismiss:()=>d.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(sZ,{titleId:d.titleId}),i.jsx(iZ,{contentRef:u,descriptionId:d.descriptionId})]})]})}),XN="DialogTitle",LO=b.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=ca(XN,n);return i.jsx(bt.h2,{id:r.titleId,...s,ref:e})});LO.displayName=XN;var VO="DialogDescription",UO=b.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=ca(VO,n);return i.jsx(bt.p,{id:r.descriptionId,...s,ref:e})});UO.displayName=VO;var FO="DialogClose",BO=b.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=ca(FO,n);return i.jsx(bt.button,{type:"button",...s,ref:e,onClick:tt(t.onClick,()=>r.onOpenChange(!1))})});BO.displayName=FO;function QN(t){return t?"open":"closed"}var zO="DialogTitleWarning",[nZ,$O]=UX(zO,{contentName:Vd,titleName:XN,docsSlug:"dialog"}),sZ=({titleId:t})=>{const e=$O(zO),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},rZ="DialogDescriptionWarning",iZ=({contentRef:t,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${$O(rZ).contentName}}.`;return b.useEffect(()=>{var a;const r=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(s))},[s,t,e]),null},qO=AO,HO=RO,WO=DO,ZN=MO,JN=PO,eS=LO,tS=UO,nS=BO;const xc=qO,aZ=HO,oZ=WO,GO=b.forwardRef(({className:t,...e},n)=>i.jsx(ZN,{ref:n,className:Qe("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));GO.displayName=ZN.displayName;const nl=b.forwardRef(({className:t,children:e,...n},s)=>i.jsxs(oZ,{children:[i.jsx(GO,{}),i.jsxs(JN,{ref:s,className:Qe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(nS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(WN,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));nl.displayName=JN.displayName;const yc=({className:t,...e})=>i.jsx("div",{className:Qe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});yc.displayName="DialogHeader";const u0=({className:t,...e})=>i.jsx("div",{className:Qe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});u0.displayName="DialogFooter";const sl=b.forwardRef(({className:t,...e},n)=>i.jsx(eS,{ref:n,className:Qe("text-lg font-semibold leading-none tracking-tight",t),...e}));sl.displayName=eS.displayName;const Ud=b.forwardRef(({className:t,...e},n)=>i.jsx(tS,{ref:n,className:Qe("text-sm text-muted-foreground",t),...e}));Ud.displayName=tS.displayName;function sS(t){const e=t+"CollectionProvider",[n,s]=xi(e),[r,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),l=S=>{const{scope:_,children:E}=S,C=Ct.useRef(null),I=Ct.useRef(new Map).current;return i.jsx(r,{scope:_,itemMap:I,collectionRef:C,children:E})};l.displayName=e;const d=t+"CollectionSlot",u=Pd(d),f=Ct.forwardRef((S,_)=>{const{scope:E,children:C}=S,I=a(d,E),M=Kt(_,I.collectionRef);return i.jsx(u,{ref:M,children:C})});f.displayName=d;const m=t+"CollectionItemSlot",p="data-radix-collection-item",x=Pd(m),w=Ct.forwardRef((S,_)=>{const{scope:E,children:C,...I}=S,M=Ct.useRef(null),V=Kt(_,M),z=a(m,E);return Ct.useEffect(()=>(z.itemMap.set(M,{ref:M,...I}),()=>void z.itemMap.delete(M))),i.jsx(x,{[p]:"",ref:V,children:C})});w.displayName=m;function j(S){const _=a(t+"CollectionConsumer",S);return Ct.useCallback(()=>{const C=_.collectionRef.current;if(!C)return[];const I=Array.from(C.querySelectorAll(`[${p}]`));return Array.from(_.itemMap.values()).sort((z,D)=>I.indexOf(z.ref.current)-I.indexOf(D.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:l,Slot:f,ItemSlot:w},j,s]}var lZ=b.createContext(void 0);function rp(t){const e=b.useContext(lZ);return t||e||"ltr"}var I_="rovingFocusGroup.onEntryFocus",cZ={bubbles:!1,cancelable:!0},ip="RovingFocusGroup",[Yj,YO,dZ]=sS(ip),[uZ,Iv]=xi(ip,[dZ]),[hZ,fZ]=uZ(ip),KO=b.forwardRef((t,e)=>i.jsx(Yj.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(Yj.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(mZ,{...t,ref:e})})}));KO.displayName=ip;var mZ=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:u,onEntryFocus:f,preventScrollOnEntryFocus:m=!1,...p}=t,x=b.useRef(null),w=Kt(e,x),j=rp(a),[S,_]=Ld({prop:l,defaultProp:d??null,onChange:u,caller:ip}),[E,C]=b.useState(!1),I=Qs(f),M=YO(n),V=b.useRef(!1),[z,D]=b.useState(0);return b.useEffect(()=>{const A=x.current;if(A)return A.addEventListener(I_,I),()=>A.removeEventListener(I_,I)},[I]),i.jsx(hZ,{scope:n,orientation:s,dir:j,loop:r,currentTabStopId:S,onItemFocus:b.useCallback(A=>_(A),[_]),onItemShiftTab:b.useCallback(()=>C(!0),[]),onFocusableItemAdd:b.useCallback(()=>D(A=>A+1),[]),onFocusableItemRemove:b.useCallback(()=>D(A=>A-1),[]),children:i.jsx(bt.div,{tabIndex:E||z===0?-1:0,"data-orientation":s,...p,ref:w,style:{outline:"none",...t.style},onMouseDown:tt(t.onMouseDown,()=>{V.current=!0}),onFocus:tt(t.onFocus,A=>{const T=!V.current;if(A.target===A.currentTarget&&T&&!E){const R=new CustomEvent(I_,cZ);if(A.currentTarget.dispatchEvent(R),!R.defaultPrevented){const P=M().filter(q=>q.focusable),O=P.find(q=>q.active),F=P.find(q=>q.id===S),Z=[O,F,...P].filter(Boolean).map(q=>q.ref.current);ZO(Z,m)}}V.current=!1}),onBlur:tt(t.onBlur,()=>C(!1))})})}),XO="RovingFocusGroupItem",QO=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:a,children:l,...d}=t,u=qa(),f=a||u,m=fZ(XO,n),p=m.currentTabStopId===f,x=YO(n),{onFocusableItemAdd:w,onFocusableItemRemove:j,currentTabStopId:S}=m;return b.useEffect(()=>{if(s)return w(),()=>j()},[s,w,j]),i.jsx(Yj.ItemSlot,{scope:n,id:f,focusable:s,active:r,children:i.jsx(bt.span,{tabIndex:p?0:-1,"data-orientation":m.orientation,...d,ref:e,onMouseDown:tt(t.onMouseDown,_=>{s?m.onItemFocus(f):_.preventDefault()}),onFocus:tt(t.onFocus,()=>m.onItemFocus(f)),onKeyDown:tt(t.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){m.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const E=xZ(_,m.orientation,m.dir);if(E!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let I=x().filter(M=>M.focusable).map(M=>M.ref.current);if(E==="last")I.reverse();else if(E==="prev"||E==="next"){E==="prev"&&I.reverse();const M=I.indexOf(_.currentTarget);I=m.loop?yZ(I,M+1):I.slice(M+1)}setTimeout(()=>ZO(I))}}),children:typeof l=="function"?l({isCurrentTabStop:p,hasTabStop:S!=null}):l})})});QO.displayName=XO;var gZ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function pZ(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function xZ(t,e,n){const s=pZ(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return gZ[s]}function ZO(t,e=!1){const n=document.activeElement;for(const s of t)if(s===n||(s.focus({preventScroll:e}),document.activeElement!==n))return}function yZ(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var JO=KO,e5=QO,Dv="Tabs",[vZ,Wue]=xi(Dv,[Iv]),t5=Iv(),[bZ,rS]=vZ(Dv),n5=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:a,orientation:l="horizontal",dir:d,activationMode:u="automatic",...f}=t,m=rp(d),[p,x]=Ld({prop:s,onChange:r,defaultProp:a??"",caller:Dv});return i.jsx(bZ,{scope:n,baseId:qa(),value:p,onValueChange:x,orientation:l,dir:m,activationMode:u,children:i.jsx(bt.div,{dir:m,"data-orientation":l,...f,ref:e})})});n5.displayName=Dv;var s5="TabsList",r5=b.forwardRef((t,e)=>{const{__scopeTabs:n,loop:s=!0,...r}=t,a=rS(s5,n),l=t5(n);return i.jsx(JO,{asChild:!0,...l,orientation:a.orientation,dir:a.dir,loop:s,children:i.jsx(bt.div,{role:"tablist","aria-orientation":a.orientation,...r,ref:e})})});r5.displayName=s5;var i5="TabsTrigger",a5=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...a}=t,l=rS(i5,n),d=t5(n),u=c5(l.baseId,s),f=d5(l.baseId,s),m=s===l.value;return i.jsx(e5,{asChild:!0,...d,focusable:!r,active:m,children:i.jsx(bt.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:u,...a,ref:e,onMouseDown:tt(t.onMouseDown,p=>{!r&&p.button===0&&p.ctrlKey===!1?l.onValueChange(s):p.preventDefault()}),onKeyDown:tt(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&l.onValueChange(s)}),onFocus:tt(t.onFocus,()=>{const p=l.activationMode!=="manual";!m&&!r&&p&&l.onValueChange(s)})})})});a5.displayName=i5;var o5="TabsContent",l5=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,forceMount:r,children:a,...l}=t,d=rS(o5,n),u=c5(d.baseId,s),f=d5(d.baseId,s),m=s===d.value,p=b.useRef(m);return b.useEffect(()=>{const x=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(x)},[]),i.jsx(yi,{present:r||m,children:({present:x})=>i.jsx(bt.div,{"data-state":m?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!x,id:f,tabIndex:0,...l,ref:e,style:{...t.style,animationDuration:p.current?"0s":void 0},children:x&&a})})});l5.displayName=o5;function c5(t,e){return`${t}-trigger-${e}`}function d5(t,e){return`${t}-content-${e}`}var wZ=n5,u5=r5,h5=a5,f5=l5;const ll=wZ,eo=b.forwardRef(({className:t,...e},n)=>i.jsx(u5,{ref:n,className:Qe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));eo.displayName=u5.displayName;const on=b.forwardRef(({className:t,...e},n)=>i.jsx(h5,{ref:n,className:Qe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));on.displayName=h5.displayName;const yn=b.forwardRef(({className:t,...e},n)=>i.jsx(f5,{ref:n,className:Qe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));yn.displayName=f5.displayName;const _Z=FN("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Pi({className:t,variant:e,...n}){return i.jsx("div",{"data-slot":"alert",role:"alert",className:Qe(_Z({variant:e}),t),...n})}function Ed({className:t,...e}){return i.jsx("div",{"data-slot":"alert-title",className:Qe("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...e})}function Oi({className:t,...e}){return i.jsx("div",{"data-slot":"alert-description",className:Qe("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}function $k({buttonText:t="Login",buttonVariant:e="default",className:n=""}){const[s,r]=b.useState(!1),[a,l]=b.useState("signin"),[d,u]=b.useState(""),[f,m]=b.useState(""),[p,x]=b.useState(""),[w,j]=b.useState(""),[S,_]=b.useState(""),[E,C]=b.useState(!1),I=ks(),M=async z=>{z.preventDefault(),_(""),C(!0);try{console.log("Attempting to sign in with email:",d);const A=(await TN(or||pg(Js),d,f)).user;console.log("User authenticated successfully:",A.uid);const T=await _r(Je(ce,"users",A.uid));if(T.exists()){const R=T.data();let P=R.role;Array.isArray(P)&&(console.log("User role is an array:",P),P=P[0]||"staff"),console.log("User profile loaded, normalized role:",P);const O=YP({uid:A.uid,email:A.email,role:P,verified:R.verified||!1,approved:R.approved||!1});console.log("Redirecting to landing route:",O),I(O)}else console.log("No user profile found, navigating to root"),I("/");r(!1)}catch(D){switch(console.error("Sign in error:",D.code,D.message),D.code){case"auth/invalid-email":_("Invalid email address format.");break;case"auth/user-not-found":_("No account found with this email.");break;case"auth/wrong-password":_("Incorrect password.");break;case"auth/too-many-requests":_("Too many failed attempts. Please try again later.");break;case"auth/network-request-failed":_("Network error. Please check your connection and try again.");break;default:_(`Failed to sign in: ${D.message}`)}}finally{C(!1)}},V=async z=>{if(z.preventDefault(),_(""),C(!0),!p||!d||!f||!w){_("Please fill in all fields."),C(!1);return}try{console.log("Attempting to create account for:",d);const A=(await dP(or||pg(Js),d,f)).user;console.log("User account created successfully:",A.uid),await qr(Je(ce,"users",A.uid),{name:p,email:d,storeName:w,verified:!1,verificationStatus:"not_submitted",createdAt:new Date,role:"retailer"}),console.log("User profile created, navigating to profile page"),I("/retailer/profile"),r(!1)}catch(D){switch(console.error("Sign up error:",D.code,D.message),D.code){case"auth/email-already-in-use":_("An account with this email already exists.");break;case"auth/invalid-email":_("Invalid email address format.");break;case"auth/weak-password":_("Password should be at least 6 characters.");break;case"auth/network-request-failed":_("Network error. Please check your connection and try again.");break;default:_(`Failed to create account: ${D.message}`)}}finally{C(!1)}};return i.jsxs(xc,{open:s,onOpenChange:r,children:[i.jsx(aZ,{asChild:!0,children:i.jsxs(Se,{variant:e,className:`flex items-center ${n}`,children:[i.jsx(Ak,{className:"w-4 h-4 mr-2"}),t]})}),i.jsxs(nl,{className:"sm:max-w-md",children:[i.jsx(sl,{className:"sr-only",children:"Authentication"}),i.jsx(Ud,{className:"sr-only",children:"Sign in to your account or create a new account"}),i.jsx("div",{className:"p-4",children:i.jsxs(ll,{value:a,onValueChange:l,className:"w-full",children:[i.jsxs(eo,{className:"grid w-full grid-cols-2 mb-6",children:[i.jsx(on,{value:"signin",className:"font-body",children:"Sign In"}),i.jsx(on,{value:"signup",className:"font-body",children:"Create Account"})]}),i.jsxs(yn,{value:"signin",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(Ak,{className:"w-8 h-8 text-brand-secondary"})}),i.jsx("h3",{className:"text-xl font-semibold mb-2 font-heading text-brand-primary",children:"Welcome Back"}),i.jsx("p",{className:"text-gray-600 mb-6 font-body",children:"Sign in to access your profile, challenges, and community features."})]}),S&&i.jsxs(Pi,{variant:"destructive",className:"mb-4",children:[i.jsx(js,{className:"h-4 w-4"}),i.jsx(Oi,{className:"font-body",children:S})]}),i.jsxs("form",{onSubmit:M,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"signin-email",className:"block text-sm font-medium text-brand-primary mb-1 font-body",children:"Email"}),i.jsx(gt,{id:"signin-email",type:"email",value:d,onChange:z=>u(z.target.value),placeholder:"your.email@example.com",required:!0,className:"border-gray-300 focus:border-brand-primary focus:ring-brand-primary font-body",disabled:E})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"signin-password",className:"block text-sm font-medium text-brand-primary mb-1 font-body",children:"Password"}),i.jsx(gt,{id:"signin-password",type:"password",value:f,onChange:z=>m(z.target.value),placeholder:"••••••••",required:!0,className:"border-gray-300 focus:border-brand-primary focus:ring-brand-primary font-body",disabled:E})]}),i.jsx(Se,{type:"submit",className:"w-full bg-brand-primary hover:bg-brand-primary/90 font-body",disabled:E,children:E?"Signing in...":"Sign In"})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600 font-body",children:["Don't have an account?"," ",i.jsx("button",{onClick:()=>l("signup"),className:"text-brand-secondary hover:underline font-medium",children:"Create Account"})]})})]}),i.jsxs(yn,{value:"signup",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(CX,{className:"w-8 h-8 text-brand-secondary"})}),i.jsx("h3",{className:"text-xl font-semibold mb-2 font-heading text-brand-primary",children:"Join EngageNatural"}),i.jsx("p",{className:"text-gray-600 mb-6 font-body",children:"Create your account to access challenges, community content, and exclusive features."})]}),S&&i.jsxs(Pi,{variant:"destructive",className:"mb-4",children:[i.jsx(js,{className:"h-4 w-4"}),i.jsx(Oi,{className:"font-body",children:S})]}),i.jsxs("form",{onSubmit:V,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"signup-name",className:"block text-sm font-medium text-brand-primary mb-1 font-body",children:"Full Name"}),i.jsx(gt,{id:"signup-name",type:"text",value:p,onChange:z=>x(z.target.value),placeholder:"Your full name",required:!0,className:"border-gray-300 focus:border-brand-primary focus:ring-brand-primary font-body",disabled:E})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"signup-email",className:"block text-sm font-medium text-brand-primary mb-1 font-body",children:"Email"}),i.jsx(gt,{id:"signup-email",type:"email",value:d,onChange:z=>u(z.target.value),placeholder:"your.email@example.com",required:!0,className:"border-gray-300 focus:border-brand-primary focus:ring-brand-primary font-body",disabled:E})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"signup-password",className:"block text-sm font-medium text-brand-primary mb-1 font-body",children:"Password"}),i.jsx(gt,{id:"signup-password",type:"password",value:f,onChange:z=>m(z.target.value),placeholder:"Create a secure password",required:!0,className:"border-gray-300 focus:border-brand-primary focus:ring-brand-primary font-body",disabled:E})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"signup-store",className:"block text-sm font-medium text-brand-primary mb-1 font-body",children:"Store Name"}),i.jsx(gt,{id:"signup-store",type:"text",value:w,onChange:z=>j(z.target.value),placeholder:"Where do you work?",required:!0,className:"border-gray-300 focus:border-brand-primary focus:ring-brand-primary font-body",disabled:E})]}),i.jsx(Se,{type:"submit",className:"w-full bg-brand-secondary hover:bg-brand-secondary/90 font-body",disabled:E,children:E?"Creating Account...":"Create Account"})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600 font-body",children:["Already have an account?"," ",i.jsx("button",{onClick:()=>l("signin"),className:"text-brand-secondary hover:underline font-medium",children:"Sign In"})]})})]})]})})]})]})}const jZ="/assets/Lizaonbeachheadshot-BKDCXXAW.jpg",NZ="/assets/communityof5-M0ZUnn3_.jpg";function qk(){const[t,e]=b.useState({name:"",email:"",company:"",message:""}),n=a=>{e({...t,[a.target.name]:a.target.value})},s=a=>{a.preventDefault();const l=a.target,d=new FormData(l);fetch("https://formspree.io/f/xeokjykw",{method:"POST",body:d,headers:{Accept:"application/json"}}).then(u=>{u.ok?(alert("Thank you! Your message has been sent."),e({name:"",email:"",company:"",message:""})):alert("Oops! There was a problem submitting your form")}).catch(u=>{alert("Oops! There was a problem submitting your form")})},r=()=>{document.getElementById("contact").scrollIntoView({behavior:"smooth"})};return i.jsxs("div",{className:"min-h-screen bg-white",children:[i.jsx("nav",{className:"fixed top-0 w-full bg-white/95 backdrop-blur-sm border-b border-gray-200 z-50",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsx("div",{className:"text-2xl font-bold text-brand-primary font-heading",children:"EngageNatural"}),i.jsxs("div",{className:"hidden md:flex space-x-8 items-center",children:[i.jsx("button",{onClick:r,className:"text-gray-700 hover:text-brand-secondary transition-colors font-body",children:"Contact"}),i.jsx($k,{buttonText:"Login",buttonVariant:"default",className:"bg-brand-primary hover:bg-brand-primary/90 text-white px-6 py-2 rounded-lg transition-colors flex items-center font-body"})]})]})})}),i.jsx("section",{className:"pt-20 pb-16 bg-gradient-to-br from-green-50 to-blue-50",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-brand-primary mb-6 font-heading",children:["Engage",i.jsx("span",{className:"text-brand-secondary",children:"Natural"})]}),i.jsx("p",{className:"text-xl text-gray-600 mb-4 max-w-3xl mx-auto font-body",children:"Learn. Connect. Grow. Naturally"}),i.jsx("p",{className:"text-lg text-brand-secondary font-semibold mb-8 max-w-3xl mx-auto font-body",children:"More Than Training… It's a Movement"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center mt-16",children:[i.jsxs("div",{className:"text-left",children:[i.jsx("h2",{className:"text-3xl font-bold text-brand-primary mb-6 font-heading",children:"The Only Platform Built Exclusively For Natural Products Retail Staff"}),i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx(Ur,{className:"w-6 h-6 text-brand-secondary mr-3 mt-1 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-brand-primary font-body",children:"Double Your Product Knowledge in 30 Days"}),i.jsx("p",{className:"text-gray-600 font-body",children:"Master ingredients, benefits, and customer recommendations through bite-sized daily challenges"})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(Ur,{className:"w-6 h-6 text-brand-secondary mr-3 mt-1 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-brand-primary font-body",children:"Join an Elite Community of Natural Retail Pros"}),i.jsx("p",{className:"text-gray-600 font-body",children:"Connect with verified peers who understand your daily challenges and celebrate your wins"})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(Ur,{className:"w-6 h-6 text-brand-secondary mr-3 mt-1 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-brand-primary font-body",children:"Earn Real Rewards While Building Your Career"}),i.jsx("p",{className:"text-gray-600 font-body",children:"Transform your expertise into recognition, samples, and career advancement opportunities"})]})]})]}),i.jsx($k,{buttonText:"Join the Community",buttonVariant:"default",className:"bg-brand-secondary hover:bg-brand-secondary/90 text-white px-8 py-3 text-lg font-body"})]}),i.jsx("div",{className:"relative",children:i.jsx("img",{src:NZ,alt:"Retail community",className:"rounded-2xl shadow-2xl"})})]})]})})}),i.jsxs("div",{className:"mt-8 text-center",children:[i.jsx("p",{className:"text-gray-600 mb-4",children:"Get the mobile app for the full experience"}),i.jsxs("div",{className:"flex justify-center space-x-4",children:[i.jsxs("button",{className:"bg-black text-white px-6 py-3 rounded-lg flex items-center space-x-2 hover:bg-gray-800 transition-colors",children:[i.jsx("span",{children:"📱"}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"text-xs",children:"Download on the"}),i.jsx("div",{className:"text-sm font-semibold",children:"App Store"})]})]}),i.jsxs("button",{className:"bg-black text-white px-6 py-3 rounded-lg flex items-center space-x-2 hover:bg-gray-800 transition-colors",children:[i.jsx("span",{children:"🤖"}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"text-xs",children:"Get it on"}),i.jsx("div",{className:"text-sm font-semibold",children:"Google Play"})]})]})]})]}),i.jsx("section",{className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-bold text-brand-primary mb-4 font-heading",children:"Why Choose EngageNatural?"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto font-body",children:"Stop wasting time on generic platforms that don't understand natural products. Start growing your expertise, community, and career with the only app built for YOU."})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[i.jsx(De,{className:"text-center p-8 hover:shadow-lg transition-shadow",children:i.jsxs(He,{className:"pt-6",children:[i.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(AK,{className:"w-8 h-8 text-brand-secondary"})}),i.jsx("h3",{className:"text-xl font-semibold text-brand-primary mb-3 font-heading",children:"Gamified Experience"}),i.jsx("p",{className:"text-gray-600 font-body",children:"Forget boring training modules. Our challenges turn learning into a game that's actually FUN, with points, badges, and rewards that keep you coming back for more."})]})}),i.jsx(De,{className:"text-center p-8 hover:shadow-lg transition-shadow",children:i.jsxs(He,{className:"pt-6",children:[i.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx($Y,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h3",{className:"text-xl font-semibold text-brand-primary mb-3 font-heading",children:"Expert Knowledge"}),i.jsx("p",{className:"text-gray-600 font-body",children:"Become the go-to expert your customers trust. Access exclusive content directly from top brands that 99% of your coworkers will never see."})]})}),i.jsx(De,{className:"text-center p-8 hover:shadow-lg transition-shadow",children:i.jsxs(He,{className:"pt-6",children:[i.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:i.jsx(fO,{className:"w-8 h-8 text-purple-600"})}),i.jsx("h3",{className:"text-xl font-semibold text-brand-primary mb-3 font-heading",children:"Community Support"}),i.jsx("p",{className:"text-gray-600 font-body",children:"Stop feeling isolated in your store. Join the ONLY verified community of natural retail professionals who understand exactly what you're going through."})]})})]})]})}),i.jsx("section",{className:"py-20 bg-white",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-4xl font-bold text-brand-primary mb-6 font-heading",children:"Meet the Founder"}),i.jsx("p",{className:"text-lg text-gray-600 mb-6 font-body",children:"Hi, I'm Liza! After 30+ years in the natural products industry, I've seen firsthand how retail staff are the MOST IMPORTANT yet MOST OVERLOOKED part of the entire ecosystem."}),i.jsx("p",{className:"text-lg text-gray-600 mb-8 font-body",children:"EngageNatural exists because YOU deserve better than generic training platforms that don't understand our industry. This is more than an app - it's a movement to recognize, reward, and elevate the retail professionals who make natural products successful."}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsxs(Se,{variant:"outline",size:"sm",className:"border-brand-primary text-brand-primary hover:bg-brand-primary hover:text-white",children:[i.jsx(Ts,{className:"w-4 h-4 mr-2"}),"LinkedIn"]}),i.jsxs(Se,{variant:"outline",size:"sm",className:"border-brand-primary text-brand-primary hover:bg-brand-primary hover:text-white",children:[i.jsx(QK,{className:"w-4 h-4 mr-2"}),"Email"]})]})]}),i.jsx("div",{className:"relative",children:i.jsx("img",{src:jZ,alt:"Liza - Founder of EngageNatural",className:"rounded-2xl shadow-2xl max-w-xs mx-auto transform scale-x-[-1]"})})]})})}),i.jsx("section",{id:"contact",className:"py-20 bg-gray-50",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-bold text-brand-primary mb-4 font-heading",children:"Get In Touch"}),i.jsx("p",{className:"text-xl text-gray-600 font-body",children:"Ready to transform your retail experience? Let's start the conversation."})]}),i.jsx(De,{className:"p-8",children:i.jsx(He,{children:i.jsxs("form",{onSubmit:s,className:"space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-brand-primary mb-2 font-body",children:"Name *"}),i.jsx(gt,{type:"text",id:"name",name:"name",value:t.name,onChange:n,required:!0,placeholder:"Your full name",className:"border-gray-300 focus:border-brand-primary focus:ring-brand-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-brand-primary mb-2 font-body",children:"Email *"}),i.jsx(gt,{type:"email",id:"email",name:"email",value:t.email,onChange:n,required:!0,placeholder:"your.email@company.com",className:"border-gray-300 focus:border-brand-primary focus:ring-brand-primary"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"company",className:"block text-sm font-medium text-brand-primary mb-2 font-body",children:"Company"}),i.jsx(gt,{type:"text",id:"company",name:"company",value:t.company,onChange:n,placeholder:"Your company name",className:"border-gray-300 focus:border-brand-primary focus:ring-brand-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-brand-primary mb-2 font-body",children:"Message *"}),i.jsx(ta,{id:"message",name:"message",rows:5,value:t.message,onChange:n,required:!0,placeholder:"Tell us about your needs and how we can help...",className:"border-gray-300 focus:border-brand-primary focus:ring-brand-primary"})]}),i.jsx(Se,{type:"submit",className:"w-full bg-brand-primary hover:bg-brand-primary/90 text-white py-3 font-body",children:"Send Message"})]})})})]})}),i.jsx("footer",{className:"bg-brand-primary text-white py-12",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold mb-4 font-heading",children:"EngageNatural"}),i.jsx("p",{className:"text-gray-300 font-body",children:"Empowering retail teams through gamified engagement and community building."})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-4 font-heading",children:"For Retail Staff"}),i.jsxs("ul",{className:"space-y-2 text-gray-300 font-body",children:[i.jsx("li",{children:"Gamified Learning"}),i.jsx("li",{children:"Community Connection"}),i.jsx("li",{children:"Career Growth"}),i.jsx("li",{children:"Expert Knowledge"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-4 font-heading",children:"Platform"}),i.jsxs("ul",{className:"space-y-2 text-gray-300 font-body",children:[i.jsx("li",{children:"Challenges"}),i.jsx("li",{children:"Community"}),i.jsx("li",{children:"Learning"}),i.jsx("li",{children:"Verification"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-4 font-heading",children:"Connect"}),i.jsxs("ul",{className:"space-y-2 text-gray-300 font-body",children:[i.jsx("li",{children:"Contact Us"}),i.jsx("li",{children:"LinkedIn"}),i.jsx("li",{children:"Support"}),i.jsx("li",{children:"Privacy Policy"})]})]})]}),i.jsx("div",{className:"border-t border-gray-600 mt-8 pt-8 text-center text-gray-300",children:i.jsx("p",{className:"font-body",children:"© 2024 EngageNatural. All rights reserved."})})]})})]})}function Mv(){const{role:t,brandId:e,hasPermission:n,isSuperAdmin:s,isBrandManager:r,isRetailUser:a,isCommunityUser:l}=bn();return{role:t,brandId:e,canAccess:f=>t?(Array.isArray(f)?f:[f]).some(p=>n(p)):!1,canViewAnalytics:(f="all")=>s||f==="brand"&&r&&e?!0:f==="all"?n(Io.VIEW_ANALYTICS):!1,isSuperAdmin:s,isBrandManager:r,isRetailUser:a,isCommunityUser:l}}const SZ=[{name:"Overview",href:"/admin",icon:PK,current:!1},{name:"Users",href:"/admin/users",icon:Ts,current:!1,permission:["manage_users"]},{name:"Verifications",href:"/admin/verifications",icon:HN,current:!1,permission:["approve_verifications"]},{name:"Brands",href:"/admin/brands",icon:ph,current:!1,permission:["manage_brands","manage_brand_content","manage_brand_products"]},{name:"Analytics",href:"/admin/analytics",icon:Od,current:!1,permission:["view_analytics"]},{name:"Content",href:"/admin/content",icon:hi,current:!1,permission:["manage_content","manage_brand_content"]},{name:"Products",href:"/admin/products",icon:i0,current:!1,permission:["manage_brand_products"]},{name:"Activity",href:"/admin/activity",icon:Xl,current:!1},{name:"Settings",href:"/admin/settings",icon:tl,current:!1,permission:["system_settings"]},{name:"Demo Data",href:"/admin/demo",icon:Lh,current:!1,permission:["system_settings"]},{name:"Dev Tools",href:"/admin/dev",icon:LX,current:!1,permission:["system_settings"]},{name:"Env Check",href:"/admin/env-check",icon:Xl,current:!1,permission:["system_settings"]}];function EZ(){const t=Hr(),e=ks(),{signOut:n}=bn();let s;try{s=Mv()}catch{s={}}const r=typeof(s==null?void 0:s.canAccess)=="function"?s.canAccess:()=>!0,a=(s==null?void 0:s.role)||"guest",l=f=>{switch(f){case"super_admin":return"Super Admin";case"brand_admin":return"Brand Admin";case"retail_admin":return"Retail Admin";default:return"User"}},d=SZ.filter(f=>f.permission?r(f.permission):!0),u=async()=>{try{await n()}finally{e("/?logout=true",{replace:!0})}};return i.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-64 lg:flex-col",children:i.jsxs("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6 pb-4 border-r border-gray-200",children:[i.jsx("div",{className:"flex h-16 shrink-0 items-center",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-8 w-8 rounded-lg bg-blue-600 flex items-center justify-center",children:i.jsx("span",{className:"text-white font-bold text-sm",children:"EN"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"EngageNatural"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Admin Panel"})]})]})}),i.jsxs("div",{className:"px-3 py-2 bg-blue-50 rounded-lg border border-blue-200",children:[i.jsx("p",{className:"text-sm font-medium text-blue-900",children:l(a)}),i.jsx("p",{className:"text-xs text-blue-600",children:"Access Level"})]}),i.jsx("nav",{className:"flex flex-1 flex-col",children:i.jsxs("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:[i.jsx("li",{children:i.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:d.map(f=>{const m=t.pathname===f.href||f.href!=="/admin"&&t.pathname.startsWith(f.href);return i.jsx("li",{children:i.jsxs($n,{to:f.href,className:Qe(m?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:text-blue-700 hover:bg-gray-50","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold transition-colors"),children:[i.jsx(f.icon,{className:Qe(m?"text-blue-700":"text-gray-400 group-hover:text-blue-700","h-6 w-6 shrink-0"),"aria-hidden":"true"}),f.name]})},f.name)})})}),i.jsxs("li",{className:"mt-auto",children:[i.jsx("div",{className:"px-2 py-2 border-t border-gray-200",children:i.jsxs($n,{to:"/admin/legacy",className:"group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold text-gray-500 hover:text-gray-700 hover:bg-gray-50 transition-colors",children:[i.jsx(qN,{className:"h-5 w-5 shrink-0","aria-hidden":"true"}),"Legacy Dashboard"]})}),i.jsx("div",{className:"px-2 py-2",children:i.jsxs("button",{type:"button",onClick:u,className:"group flex w-full gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold text-gray-500 hover:text-red-700 hover:bg-gray-50 transition-colors",children:[i.jsx(xh,{className:"h-5 w-5 shrink-0","aria-hidden":"true"}),"Logout"]})})]})]})})]})})}const CZ=["top","right","bottom","left"],vc=Math.min,li=Math.max,h0=Math.round,Gx=Math.floor,Ha=t=>({x:t,y:t}),TZ={left:"right",right:"left",bottom:"top",top:"bottom"},AZ={start:"end",end:"start"};function Kj(t,e,n){return li(t,vc(e,n))}function rl(t,e){return typeof t=="function"?t(e):t}function il(t){return t.split("-")[0]}function df(t){return t.split("-")[1]}function iS(t){return t==="x"?"y":"x"}function aS(t){return t==="y"?"height":"width"}const kZ=new Set(["top","bottom"]);function Pa(t){return kZ.has(il(t))?"y":"x"}function oS(t){return iS(Pa(t))}function RZ(t,e,n){n===void 0&&(n=!1);const s=df(t),r=oS(t),a=aS(r);let l=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=f0(l)),[l,f0(l)]}function IZ(t){const e=f0(t);return[Xj(t),e,Xj(e)]}function Xj(t){return t.replace(/start|end/g,e=>AZ[e])}const Hk=["left","right"],Wk=["right","left"],DZ=["top","bottom"],MZ=["bottom","top"];function PZ(t,e,n){switch(t){case"top":case"bottom":return n?e?Wk:Hk:e?Hk:Wk;case"left":case"right":return e?DZ:MZ;default:return[]}}function OZ(t,e,n,s){const r=df(t);let a=PZ(il(t),n==="start",s);return r&&(a=a.map(l=>l+"-"+r),e&&(a=a.concat(a.map(Xj)))),a}function f0(t){return t.replace(/left|right|bottom|top/g,e=>TZ[e])}function LZ(t){return{top:0,right:0,bottom:0,left:0,...t}}function m5(t){return typeof t!="number"?LZ(t):{top:t,right:t,bottom:t,left:t}}function m0(t){const{x:e,y:n,width:s,height:r}=t;return{width:s,height:r,top:n,left:e,right:e+s,bottom:n+r,x:e,y:n}}function Gk(t,e,n){let{reference:s,floating:r}=t;const a=Pa(e),l=oS(e),d=aS(l),u=il(e),f=a==="y",m=s.x+s.width/2-r.width/2,p=s.y+s.height/2-r.height/2,x=s[d]/2-r[d]/2;let w;switch(u){case"top":w={x:m,y:s.y-r.height};break;case"bottom":w={x:m,y:s.y+s.height};break;case"right":w={x:s.x+s.width,y:p};break;case"left":w={x:s.x-r.width,y:p};break;default:w={x:s.x,y:s.y}}switch(df(e)){case"start":w[l]-=x*(n&&f?-1:1);break;case"end":w[l]+=x*(n&&f?-1:1);break}return w}const VZ=async(t,e,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:a=[],platform:l}=n,d=a.filter(Boolean),u=await(l.isRTL==null?void 0:l.isRTL(e));let f=await l.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y:p}=Gk(f,s,u),x=s,w={},j=0;for(let S=0;S<d.length;S++){const{name:_,fn:E}=d[S],{x:C,y:I,data:M,reset:V}=await E({x:m,y:p,initialPlacement:s,placement:x,strategy:r,middlewareData:w,rects:f,platform:l,elements:{reference:t,floating:e}});m=C??m,p=I??p,w={...w,[_]:{...w[_],...M}},V&&j<=50&&(j++,typeof V=="object"&&(V.placement&&(x=V.placement),V.rects&&(f=V.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:r}):V.rects),{x:m,y:p}=Gk(f,x,u)),S=-1)}return{x:m,y:p,placement:x,strategy:r,middlewareData:w}};async function yg(t,e){var n;e===void 0&&(e={});const{x:s,y:r,platform:a,rects:l,elements:d,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:p="floating",altBoundary:x=!1,padding:w=0}=rl(e,t),j=m5(w),_=d[x?p==="floating"?"reference":"floating":p],E=m0(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(_)))==null||n?_:_.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(d.floating)),boundary:f,rootBoundary:m,strategy:u})),C=p==="floating"?{x:s,y:r,width:l.floating.width,height:l.floating.height}:l.reference,I=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d.floating)),M=await(a.isElement==null?void 0:a.isElement(I))?await(a.getScale==null?void 0:a.getScale(I))||{x:1,y:1}:{x:1,y:1},V=m0(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:C,offsetParent:I,strategy:u}):C);return{top:(E.top-V.top+j.top)/M.y,bottom:(V.bottom-E.bottom+j.bottom)/M.y,left:(E.left-V.left+j.left)/M.x,right:(V.right-E.right+j.right)/M.x}}const UZ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:r,rects:a,platform:l,elements:d,middlewareData:u}=e,{element:f,padding:m=0}=rl(t,e)||{};if(f==null)return{};const p=m5(m),x={x:n,y:s},w=oS(r),j=aS(w),S=await l.getDimensions(f),_=w==="y",E=_?"top":"left",C=_?"bottom":"right",I=_?"clientHeight":"clientWidth",M=a.reference[j]+a.reference[w]-x[w]-a.floating[j],V=x[w]-a.reference[w],z=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let D=z?z[I]:0;(!D||!await(l.isElement==null?void 0:l.isElement(z)))&&(D=d.floating[I]||a.floating[j]);const A=M/2-V/2,T=D/2-S[j]/2-1,R=vc(p[E],T),P=vc(p[C],T),O=R,F=D-S[j]-P,J=D/2-S[j]/2+A,Z=Kj(O,J,F),q=!u.arrow&&df(r)!=null&&J!==Z&&a.reference[j]/2-(J<O?R:P)-S[j]/2<0,Y=q?J<O?J-O:J-F:0;return{[w]:x[w]+Y,data:{[w]:Z,centerOffset:J-Z-Y,...q&&{alignmentOffset:Y}},reset:q}}}),FZ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:r,middlewareData:a,rects:l,initialPlacement:d,platform:u,elements:f}=e,{mainAxis:m=!0,crossAxis:p=!0,fallbackPlacements:x,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:S=!0,..._}=rl(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const E=il(r),C=Pa(d),I=il(d)===d,M=await(u.isRTL==null?void 0:u.isRTL(f.floating)),V=x||(I||!S?[f0(d)]:IZ(d)),z=j!=="none";!x&&z&&V.push(...OZ(d,S,j,M));const D=[d,...V],A=await yg(e,_),T=[];let R=((s=a.flip)==null?void 0:s.overflows)||[];if(m&&T.push(A[E]),p){const J=RZ(r,l,M);T.push(A[J[0]],A[J[1]])}if(R=[...R,{placement:r,overflows:T}],!T.every(J=>J<=0)){var P,O;const J=(((P=a.flip)==null?void 0:P.index)||0)+1,Z=D[J];if(Z&&(!(p==="alignment"?C!==Pa(Z):!1)||R.every(W=>W.overflows[0]>0&&Pa(W.placement)===C)))return{data:{index:J,overflows:R},reset:{placement:Z}};let q=(O=R.filter(Y=>Y.overflows[0]<=0).sort((Y,W)=>Y.overflows[1]-W.overflows[1])[0])==null?void 0:O.placement;if(!q)switch(w){case"bestFit":{var F;const Y=(F=R.filter(W=>{if(z){const H=Pa(W.placement);return H===C||H==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(H=>H>0).reduce((H,B)=>H+B,0)]).sort((W,H)=>W[1]-H[1])[0])==null?void 0:F[0];Y&&(q=Y);break}case"initialPlacement":q=d;break}if(r!==q)return{reset:{placement:q}}}return{}}}};function Yk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Kk(t){return CZ.some(e=>t[e]>=0)}const BZ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:s="referenceHidden",...r}=rl(t,e);switch(s){case"referenceHidden":{const a=await yg(e,{...r,elementContext:"reference"}),l=Yk(a,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Kk(l)}}}case"escaped":{const a=await yg(e,{...r,altBoundary:!0}),l=Yk(a,n.floating);return{data:{escapedOffsets:l,escaped:Kk(l)}}}default:return{}}}}},g5=new Set(["left","top"]);async function zZ(t,e){const{placement:n,platform:s,elements:r}=t,a=await(s.isRTL==null?void 0:s.isRTL(r.floating)),l=il(n),d=df(n),u=Pa(n)==="y",f=g5.has(l)?-1:1,m=a&&u?-1:1,p=rl(e,t);let{mainAxis:x,crossAxis:w,alignmentAxis:j}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return d&&typeof j=="number"&&(w=d==="end"?j*-1:j),u?{x:w*m,y:x*f}:{x:x*f,y:w*m}}const $Z=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:r,y:a,placement:l,middlewareData:d}=e,u=await zZ(e,t);return l===((n=d.offset)==null?void 0:n.placement)&&(s=d.arrow)!=null&&s.alignmentOffset?{}:{x:r+u.x,y:a+u.y,data:{...u,placement:l}}}}},qZ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:r}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:d={fn:_=>{let{x:E,y:C}=_;return{x:E,y:C}}},...u}=rl(t,e),f={x:n,y:s},m=await yg(e,u),p=Pa(il(r)),x=iS(p);let w=f[x],j=f[p];if(a){const _=x==="y"?"top":"left",E=x==="y"?"bottom":"right",C=w+m[_],I=w-m[E];w=Kj(C,w,I)}if(l){const _=p==="y"?"top":"left",E=p==="y"?"bottom":"right",C=j+m[_],I=j-m[E];j=Kj(C,j,I)}const S=d.fn({...e,[x]:w,[p]:j});return{...S,data:{x:S.x-n,y:S.y-s,enabled:{[x]:a,[p]:l}}}}}},HZ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:s,placement:r,rects:a,middlewareData:l}=e,{offset:d=0,mainAxis:u=!0,crossAxis:f=!0}=rl(t,e),m={x:n,y:s},p=Pa(r),x=iS(p);let w=m[x],j=m[p];const S=rl(d,e),_=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(u){const I=x==="y"?"height":"width",M=a.reference[x]-a.floating[I]+_.mainAxis,V=a.reference[x]+a.reference[I]-_.mainAxis;w<M?w=M:w>V&&(w=V)}if(f){var E,C;const I=x==="y"?"width":"height",M=g5.has(il(r)),V=a.reference[p]-a.floating[I]+(M&&((E=l.offset)==null?void 0:E[p])||0)+(M?0:_.crossAxis),z=a.reference[p]+a.reference[I]+(M?0:((C=l.offset)==null?void 0:C[p])||0)-(M?_.crossAxis:0);j<V?j=V:j>z&&(j=z)}return{[x]:w,[p]:j}}}},WZ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:r,rects:a,platform:l,elements:d}=e,{apply:u=()=>{},...f}=rl(t,e),m=await yg(e,f),p=il(r),x=df(r),w=Pa(r)==="y",{width:j,height:S}=a.floating;let _,E;p==="top"||p==="bottom"?(_=p,E=x===(await(l.isRTL==null?void 0:l.isRTL(d.floating))?"start":"end")?"left":"right"):(E=p,_=x==="end"?"top":"bottom");const C=S-m.top-m.bottom,I=j-m.left-m.right,M=vc(S-m[_],C),V=vc(j-m[E],I),z=!e.middlewareData.shift;let D=M,A=V;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=I),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(D=C),z&&!x){const R=li(m.left,0),P=li(m.right,0),O=li(m.top,0),F=li(m.bottom,0);w?A=j-2*(R!==0||P!==0?R+P:li(m.left,m.right)):D=S-2*(O!==0||F!==0?O+F:li(m.top,m.bottom))}await u({...e,availableWidth:A,availableHeight:D});const T=await l.getDimensions(d.floating);return j!==T.width||S!==T.height?{reset:{rects:!0}}:{}}}};function Pv(){return typeof window<"u"}function uf(t){return p5(t)?(t.nodeName||"").toLowerCase():"#document"}function mi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function to(t){var e;return(e=(p5(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function p5(t){return Pv()?t instanceof Node||t instanceof mi(t).Node:!1}function ia(t){return Pv()?t instanceof Element||t instanceof mi(t).Element:!1}function Qa(t){return Pv()?t instanceof HTMLElement||t instanceof mi(t).HTMLElement:!1}function Xk(t){return!Pv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof mi(t).ShadowRoot}const GZ=new Set(["inline","contents"]);function ap(t){const{overflow:e,overflowX:n,overflowY:s,display:r}=aa(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!GZ.has(r)}const YZ=new Set(["table","td","th"]);function KZ(t){return YZ.has(uf(t))}const XZ=[":popover-open",":modal"];function Ov(t){return XZ.some(e=>{try{return t.matches(e)}catch{return!1}})}const QZ=["transform","translate","scale","rotate","perspective"],ZZ=["transform","translate","scale","rotate","perspective","filter"],JZ=["paint","layout","strict","content"];function lS(t){const e=cS(),n=ia(t)?aa(t):t;return QZ.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||ZZ.some(s=>(n.willChange||"").includes(s))||JZ.some(s=>(n.contain||"").includes(s))}function eJ(t){let e=bc(t);for(;Qa(e)&&!Vh(e);){if(lS(e))return e;if(Ov(e))return null;e=bc(e)}return null}function cS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const tJ=new Set(["html","body","#document"]);function Vh(t){return tJ.has(uf(t))}function aa(t){return mi(t).getComputedStyle(t)}function Lv(t){return ia(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bc(t){if(uf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Xk(t)&&t.host||to(t);return Xk(e)?e.host:e}function x5(t){const e=bc(t);return Vh(e)?t.ownerDocument?t.ownerDocument.body:t.body:Qa(e)&&ap(e)?e:x5(e)}function vg(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=x5(t),a=r===((s=t.ownerDocument)==null?void 0:s.body),l=mi(r);if(a){const d=Qj(l);return e.concat(l,l.visualViewport||[],ap(r)?r:[],d&&n?vg(d):[])}return e.concat(r,vg(r,[],n))}function Qj(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function y5(t){const e=aa(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=Qa(t),a=r?t.offsetWidth:n,l=r?t.offsetHeight:s,d=h0(n)!==a||h0(s)!==l;return d&&(n=a,s=l),{width:n,height:s,$:d}}function dS(t){return ia(t)?t:t.contextElement}function vh(t){const e=dS(t);if(!Qa(e))return Ha(1);const n=e.getBoundingClientRect(),{width:s,height:r,$:a}=y5(e);let l=(a?h0(n.width):n.width)/s,d=(a?h0(n.height):n.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!d||!Number.isFinite(d))&&(d=1),{x:l,y:d}}const nJ=Ha(0);function v5(t){const e=mi(t);return!cS()||!e.visualViewport?nJ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function sJ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==mi(t)?!1:e}function Fd(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=dS(t);let l=Ha(1);e&&(s?ia(s)&&(l=vh(s)):l=vh(t));const d=sJ(a,n,s)?v5(a):Ha(0);let u=(r.left+d.x)/l.x,f=(r.top+d.y)/l.y,m=r.width/l.x,p=r.height/l.y;if(a){const x=mi(a),w=s&&ia(s)?mi(s):s;let j=x,S=Qj(j);for(;S&&s&&w!==j;){const _=vh(S),E=S.getBoundingClientRect(),C=aa(S),I=E.left+(S.clientLeft+parseFloat(C.paddingLeft))*_.x,M=E.top+(S.clientTop+parseFloat(C.paddingTop))*_.y;u*=_.x,f*=_.y,m*=_.x,p*=_.y,u+=I,f+=M,j=mi(S),S=Qj(j)}}return m0({width:m,height:p,x:u,y:f})}function uS(t,e){const n=Lv(t).scrollLeft;return e?e.left+n:Fd(to(t)).left+n}function b5(t,e,n){n===void 0&&(n=!1);const s=t.getBoundingClientRect(),r=s.left+e.scrollLeft-(n?0:uS(t,s)),a=s.top+e.scrollTop;return{x:r,y:a}}function rJ(t){let{elements:e,rect:n,offsetParent:s,strategy:r}=t;const a=r==="fixed",l=to(s),d=e?Ov(e.floating):!1;if(s===l||d&&a)return n;let u={scrollLeft:0,scrollTop:0},f=Ha(1);const m=Ha(0),p=Qa(s);if((p||!p&&!a)&&((uf(s)!=="body"||ap(l))&&(u=Lv(s)),Qa(s))){const w=Fd(s);f=vh(s),m.x=w.x+s.clientLeft,m.y=w.y+s.clientTop}const x=l&&!p&&!a?b5(l,u,!0):Ha(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-u.scrollLeft*f.x+m.x+x.x,y:n.y*f.y-u.scrollTop*f.y+m.y+x.y}}function iJ(t){return Array.from(t.getClientRects())}function aJ(t){const e=to(t),n=Lv(t),s=t.ownerDocument.body,r=li(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),a=li(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let l=-n.scrollLeft+uS(t);const d=-n.scrollTop;return aa(s).direction==="rtl"&&(l+=li(e.clientWidth,s.clientWidth)-r),{width:r,height:a,x:l,y:d}}function oJ(t,e){const n=mi(t),s=to(t),r=n.visualViewport;let a=s.clientWidth,l=s.clientHeight,d=0,u=0;if(r){a=r.width,l=r.height;const f=cS();(!f||f&&e==="fixed")&&(d=r.offsetLeft,u=r.offsetTop)}return{width:a,height:l,x:d,y:u}}const lJ=new Set(["absolute","fixed"]);function cJ(t,e){const n=Fd(t,!0,e==="fixed"),s=n.top+t.clientTop,r=n.left+t.clientLeft,a=Qa(t)?vh(t):Ha(1),l=t.clientWidth*a.x,d=t.clientHeight*a.y,u=r*a.x,f=s*a.y;return{width:l,height:d,x:u,y:f}}function Qk(t,e,n){let s;if(e==="viewport")s=oJ(t,n);else if(e==="document")s=aJ(to(t));else if(ia(e))s=cJ(e,n);else{const r=v5(t);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return m0(s)}function w5(t,e){const n=bc(t);return n===e||!ia(n)||Vh(n)?!1:aa(n).position==="fixed"||w5(n,e)}function dJ(t,e){const n=e.get(t);if(n)return n;let s=vg(t,[],!1).filter(d=>ia(d)&&uf(d)!=="body"),r=null;const a=aa(t).position==="fixed";let l=a?bc(t):t;for(;ia(l)&&!Vh(l);){const d=aa(l),u=lS(l);!u&&d.position==="fixed"&&(r=null),(a?!u&&!r:!u&&d.position==="static"&&!!r&&lJ.has(r.position)||ap(l)&&!u&&w5(t,l))?s=s.filter(m=>m!==l):r=d,l=bc(l)}return e.set(t,s),s}function uJ(t){let{element:e,boundary:n,rootBoundary:s,strategy:r}=t;const l=[...n==="clippingAncestors"?Ov(e)?[]:dJ(e,this._c):[].concat(n),s],d=l[0],u=l.reduce((f,m)=>{const p=Qk(e,m,r);return f.top=li(p.top,f.top),f.right=vc(p.right,f.right),f.bottom=vc(p.bottom,f.bottom),f.left=li(p.left,f.left),f},Qk(e,d,r));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function hJ(t){const{width:e,height:n}=y5(t);return{width:e,height:n}}function fJ(t,e,n){const s=Qa(e),r=to(e),a=n==="fixed",l=Fd(t,!0,a,e);let d={scrollLeft:0,scrollTop:0};const u=Ha(0);function f(){u.x=uS(r)}if(s||!s&&!a)if((uf(e)!=="body"||ap(r))&&(d=Lv(e)),s){const w=Fd(e,!0,a,e);u.x=w.x+e.clientLeft,u.y=w.y+e.clientTop}else r&&f();a&&!s&&r&&f();const m=r&&!s&&!a?b5(r,d):Ha(0),p=l.left+d.scrollLeft-u.x-m.x,x=l.top+d.scrollTop-u.y-m.y;return{x:p,y:x,width:l.width,height:l.height}}function D_(t){return aa(t).position==="static"}function Zk(t,e){if(!Qa(t)||aa(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return to(t)===n&&(n=n.ownerDocument.body),n}function _5(t,e){const n=mi(t);if(Ov(t))return n;if(!Qa(t)){let r=bc(t);for(;r&&!Vh(r);){if(ia(r)&&!D_(r))return r;r=bc(r)}return n}let s=Zk(t,e);for(;s&&KZ(s)&&D_(s);)s=Zk(s,e);return s&&Vh(s)&&D_(s)&&!lS(s)?n:s||eJ(t)||n}const mJ=async function(t){const e=this.getOffsetParent||_5,n=this.getDimensions,s=await n(t.floating);return{reference:fJ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function gJ(t){return aa(t).direction==="rtl"}const pJ={convertOffsetParentRelativeRectToViewportRelativeRect:rJ,getDocumentElement:to,getClippingRect:uJ,getOffsetParent:_5,getElementRects:mJ,getClientRects:iJ,getDimensions:hJ,getScale:vh,isElement:ia,isRTL:gJ};function j5(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function xJ(t,e){let n=null,s;const r=to(t);function a(){var d;clearTimeout(s),(d=n)==null||d.disconnect(),n=null}function l(d,u){d===void 0&&(d=!1),u===void 0&&(u=1),a();const f=t.getBoundingClientRect(),{left:m,top:p,width:x,height:w}=f;if(d||e(),!x||!w)return;const j=Gx(p),S=Gx(r.clientWidth-(m+x)),_=Gx(r.clientHeight-(p+w)),E=Gx(m),I={rootMargin:-j+"px "+-S+"px "+-_+"px "+-E+"px",threshold:li(0,vc(1,u))||1};let M=!0;function V(z){const D=z[0].intersectionRatio;if(D!==u){if(!M)return l();D?l(!1,D):s=setTimeout(()=>{l(!1,1e-7)},1e3)}D===1&&!j5(f,t.getBoundingClientRect())&&l(),M=!1}try{n=new IntersectionObserver(V,{...I,root:r.ownerDocument})}catch{n=new IntersectionObserver(V,I)}n.observe(t)}return l(!0),a}function yJ(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:u=!1}=s,f=dS(t),m=r||a?[...f?vg(f):[],...vg(e)]:[];m.forEach(E=>{r&&E.addEventListener("scroll",n,{passive:!0}),a&&E.addEventListener("resize",n)});const p=f&&d?xJ(f,n):null;let x=-1,w=null;l&&(w=new ResizeObserver(E=>{let[C]=E;C&&C.target===f&&w&&(w.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var I;(I=w)==null||I.observe(e)})),n()}),f&&!u&&w.observe(f),w.observe(e));let j,S=u?Fd(t):null;u&&_();function _(){const E=Fd(t);S&&!j5(S,E)&&n(),S=E,j=requestAnimationFrame(_)}return n(),()=>{var E;m.forEach(C=>{r&&C.removeEventListener("scroll",n),a&&C.removeEventListener("resize",n)}),p==null||p(),(E=w)==null||E.disconnect(),w=null,u&&cancelAnimationFrame(j)}}const vJ=$Z,bJ=qZ,wJ=FZ,_J=WZ,jJ=BZ,Jk=UZ,NJ=HZ,SJ=(t,e,n)=>{const s=new Map,r={platform:pJ,...n},a={...r.platform,_c:s};return VZ(t,e,{...r,platform:a})};var EJ=typeof document<"u",CJ=function(){},Ty=EJ?b.useLayoutEffect:CJ;function g0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!g0(t[s],e[s]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=n;s--!==0;){const a=r[s];if(!(a==="_owner"&&t.$$typeof)&&!g0(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function N5(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function eR(t,e){const n=N5(t);return Math.round(e*n)/n}function M_(t){const e=b.useRef(t);return Ty(()=>{e.current=t}),e}function TJ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:a,floating:l}={},transform:d=!0,whileElementsMounted:u,open:f}=t,[m,p]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[x,w]=b.useState(s);g0(x,s)||w(s);const[j,S]=b.useState(null),[_,E]=b.useState(null),C=b.useCallback(W=>{W!==z.current&&(z.current=W,S(W))},[]),I=b.useCallback(W=>{W!==D.current&&(D.current=W,E(W))},[]),M=a||j,V=l||_,z=b.useRef(null),D=b.useRef(null),A=b.useRef(m),T=u!=null,R=M_(u),P=M_(r),O=M_(f),F=b.useCallback(()=>{if(!z.current||!D.current)return;const W={placement:e,strategy:n,middleware:x};P.current&&(W.platform=P.current),SJ(z.current,D.current,W).then(H=>{const B={...H,isPositioned:O.current!==!1};J.current&&!g0(A.current,B)&&(A.current=B,Vg.flushSync(()=>{p(B)}))})},[x,e,n,P,O]);Ty(()=>{f===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,p(W=>({...W,isPositioned:!1})))},[f]);const J=b.useRef(!1);Ty(()=>(J.current=!0,()=>{J.current=!1}),[]),Ty(()=>{if(M&&(z.current=M),V&&(D.current=V),M&&V){if(R.current)return R.current(M,V,F);F()}},[M,V,F,R,T]);const Z=b.useMemo(()=>({reference:z,floating:D,setReference:C,setFloating:I}),[C,I]),q=b.useMemo(()=>({reference:M,floating:V}),[M,V]),Y=b.useMemo(()=>{const W={position:n,left:0,top:0};if(!q.floating)return W;const H=eR(q.floating,m.x),B=eR(q.floating,m.y);return d?{...W,transform:"translate("+H+"px, "+B+"px)",...N5(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:B}},[n,d,q.floating,m.x,m.y]);return b.useMemo(()=>({...m,update:F,refs:Z,elements:q,floatingStyles:Y}),[m,F,Z,q,Y])}const AJ=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:r}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?Jk({element:s.current,padding:r}).fn(n):{}:s?Jk({element:s,padding:r}).fn(n):{}}}},kJ=(t,e)=>({...vJ(t),options:[t,e]}),RJ=(t,e)=>({...bJ(t),options:[t,e]}),IJ=(t,e)=>({...NJ(t),options:[t,e]}),DJ=(t,e)=>({...wJ(t),options:[t,e]}),MJ=(t,e)=>({..._J(t),options:[t,e]}),PJ=(t,e)=>({...jJ(t),options:[t,e]}),OJ=(t,e)=>({...AJ(t),options:[t,e]});var LJ="Arrow",S5=b.forwardRef((t,e)=>{const{children:n,width:s=10,height:r=5,...a}=t;return i.jsx(bt.svg,{...a,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});S5.displayName=LJ;var VJ=S5;function E5(t){const[e,n]=b.useState(void 0);return As(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let l,d;if("borderBoxSize"in a){const u=a.borderBoxSize,f=Array.isArray(u)?u[0]:u;l=f.inlineSize,d=f.blockSize}else l=t.offsetWidth,d=t.offsetHeight;n({width:l,height:d})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var hS="Popper",[C5,Vv]=xi(hS),[UJ,T5]=C5(hS),A5=t=>{const{__scopePopper:e,children:n}=t,[s,r]=b.useState(null);return i.jsx(UJ,{scope:e,anchor:s,onAnchorChange:r,children:n})};A5.displayName=hS;var k5="PopperAnchor",R5=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...r}=t,a=T5(k5,n),l=b.useRef(null),d=Kt(e,l);return b.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||l.current)}),s?null:i.jsx(bt.div,{...r,ref:d})});R5.displayName=k5;var fS="PopperContent",[FJ,BJ]=C5(fS),I5=b.forwardRef((t,e)=>{var ve,le,Ne,Pe,Ge,Ye;const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:a="center",alignOffset:l=0,arrowPadding:d=0,avoidCollisions:u=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:p="partial",hideWhenDetached:x=!1,updatePositionStrategy:w="optimized",onPlaced:j,...S}=t,_=T5(fS,n),[E,C]=b.useState(null),I=Kt(e,ot=>C(ot)),[M,V]=b.useState(null),z=E5(M),D=(z==null?void 0:z.width)??0,A=(z==null?void 0:z.height)??0,T=s+(a!=="center"?"-"+a:""),R=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},P=Array.isArray(f)?f:[f],O=P.length>0,F={padding:R,boundary:P.filter($J),altBoundary:O},{refs:J,floatingStyles:Z,placement:q,isPositioned:Y,middlewareData:W}=TJ({strategy:"fixed",placement:T,whileElementsMounted:(...ot)=>yJ(...ot,{animationFrame:w==="always"}),elements:{reference:_.anchor},middleware:[kJ({mainAxis:r+A,alignmentAxis:l}),u&&RJ({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?IJ():void 0,...F}),u&&DJ({...F}),MJ({...F,apply:({elements:ot,rects:Dt,availableWidth:je,availableHeight:qe})=>{const{width:ct,height:dt}=Dt.reference,pt=ot.floating.style;pt.setProperty("--radix-popper-available-width",`${je}px`),pt.setProperty("--radix-popper-available-height",`${qe}px`),pt.setProperty("--radix-popper-anchor-width",`${ct}px`),pt.setProperty("--radix-popper-anchor-height",`${dt}px`)}}),M&&OJ({element:M,padding:d}),qJ({arrowWidth:D,arrowHeight:A}),x&&PJ({strategy:"referenceHidden",...F})]}),[H,B]=P5(q),K=Qs(j);As(()=>{Y&&(K==null||K())},[Y,K]);const ne=(ve=W.arrow)==null?void 0:ve.x,te=(le=W.arrow)==null?void 0:le.y,fe=((Ne=W.arrow)==null?void 0:Ne.centerOffset)!==0,[ke,Ee]=b.useState();return As(()=>{E&&Ee(window.getComputedStyle(E).zIndex)},[E]),i.jsx("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:Y?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[(Pe=W.transformOrigin)==null?void 0:Pe.x,(Ge=W.transformOrigin)==null?void 0:Ge.y].join(" "),...((Ye=W.hide)==null?void 0:Ye.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(FJ,{scope:n,placedSide:H,onArrowChange:V,arrowX:ne,arrowY:te,shouldHideArrow:fe,children:i.jsx(bt.div,{"data-side":H,"data-align":B,...S,ref:I,style:{...S.style,animation:Y?void 0:"none"}})})})});I5.displayName=fS;var D5="PopperArrow",zJ={top:"bottom",right:"left",bottom:"top",left:"right"},M5=b.forwardRef(function(e,n){const{__scopePopper:s,...r}=e,a=BJ(D5,s),l=zJ[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(VJ,{...r,ref:n,style:{...r.style,display:"block"}})})});M5.displayName=D5;function $J(t){return t!==null}var qJ=t=>({name:"transformOrigin",options:t,fn(e){var _,E,C;const{placement:n,rects:s,middlewareData:r}=e,l=((_=r.arrow)==null?void 0:_.centerOffset)!==0,d=l?0:t.arrowWidth,u=l?0:t.arrowHeight,[f,m]=P5(n),p={start:"0%",center:"50%",end:"100%"}[m],x=(((E=r.arrow)==null?void 0:E.x)??0)+d/2,w=(((C=r.arrow)==null?void 0:C.y)??0)+u/2;let j="",S="";return f==="bottom"?(j=l?p:`${x}px`,S=`${-u}px`):f==="top"?(j=l?p:`${x}px`,S=`${s.floating.height+u}px`):f==="right"?(j=`${-u}px`,S=l?p:`${w}px`):f==="left"&&(j=`${s.floating.width+u}px`,S=l?p:`${w}px`),{data:{x:j,y:S}}}});function P5(t){const[e,n="center"]=t.split("-");return[e,n]}var O5=A5,L5=R5,V5=I5,U5=M5,Zj=["Enter"," "],HJ=["ArrowDown","PageUp","Home"],F5=["ArrowUp","PageDown","End"],WJ=[...HJ,...F5],GJ={ltr:[...Zj,"ArrowRight"],rtl:[...Zj,"ArrowLeft"]},YJ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},op="Menu",[bg,KJ,XJ]=sS(op),[Jd,B5]=xi(op,[XJ,Vv,Iv]),Uv=Vv(),z5=Iv(),[QJ,eu]=Jd(op),[ZJ,lp]=Jd(op),$5=t=>{const{__scopeMenu:e,open:n=!1,children:s,dir:r,onOpenChange:a,modal:l=!0}=t,d=Uv(e),[u,f]=b.useState(null),m=b.useRef(!1),p=Qs(a),x=rp(r);return b.useEffect(()=>{const w=()=>{m.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>m.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),i.jsx(O5,{...d,children:i.jsx(QJ,{scope:e,open:n,onOpenChange:p,content:u,onContentChange:f,children:i.jsx(ZJ,{scope:e,onClose:b.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:m,dir:x,modal:l,children:s})})})};$5.displayName=op;var JJ="MenuAnchor",mS=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t,r=Uv(n);return i.jsx(L5,{...r,...s,ref:e})});mS.displayName=JJ;var gS="MenuPortal",[eee,q5]=Jd(gS,{forceMount:void 0}),H5=t=>{const{__scopeMenu:e,forceMount:n,children:s,container:r}=t,a=eu(gS,e);return i.jsx(eee,{scope:e,forceMount:n,children:i.jsx(yi,{present:n||a.open,children:i.jsx(Tv,{asChild:!0,container:r,children:s})})})};H5.displayName=gS;var Li="MenuContent",[tee,pS]=Jd(Li),W5=b.forwardRef((t,e)=>{const n=q5(Li,t.__scopeMenu),{forceMount:s=n.forceMount,...r}=t,a=eu(Li,t.__scopeMenu),l=lp(Li,t.__scopeMenu);return i.jsx(bg.Provider,{scope:t.__scopeMenu,children:i.jsx(yi,{present:s||a.open,children:i.jsx(bg.Slot,{scope:t.__scopeMenu,children:l.modal?i.jsx(nee,{...r,ref:e}):i.jsx(see,{...r,ref:e})})})})}),nee=b.forwardRef((t,e)=>{const n=eu(Li,t.__scopeMenu),s=b.useRef(null),r=Kt(e,s);return b.useEffect(()=>{const a=s.current;if(a)return YN(a)},[]),i.jsx(xS,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:tt(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),see=b.forwardRef((t,e)=>{const n=eu(Li,t.__scopeMenu);return i.jsx(xS,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ree=Pd("MenuContent.ScrollLock"),xS=b.forwardRef((t,e)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:d,onEntryFocus:u,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:p,onInteractOutside:x,onDismiss:w,disableOutsideScroll:j,...S}=t,_=eu(Li,n),E=lp(Li,n),C=Uv(n),I=z5(n),M=KJ(n),[V,z]=b.useState(null),D=b.useRef(null),A=Kt(e,D,_.onContentChange),T=b.useRef(0),R=b.useRef(""),P=b.useRef(0),O=b.useRef(null),F=b.useRef("right"),J=b.useRef(0),Z=j?kv:b.Fragment,q=j?{as:ree,allowPinchZoom:!0}:void 0,Y=H=>{var ve,le;const B=R.current+H,K=M().filter(Ne=>!Ne.disabled),ne=document.activeElement,te=(ve=K.find(Ne=>Ne.ref.current===ne))==null?void 0:ve.textValue,fe=K.map(Ne=>Ne.textValue),ke=pee(fe,B,te),Ee=(le=K.find(Ne=>Ne.textValue===ke))==null?void 0:le.ref.current;(function Ne(Pe){R.current=Pe,window.clearTimeout(T.current),Pe!==""&&(T.current=window.setTimeout(()=>Ne(""),1e3))})(B),Ee&&setTimeout(()=>Ee.focus())};b.useEffect(()=>()=>window.clearTimeout(T.current),[]),GN();const W=b.useCallback(H=>{var K,ne;return F.current===((K=O.current)==null?void 0:K.side)&&yee(H,(ne=O.current)==null?void 0:ne.area)},[]);return i.jsx(tee,{scope:n,searchRef:R,onItemEnter:b.useCallback(H=>{W(H)&&H.preventDefault()},[W]),onItemLeave:b.useCallback(H=>{var B;W(H)||((B=D.current)==null||B.focus(),z(null))},[W]),onTriggerLeave:b.useCallback(H=>{W(H)&&H.preventDefault()},[W]),pointerGraceTimerRef:P,onPointerGraceIntentChange:b.useCallback(H=>{O.current=H},[]),children:i.jsx(Z,{...q,children:i.jsx(Cv,{asChild:!0,trapped:r,onMountAutoFocus:tt(a,H=>{var B;H.preventDefault(),(B=D.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:i.jsx(Ev,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:p,onInteractOutside:x,onDismiss:w,children:i.jsx(JO,{asChild:!0,...I,dir:E.dir,orientation:"vertical",loop:s,currentTabStopId:V,onCurrentTabStopIdChange:z,onEntryFocus:tt(u,H=>{E.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(V5,{role:"menu","aria-orientation":"vertical","data-state":l3(_.open),"data-radix-menu-content":"",dir:E.dir,...C,...S,ref:A,style:{outline:"none",...S.style},onKeyDown:tt(S.onKeyDown,H=>{const K=H.target.closest("[data-radix-menu-content]")===H.currentTarget,ne=H.ctrlKey||H.altKey||H.metaKey,te=H.key.length===1;K&&(H.key==="Tab"&&H.preventDefault(),!ne&&te&&Y(H.key));const fe=D.current;if(H.target!==fe||!WJ.includes(H.key))return;H.preventDefault();const Ee=M().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);F5.includes(H.key)&&Ee.reverse(),mee(Ee)}),onBlur:tt(t.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(T.current),R.current="")}),onPointerMove:tt(t.onPointerMove,wg(H=>{const B=H.target,K=J.current!==H.clientX;if(H.currentTarget.contains(B)&&K){const ne=H.clientX>J.current?"right":"left";F.current=ne,J.current=H.clientX}}))})})})})})})});W5.displayName=Li;var iee="MenuGroup",yS=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return i.jsx(bt.div,{role:"group",...s,ref:e})});yS.displayName=iee;var aee="MenuLabel",G5=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return i.jsx(bt.div,{...s,ref:e})});G5.displayName=aee;var p0="MenuItem",tR="menu.itemSelect",Fv=b.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:s,...r}=t,a=b.useRef(null),l=lp(p0,t.__scopeMenu),d=pS(p0,t.__scopeMenu),u=Kt(e,a),f=b.useRef(!1),m=()=>{const p=a.current;if(!n&&p){const x=new CustomEvent(tR,{bubbles:!0,cancelable:!0});p.addEventListener(tR,w=>s==null?void 0:s(w),{once:!0}),pO(p,x),x.defaultPrevented?f.current=!1:l.onClose()}};return i.jsx(Y5,{...r,ref:u,disabled:n,onClick:tt(t.onClick,m),onPointerDown:p=>{var x;(x=t.onPointerDown)==null||x.call(t,p),f.current=!0},onPointerUp:tt(t.onPointerUp,p=>{var x;f.current||(x=p.currentTarget)==null||x.click()}),onKeyDown:tt(t.onKeyDown,p=>{const x=d.searchRef.current!=="";n||x&&p.key===" "||Zj.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Fv.displayName=p0;var Y5=b.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:s=!1,textValue:r,...a}=t,l=pS(p0,n),d=z5(n),u=b.useRef(null),f=Kt(e,u),[m,p]=b.useState(!1),[x,w]=b.useState("");return b.useEffect(()=>{const j=u.current;j&&w((j.textContent??"").trim())},[a.children]),i.jsx(bg.ItemSlot,{scope:n,disabled:s,textValue:r??x,children:i.jsx(e5,{asChild:!0,...d,focusable:!s,children:i.jsx(bt.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:f,onPointerMove:tt(t.onPointerMove,wg(j=>{s?l.onItemLeave(j):(l.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:tt(t.onPointerLeave,wg(j=>l.onItemLeave(j))),onFocus:tt(t.onFocus,()=>p(!0)),onBlur:tt(t.onBlur,()=>p(!1))})})})}),oee="MenuCheckboxItem",K5=b.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:s,...r}=t;return i.jsx(e3,{scope:t.__scopeMenu,checked:n,children:i.jsx(Fv,{role:"menuitemcheckbox","aria-checked":x0(n)?"mixed":n,...r,ref:e,"data-state":bS(n),onSelect:tt(r.onSelect,()=>s==null?void 0:s(x0(n)?!0:!n),{checkForDefaultPrevented:!1})})})});K5.displayName=oee;var X5="MenuRadioGroup",[lee,cee]=Jd(X5,{value:void 0,onValueChange:()=>{}}),Q5=b.forwardRef((t,e)=>{const{value:n,onValueChange:s,...r}=t,a=Qs(s);return i.jsx(lee,{scope:t.__scopeMenu,value:n,onValueChange:a,children:i.jsx(yS,{...r,ref:e})})});Q5.displayName=X5;var Z5="MenuRadioItem",J5=b.forwardRef((t,e)=>{const{value:n,...s}=t,r=cee(Z5,t.__scopeMenu),a=n===r.value;return i.jsx(e3,{scope:t.__scopeMenu,checked:a,children:i.jsx(Fv,{role:"menuitemradio","aria-checked":a,...s,ref:e,"data-state":bS(a),onSelect:tt(s.onSelect,()=>{var l;return(l=r.onValueChange)==null?void 0:l.call(r,n)},{checkForDefaultPrevented:!1})})})});J5.displayName=Z5;var vS="MenuItemIndicator",[e3,dee]=Jd(vS,{checked:!1}),t3=b.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:s,...r}=t,a=dee(vS,n);return i.jsx(yi,{present:s||x0(a.checked)||a.checked===!0,children:i.jsx(bt.span,{...r,ref:e,"data-state":bS(a.checked)})})});t3.displayName=vS;var uee="MenuSeparator",n3=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return i.jsx(bt.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});n3.displayName=uee;var hee="MenuArrow",s3=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t,r=Uv(n);return i.jsx(U5,{...r,...s,ref:e})});s3.displayName=hee;var fee="MenuSub",[Gue,r3]=Jd(fee),Pm="MenuSubTrigger",i3=b.forwardRef((t,e)=>{const n=eu(Pm,t.__scopeMenu),s=lp(Pm,t.__scopeMenu),r=r3(Pm,t.__scopeMenu),a=pS(Pm,t.__scopeMenu),l=b.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:u}=a,f={__scopeMenu:t.__scopeMenu},m=b.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return b.useEffect(()=>m,[m]),b.useEffect(()=>{const p=d.current;return()=>{window.clearTimeout(p),u(null)}},[d,u]),i.jsx(mS,{asChild:!0,...f,children:i.jsx(Y5,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":l3(n.open),...t,ref:Nv(e,r.onTriggerChange),onClick:p=>{var x;(x=t.onClick)==null||x.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:tt(t.onPointerMove,wg(p=>{a.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!l.current&&(a.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:tt(t.onPointerLeave,wg(p=>{var w,j;m();const x=(w=n.content)==null?void 0:w.getBoundingClientRect();if(x){const S=(j=n.content)==null?void 0:j.dataset.side,_=S==="right",E=_?-5:5,C=x[_?"left":"right"],I=x[_?"right":"left"];a.onPointerGraceIntentChange({area:[{x:p.clientX+E,y:p.clientY},{x:C,y:x.top},{x:I,y:x.top},{x:I,y:x.bottom},{x:C,y:x.bottom}],side:S}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(p),p.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:tt(t.onKeyDown,p=>{var w;const x=a.searchRef.current!=="";t.disabled||x&&p.key===" "||GJ[s.dir].includes(p.key)&&(n.onOpenChange(!0),(w=n.content)==null||w.focus(),p.preventDefault())})})})});i3.displayName=Pm;var a3="MenuSubContent",o3=b.forwardRef((t,e)=>{const n=q5(Li,t.__scopeMenu),{forceMount:s=n.forceMount,...r}=t,a=eu(Li,t.__scopeMenu),l=lp(Li,t.__scopeMenu),d=r3(a3,t.__scopeMenu),u=b.useRef(null),f=Kt(e,u);return i.jsx(bg.Provider,{scope:t.__scopeMenu,children:i.jsx(yi,{present:s||a.open,children:i.jsx(bg.Slot,{scope:t.__scopeMenu,children:i.jsx(xS,{id:d.contentId,"aria-labelledby":d.triggerId,...r,ref:f,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var p;l.isUsingKeyboardRef.current&&((p=u.current)==null||p.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:tt(t.onFocusOutside,m=>{m.target!==d.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:tt(t.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:tt(t.onKeyDown,m=>{var w;const p=m.currentTarget.contains(m.target),x=YJ[l.dir].includes(m.key);p&&x&&(a.onOpenChange(!1),(w=d.trigger)==null||w.focus(),m.preventDefault())})})})})})});o3.displayName=a3;function l3(t){return t?"open":"closed"}function x0(t){return t==="indeterminate"}function bS(t){return x0(t)?"indeterminate":t?"checked":"unchecked"}function mee(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function gee(t,e){return t.map((n,s)=>t[(e+s)%t.length])}function pee(t,e,n){const r=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let l=gee(t,Math.max(a,0));r.length===1&&(l=l.filter(f=>f!==n));const u=l.find(f=>f.toLowerCase().startsWith(r.toLowerCase()));return u!==n?u:void 0}function xee(t,e){const{x:n,y:s}=t;let r=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const d=e[a],u=e[l],f=d.x,m=d.y,p=u.x,x=u.y;m>s!=x>s&&n<(p-f)*(s-m)/(x-m)+f&&(r=!r)}return r}function yee(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return xee(n,e)}function wg(t){return e=>e.pointerType==="mouse"?t(e):void 0}var vee=$5,bee=mS,wee=H5,_ee=W5,jee=yS,Nee=G5,See=Fv,Eee=K5,Cee=Q5,Tee=J5,Aee=t3,kee=n3,Ree=s3,Iee=i3,Dee=o3,Bv="DropdownMenu",[Mee,Yue]=xi(Bv,[B5]),Rr=B5(),[Pee,c3]=Mee(Bv),d3=t=>{const{__scopeDropdownMenu:e,children:n,dir:s,open:r,defaultOpen:a,onOpenChange:l,modal:d=!0}=t,u=Rr(e),f=b.useRef(null),[m,p]=Ld({prop:r,defaultProp:a??!1,onChange:l,caller:Bv});return i.jsx(Pee,{scope:e,triggerId:qa(),triggerRef:f,contentId:qa(),open:m,onOpenChange:p,onOpenToggle:b.useCallback(()=>p(x=>!x),[p]),modal:d,children:i.jsx(vee,{...u,open:m,onOpenChange:p,dir:s,modal:d,children:n})})};d3.displayName=Bv;var u3="DropdownMenuTrigger",h3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...r}=t,a=c3(u3,n),l=Rr(n);return i.jsx(bee,{asChild:!0,...l,children:i.jsx(bt.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:Nv(e,a.triggerRef),onPointerDown:tt(t.onPointerDown,d=>{!s&&d.button===0&&d.ctrlKey===!1&&(a.onOpenToggle(),a.open||d.preventDefault())}),onKeyDown:tt(t.onKeyDown,d=>{s||(["Enter"," "].includes(d.key)&&a.onOpenToggle(),d.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});h3.displayName=u3;var Oee="DropdownMenuPortal",f3=t=>{const{__scopeDropdownMenu:e,...n}=t,s=Rr(e);return i.jsx(wee,{...s,...n})};f3.displayName=Oee;var m3="DropdownMenuContent",g3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=c3(m3,n),a=Rr(n),l=b.useRef(!1);return i.jsx(_ee,{id:r.contentId,"aria-labelledby":r.triggerId,...a,...s,ref:e,onCloseAutoFocus:tt(t.onCloseAutoFocus,d=>{var u;l.current||(u=r.triggerRef.current)==null||u.focus(),l.current=!1,d.preventDefault()}),onInteractOutside:tt(t.onInteractOutside,d=>{const u=d.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,m=u.button===2||f;(!r.modal||m)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});g3.displayName=m3;var Lee="DropdownMenuGroup",p3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Rr(n);return i.jsx(jee,{...r,...s,ref:e})});p3.displayName=Lee;var Vee="DropdownMenuLabel",x3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Rr(n);return i.jsx(Nee,{...r,...s,ref:e})});x3.displayName=Vee;var Uee="DropdownMenuItem",y3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Rr(n);return i.jsx(See,{...r,...s,ref:e})});y3.displayName=Uee;var Fee="DropdownMenuCheckboxItem",v3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Rr(n);return i.jsx(Eee,{...r,...s,ref:e})});v3.displayName=Fee;var Bee="DropdownMenuRadioGroup",zee=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Rr(n);return i.jsx(Cee,{...r,...s,ref:e})});zee.displayName=Bee;var $ee="DropdownMenuRadioItem",b3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Rr(n);return i.jsx(Tee,{...r,...s,ref:e})});b3.displayName=$ee;var qee="DropdownMenuItemIndicator",w3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Rr(n);return i.jsx(Aee,{...r,...s,ref:e})});w3.displayName=qee;var Hee="DropdownMenuSeparator",_3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Rr(n);return i.jsx(kee,{...r,...s,ref:e})});_3.displayName=Hee;var Wee="DropdownMenuArrow",Gee=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Rr(n);return i.jsx(Ree,{...r,...s,ref:e})});Gee.displayName=Wee;var Yee="DropdownMenuSubTrigger",j3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Rr(n);return i.jsx(Iee,{...r,...s,ref:e})});j3.displayName=Yee;var Kee="DropdownMenuSubContent",N3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Rr(n);return i.jsx(Dee,{...r,...s,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});N3.displayName=Kee;var Xee=d3,Qee=h3,Zee=f3,S3=g3,Jee=p3,E3=x3,C3=y3,T3=v3,A3=b3,k3=w3,R3=_3,I3=j3,D3=N3;const Ho=Xee,Wo=Qee,ete=Jee,tte=b.forwardRef(({className:t,inset:e,children:n,...s},r)=>i.jsxs(I3,{ref:r,className:Qe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...s,children:[n,i.jsx(uO,{className:"ml-auto h-4 w-4"})]}));tte.displayName=I3.displayName;const nte=b.forwardRef(({className:t,...e},n)=>i.jsx(D3,{ref:n,className:Qe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));nte.displayName=D3.displayName;const Wa=b.forwardRef(({className:t,sideOffset:e=4,...n},s)=>i.jsx(Zee,{children:i.jsx(S3,{ref:s,sideOffset:e,className:Qe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Wa.displayName=S3.displayName;const zt=b.forwardRef(({className:t,inset:e,...n},s)=>i.jsx(C3,{ref:s,className:Qe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));zt.displayName=C3.displayName;const ste=b.forwardRef(({className:t,children:e,checked:n,...s},r)=>i.jsxs(T3,{ref:r,className:Qe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...s,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(k3,{children:i.jsx(dO,{className:"h-4 w-4"})})}),e]}));ste.displayName=T3.displayName;const rte=b.forwardRef(({className:t,children:e,...n},s)=>i.jsxs(A3,{ref:s,className:Qe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(k3,{children:i.jsx(dK,{className:"h-2 w-2 fill-current"})})}),e]}));rte.displayName=A3.displayName;const Uh=b.forwardRef(({className:t,inset:e,...n},s)=>i.jsx(E3,{ref:s,className:Qe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Uh.displayName=E3.displayName;const fi=b.forwardRef(({className:t,...e},n)=>i.jsx(R3,{ref:n,className:Qe("-mx-1 my-1 h-px bg-muted",t),...e}));fi.displayName=R3.displayName;var P_={exports:{}},O_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nR;function ite(){if(nR)return O_;nR=1;var t=$0();function e(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}var n=typeof Object.is=="function"?Object.is:e,s=t.useState,r=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function d(p,x){var w=x(),j=s({inst:{value:w,getSnapshot:x}}),S=j[0].inst,_=j[1];return a(function(){S.value=w,S.getSnapshot=x,u(S)&&_({inst:S})},[p,w,x]),r(function(){return u(S)&&_({inst:S}),p(function(){u(S)&&_({inst:S})})},[p]),l(w),w}function u(p){var x=p.getSnapshot;p=p.value;try{var w=x();return!n(p,w)}catch{return!0}}function f(p,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:d;return O_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,O_}var sR;function ate(){return sR||(sR=1,P_.exports=ite()),P_.exports}var ote=ate();function lte(){return ote.useSyncExternalStore(cte,()=>!0,()=>!1)}function cte(){return()=>{}}var wS="Avatar",[dte,Kue]=xi(wS),[ute,M3]=dte(wS),P3=b.forwardRef((t,e)=>{const{__scopeAvatar:n,...s}=t,[r,a]=b.useState("idle");return i.jsx(ute,{scope:n,imageLoadingStatus:r,onImageLoadingStatusChange:a,children:i.jsx(bt.span,{...s,ref:e})})});P3.displayName=wS;var O3="AvatarImage",L3=b.forwardRef((t,e)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:r=()=>{},...a}=t,l=M3(O3,n),d=hte(s,a),u=Qs(f=>{r(f),l.onImageLoadingStatusChange(f)});return As(()=>{d!=="idle"&&u(d)},[d,u]),d==="loaded"?i.jsx(bt.img,{...a,ref:e,src:s}):null});L3.displayName=O3;var V3="AvatarFallback",U3=b.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:s,...r}=t,a=M3(V3,n),[l,d]=b.useState(s===void 0);return b.useEffect(()=>{if(s!==void 0){const u=window.setTimeout(()=>d(!0),s);return()=>window.clearTimeout(u)}},[s]),l&&a.imageLoadingStatus!=="loaded"?i.jsx(bt.span,{...r,ref:e}):null});U3.displayName=V3;function rR(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function hte(t,{referrerPolicy:e,crossOrigin:n}){const s=lte(),r=b.useRef(null),a=s?(r.current||(r.current=new window.Image),r.current):null,[l,d]=b.useState(()=>rR(a,t));return As(()=>{d(rR(a,t))},[a,t]),As(()=>{const u=p=>()=>{d(p)};if(!a)return;const f=u("loaded"),m=u("error");return a.addEventListener("load",f),a.addEventListener("error",m),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",f),a.removeEventListener("error",m)}},[a,n,e]),l}var fte=P3,mte=L3,gte=U3;function bh({className:t,...e}){return i.jsx(fte,{"data-slot":"avatar",className:Qe("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...e})}function wh({className:t,...e}){return i.jsx(mte,{"data-slot":"avatar-image",className:Qe("aspect-square size-full",t),...e})}function _h({className:t,...e}){return i.jsx(gte,{"data-slot":"avatar-fallback",className:Qe("bg-muted flex size-full items-center justify-center rounded-full",t),...e})}function F3(){const{user:t,role:e,signOut:n}=bn(),s=async()=>{try{await n(),window.location.assign("/")}catch(a){console.error("Error signing out:",a)}};if(!t)return i.jsx(Se,{variant:"ghost",size:"icon",className:"rounded-full",children:i.jsx(c0,{className:"h-5 w-5"})});const r=a=>{if(!a)return"U";const d=a.split(" ").map(u=>u[0]).join("");return d.length>2?d.substring(0,2):d};return i.jsxs(Ho,{children:[i.jsx(Wo,{asChild:!0,children:i.jsx(Se,{variant:"ghost",className:"relative h-9 w-9 rounded-full",children:i.jsx(bh,{className:"h-9 w-9",children:t.profileImage&&t.profileImage.startsWith("http")?i.jsx(wh,{src:t.profileImage,alt:t.displayName||"User Avatar"}):i.jsx(_h,{children:r(t.displayName||t.name)})})})}),i.jsxs(Wa,{className:"w-60",align:"end",forceMount:!0,children:[i.jsx(Uh,{className:"font-normal",children:i.jsxs("div",{className:"flex flex-col space-y-1",children:[i.jsx("p",{className:"text-sm font-medium leading-none",children:t.displayName||t.name}),i.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:t.email})]})}),i.jsx(fi,{}),i.jsxs(ete,{children:[i.jsx(zt,{asChild:!0,children:i.jsxs($n,{to:"/staff/profile",children:[i.jsx(c0,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Profile"})]})}),i.jsx(zt,{asChild:!0,children:i.jsxs($n,{to:"/staff/verification",children:[i.jsx(kk,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Verification"})]})}),i.jsx(zt,{asChild:!0,children:i.jsxs($n,{to:"/community",children:[i.jsx(Ts,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Communities"})]})}),i.jsx(zt,{asChild:!0,children:i.jsxs($n,{to:"/staff/my-brands",children:[i.jsx(jX,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"My Brands"})]})})]}),i.jsx(fi,{}),i.jsx(zt,{asChild:!0,children:i.jsxs($n,{to:"/staff/profile",children:[i.jsx(tl,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Settings"})]})}),e==="super_admin"&&i.jsxs(i.Fragment,{children:[i.jsx(fi,{}),i.jsx(zt,{asChild:!0,children:i.jsxs($n,{to:"/admin",children:[i.jsx(kk,{className:"mr-2 h-4 w-4 text-primary"}),i.jsx("span",{className:"font-semibold",children:"Admin Panel"})]})})]}),i.jsx(fi,{}),i.jsxs(zt,{onClick:s,children:[i.jsx(xh,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Sign Out"})]})]})]})}function Xn({children:t}){const{user:e,loading:n}=bn();Hr();const[s,r]=b.useState(!1);return n?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"})}):!e||e.role!=="super_admin"?i.jsx(oi,{to:"/",replace:!0}):i.jsxs("div",{className:"flex h-screen bg-gray-100",children:[i.jsx(EZ,{}),i.jsx("header",{className:"sticky top-0 z-30 bg-white border-b border-gray-200 lg:ml-64",children:i.jsxs("div",{className:"px-6 h-16 flex items-center justify-between",children:[i.jsx("div",{className:"font-semibold text-gray-900",children:"Admin"}),i.jsx("div",{className:"fixed top-4 right-4 z-50",children:i.jsx(F3,{})})]})}),i.jsx("main",{className:"flex-1 overflow-y-auto p-8 lg:ml-64",children:t})]})}function pte(){const t=[{name:"Verify Staff",href:"/admin/verifications",icon:HN,color:"bg-purple-500 hover:bg-purple-600"},{name:"Manage Users",href:"/admin/users",icon:Ts,color:"bg-blue-500 hover:bg-blue-600"},{name:"Brand Management",href:"/admin/brands",icon:ph,color:"bg-green-500 hover:bg-green-600"},{name:"Analytics",href:"/admin/analytics",icon:Od,color:"bg-orange-500 hover:bg-orange-600"},{name:"Activity Log",href:"/admin/activity",icon:Xl,color:"bg-indigo-500 hover:bg-indigo-600"},{name:"System Settings",href:"/admin/settings",icon:tl,color:"bg-gray-500 hover:bg-gray-600"}],e=[{name:"Total Users",stat:"71",change:"12",changeType:"increase"},{name:"Pending Verifications",stat:"5",change:"2.02%",changeType:"increase"},{name:"Active Brands",stat:"12",change:"4.75%",changeType:"increase"},{name:"System Health",stat:"98.5%",change:"0.12%",changeType:"increase"}];return i.jsxs("div",{children:[i.jsx("div",{className:"md:flex md:items-center md:justify-between mb-8",children:i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight",children:"Admin Dashboard"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Welcome back! Here's an overview of your system."})]})}),i.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:e.map(n=>i.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"p-5",children:[i.jsx("div",{className:"flex items-center",children:i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"text-sm font-medium text-gray-500 truncate",children:n.name})})}),i.jsxs("div",{className:"mt-1 flex items-baseline justify-between",children:[i.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:n.stat}),i.jsxs("div",{className:"flex items-baseline text-sm font-semibold text-green-600",children:["+",n.change]})]})]})},n.name))}),i.jsx("div",{className:"bg-white shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),i.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:t.map(n=>i.jsx($n,{to:n.href,className:"relative rounded-lg border border-gray-300 bg-white p-6 shadow-sm hover:shadow-md transition-shadow focus:outline-none focus:ring-2 focus:ring-blue-500",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`flex-shrink-0 rounded-lg p-3 text-white ${n.color}`,children:i.jsx(n.icon,{className:"h-6 w-6","aria-hidden":"true"})}),i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx("span",{className:"text-sm font-medium text-gray-900",children:n.name})})]})},n.name))})]})})]})}var cp=t=>t.type==="checkbox",jd=t=>t instanceof Date,Ar=t=>t==null;const B3=t=>typeof t=="object";var ms=t=>!Ar(t)&&!Array.isArray(t)&&B3(t)&&!jd(t),z3=t=>ms(t)&&t.target?cp(t.target)?t.target.checked:t.target.value:t,xte=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,$3=(t,e)=>t.has(xte(e)),yte=t=>{const e=t.constructor&&t.constructor.prototype;return ms(e)&&e.hasOwnProperty("isPrototypeOf")},_S=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Us(t){let e;const n=Array.isArray(t),s=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(_S&&(t instanceof Blob||s))&&(n||ms(t)))if(e=n?[]:{},!n&&!yte(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=Us(t[r]));else return t;return e}var zv=t=>/^\w*$/.test(t),cs=t=>t===void 0,jS=t=>Array.isArray(t)?t.filter(Boolean):[],NS=t=>jS(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Be=(t,e,n)=>{if(!e||!ms(t))return n;const s=(zv(e)?[e]:NS(e)).reduce((r,a)=>Ar(r)?r:r[a],t);return cs(s)||s===t?cs(t[e])?n:t[e]:s},ii=t=>typeof t=="boolean",Sn=(t,e,n)=>{let s=-1;const r=zv(e)?[e]:NS(e),a=r.length,l=a-1;for(;++s<a;){const d=r[s];let u=n;if(s!==l){const f=t[d];u=ms(f)||Array.isArray(f)?f:isNaN(+r[s+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;t[d]=u,t=t[d]}};const y0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ki={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Co={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},SS=Ct.createContext(null);SS.displayName="HookFormContext";const $v=()=>Ct.useContext(SS),vte=t=>{const{children:e,...n}=t;return Ct.createElement(SS.Provider,{value:n},e)};var q3=(t,e,n,s=!0)=>{const r={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(r,a,{get:()=>{const l=a;return e._proxyFormState[l]!==Ki.all&&(e._proxyFormState[l]=!s||Ki.all),n&&(n[l]=!0),t[l]}});return r};const ES=typeof window<"u"?b.useLayoutEffect:b.useEffect;function H3(t){const e=$v(),{control:n=e.control,disabled:s,name:r,exact:a}=t||{},[l,d]=Ct.useState(n._formState),u=Ct.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return ES(()=>n._subscribe({name:r,formState:u.current,exact:a,callback:f=>{!s&&d({...n._formState,...f})}}),[r,s,a]),Ct.useEffect(()=>{u.current.isValid&&n._setValid(!0)},[n]),Ct.useMemo(()=>q3(l,n,u.current,!1),[l,n])}var Oa=t=>typeof t=="string",W3=(t,e,n,s,r)=>Oa(t)?(s&&e.watch.add(t),Be(n,t,r)):Array.isArray(t)?t.map(a=>(s&&e.watch.add(a),Be(n,a))):(s&&(e.watchAll=!0),n);function bte(t){const e=$v(),{control:n=e.control,name:s,defaultValue:r,disabled:a,exact:l}=t||{},d=Ct.useRef(r),[u,f]=Ct.useState(n._getWatch(s,d.current));return ES(()=>n._subscribe({name:s,formState:{values:!0},exact:l,callback:m=>!a&&f(W3(s,n._names,m.values||n._formValues,!1,d.current))}),[s,n,a,l]),Ct.useEffect(()=>n._removeUnmounted()),u}function wte(t){const e=$v(),{name:n,disabled:s,control:r=e.control,shouldUnregister:a}=t,l=$3(r._names.array,n),d=bte({control:r,name:n,defaultValue:Be(r._formValues,n,Be(r._defaultValues,n,t.defaultValue)),exact:!0}),u=H3({control:r,name:n,exact:!0}),f=Ct.useRef(t),m=Ct.useRef(r.register(n,{...t.rules,value:d,...ii(t.disabled)?{disabled:t.disabled}:{}})),p=Ct.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Be(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!Be(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Be(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Be(u.validatingFields,n)},error:{enumerable:!0,get:()=>Be(u.errors,n)}}),[u,n]),x=Ct.useCallback(_=>m.current.onChange({target:{value:z3(_),name:n},type:y0.CHANGE}),[n]),w=Ct.useCallback(()=>m.current.onBlur({target:{value:Be(r._formValues,n),name:n},type:y0.BLUR}),[n,r._formValues]),j=Ct.useCallback(_=>{const E=Be(r._fields,n);E&&_&&(E._f.ref={focus:()=>_.focus&&_.focus(),select:()=>_.select&&_.select(),setCustomValidity:C=>_.setCustomValidity(C),reportValidity:()=>_.reportValidity()})},[r._fields,n]),S=Ct.useMemo(()=>({name:n,value:d,...ii(s)||u.disabled?{disabled:u.disabled||s}:{},onChange:x,onBlur:w,ref:j}),[n,s,u.disabled,x,w,j,d]);return Ct.useEffect(()=>{const _=r._options.shouldUnregister||a;r.register(n,{...f.current.rules,...ii(f.current.disabled)?{disabled:f.current.disabled}:{}});const E=(C,I)=>{const M=Be(r._fields,C);M&&M._f&&(M._f.mount=I)};if(E(n,!0),_){const C=Us(Be(r._options.defaultValues,n));Sn(r._defaultValues,n,C),cs(Be(r._formValues,n))&&Sn(r._formValues,n,C)}return!l&&r.register(n),()=>{(l?_&&!r._state.action:_)?r.unregister(n):E(n,!1)}},[n,r,l,a]),Ct.useEffect(()=>{r._setDisabledField({disabled:s,name:n})},[s,n,r]),Ct.useMemo(()=>({field:S,formState:u,fieldState:p}),[S,u,p])}const _te=t=>t.render(wte(t));var CS=(t,e,n,s,r)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[s]:r||!0}}:{},Zm=t=>Array.isArray(t)?t:[t],iR=()=>{let t=[];return{get observers(){return t},next:r=>{for(const a of t)a.next&&a.next(r)},subscribe:r=>(t.push(r),{unsubscribe:()=>{t=t.filter(a=>a!==r)}}),unsubscribe:()=>{t=[]}}},Jj=t=>Ar(t)||!B3(t);function Yl(t,e,n=new WeakSet){if(Jj(t)||Jj(e))return t===e;if(jd(t)&&jd(e))return t.getTime()===e.getTime();const s=Object.keys(t),r=Object.keys(e);if(s.length!==r.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const a of s){const l=t[a];if(!r.includes(a))return!1;if(a!=="ref"){const d=e[a];if(jd(l)&&jd(d)||ms(l)&&ms(d)||Array.isArray(l)&&Array.isArray(d)?!Yl(l,d,n):l!==d)return!1}}return!0}var Or=t=>ms(t)&&!Object.keys(t).length,TS=t=>t.type==="file",Xi=t=>typeof t=="function",v0=t=>{if(!_S)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},G3=t=>t.type==="select-multiple",AS=t=>t.type==="radio",jte=t=>AS(t)||cp(t),L_=t=>v0(t)&&t.isConnected;function Nte(t,e){const n=e.slice(0,-1).length;let s=0;for(;s<n;)t=cs(t)?s++:t[e[s++]];return t}function Ste(t){for(const e in t)if(t.hasOwnProperty(e)&&!cs(t[e]))return!1;return!0}function vs(t,e){const n=Array.isArray(e)?e:zv(e)?[e]:NS(e),s=n.length===1?t:Nte(t,n),r=n.length-1,a=n[r];return s&&delete s[a],r!==0&&(ms(s)&&Or(s)||Array.isArray(s)&&Ste(s))&&vs(t,n.slice(0,-1)),t}var Y3=t=>{for(const e in t)if(Xi(t[e]))return!0;return!1};function b0(t,e={}){const n=Array.isArray(t);if(ms(t)||n)for(const s in t)Array.isArray(t[s])||ms(t[s])&&!Y3(t[s])?(e[s]=Array.isArray(t[s])?[]:{},b0(t[s],e[s])):Ar(t[s])||(e[s]=!0);return e}function K3(t,e,n){const s=Array.isArray(t);if(ms(t)||s)for(const r in t)Array.isArray(t[r])||ms(t[r])&&!Y3(t[r])?cs(e)||Jj(n[r])?n[r]=Array.isArray(t[r])?b0(t[r],[]):{...b0(t[r])}:K3(t[r],Ar(e)?{}:e[r],n[r]):n[r]=!Yl(t[r],e[r]);return n}var bm=(t,e)=>K3(t,e,b0(e));const aR={value:!1,isValid:!1},oR={value:!0,isValid:!0};var X3=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!cs(t[0].attributes.value)?cs(t[0].value)||t[0].value===""?oR:{value:t[0].value,isValid:!0}:oR:aR}return aR},Q3=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:s})=>cs(t)?t:e?t===""?NaN:t&&+t:n&&Oa(t)?new Date(t):s?s(t):t;const lR={isValid:!1,value:null};var Z3=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,lR):lR;function cR(t){const e=t.ref;return TS(e)?e.files:AS(e)?Z3(t.refs).value:G3(e)?[...e.selectedOptions].map(({value:n})=>n):cp(e)?X3(t.refs).value:Q3(cs(e.value)?t.ref.value:e.value,t)}var Ete=(t,e,n,s)=>{const r={};for(const a of t){const l=Be(e,a);l&&Sn(r,a,l._f)}return{criteriaMode:n,names:[...t],fields:r,shouldUseNativeValidation:s}},w0=t=>t instanceof RegExp,wm=t=>cs(t)?t:w0(t)?t.source:ms(t)?w0(t.value)?t.value.source:t.value:t,dR=t=>({isOnSubmit:!t||t===Ki.onSubmit,isOnBlur:t===Ki.onBlur,isOnChange:t===Ki.onChange,isOnAll:t===Ki.all,isOnTouch:t===Ki.onTouched});const uR="AsyncFunction";var Cte=t=>!!t&&!!t.validate&&!!(Xi(t.validate)&&t.validate.constructor.name===uR||ms(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===uR)),Tte=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),hR=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(s=>t.startsWith(s)&&/^\.\w+/.test(t.slice(s.length))));const Jm=(t,e,n,s)=>{for(const r of n||Object.keys(t)){const a=Be(t,r);if(a){const{_f:l,...d}=a;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],r)&&!s)return!0;if(l.ref&&e(l.ref,l.name)&&!s)return!0;if(Jm(d,e))break}else if(ms(d)&&Jm(d,e))break}}};function fR(t,e,n){const s=Be(t,n);if(s||zv(n))return{error:s,name:n};const r=n.split(".");for(;r.length;){const a=r.join("."),l=Be(e,a),d=Be(t,a);if(l&&!Array.isArray(l)&&n!==a)return{name:n};if(d&&d.type)return{name:a,error:d};if(d&&d.root&&d.root.type)return{name:`${a}.root`,error:d.root};r.pop()}return{name:n}}var Ate=(t,e,n,s)=>{n(t);const{name:r,...a}=t;return Or(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(l=>e[l]===(!s||Ki.all))},kte=(t,e,n)=>!t||!e||t===e||Zm(t).some(s=>s&&(n?s===e:s.startsWith(e)||e.startsWith(s))),Rte=(t,e,n,s,r)=>r.isOnAll?!1:!n&&r.isOnTouch?!(e||t):(n?s.isOnBlur:r.isOnBlur)?!t:(n?s.isOnChange:r.isOnChange)?t:!0,Ite=(t,e)=>!jS(Be(t,e)).length&&vs(t,e),Dte=(t,e,n)=>{const s=Zm(Be(t,n));return Sn(s,"root",e[n]),Sn(t,n,s),t},Ay=t=>Oa(t);function mR(t,e,n="validate"){if(Ay(t)||Array.isArray(t)&&t.every(Ay)||ii(t)&&!t)return{type:n,message:Ay(t)?t:"",ref:e}}var Ku=t=>ms(t)&&!w0(t)?t:{value:t,message:""},gR=async(t,e,n,s,r,a)=>{const{ref:l,refs:d,required:u,maxLength:f,minLength:m,min:p,max:x,pattern:w,validate:j,name:S,valueAsNumber:_,mount:E}=t._f,C=Be(n,S);if(!E||e.has(S))return{};const I=d?d[0]:l,M=O=>{r&&I.reportValidity&&(I.setCustomValidity(ii(O)?"":O||""),I.reportValidity())},V={},z=AS(l),D=cp(l),A=z||D,T=(_||TS(l))&&cs(l.value)&&cs(C)||v0(l)&&l.value===""||C===""||Array.isArray(C)&&!C.length,R=CS.bind(null,S,s,V),P=(O,F,J,Z=Co.maxLength,q=Co.minLength)=>{const Y=O?F:J;V[S]={type:O?Z:q,message:Y,ref:l,...R(O?Z:q,Y)}};if(a?!Array.isArray(C)||!C.length:u&&(!A&&(T||Ar(C))||ii(C)&&!C||D&&!X3(d).isValid||z&&!Z3(d).isValid)){const{value:O,message:F}=Ay(u)?{value:!!u,message:u}:Ku(u);if(O&&(V[S]={type:Co.required,message:F,ref:I,...R(Co.required,F)},!s))return M(F),V}if(!T&&(!Ar(p)||!Ar(x))){let O,F;const J=Ku(x),Z=Ku(p);if(!Ar(C)&&!isNaN(C)){const q=l.valueAsNumber||C&&+C;Ar(J.value)||(O=q>J.value),Ar(Z.value)||(F=q<Z.value)}else{const q=l.valueAsDate||new Date(C),Y=B=>new Date(new Date().toDateString()+" "+B),W=l.type=="time",H=l.type=="week";Oa(J.value)&&C&&(O=W?Y(C)>Y(J.value):H?C>J.value:q>new Date(J.value)),Oa(Z.value)&&C&&(F=W?Y(C)<Y(Z.value):H?C<Z.value:q<new Date(Z.value))}if((O||F)&&(P(!!O,J.message,Z.message,Co.max,Co.min),!s))return M(V[S].message),V}if((f||m)&&!T&&(Oa(C)||a&&Array.isArray(C))){const O=Ku(f),F=Ku(m),J=!Ar(O.value)&&C.length>+O.value,Z=!Ar(F.value)&&C.length<+F.value;if((J||Z)&&(P(J,O.message,F.message),!s))return M(V[S].message),V}if(w&&!T&&Oa(C)){const{value:O,message:F}=Ku(w);if(w0(O)&&!C.match(O)&&(V[S]={type:Co.pattern,message:F,ref:l,...R(Co.pattern,F)},!s))return M(F),V}if(j){if(Xi(j)){const O=await j(C,n),F=mR(O,I);if(F&&(V[S]={...F,...R(Co.validate,F.message)},!s))return M(F.message),V}else if(ms(j)){let O={};for(const F in j){if(!Or(O)&&!s)break;const J=mR(await j[F](C,n),I,F);J&&(O={...J,...R(F,J.message)},M(J.message),s&&(V[S]=O))}if(!Or(O)&&(V[S]={ref:I,...O},!s))return V}}return M(!0),V};const Mte={mode:Ki.onSubmit,reValidateMode:Ki.onChange,shouldFocusError:!0};function Pte(t={}){let e={...Mte,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Xi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},r=ms(e.defaultValues)||ms(e.values)?Us(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Us(r),l={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,f=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...m};const x={array:iR(),state:iR()},w=e.criteriaMode===Ki.all,j=X=>re=>{clearTimeout(f),f=setTimeout(X,re)},S=async X=>{if(!e.disabled&&(m.isValid||p.isValid||X)){const re=e.resolver?Or((await D()).errors):await T(s,!0);re!==n.isValid&&x.state.next({isValid:re})}},_=(X,re)=>{!e.disabled&&(m.isValidating||m.validatingFields||p.isValidating||p.validatingFields)&&((X||Array.from(d.mount)).forEach(he=>{he&&(re?Sn(n.validatingFields,he,re):vs(n.validatingFields,he))}),x.state.next({validatingFields:n.validatingFields,isValidating:!Or(n.validatingFields)}))},E=(X,re=[],he,Ae,Re=!0,Te=!0)=>{if(Ae&&he&&!e.disabled){if(l.action=!0,Te&&Array.isArray(Be(s,X))){const Me=he(Be(s,X),Ae.argA,Ae.argB);Re&&Sn(s,X,Me)}if(Te&&Array.isArray(Be(n.errors,X))){const Me=he(Be(n.errors,X),Ae.argA,Ae.argB);Re&&Sn(n.errors,X,Me),Ite(n.errors,X)}if((m.touchedFields||p.touchedFields)&&Te&&Array.isArray(Be(n.touchedFields,X))){const Me=he(Be(n.touchedFields,X),Ae.argA,Ae.argB);Re&&Sn(n.touchedFields,X,Me)}(m.dirtyFields||p.dirtyFields)&&(n.dirtyFields=bm(r,a)),x.state.next({name:X,isDirty:P(X,re),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Sn(a,X,re)},C=(X,re)=>{Sn(n.errors,X,re),x.state.next({errors:n.errors})},I=X=>{n.errors=X,x.state.next({errors:n.errors,isValid:!1})},M=(X,re,he,Ae)=>{const Re=Be(s,X);if(Re){const Te=Be(a,X,cs(he)?Be(r,X):he);cs(Te)||Ae&&Ae.defaultChecked||re?Sn(a,X,re?Te:cR(Re._f)):J(X,Te),l.mount&&S()}},V=(X,re,he,Ae,Re)=>{let Te=!1,Me=!1;const Ke={name:X};if(!e.disabled){if(!he||Ae){(m.isDirty||p.isDirty)&&(Me=n.isDirty,n.isDirty=Ke.isDirty=P(),Te=Me!==Ke.isDirty);const xt=Yl(Be(r,X),re);Me=!!Be(n.dirtyFields,X),xt?vs(n.dirtyFields,X):Sn(n.dirtyFields,X,!0),Ke.dirtyFields=n.dirtyFields,Te=Te||(m.dirtyFields||p.dirtyFields)&&Me!==!xt}if(he){const xt=Be(n.touchedFields,X);xt||(Sn(n.touchedFields,X,he),Ke.touchedFields=n.touchedFields,Te=Te||(m.touchedFields||p.touchedFields)&&xt!==he)}Te&&Re&&x.state.next(Ke)}return Te?Ke:{}},z=(X,re,he,Ae)=>{const Re=Be(n.errors,X),Te=(m.isValid||p.isValid)&&ii(re)&&n.isValid!==re;if(e.delayError&&he?(u=j(()=>C(X,he)),u(e.delayError)):(clearTimeout(f),u=null,he?Sn(n.errors,X,he):vs(n.errors,X)),(he?!Yl(Re,he):Re)||!Or(Ae)||Te){const Me={...Ae,...Te&&ii(re)?{isValid:re}:{},errors:n.errors,name:X};n={...n,...Me},x.state.next(Me)}},D=async X=>{_(X,!0);const re=await e.resolver(a,e.context,Ete(X||d.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return _(X),re},A=async X=>{const{errors:re}=await D(X);if(X)for(const he of X){const Ae=Be(re,he);Ae?Sn(n.errors,he,Ae):vs(n.errors,he)}else n.errors=re;return re},T=async(X,re,he={valid:!0})=>{for(const Ae in X){const Re=X[Ae];if(Re){const{_f:Te,...Me}=Re;if(Te){const Ke=d.array.has(Te.name),xt=Re._f&&Cte(Re._f);xt&&m.validatingFields&&_([Ae],!0);const Jt=await gR(Re,d.disabled,a,w,e.shouldUseNativeValidation&&!re,Ke);if(xt&&m.validatingFields&&_([Ae]),Jt[Te.name]&&(he.valid=!1,re))break;!re&&(Be(Jt,Te.name)?Ke?Dte(n.errors,Jt,Te.name):Sn(n.errors,Te.name,Jt[Te.name]):vs(n.errors,Te.name))}!Or(Me)&&await T(Me,re,he)}}return he.valid},R=()=>{for(const X of d.unMount){const re=Be(s,X);re&&(re._f.refs?re._f.refs.every(he=>!L_(he)):!L_(re._f.ref))&&ve(X)}d.unMount=new Set},P=(X,re)=>!e.disabled&&(X&&re&&Sn(a,X,re),!Yl(B(),r)),O=(X,re,he)=>W3(X,d,{...l.mount?a:cs(re)?r:Oa(X)?{[X]:re}:re},he,re),F=X=>jS(Be(l.mount?a:r,X,e.shouldUnregister?Be(r,X,[]):[])),J=(X,re,he={})=>{const Ae=Be(s,X);let Re=re;if(Ae){const Te=Ae._f;Te&&(!Te.disabled&&Sn(a,X,Q3(re,Te)),Re=v0(Te.ref)&&Ar(re)?"":re,G3(Te.ref)?[...Te.ref.options].forEach(Me=>Me.selected=Re.includes(Me.value)):Te.refs?cp(Te.ref)?Te.refs.forEach(Me=>{(!Me.defaultChecked||!Me.disabled)&&(Array.isArray(Re)?Me.checked=!!Re.find(Ke=>Ke===Me.value):Me.checked=Re===Me.value||!!Re)}):Te.refs.forEach(Me=>Me.checked=Me.value===Re):TS(Te.ref)?Te.ref.value="":(Te.ref.value=Re,Te.ref.type||x.state.next({name:X,values:Us(a)})))}(he.shouldDirty||he.shouldTouch)&&V(X,Re,he.shouldTouch,he.shouldDirty,!0),he.shouldValidate&&H(X)},Z=(X,re,he)=>{for(const Ae in re){if(!re.hasOwnProperty(Ae))return;const Re=re[Ae],Te=X+"."+Ae,Me=Be(s,Te);(d.array.has(X)||ms(Re)||Me&&!Me._f)&&!jd(Re)?Z(Te,Re,he):J(Te,Re,he)}},q=(X,re,he={})=>{const Ae=Be(s,X),Re=d.array.has(X),Te=Us(re);Sn(a,X,Te),Re?(x.array.next({name:X,values:Us(a)}),(m.isDirty||m.dirtyFields||p.isDirty||p.dirtyFields)&&he.shouldDirty&&x.state.next({name:X,dirtyFields:bm(r,a),isDirty:P(X,Te)})):Ae&&!Ae._f&&!Ar(Te)?Z(X,Te,he):J(X,Te,he),hR(X,d)&&x.state.next({...n}),x.state.next({name:l.mount?X:void 0,values:Us(a)})},Y=async X=>{l.mount=!0;const re=X.target;let he=re.name,Ae=!0;const Re=Be(s,he),Te=xt=>{Ae=Number.isNaN(xt)||jd(xt)&&isNaN(xt.getTime())||Yl(xt,Be(a,he,xt))},Me=dR(e.mode),Ke=dR(e.reValidateMode);if(Re){let xt,Jt;const dr=re.type?cR(Re._f):z3(X),Rs=X.type===y0.BLUR||X.type===y0.FOCUS_OUT,ur=!Tte(Re._f)&&!e.resolver&&!Be(n.errors,he)&&!Re._f.deps||Rte(Rs,Be(n.touchedFields,he),n.isSubmitted,Ke,Me),zs=hR(he,d,Rs);Sn(a,he,dr),Rs?(Re._f.onBlur&&Re._f.onBlur(X),u&&u(0)):Re._f.onChange&&Re._f.onChange(X);const $s=V(he,dr,Rs),pe=!Or($s)||zs;if(!Rs&&x.state.next({name:he,type:X.type,values:Us(a)}),ur)return(m.isValid||p.isValid)&&(e.mode==="onBlur"?Rs&&S():Rs||S()),pe&&x.state.next({name:he,...zs?{}:$s});if(!Rs&&zs&&x.state.next({...n}),e.resolver){const{errors:Pt}=await D([he]);if(Te(dr),Ae){const wn=fR(n.errors,s,he),Wt=fR(Pt,s,wn.name||he);xt=Wt.error,he=Wt.name,Jt=Or(Pt)}}else _([he],!0),xt=(await gR(Re,d.disabled,a,w,e.shouldUseNativeValidation))[he],_([he]),Te(dr),Ae&&(xt?Jt=!1:(m.isValid||p.isValid)&&(Jt=await T(s,!0)));Ae&&(Re._f.deps&&H(Re._f.deps),z(he,Jt,xt,$s))}},W=(X,re)=>{if(Be(n.errors,re)&&X.focus)return X.focus(),1},H=async(X,re={})=>{let he,Ae;const Re=Zm(X);if(e.resolver){const Te=await A(cs(X)?X:Re);he=Or(Te),Ae=X?!Re.some(Me=>Be(Te,Me)):he}else X?(Ae=(await Promise.all(Re.map(async Te=>{const Me=Be(s,Te);return await T(Me&&Me._f?{[Te]:Me}:Me)}))).every(Boolean),!(!Ae&&!n.isValid)&&S()):Ae=he=await T(s);return x.state.next({...!Oa(X)||(m.isValid||p.isValid)&&he!==n.isValid?{}:{name:X},...e.resolver||!X?{isValid:he}:{},errors:n.errors}),re.shouldFocus&&!Ae&&Jm(s,W,X?Re:d.mount),Ae},B=X=>{const re={...l.mount?a:r};return cs(X)?re:Oa(X)?Be(re,X):X.map(he=>Be(re,he))},K=(X,re)=>({invalid:!!Be((re||n).errors,X),isDirty:!!Be((re||n).dirtyFields,X),error:Be((re||n).errors,X),isValidating:!!Be(n.validatingFields,X),isTouched:!!Be((re||n).touchedFields,X)}),ne=X=>{X&&Zm(X).forEach(re=>vs(n.errors,re)),x.state.next({errors:X?n.errors:{}})},te=(X,re,he)=>{const Ae=(Be(s,X,{_f:{}})._f||{}).ref,Re=Be(n.errors,X)||{},{ref:Te,message:Me,type:Ke,...xt}=Re;Sn(n.errors,X,{...xt,...re,ref:Ae}),x.state.next({name:X,errors:n.errors,isValid:!1}),he&&he.shouldFocus&&Ae&&Ae.focus&&Ae.focus()},fe=(X,re)=>Xi(X)?x.state.subscribe({next:he=>X(O(void 0,re),he)}):O(X,re,!0),ke=X=>x.state.subscribe({next:re=>{kte(X.name,re.name,X.exact)&&Ate(re,X.formState||m,ct,X.reRenderRoot)&&X.callback({values:{...a},...n,...re})}}).unsubscribe,Ee=X=>(l.mount=!0,p={...p,...X.formState},ke({...X,formState:p})),ve=(X,re={})=>{for(const he of X?Zm(X):d.mount)d.mount.delete(he),d.array.delete(he),re.keepValue||(vs(s,he),vs(a,he)),!re.keepError&&vs(n.errors,he),!re.keepDirty&&vs(n.dirtyFields,he),!re.keepTouched&&vs(n.touchedFields,he),!re.keepIsValidating&&vs(n.validatingFields,he),!e.shouldUnregister&&!re.keepDefaultValue&&vs(r,he);x.state.next({values:Us(a)}),x.state.next({...n,...re.keepDirty?{isDirty:P()}:{}}),!re.keepIsValid&&S()},le=({disabled:X,name:re})=>{(ii(X)&&l.mount||X||d.disabled.has(re))&&(X?d.disabled.add(re):d.disabled.delete(re))},Ne=(X,re={})=>{let he=Be(s,X);const Ae=ii(re.disabled)||ii(e.disabled);return Sn(s,X,{...he||{},_f:{...he&&he._f?he._f:{ref:{name:X}},name:X,mount:!0,...re}}),d.mount.add(X),he?le({disabled:ii(re.disabled)?re.disabled:e.disabled,name:X}):M(X,!0,re.value),{...Ae?{disabled:re.disabled||e.disabled}:{},...e.progressive?{required:!!re.required,min:wm(re.min),max:wm(re.max),minLength:wm(re.minLength),maxLength:wm(re.maxLength),pattern:wm(re.pattern)}:{},name:X,onChange:Y,onBlur:Y,ref:Re=>{if(Re){Ne(X,re),he=Be(s,X);const Te=cs(Re.value)&&Re.querySelectorAll&&Re.querySelectorAll("input,select,textarea")[0]||Re,Me=jte(Te),Ke=he._f.refs||[];if(Me?Ke.find(xt=>xt===Te):Te===he._f.ref)return;Sn(s,X,{_f:{...he._f,...Me?{refs:[...Ke.filter(L_),Te,...Array.isArray(Be(r,X))?[{}]:[]],ref:{type:Te.type,name:X}}:{ref:Te}}}),M(X,!1,void 0,Te)}else he=Be(s,X,{}),he._f&&(he._f.mount=!1),(e.shouldUnregister||re.shouldUnregister)&&!($3(d.array,X)&&l.action)&&d.unMount.add(X)}}},Pe=()=>e.shouldFocusError&&Jm(s,W,d.mount),Ge=X=>{ii(X)&&(x.state.next({disabled:X}),Jm(s,(re,he)=>{const Ae=Be(s,he);Ae&&(re.disabled=Ae._f.disabled||X,Array.isArray(Ae._f.refs)&&Ae._f.refs.forEach(Re=>{Re.disabled=Ae._f.disabled||X}))},0,!1))},Ye=(X,re)=>async he=>{let Ae;he&&(he.preventDefault&&he.preventDefault(),he.persist&&he.persist());let Re=Us(a);if(x.state.next({isSubmitting:!0}),e.resolver){const{errors:Te,values:Me}=await D();n.errors=Te,Re=Us(Me)}else await T(s);if(d.disabled.size)for(const Te of d.disabled)vs(Re,Te);if(vs(n.errors,"root"),Or(n.errors)){x.state.next({errors:{}});try{await X(Re,he)}catch(Te){Ae=Te}}else re&&await re({...n.errors},he),Pe(),setTimeout(Pe);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Or(n.errors)&&!Ae,submitCount:n.submitCount+1,errors:n.errors}),Ae)throw Ae},ot=(X,re={})=>{Be(s,X)&&(cs(re.defaultValue)?q(X,Us(Be(r,X))):(q(X,re.defaultValue),Sn(r,X,Us(re.defaultValue))),re.keepTouched||vs(n.touchedFields,X),re.keepDirty||(vs(n.dirtyFields,X),n.isDirty=re.defaultValue?P(X,Us(Be(r,X))):P()),re.keepError||(vs(n.errors,X),m.isValid&&S()),x.state.next({...n}))},Dt=(X,re={})=>{const he=X?Us(X):r,Ae=Us(he),Re=Or(X),Te=Re?r:Ae;if(re.keepDefaultValues||(r=he),!re.keepValues){if(re.keepDirtyValues){const Me=new Set([...d.mount,...Object.keys(bm(r,a))]);for(const Ke of Array.from(Me))Be(n.dirtyFields,Ke)?Sn(Te,Ke,Be(a,Ke)):q(Ke,Be(Te,Ke))}else{if(_S&&cs(X))for(const Me of d.mount){const Ke=Be(s,Me);if(Ke&&Ke._f){const xt=Array.isArray(Ke._f.refs)?Ke._f.refs[0]:Ke._f.ref;if(v0(xt)){const Jt=xt.closest("form");if(Jt){Jt.reset();break}}}}if(re.keepFieldsRef)for(const Me of d.mount)q(Me,Be(Te,Me));else s={}}a=e.shouldUnregister?re.keepDefaultValues?Us(r):{}:Us(Te),x.array.next({values:{...Te}}),x.state.next({values:{...Te}})}d={mount:re.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!m.isValid||!!re.keepIsValid||!!re.keepDirtyValues,l.watch=!!e.shouldUnregister,x.state.next({submitCount:re.keepSubmitCount?n.submitCount:0,isDirty:Re?!1:re.keepDirty?n.isDirty:!!(re.keepDefaultValues&&!Yl(X,r)),isSubmitted:re.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Re?{}:re.keepDirtyValues?re.keepDefaultValues&&a?bm(r,a):n.dirtyFields:re.keepDefaultValues&&X?bm(r,X):re.keepDirty?n.dirtyFields:{},touchedFields:re.keepTouched?n.touchedFields:{},errors:re.keepErrors?n.errors:{},isSubmitSuccessful:re.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},je=(X,re)=>Dt(Xi(X)?X(a):X,re),qe=(X,re={})=>{const he=Be(s,X),Ae=he&&he._f;if(Ae){const Re=Ae.refs?Ae.refs[0]:Ae.ref;Re.focus&&(Re.focus(),re.shouldSelect&&Xi(Re.select)&&Re.select())}},ct=X=>{n={...n,...X}},pt={control:{register:Ne,unregister:ve,getFieldState:K,handleSubmit:Ye,setError:te,_subscribe:ke,_runSchema:D,_focusError:Pe,_getWatch:O,_getDirty:P,_setValid:S,_setFieldArray:E,_setDisabledField:le,_setErrors:I,_getFieldArray:F,_reset:Dt,_resetDefaultValues:()=>Xi(e.defaultValues)&&e.defaultValues().then(X=>{je(X,e.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:Ge,_subjects:x,_proxyFormState:m,get _fields(){return s},get _formValues(){return a},get _state(){return l},set _state(X){l=X},get _defaultValues(){return r},get _names(){return d},set _names(X){d=X},get _formState(){return n},get _options(){return e},set _options(X){e={...e,...X}}},subscribe:Ee,trigger:H,register:Ne,handleSubmit:Ye,watch:fe,setValue:q,getValues:B,reset:je,resetField:ot,clearErrors:ne,unregister:ve,setError:te,setFocus:qe,getFieldState:K};return{...pt,formControl:pt}}function Ote(t={}){const e=Ct.useRef(void 0),n=Ct.useRef(void 0),[s,r]=Ct.useState({isDirty:!1,isValidating:!1,isLoading:Xi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Xi(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:s},t.defaultValues&&!Xi(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...d}=Pte(t);e.current={...d,formState:s}}const a=e.current.control;return a._options=t,ES(()=>{const l=a._subscribe({formState:a._proxyFormState,callback:()=>r({...a._formState}),reRenderRoot:!0});return r(d=>({...d,isReady:!0})),a._formState.isReady=!0,l},[a]),Ct.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Ct.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),Ct.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),Ct.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),Ct.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==s.isDirty&&a._subjects.state.next({isDirty:l})}},[a,s.isDirty]),Ct.useEffect(()=>{t.values&&!Yl(t.values,n.current)?(a._reset(t.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=t.values,r(l=>({...l}))):a._resetDefaultValues()},[a,t.values]),Ct.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=q3(s,a),e.current}const pR=(t,e,n)=>{if(t&&"reportValidity"in t){const s=Be(n,e);t.setCustomValidity(s&&s.message||""),t.reportValidity()}},e1=(t,e)=>{for(const n in e.fields){const s=e.fields[n];s&&s.ref&&"reportValidity"in s.ref?pR(s.ref,n,t):s&&s.refs&&s.refs.forEach(r=>pR(r,n,t))}},xR=(t,e)=>{e.shouldUseNativeValidation&&e1(t,e);const n={};for(const s in t){const r=Be(e.fields,s),a=Object.assign(t[s]||{},{ref:r&&r.ref});if(Lte(e.names||Object.keys(t),s)){const l=Object.assign({},Be(n,s));Sn(l,"root",a),Sn(n,s,l)}else Sn(n,s,a)}return n},Lte=(t,e)=>{const n=yR(e);return t.some(s=>yR(s).match(`^${n}\\.\\d+`))};function yR(t){return t.replace(/\]|\[/g,"")}function J3(t,e,n){function s(d,u){var f;Object.defineProperty(d,"_zod",{value:d._zod??{},enumerable:!1}),(f=d._zod).traits??(f.traits=new Set),d._zod.traits.add(t),e(d,u);for(const m in l.prototype)m in d||Object.defineProperty(d,m,{value:l.prototype[m].bind(d)});d._zod.constr=l,d._zod.def=u}const r=(n==null?void 0:n.Parent)??Object;class a extends r{}Object.defineProperty(a,"name",{value:t});function l(d){var u;const f=n!=null&&n.Parent?new a:this;s(f,d),(u=f._zod).deferred??(u.deferred=[]);for(const m of f._zod.deferred)m();return f}return Object.defineProperty(l,"init",{value:s}),Object.defineProperty(l,Symbol.hasInstance,{value:d=>{var u,f;return n!=null&&n.Parent&&d instanceof n.Parent?!0:(f=(u=d==null?void 0:d._zod)==null?void 0:u.traits)==null?void 0:f.has(t)}}),Object.defineProperty(l,"name",{value:t}),l}class Vte extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Ute={};function eL(t){return Ute}function Fte(t,e){return typeof e=="bigint"?e.toString():e}const tL=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function Yx(t){return typeof t=="string"?t:t==null?void 0:t.message}function nL(t,e,n){var r,a,l,d,u,f;const s={...t,path:t.path??[]};if(!t.message){const m=Yx((l=(a=(r=t.inst)==null?void 0:r._zod.def)==null?void 0:a.error)==null?void 0:l.call(a,t))??Yx((d=e==null?void 0:e.error)==null?void 0:d.call(e,t))??Yx((u=n.customError)==null?void 0:u.call(n,t))??Yx((f=n.localeError)==null?void 0:f.call(n,t))??"Invalid input";s.message=m}return delete s.inst,delete s.continue,e!=null&&e.reportInput||delete s.input,s}const sL=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,Fte,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Bte=J3("$ZodError",sL),rL=J3("$ZodError",sL,{Parent:Error}),zte=t=>(e,n,s,r)=>{const a=s?Object.assign(s,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new Vte;if(l.issues.length){const d=new((r==null?void 0:r.Err)??t)(l.issues.map(u=>nL(u,a,eL())));throw tL(d,r==null?void 0:r.callee),d}return l.value},$te=zte(rL),qte=t=>async(e,n,s,r)=>{const a=s?Object.assign(s,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const d=new((r==null?void 0:r.Err)??t)(l.issues.map(u=>nL(u,a,eL())));throw tL(d,r==null?void 0:r.callee),d}return l.value},Hte=qte(rL);function vR(t,e){try{var n=t()}catch(s){return e(s)}return n&&n.then?n.then(void 0,e):n}function Wte(t,e){for(var n={};t.length;){var s=t[0],r=s.code,a=s.message,l=s.path.join(".");if(!n[l])if("unionErrors"in s){var d=s.unionErrors[0].errors[0];n[l]={message:d.message,type:d.code}}else n[l]={message:a,type:r};if("unionErrors"in s&&s.unionErrors.forEach(function(m){return m.errors.forEach(function(p){return t.push(p)})}),e){var u=n[l].types,f=u&&u[s.code];n[l]=CS(l,e,n,r,f?[].concat(f,s.message):s.message)}t.shift()}return n}function Gte(t,e){for(var n={};t.length;){var s=t[0],r=s.code,a=s.message,l=s.path.join(".");if(!n[l])if(s.code==="invalid_union"){var d=s.errors[0][0];n[l]={message:d.message,type:d.code}}else n[l]={message:a,type:r};if(s.code==="invalid_union"&&s.errors.forEach(function(m){return m.forEach(function(p){return t.push(p)})}),e){var u=n[l].types,f=u&&u[s.code];n[l]=CS(l,e,n,r,f?[].concat(f,s.message):s.message)}t.shift()}return n}function Yte(t,e,n){if(n===void 0&&(n={}),function(s){return"_def"in s&&typeof s._def=="object"&&"typeName"in s._def}(t))return function(s,r,a){try{return Promise.resolve(vR(function(){return Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](s,e)).then(function(l){return a.shouldUseNativeValidation&&e1({},a),{errors:{},values:n.raw?Object.assign({},s):l}})},function(l){if(function(d){return Array.isArray(d==null?void 0:d.issues)}(l))return{values:{},errors:xR(Wte(l.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw l}))}catch(l){return Promise.reject(l)}};if(function(s){return"_zod"in s&&typeof s._zod=="object"}(t))return function(s,r,a){try{return Promise.resolve(vR(function(){return Promise.resolve((n.mode==="sync"?$te:Hte)(t,s,e)).then(function(l){return a.shouldUseNativeValidation&&e1({},a),{errors:{},values:n.raw?Object.assign({},s):l}})},function(l){if(function(d){return d instanceof Bte}(l))return{values:{},errors:xR(Gte(l.issues,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw l}))}catch(l){return Promise.reject(l)}};throw new Error("Invalid input: not a Zod schema")}var hn;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const a={};for(const l of r)a[l]=l;return a},t.getValidEnumValues=r=>{const a=t.objectKeys(r).filter(d=>typeof r[r[d]]!="number"),l={};for(const d of a)l[d]=r[d];return t.objectValues(l)},t.objectValues=r=>t.objectKeys(r).map(function(a){return r[a]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const a=[];for(const l in r)Object.prototype.hasOwnProperty.call(r,l)&&a.push(l);return a},t.find=(r,a)=>{for(const l of r)if(a(l))return l},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,a=" | "){return r.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}t.joinValues=s,t.jsonStringifyReplacer=(r,a)=>typeof a=="bigint"?a.toString():a})(hn||(hn={}));var bR;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(bR||(bR={}));const lt=hn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Bl=t=>{switch(typeof t){case"undefined":return lt.undefined;case"string":return lt.string;case"number":return Number.isNaN(t)?lt.nan:lt.number;case"boolean":return lt.boolean;case"function":return lt.function;case"bigint":return lt.bigint;case"symbol":return lt.symbol;case"object":return Array.isArray(t)?lt.array:t===null?lt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?lt.promise:typeof Map<"u"&&t instanceof Map?lt.map:typeof Set<"u"&&t instanceof Set?lt.set:typeof Date<"u"&&t instanceof Date?lt.date:lt.object;default:return lt.unknown}},Ie=hn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class al extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},s={_errors:[]},r=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(r);else if(l.code==="invalid_return_type")r(l.returnTypeError);else if(l.code==="invalid_arguments")r(l.argumentsError);else if(l.path.length===0)s._errors.push(n(l));else{let d=s,u=0;for(;u<l.path.length;){const f=l.path[u];u===l.path.length-1?(d[f]=d[f]||{_errors:[]},d[f]._errors.push(n(l))):d[f]=d[f]||{_errors:[]},d=d[f],u++}}};return r(this),s}static assert(e){if(!(e instanceof al))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,hn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},s=[];for(const r of this.issues)if(r.path.length>0){const a=r.path[0];n[a]=n[a]||[],n[a].push(e(r))}else s.push(e(r));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}al.create=t=>new al(t);const t1=(t,e)=>{let n;switch(t.code){case Ie.invalid_type:t.received===lt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ie.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,hn.jsonStringifyReplacer)}`;break;case Ie.unrecognized_keys:n=`Unrecognized key(s) in object: ${hn.joinValues(t.keys,", ")}`;break;case Ie.invalid_union:n="Invalid input";break;case Ie.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${hn.joinValues(t.options)}`;break;case Ie.invalid_enum_value:n=`Invalid enum value. Expected ${hn.joinValues(t.options)}, received '${t.received}'`;break;case Ie.invalid_arguments:n="Invalid function arguments";break;case Ie.invalid_return_type:n="Invalid function return type";break;case Ie.invalid_date:n="Invalid date";break;case Ie.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:hn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ie.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ie.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ie.custom:n="Invalid input";break;case Ie.invalid_intersection_types:n="Intersection results could not be merged";break;case Ie.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ie.not_finite:n="Number must be finite";break;default:n=e.defaultError,hn.assertNever(t)}return{message:n}};let Kte=t1;function Xte(){return Kte}const Qte=t=>{const{data:e,path:n,errorMaps:s,issueData:r}=t,a=[...n,...r.path||[]],l={...r,path:a};if(r.message!==void 0)return{...r,path:a,message:r.message};let d="";const u=s.filter(f=>!!f).slice().reverse();for(const f of u)d=f(l,{data:e,defaultError:d}).message;return{...r,path:a,message:d}};function Xe(t,e){const n=Xte(),s=Qte({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===t1?void 0:t1].filter(r=>!!r)});t.common.issues.push(s)}class pi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const s=[];for(const r of n){if(r.status==="aborted")return Rt;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,n){const s=[];for(const r of n){const a=await r.key,l=await r.value;s.push({key:a,value:l})}return pi.mergeObjectSync(e,s)}static mergeObjectSync(e,n){const s={};for(const r of n){const{key:a,value:l}=r;if(a.status==="aborted"||l.status==="aborted")return Rt;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||r.alwaysSet)&&(s[a.value]=l.value)}return{status:e.value,value:s}}}const Rt=Object.freeze({status:"aborted"}),Om=t=>({status:"dirty",value:t}),Bi=t=>({status:"valid",value:t}),wR=t=>t.status==="aborted",_R=t=>t.status==="dirty",Fh=t=>t.status==="valid",_0=t=>typeof Promise<"u"&&t instanceof Promise;var ut;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ut||(ut={}));class wc{constructor(e,n,s,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const jR=(t,e)=>{if(Fh(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new al(t.common.issues);return this._error=n,this._error}}};function Ht(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:s,description:r}=t;if(e&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(l,d)=>{const{message:u}=t;return l.code==="invalid_enum_value"?{message:u??d.defaultError}:typeof d.data>"u"?{message:u??s??d.defaultError}:l.code!=="invalid_type"?{message:d.defaultError}:{message:u??n??d.defaultError}},description:r}}class ln{get description(){return this._def.description}_getType(e){return Bl(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Bl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pi,ctx:{common:e.parent.common,data:e.data,parsedType:Bl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(_0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const s=this.safeParse(e,n);if(s.success)return s.data;throw s.error}safeParse(e,n){const s={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bl(e)},r=this._parseSync({data:e,path:s.path,parent:s});return jR(s,r)}"~validate"(e){var s,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bl(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return Fh(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(r=(s=a==null?void 0:a.message)==null?void 0:s.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>Fh(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const s=await this.safeParseAsync(e,n);if(s.success)return s.data;throw s.error}async safeParseAsync(e,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bl(e)},r=this._parse({data:e,path:s.path,parent:s}),a=await(_0(r)?r:Promise.resolve(r));return jR(s,a)}refine(e,n){const s=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,a)=>{const l=e(r),d=()=>a.addIssue({code:Ie.custom,...s(r)});return typeof Promise<"u"&&l instanceof Promise?l.then(u=>u?!0:(d(),!1)):l?!0:(d(),!1)})}refinement(e,n){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof n=="function"?n(s,r):n),!1))}_refinement(e){return new zh({schema:this,typeName:It.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return oc.create(this,this._def)}nullable(){return $h.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ga.create(this)}promise(){return E0.create(this,this._def)}or(e){return N0.create([this,e],this._def)}and(e){return S0.create(this,e,this._def)}transform(e){return new zh({...Ht(this._def),schema:this,typeName:It.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new r1({...Ht(this._def),innerType:this,defaultValue:n,typeName:It.ZodDefault})}brand(){return new bne({typeName:It.ZodBranded,type:this,...Ht(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new i1({...Ht(this._def),innerType:this,catchValue:n,typeName:It.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return kS.create(this,e)}readonly(){return a1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Zte=/^c[^\s-]{8,}$/i,Jte=/^[0-9a-z]+$/,ene=/^[0-9A-HJKMNP-TV-Z]{26}$/i,tne=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nne=/^[a-z0-9_-]{21}$/i,sne=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,rne=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ine=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ane="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let V_;const one=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lne=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,cne=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,dne=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,une=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,hne=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,iL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fne=new RegExp(`^${iL}$`);function aL(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function mne(t){return new RegExp(`^${aL(t)}$`)}function gne(t){let e=`${iL}T${aL(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function pne(t,e){return!!((e==="v4"||!e)&&one.test(t)||(e==="v6"||!e)&&cne.test(t))}function xne(t,e){if(!sne.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function yne(t,e){return!!((e==="v4"||!e)&&lne.test(t)||(e==="v6"||!e)&&dne.test(t))}class Zl extends ln{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==lt.string){const a=this._getOrReturnCtx(e);return Xe(a,{code:Ie.invalid_type,expected:lt.string,received:a.parsedType}),Rt}const s=new pi;let r;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),Xe(r,{code:Ie.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="max")e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),Xe(r,{code:Ie.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="length"){const l=e.data.length>a.value,d=e.data.length<a.value;(l||d)&&(r=this._getOrReturnCtx(e,r),l?Xe(r,{code:Ie.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):d&&Xe(r,{code:Ie.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),s.dirty())}else if(a.kind==="email")ine.test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"email",code:Ie.invalid_string,message:a.message}),s.dirty());else if(a.kind==="emoji")V_||(V_=new RegExp(ane,"u")),V_.test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"emoji",code:Ie.invalid_string,message:a.message}),s.dirty());else if(a.kind==="uuid")tne.test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"uuid",code:Ie.invalid_string,message:a.message}),s.dirty());else if(a.kind==="nanoid")nne.test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"nanoid",code:Ie.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid")Zte.test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"cuid",code:Ie.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid2")Jte.test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"cuid2",code:Ie.invalid_string,message:a.message}),s.dirty());else if(a.kind==="ulid")ene.test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"ulid",code:Ie.invalid_string,message:a.message}),s.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),Xe(r,{validation:"url",code:Ie.invalid_string,message:a.message}),s.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"regex",code:Ie.invalid_string,message:a.message}),s.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),Xe(r,{code:Ie.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),s.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),Xe(r,{code:Ie.invalid_string,validation:{startsWith:a.value},message:a.message}),s.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),Xe(r,{code:Ie.invalid_string,validation:{endsWith:a.value},message:a.message}),s.dirty()):a.kind==="datetime"?gne(a).test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{code:Ie.invalid_string,validation:"datetime",message:a.message}),s.dirty()):a.kind==="date"?fne.test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{code:Ie.invalid_string,validation:"date",message:a.message}),s.dirty()):a.kind==="time"?mne(a).test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{code:Ie.invalid_string,validation:"time",message:a.message}),s.dirty()):a.kind==="duration"?rne.test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"duration",code:Ie.invalid_string,message:a.message}),s.dirty()):a.kind==="ip"?pne(e.data,a.version)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"ip",code:Ie.invalid_string,message:a.message}),s.dirty()):a.kind==="jwt"?xne(e.data,a.alg)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"jwt",code:Ie.invalid_string,message:a.message}),s.dirty()):a.kind==="cidr"?yne(e.data,a.version)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"cidr",code:Ie.invalid_string,message:a.message}),s.dirty()):a.kind==="base64"?une.test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"base64",code:Ie.invalid_string,message:a.message}),s.dirty()):a.kind==="base64url"?hne.test(e.data)||(r=this._getOrReturnCtx(e,r),Xe(r,{validation:"base64url",code:Ie.invalid_string,message:a.message}),s.dirty()):hn.assertNever(a);return{status:s.value,value:e.data}}_regex(e,n,s){return this.refinement(r=>e.test(r),{validation:n,code:Ie.invalid_string,...ut.errToObj(s)})}_addCheck(e){return new Zl({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ut.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ut.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ut.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ut.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ut.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ut.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ut.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ut.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ut.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ut.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ut.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ut.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ut.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ut.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ut.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ut.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ut.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ut.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ut.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ut.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ut.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ut.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ut.errToObj(n)})}nonempty(e){return this.min(1,ut.errToObj(e))}trim(){return new Zl({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Zl({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Zl({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Zl.create=t=>new Zl({checks:[],typeName:It.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ht(t)});function vne(t,e){const n=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=n>s?n:s,a=Number.parseInt(t.toFixed(r).replace(".","")),l=Number.parseInt(e.toFixed(r).replace(".",""));return a%l/10**r}class _g extends ln{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==lt.number){const a=this._getOrReturnCtx(e);return Xe(a,{code:Ie.invalid_type,expected:lt.number,received:a.parsedType}),Rt}let s;const r=new pi;for(const a of this._def.checks)a.kind==="int"?hn.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{code:Ie.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),Xe(s,{code:Ie.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),Xe(s,{code:Ie.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="multipleOf"?vne(e.data,a.value)!==0&&(s=this._getOrReturnCtx(e,s),Xe(s,{code:Ie.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{code:Ie.not_finite,message:a.message}),r.dirty()):hn.assertNever(a);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ut.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ut.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ut.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ut.toString(n))}setLimit(e,n,s,r){return new _g({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:ut.toString(r)}]})}_addCheck(e){return new _g({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ut.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ut.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ut.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ut.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ut.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ut.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ut.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ut.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ut.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&hn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(n)&&Number.isFinite(e)}}_g.create=t=>new _g({checks:[],typeName:It.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ht(t)});class jg extends ln{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==lt.bigint)return this._getInvalidInput(e);let s;const r=new pi;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),Xe(s,{code:Ie.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),Xe(s,{code:Ie.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),Xe(s,{code:Ie.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):hn.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Xe(n,{code:Ie.invalid_type,expected:lt.bigint,received:n.parsedType}),Rt}gte(e,n){return this.setLimit("min",e,!0,ut.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ut.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ut.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ut.toString(n))}setLimit(e,n,s,r){return new jg({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:ut.toString(r)}]})}_addCheck(e){return new jg({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ut.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ut.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ut.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ut.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ut.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}jg.create=t=>new jg({checks:[],typeName:It.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ht(t)});class n1 extends ln{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==lt.boolean){const s=this._getOrReturnCtx(e);return Xe(s,{code:Ie.invalid_type,expected:lt.boolean,received:s.parsedType}),Rt}return Bi(e.data)}}n1.create=t=>new n1({typeName:It.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ht(t)});class j0 extends ln{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==lt.date){const a=this._getOrReturnCtx(e);return Xe(a,{code:Ie.invalid_type,expected:lt.date,received:a.parsedType}),Rt}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Xe(a,{code:Ie.invalid_date}),Rt}const s=new pi;let r;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(r=this._getOrReturnCtx(e,r),Xe(r,{code:Ie.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),s.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(r=this._getOrReturnCtx(e,r),Xe(r,{code:Ie.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),s.dirty()):hn.assertNever(a);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new j0({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ut.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ut.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}j0.create=t=>new j0({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:It.ZodDate,...Ht(t)});class NR extends ln{_parse(e){if(this._getType(e)!==lt.symbol){const s=this._getOrReturnCtx(e);return Xe(s,{code:Ie.invalid_type,expected:lt.symbol,received:s.parsedType}),Rt}return Bi(e.data)}}NR.create=t=>new NR({typeName:It.ZodSymbol,...Ht(t)});class SR extends ln{_parse(e){if(this._getType(e)!==lt.undefined){const s=this._getOrReturnCtx(e);return Xe(s,{code:Ie.invalid_type,expected:lt.undefined,received:s.parsedType}),Rt}return Bi(e.data)}}SR.create=t=>new SR({typeName:It.ZodUndefined,...Ht(t)});class ER extends ln{_parse(e){if(this._getType(e)!==lt.null){const s=this._getOrReturnCtx(e);return Xe(s,{code:Ie.invalid_type,expected:lt.null,received:s.parsedType}),Rt}return Bi(e.data)}}ER.create=t=>new ER({typeName:It.ZodNull,...Ht(t)});class CR extends ln{constructor(){super(...arguments),this._any=!0}_parse(e){return Bi(e.data)}}CR.create=t=>new CR({typeName:It.ZodAny,...Ht(t)});class TR extends ln{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Bi(e.data)}}TR.create=t=>new TR({typeName:It.ZodUnknown,...Ht(t)});class _c extends ln{_parse(e){const n=this._getOrReturnCtx(e);return Xe(n,{code:Ie.invalid_type,expected:lt.never,received:n.parsedType}),Rt}}_c.create=t=>new _c({typeName:It.ZodNever,...Ht(t)});class AR extends ln{_parse(e){if(this._getType(e)!==lt.undefined){const s=this._getOrReturnCtx(e);return Xe(s,{code:Ie.invalid_type,expected:lt.void,received:s.parsedType}),Rt}return Bi(e.data)}}AR.create=t=>new AR({typeName:It.ZodVoid,...Ht(t)});class Ga extends ln{_parse(e){const{ctx:n,status:s}=this._processInputParams(e),r=this._def;if(n.parsedType!==lt.array)return Xe(n,{code:Ie.invalid_type,expected:lt.array,received:n.parsedType}),Rt;if(r.exactLength!==null){const l=n.data.length>r.exactLength.value,d=n.data.length<r.exactLength.value;(l||d)&&(Xe(n,{code:l?Ie.too_big:Ie.too_small,minimum:d?r.exactLength.value:void 0,maximum:l?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(Xe(n,{code:Ie.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(Xe(n,{code:Ie.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((l,d)=>r.type._parseAsync(new wc(n,l,n.path,d)))).then(l=>pi.mergeArray(s,l));const a=[...n.data].map((l,d)=>r.type._parseSync(new wc(n,l,n.path,d)));return pi.mergeArray(s,a)}get element(){return this._def.type}min(e,n){return new Ga({...this._def,minLength:{value:e,message:ut.toString(n)}})}max(e,n){return new Ga({...this._def,maxLength:{value:e,message:ut.toString(n)}})}length(e,n){return new Ga({...this._def,exactLength:{value:e,message:ut.toString(n)}})}nonempty(e){return this.min(1,e)}}Ga.create=(t,e)=>new Ga({type:t,minLength:null,maxLength:null,exactLength:null,typeName:It.ZodArray,...Ht(e)});function sh(t){if(t instanceof ws){const e={};for(const n in t.shape){const s=t.shape[n];e[n]=oc.create(sh(s))}return new ws({...t._def,shape:()=>e})}else return t instanceof Ga?new Ga({...t._def,type:sh(t.element)}):t instanceof oc?oc.create(sh(t.unwrap())):t instanceof $h?$h.create(sh(t.unwrap())):t instanceof Bd?Bd.create(t.items.map(e=>sh(e))):t}class ws extends ln{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=hn.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==lt.object){const f=this._getOrReturnCtx(e);return Xe(f,{code:Ie.invalid_type,expected:lt.object,received:f.parsedType}),Rt}const{status:s,ctx:r}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),d=[];if(!(this._def.catchall instanceof _c&&this._def.unknownKeys==="strip"))for(const f in r.data)l.includes(f)||d.push(f);const u=[];for(const f of l){const m=a[f],p=r.data[f];u.push({key:{status:"valid",value:f},value:m._parse(new wc(r,p,r.path,f)),alwaysSet:f in r.data})}if(this._def.catchall instanceof _c){const f=this._def.unknownKeys;if(f==="passthrough")for(const m of d)u.push({key:{status:"valid",value:m},value:{status:"valid",value:r.data[m]}});else if(f==="strict")d.length>0&&(Xe(r,{code:Ie.unrecognized_keys,keys:d}),s.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const m of d){const p=r.data[m];u.push({key:{status:"valid",value:m},value:f._parse(new wc(r,p,r.path,m)),alwaysSet:m in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const f=[];for(const m of u){const p=await m.key,x=await m.value;f.push({key:p,value:x,alwaysSet:m.alwaysSet})}return f}).then(f=>pi.mergeObjectSync(s,f)):pi.mergeObjectSync(s,u)}get shape(){return this._def.shape()}strict(e){return ut.errToObj,new ws({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,s)=>{var a,l;const r=((l=(a=this._def).errorMap)==null?void 0:l.call(a,n,s).message)??s.defaultError;return n.code==="unrecognized_keys"?{message:ut.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new ws({...this._def,unknownKeys:"strip"})}passthrough(){return new ws({...this._def,unknownKeys:"passthrough"})}extend(e){return new ws({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ws({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:It.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ws({...this._def,catchall:e})}pick(e){const n={};for(const s of hn.objectKeys(e))e[s]&&this.shape[s]&&(n[s]=this.shape[s]);return new ws({...this._def,shape:()=>n})}omit(e){const n={};for(const s of hn.objectKeys(this.shape))e[s]||(n[s]=this.shape[s]);return new ws({...this._def,shape:()=>n})}deepPartial(){return sh(this)}partial(e){const n={};for(const s of hn.objectKeys(this.shape)){const r=this.shape[s];e&&!e[s]?n[s]=r:n[s]=r.optional()}return new ws({...this._def,shape:()=>n})}required(e){const n={};for(const s of hn.objectKeys(this.shape))if(e&&!e[s])n[s]=this.shape[s];else{let a=this.shape[s];for(;a instanceof oc;)a=a._def.innerType;n[s]=a}return new ws({...this._def,shape:()=>n})}keyof(){return oL(hn.objectKeys(this.shape))}}ws.create=(t,e)=>new ws({shape:()=>t,unknownKeys:"strip",catchall:_c.create(),typeName:It.ZodObject,...Ht(e)});ws.strictCreate=(t,e)=>new ws({shape:()=>t,unknownKeys:"strict",catchall:_c.create(),typeName:It.ZodObject,...Ht(e)});ws.lazycreate=(t,e)=>new ws({shape:t,unknownKeys:"strip",catchall:_c.create(),typeName:It.ZodObject,...Ht(e)});class N0 extends ln{_parse(e){const{ctx:n}=this._processInputParams(e),s=this._def.options;function r(a){for(const d of a)if(d.result.status==="valid")return d.result;for(const d of a)if(d.result.status==="dirty")return n.common.issues.push(...d.ctx.common.issues),d.result;const l=a.map(d=>new al(d.ctx.common.issues));return Xe(n,{code:Ie.invalid_union,unionErrors:l}),Rt}if(n.common.async)return Promise.all(s.map(async a=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(r);{let a;const l=[];for(const u of s){const f={...n,common:{...n.common,issues:[]},parent:null},m=u._parseSync({data:n.data,path:n.path,parent:f});if(m.status==="valid")return m;m.status==="dirty"&&!a&&(a={result:m,ctx:f}),f.common.issues.length&&l.push(f.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const d=l.map(u=>new al(u));return Xe(n,{code:Ie.invalid_union,unionErrors:d}),Rt}}get options(){return this._def.options}}N0.create=(t,e)=>new N0({options:t,typeName:It.ZodUnion,...Ht(e)});function s1(t,e){const n=Bl(t),s=Bl(e);if(t===e)return{valid:!0,data:t};if(n===lt.object&&s===lt.object){const r=hn.objectKeys(e),a=hn.objectKeys(t).filter(d=>r.indexOf(d)!==-1),l={...t,...e};for(const d of a){const u=s1(t[d],e[d]);if(!u.valid)return{valid:!1};l[d]=u.data}return{valid:!0,data:l}}else if(n===lt.array&&s===lt.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let a=0;a<t.length;a++){const l=t[a],d=e[a],u=s1(l,d);if(!u.valid)return{valid:!1};r.push(u.data)}return{valid:!0,data:r}}else return n===lt.date&&s===lt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class S0 extends ln{_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=(a,l)=>{if(wR(a)||wR(l))return Rt;const d=s1(a.value,l.value);return d.valid?((_R(a)||_R(l))&&n.dirty(),{status:n.value,value:d.data}):(Xe(s,{code:Ie.invalid_intersection_types}),Rt)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([a,l])=>r(a,l)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}S0.create=(t,e,n)=>new S0({left:t,right:e,typeName:It.ZodIntersection,...Ht(n)});class Bd extends ln{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==lt.array)return Xe(s,{code:Ie.invalid_type,expected:lt.array,received:s.parsedType}),Rt;if(s.data.length<this._def.items.length)return Xe(s,{code:Ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Rt;!this._def.rest&&s.data.length>this._def.items.length&&(Xe(s,{code:Ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...s.data].map((l,d)=>{const u=this._def.items[d]||this._def.rest;return u?u._parse(new wc(s,l,s.path,d)):null}).filter(l=>!!l);return s.common.async?Promise.all(a).then(l=>pi.mergeArray(n,l)):pi.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Bd({...this._def,rest:e})}}Bd.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Bd({items:t,typeName:It.ZodTuple,rest:null,...Ht(e)})};class kR extends ln{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==lt.map)return Xe(s,{code:Ie.invalid_type,expected:lt.map,received:s.parsedType}),Rt;const r=this._def.keyType,a=this._def.valueType,l=[...s.data.entries()].map(([d,u],f)=>({key:r._parse(new wc(s,d,s.path,[f,"key"])),value:a._parse(new wc(s,u,s.path,[f,"value"]))}));if(s.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const u of l){const f=await u.key,m=await u.value;if(f.status==="aborted"||m.status==="aborted")return Rt;(f.status==="dirty"||m.status==="dirty")&&n.dirty(),d.set(f.value,m.value)}return{status:n.value,value:d}})}else{const d=new Map;for(const u of l){const f=u.key,m=u.value;if(f.status==="aborted"||m.status==="aborted")return Rt;(f.status==="dirty"||m.status==="dirty")&&n.dirty(),d.set(f.value,m.value)}return{status:n.value,value:d}}}}kR.create=(t,e,n)=>new kR({valueType:e,keyType:t,typeName:It.ZodMap,...Ht(n)});class Ng extends ln{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==lt.set)return Xe(s,{code:Ie.invalid_type,expected:lt.set,received:s.parsedType}),Rt;const r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(Xe(s,{code:Ie.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(Xe(s,{code:Ie.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const a=this._def.valueType;function l(u){const f=new Set;for(const m of u){if(m.status==="aborted")return Rt;m.status==="dirty"&&n.dirty(),f.add(m.value)}return{status:n.value,value:f}}const d=[...s.data.values()].map((u,f)=>a._parse(new wc(s,u,s.path,f)));return s.common.async?Promise.all(d).then(u=>l(u)):l(d)}min(e,n){return new Ng({...this._def,minSize:{value:e,message:ut.toString(n)}})}max(e,n){return new Ng({...this._def,maxSize:{value:e,message:ut.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ng.create=(t,e)=>new Ng({valueType:t,minSize:null,maxSize:null,typeName:It.ZodSet,...Ht(e)});class RR extends ln{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}RR.create=(t,e)=>new RR({getter:t,typeName:It.ZodLazy,...Ht(e)});class IR extends ln{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Xe(n,{received:n.data,code:Ie.invalid_literal,expected:this._def.value}),Rt}return{status:"valid",value:e.data}}get value(){return this._def.value}}IR.create=(t,e)=>new IR({value:t,typeName:It.ZodLiteral,...Ht(e)});function oL(t,e){return new Bh({values:t,typeName:It.ZodEnum,...Ht(e)})}class Bh extends ln{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),s=this._def.values;return Xe(n,{expected:hn.joinValues(s),received:n.parsedType,code:Ie.invalid_type}),Rt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),s=this._def.values;return Xe(n,{received:n.data,code:Ie.invalid_enum_value,options:s}),Rt}return Bi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Bh.create(e,{...this._def,...n})}exclude(e,n=this._def){return Bh.create(this.options.filter(s=>!e.includes(s)),{...this._def,...n})}}Bh.create=oL;class DR extends ln{_parse(e){const n=hn.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==lt.string&&s.parsedType!==lt.number){const r=hn.objectValues(n);return Xe(s,{expected:hn.joinValues(r),received:s.parsedType,code:Ie.invalid_type}),Rt}if(this._cache||(this._cache=new Set(hn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=hn.objectValues(n);return Xe(s,{received:s.data,code:Ie.invalid_enum_value,options:r}),Rt}return Bi(e.data)}get enum(){return this._def.values}}DR.create=(t,e)=>new DR({values:t,typeName:It.ZodNativeEnum,...Ht(e)});class E0 extends ln{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==lt.promise&&n.common.async===!1)return Xe(n,{code:Ie.invalid_type,expected:lt.promise,received:n.parsedType}),Rt;const s=n.parsedType===lt.promise?n.data:Promise.resolve(n.data);return Bi(s.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}E0.create=(t,e)=>new E0({type:t,typeName:It.ZodPromise,...Ht(e)});class zh extends ln{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===It.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:l=>{Xe(s,l),l.fatal?n.abort():n.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),r.type==="preprocess"){const l=r.transform(s.data,a);if(s.common.async)return Promise.resolve(l).then(async d=>{if(n.value==="aborted")return Rt;const u=await this._def.schema._parseAsync({data:d,path:s.path,parent:s});return u.status==="aborted"?Rt:u.status==="dirty"||n.value==="dirty"?Om(u.value):u});{if(n.value==="aborted")return Rt;const d=this._def.schema._parseSync({data:l,path:s.path,parent:s});return d.status==="aborted"?Rt:d.status==="dirty"||n.value==="dirty"?Om(d.value):d}}if(r.type==="refinement"){const l=d=>{const u=r.refinement(d,a);if(s.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(s.common.async===!1){const d=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return d.status==="aborted"?Rt:(d.status==="dirty"&&n.dirty(),l(d.value),{status:n.value,value:d.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(d=>d.status==="aborted"?Rt:(d.status==="dirty"&&n.dirty(),l(d.value).then(()=>({status:n.value,value:d.value}))))}if(r.type==="transform")if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Fh(l))return Rt;const d=r.transform(l.value,a);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:d}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>Fh(l)?Promise.resolve(r.transform(l.value,a)).then(d=>({status:n.value,value:d})):Rt);hn.assertNever(r)}}zh.create=(t,e,n)=>new zh({schema:t,typeName:It.ZodEffects,effect:e,...Ht(n)});zh.createWithPreprocess=(t,e,n)=>new zh({schema:e,effect:{type:"preprocess",transform:t},typeName:It.ZodEffects,...Ht(n)});class oc extends ln{_parse(e){return this._getType(e)===lt.undefined?Bi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}oc.create=(t,e)=>new oc({innerType:t,typeName:It.ZodOptional,...Ht(e)});class $h extends ln{_parse(e){return this._getType(e)===lt.null?Bi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$h.create=(t,e)=>new $h({innerType:t,typeName:It.ZodNullable,...Ht(e)});class r1 extends ln{_parse(e){const{ctx:n}=this._processInputParams(e);let s=n.data;return n.parsedType===lt.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}r1.create=(t,e)=>new r1({innerType:t,typeName:It.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ht(e)});class i1 extends ln{_parse(e){const{ctx:n}=this._processInputParams(e),s={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return _0(r)?r.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new al(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new al(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}i1.create=(t,e)=>new i1({innerType:t,typeName:It.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ht(e)});class MR extends ln{_parse(e){if(this._getType(e)!==lt.nan){const s=this._getOrReturnCtx(e);return Xe(s,{code:Ie.invalid_type,expected:lt.nan,received:s.parsedType}),Rt}return{status:"valid",value:e.data}}}MR.create=t=>new MR({typeName:It.ZodNaN,...Ht(t)});class bne extends ln{_parse(e){const{ctx:n}=this._processInputParams(e),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class kS extends ln{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?Rt:a.status==="dirty"?(n.dirty(),Om(a.value)):this._def.out._parseAsync({data:a.value,path:s.path,parent:s})})();{const r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?Rt:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,n){return new kS({in:e,out:n,typeName:It.ZodPipeline})}}class a1 extends ln{_parse(e){const n=this._def.innerType._parse(e),s=r=>(Fh(r)&&(r.value=Object.freeze(r.value)),r);return _0(n)?n.then(r=>s(r)):s(n)}unwrap(){return this._def.innerType}}a1.create=(t,e)=>new a1({innerType:t,typeName:It.ZodReadonly,...Ht(e)});var It;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(It||(It={}));const Kx=Zl.create,wne=n1.create;_c.create;Ga.create;const _ne=ws.create;N0.create;S0.create;Bd.create;const PR=Bh.create;E0.create;oc.create;$h.create;function We({className:t,htmlFor:e,...n}){return i.jsx("label",{"data-slot":"label",htmlFor:e,className:Qe("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...n})}function o1(t,[e,n]){return Math.min(n,Math.max(e,t))}function lL(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var cL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),jne="VisuallyHidden",Nne=b.forwardRef((t,e)=>i.jsx(bt.span,{...t,ref:e,style:{...cL,...t.style}}));Nne.displayName=jne;var Sne=[" ","Enter","ArrowUp","ArrowDown"],Ene=[" ","Enter"],zd="Select",[qv,Hv,Cne]=sS(zd),[hf,Xue]=xi(zd,[Cne,Vv]),Wv=Vv(),[Tne,Ac]=hf(zd),[Ane,kne]=hf(zd),dL=t=>{const{__scopeSelect:e,children:n,open:s,defaultOpen:r,onOpenChange:a,value:l,defaultValue:d,onValueChange:u,dir:f,name:m,autoComplete:p,disabled:x,required:w,form:j}=t,S=Wv(e),[_,E]=b.useState(null),[C,I]=b.useState(null),[M,V]=b.useState(!1),z=rp(f),[D,A]=Ld({prop:s,defaultProp:r??!1,onChange:a,caller:zd}),[T,R]=Ld({prop:l,defaultProp:d,onChange:u,caller:zd}),P=b.useRef(null),O=_?j||!!_.closest("form"):!0,[F,J]=b.useState(new Set),Z=Array.from(F).map(q=>q.props.value).join(";");return i.jsx(O5,{...S,children:i.jsxs(Tne,{required:w,scope:e,trigger:_,onTriggerChange:E,valueNode:C,onValueNodeChange:I,valueNodeHasChildren:M,onValueNodeHasChildrenChange:V,contentId:qa(),value:T,onValueChange:R,open:D,onOpenChange:A,dir:z,triggerPointerDownPosRef:P,disabled:x,children:[i.jsx(qv.Provider,{scope:e,children:i.jsx(Ane,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(q=>{J(Y=>new Set(Y).add(q))},[]),onNativeOptionRemove:b.useCallback(q=>{J(Y=>{const W=new Set(Y);return W.delete(q),W})},[]),children:n})}),O?i.jsxs(ML,{"aria-hidden":!0,required:w,tabIndex:-1,name:m,autoComplete:p,value:T,onChange:q=>R(q.target.value),disabled:x,form:j,children:[T===void 0?i.jsx("option",{value:""}):null,Array.from(F)]},Z):null]})})};dL.displayName=zd;var uL="SelectTrigger",hL=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:s=!1,...r}=t,a=Wv(n),l=Ac(uL,n),d=l.disabled||s,u=Kt(e,l.onTriggerChange),f=Hv(n),m=b.useRef("touch"),[p,x,w]=OL(S=>{const _=f().filter(I=>!I.disabled),E=_.find(I=>I.value===l.value),C=LL(_,S,E);C!==void 0&&l.onValueChange(C.value)}),j=S=>{d||(l.onOpenChange(!0),w()),S&&(l.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return i.jsx(L5,{asChild:!0,...a,children:i.jsx(bt.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":PL(l.value)?"":void 0,...r,ref:u,onClick:tt(r.onClick,S=>{S.currentTarget.focus(),m.current!=="mouse"&&j(S)}),onPointerDown:tt(r.onPointerDown,S=>{m.current=S.pointerType;const _=S.target;_.hasPointerCapture(S.pointerId)&&_.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(j(S),S.preventDefault())}),onKeyDown:tt(r.onKeyDown,S=>{const _=p.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&x(S.key),!(_&&S.key===" ")&&Sne.includes(S.key)&&(j(),S.preventDefault())})})})});hL.displayName=uL;var fL="SelectValue",mL=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:s,style:r,children:a,placeholder:l="",...d}=t,u=Ac(fL,n),{onValueNodeHasChildrenChange:f}=u,m=a!==void 0,p=Kt(e,u.onValueNodeChange);return As(()=>{f(m)},[f,m]),i.jsx(bt.span,{...d,ref:p,style:{pointerEvents:"none"},children:PL(u.value)?i.jsx(i.Fragment,{children:l}):a})});mL.displayName=fL;var Rne="SelectIcon",gL=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:s,...r}=t;return i.jsx(bt.span,{"aria-hidden":!0,...r,ref:e,children:s||"▼"})});gL.displayName=Rne;var Ine="SelectPortal",pL=t=>i.jsx(Tv,{asChild:!0,...t});pL.displayName=Ine;var $d="SelectContent",xL=b.forwardRef((t,e)=>{const n=Ac($d,t.__scopeSelect),[s,r]=b.useState();if(As(()=>{r(new DocumentFragment)},[]),!n.open){const a=s;return a?Vg.createPortal(i.jsx(yL,{scope:t.__scopeSelect,children:i.jsx(qv.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),a):null}return i.jsx(vL,{...t,ref:e})});xL.displayName=$d;var Yi=10,[yL,kc]=hf($d),Dne="SelectContentImpl",Mne=Pd("SelectContent.RemoveScroll"),vL=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:a,onPointerDownOutside:l,side:d,sideOffset:u,align:f,alignOffset:m,arrowPadding:p,collisionBoundary:x,collisionPadding:w,sticky:j,hideWhenDetached:S,avoidCollisions:_,...E}=t,C=Ac($d,n),[I,M]=b.useState(null),[V,z]=b.useState(null),D=Kt(e,ve=>M(ve)),[A,T]=b.useState(null),[R,P]=b.useState(null),O=Hv(n),[F,J]=b.useState(!1),Z=b.useRef(!1);b.useEffect(()=>{if(I)return YN(I)},[I]),GN();const q=b.useCallback(ve=>{const[le,...Ne]=O().map(Ye=>Ye.ref.current),[Pe]=Ne.slice(-1),Ge=document.activeElement;for(const Ye of ve)if(Ye===Ge||(Ye==null||Ye.scrollIntoView({block:"nearest"}),Ye===le&&V&&(V.scrollTop=0),Ye===Pe&&V&&(V.scrollTop=V.scrollHeight),Ye==null||Ye.focus(),document.activeElement!==Ge))return},[O,V]),Y=b.useCallback(()=>q([A,I]),[q,A,I]);b.useEffect(()=>{F&&Y()},[F,Y]);const{onOpenChange:W,triggerPointerDownPosRef:H}=C;b.useEffect(()=>{if(I){let ve={x:0,y:0};const le=Pe=>{var Ge,Ye;ve={x:Math.abs(Math.round(Pe.pageX)-(((Ge=H.current)==null?void 0:Ge.x)??0)),y:Math.abs(Math.round(Pe.pageY)-(((Ye=H.current)==null?void 0:Ye.y)??0))}},Ne=Pe=>{ve.x<=10&&ve.y<=10?Pe.preventDefault():I.contains(Pe.target)||W(!1),document.removeEventListener("pointermove",le),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",le),document.addEventListener("pointerup",Ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",le),document.removeEventListener("pointerup",Ne,{capture:!0})}}},[I,W,H]),b.useEffect(()=>{const ve=()=>W(!1);return window.addEventListener("blur",ve),window.addEventListener("resize",ve),()=>{window.removeEventListener("blur",ve),window.removeEventListener("resize",ve)}},[W]);const[B,K]=OL(ve=>{const le=O().filter(Ge=>!Ge.disabled),Ne=le.find(Ge=>Ge.ref.current===document.activeElement),Pe=LL(le,ve,Ne);Pe&&setTimeout(()=>Pe.ref.current.focus())}),ne=b.useCallback((ve,le,Ne)=>{const Pe=!Z.current&&!Ne;(C.value!==void 0&&C.value===le||Pe)&&(T(ve),Pe&&(Z.current=!0))},[C.value]),te=b.useCallback(()=>I==null?void 0:I.focus(),[I]),fe=b.useCallback((ve,le,Ne)=>{const Pe=!Z.current&&!Ne;(C.value!==void 0&&C.value===le||Pe)&&P(ve)},[C.value]),ke=s==="popper"?l1:bL,Ee=ke===l1?{side:d,sideOffset:u,align:f,alignOffset:m,arrowPadding:p,collisionBoundary:x,collisionPadding:w,sticky:j,hideWhenDetached:S,avoidCollisions:_}:{};return i.jsx(yL,{scope:n,content:I,viewport:V,onViewportChange:z,itemRefCallback:ne,selectedItem:A,onItemLeave:te,itemTextRefCallback:fe,focusSelectedItem:Y,selectedItemText:R,position:s,isPositioned:F,searchRef:B,children:i.jsx(kv,{as:Mne,allowPinchZoom:!0,children:i.jsx(Cv,{asChild:!0,trapped:C.open,onMountAutoFocus:ve=>{ve.preventDefault()},onUnmountAutoFocus:tt(r,ve=>{var le;(le=C.trigger)==null||le.focus({preventScroll:!0}),ve.preventDefault()}),children:i.jsx(Ev,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:ve=>ve.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:i.jsx(ke,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:ve=>ve.preventDefault(),...E,...Ee,onPlaced:()=>J(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:tt(E.onKeyDown,ve=>{const le=ve.ctrlKey||ve.altKey||ve.metaKey;if(ve.key==="Tab"&&ve.preventDefault(),!le&&ve.key.length===1&&K(ve.key),["ArrowUp","ArrowDown","Home","End"].includes(ve.key)){let Pe=O().filter(Ge=>!Ge.disabled).map(Ge=>Ge.ref.current);if(["ArrowUp","End"].includes(ve.key)&&(Pe=Pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ve.key)){const Ge=ve.target,Ye=Pe.indexOf(Ge);Pe=Pe.slice(Ye+1)}setTimeout(()=>q(Pe)),ve.preventDefault()}})})})})})})});vL.displayName=Dne;var Pne="SelectItemAlignedPosition",bL=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:s,...r}=t,a=Ac($d,n),l=kc($d,n),[d,u]=b.useState(null),[f,m]=b.useState(null),p=Kt(e,D=>m(D)),x=Hv(n),w=b.useRef(!1),j=b.useRef(!0),{viewport:S,selectedItem:_,selectedItemText:E,focusSelectedItem:C}=l,I=b.useCallback(()=>{if(a.trigger&&a.valueNode&&d&&f&&S&&_&&E){const D=a.trigger.getBoundingClientRect(),A=f.getBoundingClientRect(),T=a.valueNode.getBoundingClientRect(),R=E.getBoundingClientRect();if(a.dir!=="rtl"){const Ge=R.left-A.left,Ye=T.left-Ge,ot=D.left-Ye,Dt=D.width+ot,je=Math.max(Dt,A.width),qe=window.innerWidth-Yi,ct=o1(Ye,[Yi,Math.max(Yi,qe-je)]);d.style.minWidth=Dt+"px",d.style.left=ct+"px"}else{const Ge=A.right-R.right,Ye=window.innerWidth-T.right-Ge,ot=window.innerWidth-D.right-Ye,Dt=D.width+ot,je=Math.max(Dt,A.width),qe=window.innerWidth-Yi,ct=o1(Ye,[Yi,Math.max(Yi,qe-je)]);d.style.minWidth=Dt+"px",d.style.right=ct+"px"}const P=x(),O=window.innerHeight-Yi*2,F=S.scrollHeight,J=window.getComputedStyle(f),Z=parseInt(J.borderTopWidth,10),q=parseInt(J.paddingTop,10),Y=parseInt(J.borderBottomWidth,10),W=parseInt(J.paddingBottom,10),H=Z+q+F+W+Y,B=Math.min(_.offsetHeight*5,H),K=window.getComputedStyle(S),ne=parseInt(K.paddingTop,10),te=parseInt(K.paddingBottom,10),fe=D.top+D.height/2-Yi,ke=O-fe,Ee=_.offsetHeight/2,ve=_.offsetTop+Ee,le=Z+q+ve,Ne=H-le;if(le<=fe){const Ge=P.length>0&&_===P[P.length-1].ref.current;d.style.bottom="0px";const Ye=f.clientHeight-S.offsetTop-S.offsetHeight,ot=Math.max(ke,Ee+(Ge?te:0)+Ye+Y),Dt=le+ot;d.style.height=Dt+"px"}else{const Ge=P.length>0&&_===P[0].ref.current;d.style.top="0px";const ot=Math.max(fe,Z+S.offsetTop+(Ge?ne:0)+Ee)+Ne;d.style.height=ot+"px",S.scrollTop=le-fe+S.offsetTop}d.style.margin=`${Yi}px 0`,d.style.minHeight=B+"px",d.style.maxHeight=O+"px",s==null||s(),requestAnimationFrame(()=>w.current=!0)}},[x,a.trigger,a.valueNode,d,f,S,_,E,a.dir,s]);As(()=>I(),[I]);const[M,V]=b.useState();As(()=>{f&&V(window.getComputedStyle(f).zIndex)},[f]);const z=b.useCallback(D=>{D&&j.current===!0&&(I(),C==null||C(),j.current=!1)},[I,C]);return i.jsx(Lne,{scope:n,contentWrapper:d,shouldExpandOnScrollRef:w,onScrollButtonChange:z,children:i.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:i.jsx(bt.div,{...r,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});bL.displayName=Pne;var One="SelectPopperPosition",l1=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:s="start",collisionPadding:r=Yi,...a}=t,l=Wv(n);return i.jsx(V5,{...l,...a,ref:e,align:s,collisionPadding:r,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});l1.displayName=One;var[Lne,RS]=hf($d,{}),c1="SelectViewport",wL=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:s,...r}=t,a=kc(c1,n),l=RS(c1,n),d=Kt(e,a.onViewportChange),u=b.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(qv.Slot,{scope:n,children:i.jsx(bt.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:tt(r.onScroll,f=>{const m=f.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:x}=l;if(x!=null&&x.current&&p){const w=Math.abs(u.current-m.scrollTop);if(w>0){const j=window.innerHeight-Yi*2,S=parseFloat(p.style.minHeight),_=parseFloat(p.style.height),E=Math.max(S,_);if(E<j){const C=E+w,I=Math.min(j,C),M=C-I;p.style.height=I+"px",p.style.bottom==="0px"&&(m.scrollTop=M>0?M:0,p.style.justifyContent="flex-end")}}}u.current=m.scrollTop})})})]})});wL.displayName=c1;var _L="SelectGroup",[Vne,Une]=hf(_L),Fne=b.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,r=qa();return i.jsx(Vne,{scope:n,id:r,children:i.jsx(bt.div,{role:"group","aria-labelledby":r,...s,ref:e})})});Fne.displayName=_L;var jL="SelectLabel",NL=b.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,r=Une(jL,n);return i.jsx(bt.div,{id:r.id,...s,ref:e})});NL.displayName=jL;var C0="SelectItem",[Bne,SL]=hf(C0),EL=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:s,disabled:r=!1,textValue:a,...l}=t,d=Ac(C0,n),u=kc(C0,n),f=d.value===s,[m,p]=b.useState(a??""),[x,w]=b.useState(!1),j=Kt(e,C=>{var I;return(I=u.itemRefCallback)==null?void 0:I.call(u,C,s,r)}),S=qa(),_=b.useRef("touch"),E=()=>{r||(d.onValueChange(s),d.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Bne,{scope:n,value:s,disabled:r,textId:S,isSelected:f,onItemTextChange:b.useCallback(C=>{p(I=>I||((C==null?void 0:C.textContent)??"").trim())},[]),children:i.jsx(qv.ItemSlot,{scope:n,value:s,disabled:r,textValue:m,children:i.jsx(bt.div,{role:"option","aria-labelledby":S,"data-highlighted":x?"":void 0,"aria-selected":f&&x,"data-state":f?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...l,ref:j,onFocus:tt(l.onFocus,()=>w(!0)),onBlur:tt(l.onBlur,()=>w(!1)),onClick:tt(l.onClick,()=>{_.current!=="mouse"&&E()}),onPointerUp:tt(l.onPointerUp,()=>{_.current==="mouse"&&E()}),onPointerDown:tt(l.onPointerDown,C=>{_.current=C.pointerType}),onPointerMove:tt(l.onPointerMove,C=>{var I;_.current=C.pointerType,r?(I=u.onItemLeave)==null||I.call(u):_.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:tt(l.onPointerLeave,C=>{var I;C.currentTarget===document.activeElement&&((I=u.onItemLeave)==null||I.call(u))}),onKeyDown:tt(l.onKeyDown,C=>{var M;((M=u.searchRef)==null?void 0:M.current)!==""&&C.key===" "||(Ene.includes(C.key)&&E(),C.key===" "&&C.preventDefault())})})})})});EL.displayName=C0;var Lm="SelectItemText",CL=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:s,style:r,...a}=t,l=Ac(Lm,n),d=kc(Lm,n),u=SL(Lm,n),f=kne(Lm,n),[m,p]=b.useState(null),x=Kt(e,E=>p(E),u.onItemTextChange,E=>{var C;return(C=d.itemTextRefCallback)==null?void 0:C.call(d,E,u.value,u.disabled)}),w=m==null?void 0:m.textContent,j=b.useMemo(()=>i.jsx("option",{value:u.value,disabled:u.disabled,children:w},u.value),[u.disabled,u.value,w]),{onNativeOptionAdd:S,onNativeOptionRemove:_}=f;return As(()=>(S(j),()=>_(j)),[S,_,j]),i.jsxs(i.Fragment,{children:[i.jsx(bt.span,{id:u.textId,...a,ref:x}),u.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Vg.createPortal(a.children,l.valueNode):null]})});CL.displayName=Lm;var TL="SelectItemIndicator",AL=b.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t;return SL(TL,n).isSelected?i.jsx(bt.span,{"aria-hidden":!0,...s,ref:e}):null});AL.displayName=TL;var d1="SelectScrollUpButton",kL=b.forwardRef((t,e)=>{const n=kc(d1,t.__scopeSelect),s=RS(d1,t.__scopeSelect),[r,a]=b.useState(!1),l=Kt(e,s.onScrollButtonChange);return As(()=>{if(n.viewport&&n.isPositioned){let d=function(){const f=u.scrollTop>0;a(f)};const u=n.viewport;return d(),u.addEventListener("scroll",d),()=>u.removeEventListener("scroll",d)}},[n.viewport,n.isPositioned]),r?i.jsx(IL,{...t,ref:l,onAutoScroll:()=>{const{viewport:d,selectedItem:u}=n;d&&u&&(d.scrollTop=d.scrollTop-u.offsetHeight)}}):null});kL.displayName=d1;var u1="SelectScrollDownButton",RL=b.forwardRef((t,e)=>{const n=kc(u1,t.__scopeSelect),s=RS(u1,t.__scopeSelect),[r,a]=b.useState(!1),l=Kt(e,s.onScrollButtonChange);return As(()=>{if(n.viewport&&n.isPositioned){let d=function(){const f=u.scrollHeight-u.clientHeight,m=Math.ceil(u.scrollTop)<f;a(m)};const u=n.viewport;return d(),u.addEventListener("scroll",d),()=>u.removeEventListener("scroll",d)}},[n.viewport,n.isPositioned]),r?i.jsx(IL,{...t,ref:l,onAutoScroll:()=>{const{viewport:d,selectedItem:u}=n;d&&u&&(d.scrollTop=d.scrollTop+u.offsetHeight)}}):null});RL.displayName=u1;var IL=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:s,...r}=t,a=kc("SelectScrollButton",n),l=b.useRef(null),d=Hv(n),u=b.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return b.useEffect(()=>()=>u(),[u]),As(()=>{var m;const f=d().find(p=>p.ref.current===document.activeElement);(m=f==null?void 0:f.ref.current)==null||m.scrollIntoView({block:"nearest"})},[d]),i.jsx(bt.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:tt(r.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(s,50))}),onPointerMove:tt(r.onPointerMove,()=>{var f;(f=a.onItemLeave)==null||f.call(a),l.current===null&&(l.current=window.setInterval(s,50))}),onPointerLeave:tt(r.onPointerLeave,()=>{u()})})}),zne="SelectSeparator",DL=b.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t;return i.jsx(bt.div,{"aria-hidden":!0,...s,ref:e})});DL.displayName=zne;var h1="SelectArrow",$ne=b.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,r=Wv(n),a=Ac(h1,n),l=kc(h1,n);return a.open&&l.position==="popper"?i.jsx(U5,{...r,...s,ref:e}):null});$ne.displayName=h1;var qne="SelectBubbleInput",ML=b.forwardRef(({__scopeSelect:t,value:e,...n},s)=>{const r=b.useRef(null),a=Kt(s,r),l=lL(e);return b.useEffect(()=>{const d=r.current;if(!d)return;const u=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(u,"value").set;if(l!==e&&m){const p=new Event("change",{bubbles:!0});m.call(d,e),d.dispatchEvent(p)}},[l,e]),i.jsx(bt.select,{...n,style:{...cL,...n.style},ref:a,defaultValue:e})});ML.displayName=qne;function PL(t){return t===""||t===void 0}function OL(t){const e=Qs(t),n=b.useRef(""),s=b.useRef(0),r=b.useCallback(l=>{const d=n.current+l;e(d),function u(f){n.current=f,window.clearTimeout(s.current),f!==""&&(s.current=window.setTimeout(()=>u(""),1e3))}(d)},[e]),a=b.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,r,a]}function LL(t,e,n){const r=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let l=Hne(t,Math.max(a,0));r.length===1&&(l=l.filter(f=>f!==n));const u=l.find(f=>f.textValue.toLowerCase().startsWith(r.toLowerCase()));return u!==n?u:void 0}function Hne(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var Wne=dL,VL=hL,Gne=mL,Yne=gL,Kne=pL,UL=xL,Xne=wL,FL=NL,BL=EL,Qne=CL,Zne=AL,zL=kL,$L=RL,qL=DL;const Ns=Wne,Ss=Gne,ds=b.forwardRef(({className:t,children:e,...n},s)=>i.jsxs(VL,{ref:s,className:Qe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(Yne,{asChild:!0,children:i.jsx(ah,{className:"h-4 w-4 opacity-50"})})]}));ds.displayName=VL.displayName;const HL=b.forwardRef(({className:t,...e},n)=>i.jsx(zL,{ref:n,className:Qe("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(nK,{className:"h-4 w-4"})}));HL.displayName=zL.displayName;const WL=b.forwardRef(({className:t,...e},n)=>i.jsx($L,{ref:n,className:Qe("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(ah,{className:"h-4 w-4"})}));WL.displayName=$L.displayName;const us=b.forwardRef(({className:t,children:e,position:n="popper",...s},r)=>i.jsx(Kne,{children:i.jsxs(UL,{ref:r,className:Qe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...s,children:[i.jsx(HL,{}),i.jsx(Xne,{className:Qe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(WL,{})]})}));us.displayName=UL.displayName;const Jne=b.forwardRef(({className:t,...e},n)=>i.jsx(FL,{ref:n,className:Qe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Jne.displayName=FL.displayName;const $e=b.forwardRef(({className:t,children:e,...n},s)=>i.jsxs(BL,{ref:s,className:Qe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Zne,{children:i.jsx(dO,{className:"h-4 w-4"})})}),i.jsx(Qne,{children:e})]}));$e.displayName=BL.displayName;const ese=b.forwardRef(({className:t,...e},n)=>i.jsx(qL,{ref:n,className:Qe("-mx-1 my-1 h-px bg-muted",t),...e}));ese.displayName=qL.displayName;const tse=vte,GL=b.createContext({}),ad=({...t})=>i.jsx(GL.Provider,{value:{name:t.name},children:i.jsx(_te,{...t})}),IS=()=>{const t=b.useContext(GL),e=b.useContext(YL),{getFieldState:n}=$v(),s=H3({name:t.name}),r=n(t.name,s);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...r}},YL=b.createContext({});function od({className:t,...e}){const n=b.useId();return i.jsx(YL.Provider,{value:{id:n},children:i.jsx("div",{"data-slot":"form-item",className:Qe("grid gap-2",t),...e})})}function ld({className:t,...e}){const{error:n,formItemId:s}=IS();return i.jsx(We,{"data-slot":"form-label","data-error":!!n,className:Qe("data-[error=true]:text-destructive",t),htmlFor:s,...e})}function cd({...t}){const{error:e,formItemId:n,formDescriptionId:s,formMessageId:r}=IS();return i.jsx(UN,{"data-slot":"form-control",id:n,"aria-describedby":e?`${s} ${r}`:`${s}`,"aria-invalid":!!e,...t})}function Xu({className:t,...e}){const{error:n,formMessageId:s}=IS(),r=n?String((n==null?void 0:n.message)??""):e.children;return r?i.jsx("p",{"data-slot":"form-message",id:s,className:Qe("text-destructive text-sm",t),...e,children:r}):null}const nse=_ne({firstName:Kx().min(1,"First name is required"),lastName:Kx().min(1,"Last name is required"),email:Kx().email("Please enter a valid email address"),role:PR(["super_admin","brand_manager","staff","verified_staff","retail_staff","user","guest"]),verified:wne().default(!1),verificationStatus:PR(["pending","approved","rejected"]).default("pending"),brandId:Kx().optional()});function sse({currentUser:t,onSuccess:e}){const[n,s]=b.useState(!1),[r,a]=b.useState(""),[l,d]=b.useState((t==null?void 0:t.role)||"user"),u=Ote({resolver:Yte(nse),defaultValues:{firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",email:(t==null?void 0:t.email)||"",role:(t==null?void 0:t.role)||"user",verified:(t==null?void 0:t.verified)||!1,verificationStatus:(t==null?void 0:t.verificationStatus)||"pending",brandId:(t==null?void 0:t.brandId)||""}}),f=u.watch("role");b.useEffect(()=>{d(f)},[f]);const m=async p=>{s(!0),a("");try{const x={...p,updatedAt:ze()};if(t!=null&&t.id){const w=Je(ce,"users",t.id);await Qn(w,x)}else x.createdAt=ze(),await cr(Ue(ce,"users"),x);e&&e()}catch(x){console.error("Error saving user:",x),a("Failed to save user. Please try again.")}finally{s(!1)}};return i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:t?"Edit User":"Add New User"}),i.jsx(Vt,{children:t?"Update the user information below.":"Fill in the details to create a new user account."})]}),i.jsx(He,{children:i.jsx(tse,{...u,children:i.jsxs("form",{onSubmit:u.handleSubmit(m),className:"space-y-6",children:[r&&i.jsxs(Pi,{variant:"destructive",children:[i.jsx(js,{className:"h-4 w-4"}),i.jsx(Ed,{children:"Error"}),i.jsx(Oi,{children:r})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(ad,{control:u.control,name:"firstName",render:({field:p})=>i.jsxs(od,{children:[i.jsx(ld,{children:"First Name"}),i.jsx(cd,{children:i.jsx(gt,{placeholder:"Enter first name",...p})}),i.jsx(Xu,{})]})}),i.jsx(ad,{control:u.control,name:"lastName",render:({field:p})=>i.jsxs(od,{children:[i.jsx(ld,{children:"Last Name"}),i.jsx(cd,{children:i.jsx(gt,{placeholder:"Enter last name",...p})}),i.jsx(Xu,{})]})})]}),i.jsx(ad,{control:u.control,name:"email",render:({field:p})=>i.jsxs(od,{children:[i.jsx(ld,{children:"Email"}),i.jsx(cd,{children:i.jsx(gt,{type:"email",placeholder:"Enter email address",...p})}),i.jsx(Xu,{})]})}),i.jsx(ad,{control:u.control,name:"role",render:({field:p})=>i.jsxs(od,{children:[i.jsx(ld,{children:"Role"}),i.jsxs(Ns,{onValueChange:p.onChange,defaultValue:p.value,children:[i.jsx(cd,{children:i.jsx(ds,{children:i.jsx(Ss,{placeholder:"Select a role"})})}),i.jsx(us,{children:RG.map(x=>i.jsx($e,{value:x.value,children:x.label},x.value))})]}),i.jsx(Xu,{})]})}),l==="brand_manager"&&i.jsx(ad,{control:u.control,name:"brandId",render:({field:p})=>i.jsxs(od,{children:[i.jsx(ld,{children:"Brand ID"}),i.jsx(cd,{children:i.jsx(gt,{placeholder:"Enter brand ID (optional)",...p})}),i.jsx(Xu,{})]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(ad,{control:u.control,name:"verified",render:({field:p})=>i.jsxs(od,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(ld,{className:"text-base",children:"Verified User"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Mark this user as verified"})]}),i.jsx(cd,{children:i.jsx("input",{type:"checkbox",checked:p.value,onChange:p.onChange,className:"data-[state=checked]:bg-primary"})})]})}),i.jsx(ad,{control:u.control,name:"verificationStatus",render:({field:p})=>i.jsxs(od,{children:[i.jsx(ld,{children:"Verification Status"}),i.jsxs(Ns,{onValueChange:p.onChange,defaultValue:p.value,children:[i.jsx(cd,{children:i.jsx(ds,{children:i.jsx(Ss,{})})}),i.jsxs(us,{children:[i.jsx($e,{value:"pending",children:"Pending"}),i.jsx($e,{value:"approved",children:"Approved"}),i.jsx($e,{value:"rejected",children:"Rejected"})]})]}),i.jsx(Xu,{})]})})]}),i.jsx("div",{className:"flex justify-end space-x-2",children:i.jsx(Se,{type:"submit",disabled:n,className:"min-w-[100px]",children:n?i.jsxs(i.Fragment,{children:[i.jsx(Da,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):t?"Update User":"Create User"})})]})})})]})}const rse=FN("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function an({className:t,variant:e,asChild:n=!1,...s}){const r=n?UN:"span";return i.jsx(r,{"data-slot":"badge",className:Qe(rse({variant:e}),t),...s})}var KL="AlertDialog",[ise,Que]=xi(KL,[TO]),cl=TO(),XL=t=>{const{__scopeAlertDialog:e,...n}=t,s=cl(e);return i.jsx(qO,{...s,...n,modal:!0})};XL.displayName=KL;var ase="AlertDialogTrigger",ose=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=cl(n);return i.jsx(HO,{...r,...s,ref:e})});ose.displayName=ase;var lse="AlertDialogPortal",QL=t=>{const{__scopeAlertDialog:e,...n}=t,s=cl(e);return i.jsx(WO,{...s,...n})};QL.displayName=lse;var cse="AlertDialogOverlay",ZL=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=cl(n);return i.jsx(ZN,{...r,...s,ref:e})});ZL.displayName=cse;var jh="AlertDialogContent",[dse,use]=ise(jh),hse=FG("AlertDialogContent"),JL=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:s,...r}=t,a=cl(n),l=b.useRef(null),d=Kt(e,l),u=b.useRef(null);return i.jsx(nZ,{contentName:jh,titleName:e6,docsSlug:"alert-dialog",children:i.jsx(dse,{scope:n,cancelRef:u,children:i.jsxs(JN,{role:"alertdialog",...a,...r,ref:d,onOpenAutoFocus:tt(r.onOpenAutoFocus,f=>{var m;f.preventDefault(),(m=u.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[i.jsx(hse,{children:s}),i.jsx(mse,{contentRef:l})]})})})});JL.displayName=jh;var e6="AlertDialogTitle",t6=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=cl(n);return i.jsx(eS,{...r,...s,ref:e})});t6.displayName=e6;var n6="AlertDialogDescription",s6=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=cl(n);return i.jsx(tS,{...r,...s,ref:e})});s6.displayName=n6;var fse="AlertDialogAction",r6=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=cl(n);return i.jsx(nS,{...r,...s,ref:e})});r6.displayName=fse;var i6="AlertDialogCancel",a6=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,{cancelRef:r}=use(i6,n),a=cl(n),l=Kt(e,r);return i.jsx(nS,{...a,...s,ref:l})});a6.displayName=i6;var mse=({contentRef:t})=>{const e=`\`${jh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${jh}\` by passing a \`${n6}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${jh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return b.useEffect(()=>{var s;document.getElementById((s=t.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},gse=XL,pse=QL,xse=ZL,yse=JL,vse=r6,bse=a6,wse=t6,_se=s6;function o6({...t}){return i.jsx(gse,{"data-slot":"alert-dialog",...t})}function jse({...t}){return i.jsx(pse,{"data-slot":"alert-dialog-portal",...t})}function Nse({className:t,...e}){return i.jsx(xse,{"data-slot":"alert-dialog-overlay",className:Qe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function l6({className:t,...e}){return i.jsxs(jse,{children:[i.jsx(Nse,{}),i.jsx(yse,{"data-slot":"alert-dialog-content",className:Qe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...e})]})}function c6({className:t,...e}){return i.jsx("div",{"data-slot":"alert-dialog-header",className:Qe("flex flex-col gap-2 text-center sm:text-left",t),...e})}function d6({className:t,...e}){return i.jsx("div",{"data-slot":"alert-dialog-footer",className:Qe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function u6({className:t,...e}){return i.jsx(wse,{"data-slot":"alert-dialog-title",className:Qe("text-lg font-semibold",t),...e})}function h6({className:t,...e}){return i.jsx(_se,{"data-slot":"alert-dialog-description",className:Qe("text-muted-foreground text-sm",t),...e})}function f6({className:t,...e}){return i.jsx(vse,{className:Qe(zN(),t),...e})}function m6({className:t,...e}){return i.jsx(bse,{className:Qe(zN({variant:"outline"}),t),...e})}const g6=b.forwardRef(({className:t,...e},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:Qe("w-full caption-bottom text-sm",t),...e})}));g6.displayName="Table";const p6=b.forwardRef(({className:t,...e},n)=>i.jsx("thead",{ref:n,className:Qe("[&_tr]:border-b",t),...e}));p6.displayName="TableHeader";const x6=b.forwardRef(({className:t,...e},n)=>i.jsx("tbody",{ref:n,className:Qe("[&_tr:last-child]:border-0",t),...e}));x6.displayName="TableBody";const Sse=b.forwardRef(({className:t,...e},n)=>i.jsx("tfoot",{ref:n,className:Qe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));Sse.displayName="TableFooter";const Vm=b.forwardRef(({className:t,...e},n)=>i.jsx("tr",{ref:n,className:Qe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Vm.displayName="TableRow";const pd=b.forwardRef(({className:t,...e},n)=>i.jsx("th",{ref:n,className:Qe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));pd.displayName="TableHead";const Ao=b.forwardRef(({className:t,...e},n)=>i.jsx("td",{ref:n,className:Qe("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Ao.displayName="TableCell";const Ese=b.forwardRef(({className:t,...e},n)=>i.jsx("caption",{ref:n,className:Qe("mt-4 text-sm text-muted-foreground",t),...e}));Ese.displayName="TableCaption";function Cse(){const{canAccess:t}=Mv(),[e,n]=b.useState([]),[s,r]=b.useState(!0),[a,l]=b.useState(null),[d,u]=b.useState(""),[f,m]=b.useState("all"),[p,x]=b.useState("all"),[w,j]=b.useState(!1),[S,_]=b.useState({title:"",description:"",action:null}),[E,C]=b.useState(!1),[I,M]=b.useState(null),V=b.useCallback(async()=>{r(!0),l(null);try{const Z=Ue(ce,"users"),q=yt(Z,Jn("createdAt","desc")),W=(await fs(q)).docs.map(H=>{var B,K;return{id:H.id,...H.data(),joinDate:(B=H.data().createdAt)==null?void 0:B.toDate(),lastLogin:(K=H.data().lastLogin)==null?void 0:K.toDate()}});n(W)}catch(Z){console.error("Error fetching users:",Z),l("Failed to load user data. Please check your connection and try again.")}finally{r(!1)}},[]);b.useEffect(()=>{V()},[V]);const z=b.useMemo(()=>e.filter(Z=>{const q=`${Z.firstName||""} ${Z.lastName||""}`,Y=Z.email||"",W=Z.role||"",H=Z.status||"";return(q.toLowerCase().includes(d.toLowerCase())||Y.toLowerCase().includes(d.toLowerCase()))&&(f==="all"||H===f)&&(p==="all"||W===p)}),[e,d,f,p]),D=async(Z,q)=>{try{const Y=Je(ce,"users",Z);await Qn(Y,{status:q}),n(e.map(W=>W.id===Z?{...W,status:q}:W))}catch(Y){console.error(`Error updating user status to ${q}:`,Y),l("Failed to update user status. Please try again.")}},A=async Z=>{try{await Zs(Je(ce,"users",Z)),n(e.filter(q=>q.id!==Z))}catch(q){console.error("Error deleting user:",q),l("Failed to delete user. Please try again.")}},T=Z=>{_(Z),j(!0)},R=(Z=null)=>{M(Z),C(!0)},P=()=>{C(!1),V()},O=Z=>({super_admin:"Super Admin",brand_manager:"Brand Manager",retail_user:"Retail User",community_user:"Community User"})[Z]||Z,F=Z=>{switch(Z){case"active":return i.jsx(an,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"});case"inactive":return i.jsx(an,{variant:"secondary",children:"Inactive"});case"pending_verification":return i.jsx(an,{variant:"outline",className:"border-yellow-500 text-yellow-700",children:"Pending"});case"suspended":return i.jsx(an,{variant:"destructive",children:"Suspended"});default:return i.jsx(an,{variant:"secondary",children:Z||"Unknown"})}},J=Z=>{switch(Z){case"verified":return i.jsx(an,{variant:"default",className:"bg-blue-100 text-blue-800",children:"Verified"});case"pending":return i.jsx(an,{variant:"outline",className:"border-orange-500 text-orange-700",children:"Pending"});case"rejected":return i.jsx(an,{variant:"destructive",children:"Rejected"});default:return i.jsx(an,{variant:"secondary",children:Z||"N/A"})}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"User Management"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage user accounts, roles, and permissions"})]}),t(["manage_users"])&&i.jsxs(Se,{onClick:()=>R(),children:[i.jsx(Ma,{className:"mr-2 h-4 w-4"}),"Add User"]})]}),i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"User Directory"}),i.jsx(Vt,{children:"Search and filter users by status, role, or other criteria"})]}),i.jsxs(He,{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(qo,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(gt,{placeholder:"Search users by name or email...",value:d,onChange:Z=>u(Z.target.value),className:"pl-10"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Ho,{children:[i.jsx(Wo,{asChild:!0,children:i.jsxs(Se,{variant:"outline",children:[i.jsx(Ck,{className:"mr-2 h-4 w-4"}),"Status: ",f]})}),i.jsxs(Wa,{children:[i.jsx(zt,{onClick:()=>m("all"),children:"All"}),i.jsx(zt,{onClick:()=>m("active"),children:"Active"}),i.jsx(zt,{onClick:()=>m("inactive"),children:"Inactive"}),i.jsx(zt,{onClick:()=>m("pending_verification"),children:"Pending"}),i.jsx(zt,{onClick:()=>m("suspended"),children:"Suspended"})]})]}),i.jsxs(Ho,{children:[i.jsx(Wo,{asChild:!0,children:i.jsxs(Se,{variant:"outline",children:[i.jsx(Ck,{className:"mr-2 h-4 w-4"}),"Role: ",p]})}),i.jsxs(Wa,{children:[i.jsx(zt,{onClick:()=>x("all"),children:"All"}),i.jsx(zt,{onClick:()=>x("super_admin"),children:"Super Admin"}),i.jsx(zt,{onClick:()=>x("brand_manager"),children:"Brand Manager"}),i.jsx(zt,{onClick:()=>x("retail_user"),children:"Retail User"}),i.jsx(zt,{onClick:()=>x("community_user"),children:"Community User"})]})]})]})]}),a&&i.jsxs("div",{className:"mb-4 p-4 bg-red-50 text-red-700 border border-red-200 rounded-md flex items-center",children:[i.jsx(js,{className:"h-5 w-5 mr-3"}),a]}),i.jsx("div",{className:"rounded-md border",children:i.jsxs(g6,{children:[i.jsx(p6,{children:i.jsxs(Vm,{children:[i.jsx(pd,{children:"User"}),i.jsx(pd,{children:"Role"}),i.jsx(pd,{children:"Status"}),i.jsx(pd,{children:"Verification"}),i.jsx(pd,{children:"Last Login"}),i.jsx(pd,{className:"text-right",children:"Actions"})]})}),i.jsx(x6,{children:s?i.jsx(Vm,{children:i.jsx(Ao,{colSpan:6,className:"text-center py-8",children:i.jsxs("div",{className:"flex justify-center items-center",children:[i.jsx(Da,{className:"h-8 w-8 animate-spin text-muted-foreground"}),i.jsx("span",{className:"ml-4 text-muted-foreground",children:"Loading users..."})]})})}):z.length>0?z.map(Z=>i.jsxs(Vm,{children:[i.jsxs(Ao,{children:[i.jsx("div",{className:"font-medium",children:`${Z.firstName||""} ${Z.lastName||""}`.trim()||"N/A"}),i.jsxs("div",{className:"text-sm text-muted-foreground flex items-center",children:[i.jsx(gO,{className:"mr-1 h-3 w-3"}),Z.email]})]}),i.jsx(Ao,{children:i.jsx(an,{variant:"outline",children:O(Z.role)})}),i.jsx(Ao,{children:F(Z.status)}),i.jsx(Ao,{children:J(Z.verificationStatus)}),i.jsx(Ao,{children:Z.lastLogin?new Date(Z.lastLogin).toLocaleDateString():"Never"}),i.jsx(Ao,{className:"text-right",children:i.jsxs(Ho,{children:[i.jsx(Wo,{asChild:!0,children:i.jsx(Se,{variant:"ghost",className:"h-8 w-8 p-0",children:i.jsx(hO,{className:"h-4 w-4"})})}),i.jsxs(Wa,{align:"end",children:[i.jsx(Uh,{children:"Actions"}),i.jsxs(zt,{children:[i.jsx(Zi,{className:"mr-2 h-4 w-4"}),"View Details"]}),t(["manage_users"])&&i.jsxs(i.Fragment,{children:[i.jsxs(zt,{onClick:()=>R(Z),children:[i.jsx(Ql,{className:"mr-2 h-4 w-4"}),"Edit User"]}),i.jsx(fi,{}),Z.status!=="suspended"?i.jsxs(zt,{onClick:()=>T({title:"Suspend User?",description:`Are you sure you want to suspend ${Z.firstName}? They will lose access to the platform.`,action:()=>D(Z.id,"suspended")}),children:[i.jsx(AX,{className:"mr-2 h-4 w-4"}),"Suspend"]}):i.jsxs(zt,{onClick:()=>T({title:"Activate User?",description:`Are you sure you want to reactivate ${Z.firstName}? They will regain access.`,action:()=>D(Z.id,"active")}),children:[i.jsx(HN,{className:"mr-2 h-4 w-4"}),"Activate"]}),i.jsxs(zt,{className:"text-red-600 focus:text-red-600 focus:bg-red-50",onClick:()=>T({title:"Delete User?",description:`This action is permanent. Are you sure you want to delete ${Z.firstName}?`,action:()=>A(Z.id)}),children:[i.jsx(ac,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]},Z.id)):i.jsx(Vm,{children:i.jsx(Ao,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No users found matching your criteria."})})})]})})]})]}),i.jsx(xc,{open:E,onOpenChange:C,children:i.jsxs(nl,{className:"sm:max-w-[600px]",children:[i.jsxs(yc,{children:[i.jsx(sl,{children:I?"Edit User":"Add New User"}),i.jsx(Ud,{children:I?"Update the details for this user.":"Create a new user profile in the system."})]}),i.jsx(sse,{currentUser:I,onSuccess:P})]})}),i.jsx(o6,{open:w,onOpenChange:j,children:i.jsxs(l6,{children:[i.jsxs(c6,{children:[i.jsx(u6,{children:S.title}),i.jsx(h6,{children:S.description})]}),i.jsxs(d6,{children:[i.jsx(m6,{children:"Cancel"}),i.jsx(f6,{onClick:()=>{S.action&&S.action(),j(!1)},children:"Confirm"})]})]})})]})}function Tse(){return i.jsx("div",{className:"container mx-auto",children:i.jsx(Cse,{})})}function Ase(){const[t,e]=b.useState([]);b.useEffect(()=>{const r=yt(Ue(ce,"users"),ht("verified","in",[!1,null])),a=Ln(r,l=>{const d=[];l.forEach(u=>d.push({id:u.id,...u.data()})),d.sort((u,f)=>u.verificationStatus==="pending"?-1:1),e(d)});return()=>a()},[]);async function n(r){const a=Je(ce,"users",r);await Qn(a,{verified:!0,verificationStatus:"verified",updatedAt:ze()})}async function s(r){const a=Je(ce,"users",r);await Qn(a,{verified:!1,verificationStatus:"rejected",updatedAt:ze()})}return i.jsxs("div",{className:"p-8",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Verify Staff"}),t.length===0?i.jsx("div",{className:"text-gray-600",children:"No pending users."}):i.jsx("div",{className:"space-y-3",children:t.map(r=>i.jsxs("div",{className:"flex items-center justify-between border rounded p-3",children:[i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"font-semibold",children:[r.firstName," ",r.lastName]}),i.jsx("div",{className:"text-gray-600",children:r.email}),i.jsxs("div",{className:"text-gray-600",children:["Role: ",r.role||"staff"," | Status: ",r.verificationStatus||"pending"]}),r.brandId&&i.jsxs("div",{className:"text-gray-600",children:["Brand: ",r.brandId]}),r.storeName&&i.jsxs("div",{className:"text-gray-600",children:["Store: ",r.storeName]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>n(r.uid||r.id),className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",children:"Approve"}),i.jsx("button",{onClick:()=>s(r.uid||r.id),className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",children:"Reject"})]})]},r.id))})]})}function kse(){const[t,e]=b.useState([]),[n,s]=b.useState(!0),[r,a]=b.useState("all"),[l,d]=b.useState(""),u=ks(),{userRoles:f}=bn(),m=f==null?void 0:f.includes("super_admin");b.useEffect(()=>{(async()=>{s(!0);try{let w=Ue(ce,"brands");r==="assigned"?w=yt(Ue(ce,"brands"),ht("managerId","!=",null)):r==="unassigned"&&(w=yt(Ue(ce,"brands"),ht("managerId","==",null)));const S=(await fs(w)).docs.map(E=>({id:E.id,...E.data()})),_=l?S.filter(E=>{var C;return(C=E.name)==null?void 0:C.toLowerCase().includes(l.toLowerCase())}):S;e(_)}catch(w){console.error("Error fetching brands:",w)}finally{s(!1)}})()},[r,l]);const p=async x=>{if(!m){alert("You don't have permission to delete brands.");return}if(window.confirm("Are you sure you want to delete this brand? This cannot be undone."))try{await Zs(Je(ce,"brands",x)),e(t.filter(w=>w.id!==x))}catch(w){console.error("Error deleting brand:",w),alert("Error deleting brand: "+w.message)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Brands"}),i.jsx("div",{className:"space-x-2",children:m&&i.jsx("button",{onClick:()=>u("/admin/brands/new"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Create Brand"})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:[i.jsxs("div",{className:"border-b border-gray-200 p-4 flex flex-col sm:flex-row justify-between space-y-3 sm:space-y-0",children:[i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>a("all"),className:`px-3 py-1 rounded-full text-sm font-medium ${r==="all"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"All Brands"}),i.jsx("button",{onClick:()=>a("assigned"),className:`px-3 py-1 rounded-full text-sm font-medium ${r==="assigned"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Assigned"}),i.jsx("button",{onClick:()=>a("unassigned"),className:`px-3 py-1 rounded-full text-sm font-medium ${r==="unassigned"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Unassigned"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Search brands...",value:l,onChange:x=>d(x.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md w-full sm:w-64"}),i.jsx("div",{className:"absolute left-3 top-2.5 text-gray-400",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),i.jsx("div",{className:"p-4",children:n?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),i.jsx("p",{className:"mt-2",children:"Loading brands..."})]}):t.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Brand"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Manager"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Templates"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(x=>{var w;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:x.logoUrl?i.jsx("img",{src:x.logoUrl,alt:x.name,className:"w-full h-full object-cover"}):i.jsx("span",{className:"text-gray-500 font-medium",children:((w=x.name)==null?void 0:w.charAt(0))||"?"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.name}),i.jsx("div",{className:"text-sm text-gray-500",children:x.description||"No description"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${x.managerId?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:x.managerId?"Managed":"Unassigned"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.managerName||"No manager assigned"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[x.templateCount||0," templates"]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>u(`/admin/brands/${x.id}`),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),m&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>u(`/admin/brands/${x.id}/edit`),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),i.jsx("button",{onClick:()=>p(x.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]})]},x.id)})})]})}):i.jsxs("div",{className:"text-center py-16",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No brands found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l?"No brands match your search. Try a different term.":"Get started by creating a new brand."}),i.jsx("div",{className:"mt-6",children:m&&!l&&i.jsxs("button",{onClick:()=>u("/admin/brands/new"),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[i.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Create Brand"]})})]})})]})]})}function Rse(){const{user:t}=bn();if(!t)return{canCreateTemplate:!1,canEditTemplate:!1,canCreateBrand:!1,canManageBrand:()=>!1,canManageUsers:!1,canCreateLesson:()=>!1,canEditLesson:()=>!1,canCreateCommunity:()=>!1,canEditCommunity:()=>!1};const e=t.role===Km.SUPER_ADMIN,n=t.role===Km.BRAND_MANAGER;return{canCreateTemplate:e,canEditTemplate:e,canCreateBrand:e,canManageBrand:s=>e?!0:t.managedBrands&&t.managedBrands.includes(s),canManageUsers:e,canCreateLesson:s=>e?!0:n&&t.managedBrands&&t.managedBrands.includes(s),canEditLesson:s=>e?!0:n&&t.managedBrands&&t.managedBrands.includes(s),canCreateCommunity:s=>e?!0:n&&t.managedBrands&&t.managedBrands.includes(s),canEditCommunity:s=>e?!0:n&&t.managedBrands&&t.managedBrands.includes(s)}}const Ise=async()=>{console.log("Seeding templates to Firestore...");try{return await qr(Je(ce,"templates","template-lesson-1"),{name:"Standard Lesson Template",description:"A standard template for creating lesson content with text, image, and quiz sections",type:"lesson",createdAt:ze(),updatedAt:ze(),createdBy:"admin",isGlobal:!0,sections:[{id:"section-intro",type:"text",title:"Introduction",required:!0,placeholder:"Introduce your lesson topic here...",editorConfig:{toolbar:["bold","italic","heading","link"]}},{id:"section-content",type:"text",title:"Main Content",required:!0,placeholder:"Add the main lesson content here...",editorConfig:{toolbar:["bold","italic","heading","link","image","list"]}},{id:"section-image",type:"image",title:"Featured Image",required:!1,placeholder:"Upload an image for this lesson"},{id:"section-quiz",type:"quiz",title:"Knowledge Check",required:!1,placeholder:"Add quiz questions to test understanding",quizConfig:{minQuestions:1,maxQuestions:5,passingScore:70}}]}),await qr(Je(ce,"templates","template-community-1"),{name:"Standard Community Template",description:"A standard template for creating online communities with discussion areas and resources",type:"community",createdAt:ze(),updatedAt:ze(),createdBy:"admin",isGlobal:!0,sections:[{id:"section-about",type:"text",title:"About This Community",required:!0,placeholder:"Describe what this community is about and who it's for"},{id:"section-discussions",type:"discussion",title:"Discussions",required:!0,discussionConfig:{categories:["General","Questions","Announcements"],requireApproval:!1}},{id:"section-resources",type:"resources",title:"Resources",required:!1,resourcesConfig:{types:["documents","links","videos"]}},{id:"section-events",type:"events",title:"Events",required:!1,eventsConfig:{allowRSVP:!0}}]}),console.log("✓ Templates seeded successfully"),!0}catch(t){return console.error("Error seeding templates:",t),!1}};function OR(){const[t,e]=b.useState([]),[n,s]=b.useState(!0),[r,a]=b.useState("all"),l=ks(),d=Rse();b.useEffect(()=>{(async()=>{s(!0);try{let m;r==="all"?m=Ue(ce,"templates"):m=yt(Ue(ce,"templates"),ht("type","==",r));const x=(await fs(m)).docs.map(w=>({id:w.id,...w.data()}));e(x)}catch(m){console.error("Error fetching templates:",m)}finally{s(!1)}})()},[r]);const u=async()=>{window.confirm("This will create sample templates in your database. Continue?")&&await Ise()&&window.location.reload()};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Content Templates"}),i.jsxs("div",{className:"space-x-2",children:[d.canCreateTemplate&&i.jsx("button",{onClick:()=>l("/admin/templates/new"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Create Template"}),window.location.hostname==="localhost"&&t.length===0&&i.jsx("button",{onClick:u,className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Seed Test Data"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:[i.jsx("div",{className:"border-b border-gray-200 p-4 flex items-center justify-between",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>a("all"),className:`px-3 py-1 rounded-full text-sm font-medium ${r==="all"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"All Templates"}),i.jsx("button",{onClick:()=>a("lesson"),className:`px-3 py-1 rounded-full text-sm font-medium ${r==="lesson"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Lesson Templates"}),i.jsx("button",{onClick:()=>a("community"),className:`px-3 py-1 rounded-full text-sm font-medium ${r==="community"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Community Templates"})]})}),i.jsx("div",{className:"p-4",children:n?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-gray-500",children:"Loading templates..."})}):t.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(f=>i.jsx(Dse,{template:f,onEdit:()=>l(`/admin/templates/${f.id}/edit`),onView:()=>l(`/admin/templates/${f.id}/view`),canEdit:d.canEditTemplate},f.id))}):i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-gray-500",children:"No templates found. Create your first template to get started!"})})})]})]})}function Dse({template:t,onEdit:e,onView:n,canEdit:s}){var a;const r=l=>l==="lesson"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800";return i.jsxs("div",{className:"bg-white border rounded-lg shadow-sm overflow-hidden hover:shadow transition-shadow duration-200",children:[i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${r(t.type)}`,children:t.type==="lesson"?"Lesson":"Community"}),t.isGlobal&&i.jsx("span",{className:"inline-block px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"Global"})]}),i.jsx("h3",{className:"text-lg font-semibold mt-2",children:t.name}),i.jsx("p",{className:"text-gray-600 mt-1 text-sm line-clamp-2",children:t.description}),i.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[((a=t.sections)==null?void 0:a.length)||0," sections"]})]}),i.jsxs("div",{className:"px-5 py-3 bg-gray-50 border-t flex justify-between",children:[i.jsxs("button",{onClick:n,className:"text-sm text-gray-700 hover:text-gray-900 flex items-center",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview"]}),s&&i.jsxs("button",{onClick:e,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})]})}function LR(){const t=Hr(),e=ks(),{user:n}=bn(),{id:s}=Nc(),r=t.pathname.includes("/templates/new"),[a,l]=b.useState(!r),[d,u]=b.useState(!1),[f,m]=b.useState({name:"",description:"",type:"lesson",isGlobal:!0,sections:[]});b.useEffect(()=>{if(r){console.log("Creating new template"),l(!1);return}if(!s){console.error("No template ID provided"),l(!1);return}(async()=>{try{console.log(`Fetching template with ID: ${s}`);const C=Je(ce,"templates",s),I=await _r(C);I.exists()?(console.log("Template data loaded"),m(I.data())):(console.error("Template not found"),e("/admin/templates"))}catch(C){console.error("Error fetching template:",C)}finally{l(!1)}})()},[s,r,e]);const p=E=>{const{name:C,value:I,type:M,checked:V}=E.target;m(z=>({...z,[C]:M==="checkbox"?V:I}))},x=()=>{const E=`section-${Date.now()}`;m(C=>({...C,sections:[...C.sections,{id:E,type:"text",title:"New Section",required:!1,placeholder:""}]}))},w=(E,C)=>{m(I=>{const M=[...I.sections];return M[E]={...M[E],...C},{...I,sections:M}})},j=E=>{m(C=>{const I=[...C.sections];return I.splice(E,1),{...C,sections:I}})},S=(E,C)=>{C==="up"&&E===0||C==="down"&&E===f.sections.length-1||m(I=>{const M=[...I.sections],V=C==="up"?E-1:E+1;return[M[E],M[V]]=[M[V],M[E]],{...I,sections:M}})},_=async E=>{E.preventDefault(),u(!0);try{const C={...f,updatedAt:ze()};if(console.log("Preparing to save template:",C),r){console.log("Creating new template"),C.createdAt=ze(),C.createdBy=(n==null?void 0:n.uid)||"unknown";const M=(await cr(Ue(ce,"templates"),C)).id;console.log("Created new template with ID:",M),e(`/admin/templates/${M}`)}else{if(!s)throw new Error("Missing template ID");console.log(`Updating template with ID: ${s}`);const I=Je(ce,"templates",s);await Qn(I,C),console.log("Template updated successfully"),e(`/admin/templates/${s}`)}}catch(C){console.error("Error saving template:",C),alert(`Failed to save template: ${C.message}`)}finally{u(!1)}};return a?i.jsx(Xn,{requireSuperAdmin:!0,children:i.jsx("div",{className:"text-center py-8",children:"Loading template..."})}):i.jsx(Xn,{requireSuperAdmin:!0,children:i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsx("h1",{className:"text-2xl font-bold",children:r?"Create New Template":"Edit Template"})}),i.jsxs("form",{onSubmit:_,className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-lg font-medium border-b pb-2",children:"Basic Information"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Name *"}),i.jsx("input",{type:"text",name:"name",value:f.name,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{name:"description",value:f.description,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:"3"})]}),i.jsxs("div",{className:"flex space-x-6",children:[i.jsxs("div",{className:"w-1/2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Type *"}),i.jsxs("select",{name:"type",value:f.type,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:[i.jsx("option",{value:"lesson",children:"Lesson"}),i.jsx("option",{value:"community",children:"Community"})]})]}),i.jsxs("div",{className:"w-1/2 flex items-center pt-6",children:[i.jsx("input",{type:"checkbox",id:"isGlobal",name:"isGlobal",checked:f.isGlobal,onChange:p,className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"isGlobal",className:"ml-2 text-sm text-gray-700",children:"Available to all brands (Global Template)"})]})]})]}),i.jsxs("div",{className:"space-y-4 mt-8",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-lg font-medium border-b pb-2",children:"Template Sections"}),i.jsx("button",{type:"button",onClick:x,className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-md text-sm hover:bg-blue-100",children:"Add Section"})]}),f.sections.length===0&&i.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-300 rounded-md p-8 text-center",children:i.jsx("p",{className:"text-gray-500",children:'No sections added yet. Click "Add Section" to create your first section.'})}),f.sections.map((E,C)=>{var I,M,V,z;return i.jsxs("div",{className:"border border-gray-200 rounded-md p-4 bg-gray-50",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h3",{className:"font-medium",children:["Section ",C+1]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>S(C,"up"),disabled:C===0,className:`p-1 rounded ${C===0?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:bg-gray-200"}`,title:"Move Up",children:"↑"}),i.jsx("button",{type:"button",onClick:()=>S(C,"down"),disabled:C===f.sections.length-1,className:`p-1 rounded ${C===f.sections.length-1?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:bg-gray-200"}`,title:"Move Down",children:"↓"}),i.jsx("button",{type:"button",onClick:()=>j(C),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Remove Section",children:"×"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section Title"}),i.jsx("input",{type:"text",value:E.title,onChange:D=>w(C,{title:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section Type"}),i.jsxs("select",{value:E.type,onChange:D=>w(C,{type:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[i.jsx("option",{value:"text",children:"Text Content"}),i.jsx("option",{value:"image",children:"Image"}),i.jsx("option",{value:"video",children:"Video"}),i.jsx("option",{value:"quiz",children:"Quiz"}),f.type==="community"&&i.jsxs(i.Fragment,{children:[i.jsx("option",{value:"discussion",children:"Discussion"}),i.jsx("option",{value:"events",children:"Events"}),i.jsx("option",{value:"resources",children:"Resources"})]})]})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Placeholder Text"}),i.jsx("input",{type:"text",value:E.placeholder||"",onChange:D=>w(C,{placeholder:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Guidance text for users filling this section"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:`required-${E.id}`,checked:E.required||!1,onChange:D=>w(C,{required:D.target.checked}),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),i.jsx("label",{htmlFor:`required-${E.id}`,className:"ml-2 text-sm text-gray-700",children:"Required Section"})]}),E.type==="quiz"&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quiz Settings"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Min Questions"}),i.jsx("input",{type:"number",min:"1",value:((I=E.quizConfig)==null?void 0:I.minQuestions)||1,onChange:D=>w(C,{quizConfig:{...E.quizConfig,minQuestions:parseInt(D.target.value)}}),className:"w-full px-3 py-1 border border-gray-300 rounded-md text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Max Questions"}),i.jsx("input",{type:"number",min:"1",value:((M=E.quizConfig)==null?void 0:M.maxQuestions)||5,onChange:D=>w(C,{quizConfig:{...E.quizConfig,maxQuestions:parseInt(D.target.value)}}),className:"w-full px-3 py-1 border border-gray-300 rounded-md text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Passing Score %"}),i.jsx("input",{type:"number",min:"0",max:"100",value:((V=E.quizConfig)==null?void 0:V.passingScore)||70,onChange:D=>w(C,{quizConfig:{...E.quizConfig,passingScore:parseInt(D.target.value)}}),className:"w-full px-3 py-1 border border-gray-300 rounded-md text-sm"})]})]})]}),E.type==="discussion"&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Discussion Settings"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:`requireApproval-${E.id}`,checked:((z=E.discussionConfig)==null?void 0:z.requireApproval)||!1,onChange:D=>w(C,{discussionConfig:{...E.discussionConfig,requireApproval:D.target.checked}}),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),i.jsx("label",{htmlFor:`requireApproval-${E.id}`,className:"ml-2 text-sm text-gray-700",children:"Require post approval"})]})]})]},E.id)})]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t flex justify-end space-x-3",children:[i.jsx("button",{type:"button",onClick:()=>e("/admin/templates"),className:"px-4 py-2 border border-gray-300 rounded shadow-sm bg-white text-gray-700 hover:bg-gray-50",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded shadow-sm hover:bg-blue-700 disabled:bg-blue-400",children:d?"Saving...":r?"Create Template":"Save Changes"})]})]})]})})}function VR(){const{id:t}=Nc(),e=ks(),{user:n,userRoles:s}=bn(),[r,a]=b.useState(null),[l,d]=b.useState(!0),[u,f]=b.useState("desktop"),[m,p]=b.useState("preview"),[x,w]=b.useState(null),j=s==null?void 0:s.includes("super_admin");return b.useEffect(()=>{(async()=>{try{if(!t)throw new Error("Template ID is required");const _=Je(ce,"templates",t),E=await _r(_);E.exists()?a({id:E.id,...E.data()}):(w("Template not found"),console.error("Template not found"))}catch(_){w(`Error loading template: ${_.message}`),console.error("Error fetching template:",_)}finally{d(!1)}})()},[t]),l?i.jsx(Xn,{requireSuperAdmin:!1,children:i.jsx("div",{className:"max-w-7xl mx-auto",children:i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),i.jsx("p",{className:"mt-2",children:"Loading template..."})]})})}):x?i.jsx(Xn,{requireSuperAdmin:!1,children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm text-red-700",children:x})})]})}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx("button",{onClick:()=>e("/admin/templates"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Back to Templates"})})]})}):r?i.jsx(Xn,{requireSuperAdmin:!1,children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:r.name}),i.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${r.type==="lesson"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:r.type==="lesson"?"Lesson Template":"Community Template"}),r.isGlobal&&i.jsx("span",{className:"inline-block px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"Global Template"})]})]}),i.jsxs("div",{className:"space-x-2",children:[i.jsx("button",{onClick:()=>e("/admin/templates"),className:"px-3 py-1 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",children:"Back to Templates"}),j&&i.jsx("button",{onClick:()=>e(`/admin/templates/${t}/edit`),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Edit Template"})]})]}),r.description&&i.jsx("div",{className:"mb-6",children:i.jsx("p",{className:"text-gray-600",children:r.description})}),i.jsx("div",{className:"border-b border-gray-200 mb-6",children:i.jsxs("nav",{className:"flex space-x-8",children:[i.jsx("button",{onClick:()=>p("preview"),className:`pb-4 px-1 ${m==="preview"?"border-b-2 border-blue-500 text-blue-600 font-medium":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Preview"}),i.jsx("button",{onClick:()=>p("structure"),className:`pb-4 px-1 ${m==="structure"?"border-b-2 border-blue-500 text-blue-600 font-medium":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Template Structure"})]})}),m==="preview"?i.jsxs("div",{children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsxs("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[i.jsx("button",{type:"button",onClick:()=>f("desktop"),className:`px-4 py-2 text-sm font-medium rounded-l-lg ${u==="desktop"?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:i.jsxs("span",{className:"flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Desktop"]})}),i.jsx("button",{type:"button",onClick:()=>f("mobile"),className:`px-4 py-2 text-sm font-medium rounded-r-lg ${u==="mobile"?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:i.jsxs("span",{className:"flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Mobile"]})})]})}),i.jsx("div",{className:"flex justify-center pb-12",children:i.jsx("div",{className:`${u==="mobile"?"w-full max-w-xs":"w-full max-w-4xl"} transition-all duration-300`,children:i.jsxs("div",{className:`bg-white border rounded-lg shadow-lg overflow-hidden ${u==="mobile"?"mx-auto":""}`,children:[u==="mobile"&&i.jsx("div",{className:"h-6 bg-gray-800 flex justify-center items-center rounded-t-lg",children:i.jsx("div",{className:"w-20 h-1 bg-gray-600 rounded-full"})}),i.jsxs("div",{className:`${u==="mobile"?"p-3":"p-6"}`,children:[i.jsx("h2",{className:"text-lg font-bold mb-4 text-center border-b pb-2",children:r.name}),r.sections&&r.sections.length>0?i.jsx("div",{className:"space-y-6",children:r.sections.map(S=>i.jsx(Mse,{section:S,viewMode:u},S.id))}):i.jsx("div",{className:"text-center py-8 text-gray-500 italic",children:"This template has no sections defined yet."})]})]})})})]}):i.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-medium mb-4 border-b pb-2",children:"Template Structure"}),r.sections&&r.sections.length>0?i.jsx("div",{className:"space-y-4",children:r.sections.map((S,_)=>i.jsxs("div",{className:"border border-gray-200 rounded-md p-4",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"bg-gray-100 text-gray-700 w-6 h-6 rounded-full inline-flex items-center justify-center mr-2 text-sm",children:_+1}),i.jsx("span",{className:"font-medium",children:S.title}),S.required&&i.jsx("span",{className:"ml-2 text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:"Required"})]}),i.jsx("span",{className:"text-sm text-gray-500 font-medium",children:S.type.charAt(0).toUpperCase()+S.type.slice(1)})]}),S.placeholder&&i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:i.jsxs("p",{className:"italic",children:['Placeholder: "',S.placeholder,'"']})}),S.type==="quiz"&&S.quizConfig&&i.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Quiz with ",S.quizConfig.minQuestions||1," to ",S.quizConfig.maxQuestions||5," questions",S.quizConfig.passingScore&&` (${S.quizConfig.passingScore}% passing score)`]})}),S.type==="discussion"&&S.discussionConfig&&i.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Discussion board",S.discussionConfig.requireApproval?" (posts require approval)":" (open posting)"]})})]},S.id))}):i.jsx("p",{className:"text-gray-500 italic",children:"This template has no sections defined yet."})]})})]})}):i.jsx(Xn,{requireSuperAdmin:!1,children:i.jsx("div",{className:"text-center py-8 text-red-600",children:"Template not found"})})}function Mse({section:t,viewMode:e}){switch(t.type){case"text":return i.jsxs("div",{className:"border border-gray-200 rounded-md p-4",children:[i.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:t.title}),i.jsx("div",{className:"prose max-w-none",children:i.jsx("p",{className:"text-gray-500 italic",children:t.placeholder||"Text content will appear here"})})]});case"image":return i.jsxs("div",{className:"border border-gray-200 rounded-md p-4",children:[i.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:t.title}),i.jsx("div",{className:`bg-gray-100 rounded-md flex items-center justify-center ${e==="mobile"?"h-40":"h-64"}`,children:i.jsxs("div",{className:"text-gray-400 flex flex-col items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i.jsx("span",{className:"mt-2",children:t.placeholder||"Image will appear here"})]})})]});case"video":return i.jsxs("div",{className:"border border-gray-200 rounded-md p-4",children:[i.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:t.title}),i.jsx("div",{className:`bg-gray-100 rounded-md flex items-center justify-center ${e==="mobile"?"h-48":"h-72"}`,children:i.jsxs("div",{className:"text-gray-400 flex flex-col items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),i.jsx("span",{className:"mt-2",children:t.placeholder||"Video will appear here"})]})})]});case"quiz":return i.jsxs("div",{className:"border border-gray-200 rounded-md p-4",children:[i.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:t.title}),i.jsxs("div",{className:"bg-blue-50 rounded-md p-4",children:[i.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Sample Quiz Question"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"radio",id:"option-1",name:"sample-quiz",className:"h-4 w-4 text-blue-600"}),i.jsx("label",{htmlFor:"option-1",className:"ml-2 text-gray-700",children:"Answer option 1"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"radio",id:"option-2",name:"sample-quiz",className:"h-4 w-4 text-blue-600"}),i.jsx("label",{htmlFor:"option-2",className:"ml-2 text-gray-700",children:"Answer option 2"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"radio",id:"option-3",name:"sample-quiz",className:"h-4 w-4 text-blue-600"}),i.jsx("label",{htmlFor:"option-3",className:"ml-2 text-gray-700",children:"Answer option 3"})]})]}),i.jsx("div",{className:"mt-4 text-sm text-gray-500",children:t.quizConfig?i.jsxs("p",{children:[t.quizConfig.minQuestions||1," to ",t.quizConfig.maxQuestions||5," questions with ",t.quizConfig.passingScore||70,"% passing score"]}):i.jsx("p",{children:"Quiz settings not configured"})})]})]});case"discussion":return i.jsxs("div",{className:"border border-gray-200 rounded-md p-4",children:[i.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:t.title}),i.jsxs("div",{className:"bg-purple-50 rounded-md p-4",children:[i.jsx("div",{className:"border-b pb-2 mb-3",children:i.jsx("p",{className:"font-medium",children:"Discussion Topics"})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"p-2 bg-white rounded border border-gray-200",children:[i.jsx("p",{className:"font-medium",children:"Sample Discussion Topic"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Started by User • 2 replies"})]}),i.jsxs("div",{className:"p-2 bg-white rounded border border-gray-200",children:[i.jsx("p",{className:"font-medium",children:"Another Discussion Topic"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Started by User • 5 replies"})]})]}),i.jsx("button",{className:"mt-3 text-sm text-purple-600 font-medium",children:"+ New Topic"})]})]});case"events":return i.jsxs("div",{className:"border border-gray-200 rounded-md p-4",children:[i.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:t.title}),i.jsxs("div",{className:"bg-green-50 rounded-md p-4",children:[i.jsx("div",{className:"border-b pb-2 mb-3",children:i.jsx("p",{className:"font-medium",children:"Upcoming Events"})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"p-2 bg-white rounded border border-gray-200",children:[i.jsx("p",{className:"font-medium",children:"Virtual Meetup"}),i.jsx("p",{className:"text-sm text-gray-500",children:"July 15, 2025 • 3:00 PM"})]}),i.jsxs("div",{className:"p-2 bg-white rounded border border-gray-200",children:[i.jsx("p",{className:"font-medium",children:"Workshop"}),i.jsx("p",{className:"text-sm text-gray-500",children:"July 22, 2025 • 10:00 AM"})]})]}),i.jsx("button",{className:"mt-3 text-sm text-green-600 font-medium",children:"+ New Event"})]})]});case"resources":return i.jsxs("div",{className:"border border-gray-200 rounded-md p-4",children:[i.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:t.title}),i.jsxs("div",{className:"bg-amber-50 rounded-md p-4",children:[i.jsx("div",{className:"border-b pb-2 mb-3",children:i.jsx("p",{className:"font-medium",children:"Resources"})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"p-2 bg-white rounded border border-gray-200 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-amber-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),i.jsx("p",{children:"Sample PDF Resource"})]}),i.jsxs("div",{className:"p-2 bg-white rounded border border-gray-200 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-amber-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),i.jsx("p",{children:"External Reference Link"})]})]}),i.jsx("button",{className:"mt-3 text-sm text-amber-600 font-medium",children:"+ Add Resource"})]})]});default:return i.jsxs("div",{className:"border border-gray-200 rounded-md p-4",children:[i.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:t.title}),i.jsx("p",{className:"text-gray-500 italic",children:t.placeholder||`${t.type} content will appear here`})]})}}function Pse(){const t=[{title:"Total Visitors",value:"12,543",change:"+14%",trend:"up",period:"from last month",icon:i.jsx(Ts,{className:"h-4 w-4 text-muted-foreground"})},{title:"Engagement Rate",value:"58.3%",change:"+7.2%",trend:"up",period:"from last month",icon:i.jsx(Zi,{className:"h-4 w-4 text-muted-foreground"})},{title:"Avg. Session Duration",value:"3m 42s",change:"+12s",trend:"up",period:"from last month",icon:i.jsx(Qm,{className:"h-4 w-4 text-muted-foreground"})},{title:"Conversion Rate",value:"3.2%",change:"-0.4%",trend:"down",period:"from last month",icon:i.jsx(uX,{className:"h-4 w-4 text-muted-foreground"})},{title:"Revenue",value:"$48,574",change:"+5.4%",trend:"up",period:"from last month",icon:i.jsx(pc,{className:"h-4 w-4 text-muted-foreground"})},{title:"Growth Rate",value:"12.5%",change:"+2.1%",trend:"up",period:"from last month",icon:i.jsx(Od,{className:"h-4 w-4 text-muted-foreground"})}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Monitor platform performance, user engagement, and business metrics"})]}),i.jsxs(an,{variant:"outline",className:"text-blue-600 border-blue-600",children:[i.jsx(qN,{className:"mr-1 h-3.5 w-3.5"}),"Placeholder"]})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map((e,n)=>i.jsxs(De,{children:[i.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(nt,{className:"text-sm font-medium",children:e.title}),e.icon]}),i.jsxs(He,{children:[i.jsx("div",{className:"text-2xl font-bold",children:e.value}),i.jsxs("p",{className:"text-xs text-muted-foreground flex items-center",children:[e.trend==="up"?i.jsx(OY,{className:"mr-1 h-3.5 w-3.5 text-green-500"}):i.jsx(RY,{className:"mr-1 h-3.5 w-3.5 text-red-500"}),i.jsx("span",{className:e.trend==="up"?"text-green-500":"text-red-500",children:e.change}),i.jsx("span",{className:"ml-1",children:e.period})]})]})]},n))}),i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Analytics Implementation"}),i.jsx(Vt,{children:"This is a placeholder for the analytics module"})]}),i.jsxs(He,{children:[i.jsx("p",{className:"text-muted-foreground",children:"This is a placeholder implementation of the analytics dashboard. The final module will include:"}),i.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"Real-time data visualization"}),i.jsx("li",{children:"Custom date range selection"}),i.jsx("li",{children:"Detailed reports and exports"}),i.jsx("li",{children:"User behavior analysis"}),i.jsx("li",{children:"Conversion funnels and goal tracking"}),i.jsx("li",{children:"Integration with Google Analytics"})]})]})]})]})}function Ose(){const t=[{id:1,name:"Eco-Friendly Water Bottle",category:"Drinkware",price:"$24.99",stock:120,status:"Active"},{id:2,name:"Organic Cotton T-Shirt",category:"Apparel",price:"$32.00",stock:85,status:"Active"},{id:3,name:"Bamboo Phone Case",category:"Tech",price:"$18.50",stock:64,status:"Active"},{id:4,name:"Recycled Notebook",category:"Office",price:"$12.99",stock:200,status:"Active"},{id:5,name:"Solar Power Bank",category:"Tech",price:"$45.00",stock:32,status:"Low Stock"}];return i.jsxs("div",{children:[i.jsxs("div",{className:"sm:flex sm:items-center mb-8",children:[i.jsxs("div",{className:"sm:flex-auto",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Products Management"}),i.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Manage your product catalog and inventory."})]}),i.jsx("div",{className:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none",children:i.jsxs("button",{type:"button",className:"flex items-center justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500",children:[i.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Add Product"]})})]}),i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(qo,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),i.jsx("input",{type:"text",className:"block w-full rounded-md border-0 py-1.5 pl-10 pr-3 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6",placeholder:"Search products..."})]})}),i.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:i.jsx("div",{className:"px-4 py-5 sm:p-6",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"relative px-6 py-3",children:i.jsx("span",{className:"sr-only",children:"Actions"})})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:i.jsx("div",{className:"h-10 w-10 rounded-lg bg-gray-200 flex items-center justify-center",children:i.jsx(i0,{className:"h-5 w-5 text-gray-500"})})}),i.jsx("div",{className:"ml-4",children:i.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name})})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.category}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.price}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.stock}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e.status==="Active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.status})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:"Edit"})})]},e.id))})]})})})})]})}function Lse(){const{canAccess:t,role:e}=Mv(),[n,s]=b.useState([{id:"1",type:"user_registration",title:"New User Registration",description:"Sarah Johnson registered as a new user",actor:{id:"user_123",name:"Sarah Johnson",email:"sarah.johnson@email.com",avatar:"/avatars/sarah.jpg",role:"user"},target:{type:"user",id:"user_123",name:"Sarah Johnson"},metadata:{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",ipAddress:"192.168.1.100",location:"New York, NY"},timestamp:"2024-01-26T14:30:00Z",severity:"info",category:"user_management",status:"completed"},{id:"2",type:"content_upload",title:"Content Upload",description:'GreenLeaf Organics uploaded new lesson "Sustainable Living Basics"',actor:{id:"brand_1",name:"GreenLeaf Organics",email:"admin@greenleaf.com",avatar:"/avatars/greenleaf.jpg",role:"brand_admin"},target:{type:"content",id:"content_1",name:"Sustainable Living Basics"},metadata:{fileSize:"45.2 MB",fileType:"video/mp4",duration:"25 minutes",category:"Environmental"},timestamp:"2024-01-26T13:15:00Z",severity:"info",category:"content_management",status:"pending_approval"},{id:"3",type:"verification_submitted",title:"Verification Request",description:"EcoTech Solutions submitted verification documents",actor:{id:"brand_2",name:"EcoTech Solutions",email:"verify@ecotech.com",avatar:"/avatars/ecotech.jpg",role:"brand_admin"},target:{type:"verification",id:"verify_456",name:"Business License Verification"},metadata:{documentCount:3,documentTypes:["business_license","tax_id","insurance"],submissionMethod:"web_upload"},timestamp:"2024-01-26T12:45:00Z",severity:"warning",category:"verification",status:"pending_review"},{id:"4",type:"payment_received",title:"Payment Received",description:"Monthly payment received from GreenLeaf Organics",actor:{id:"system",name:"Payment System",email:"payments@engagenatural.com",avatar:"/avatars/system.jpg",role:"system"},target:{type:"payment",id:"payment_789",name:"Monthly Subscription - January 2024"},metadata:{amount:"$5,500.00",paymentMethod:"Credit Card",transactionId:"txn_abc123",brandId:"brand_1"},timestamp:"2024-01-26T11:30:00Z",severity:"success",category:"financial",status:"completed"},{id:"5",type:"security_alert",title:"Security Alert",description:"Multiple failed login attempts detected",actor:{id:"security_system",name:"Security Monitor",email:"security@engagenatural.com",avatar:"/avatars/security.jpg",role:"system"},target:{type:"security",id:"alert_001",name:"Failed Login Attempts"},metadata:{attemptCount:5,ipAddress:"203.0.113.42",targetAccount:"admin@greenleaf.com",timeWindow:"10 minutes"},timestamp:"2024-01-26T10:15:00Z",severity:"critical",category:"security",status:"investigating"},{id:"6",type:"brand_contract_signed",title:"Contract Signed",description:"Pure Beauty Co signed annual partnership contract",actor:{id:"brand_3",name:"Pure Beauty Co",email:"contracts@purebeauty.com",avatar:"/avatars/purebeauty.jpg",role:"brand_admin"},target:{type:"contract",id:"contract_456",name:"Annual Partnership Agreement 2024"},metadata:{contractValue:"$60,000",contractType:"yearly",startDate:"2024-02-01",endDate:"2025-01-31"},timestamp:"2024-01-26T09:45:00Z",severity:"success",category:"business",status:"completed"},{id:"7",type:"system_maintenance",title:"System Maintenance",description:"Scheduled database optimization completed",actor:{id:"system",name:"System Administrator",email:"admin@engagenatural.com",avatar:"/avatars/admin.jpg",role:"super_admin"},target:{type:"system",id:"maintenance_001",name:"Database Optimization"},metadata:{duration:"45 minutes",affectedServices:["content_delivery","user_analytics"],performanceImprovement:"15%"},timestamp:"2024-01-26T08:00:00Z",severity:"info",category:"system",status:"completed"},{id:"8",type:"content_approved",title:"Content Approved",description:'Lesson "Eco-Tech Innovation Workshop" approved for publication',actor:{id:"admin_1",name:"Admin User",email:"admin@engagenatural.com",avatar:"/avatars/admin.jpg",role:"super_admin"},target:{type:"content",id:"content_4",name:"Eco-Tech Innovation Workshop"},metadata:{reviewTime:"2 hours",approvalNotes:"High quality content, approved for immediate publication",brandId:"brand_2"},timestamp:"2024-01-26T07:30:00Z",severity:"success",category:"content_management",status:"completed"}]),[r,a]=b.useState(""),[l,d]=b.useState("all"),[u,f]=b.useState("all"),[m,p]=b.useState("24h"),[x,w]=b.useState(null),[j,S]=b.useState(!1),_={totalActivities:n.length,criticalAlerts:n.filter(A=>A.severity==="critical").length,pendingActions:n.filter(A=>A.status==="pending_review"||A.status==="pending_approval").length,recentUsers:n.filter(A=>A.type==="user_registration"&&E(A.timestamp,"24h")).length,revenueEvents:n.filter(A=>A.category==="financial").length,securityEvents:n.filter(A=>A.category==="security").length};function E(A,T){const R=new Date,P=new Date(A),O=(R-P)/(1e3*60*60);switch(T){case"1h":return O<=1;case"24h":return O<=24;case"7d":return O<=168;case"30d":return O<=720;default:return!0}}const C=n.filter(A=>{const T=A.title.toLowerCase().includes(r.toLowerCase())||A.description.toLowerCase().includes(r.toLowerCase())||A.actor.name.toLowerCase().includes(r.toLowerCase()),R=l==="all"||A.category===l,P=u==="all"||A.severity===u,O=m==="all"||E(A.timestamp,m);return T&&R&&P&&O}),I=A=>{switch(A){case"critical":return i.jsxs(an,{className:"bg-red-100 text-red-800 border-red-200",children:[i.jsx(Bx,{className:"w-3 h-3 mr-1"}),"Critical"]});case"warning":return i.jsxs(an,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[i.jsx(Bx,{className:"w-3 h-3 mr-1"}),"Warning"]});case"success":return i.jsxs(an,{className:"bg-green-100 text-green-800 border-green-200",children:[i.jsx(Ur,{className:"w-3 h-3 mr-1"}),"Success"]});case"info":return i.jsxs(an,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[i.jsx(Xl,{className:"w-3 h-3 mr-1"}),"Info"]});default:return i.jsx(an,{variant:"secondary",children:A})}},M=A=>{switch(A){case"completed":return i.jsxs(an,{className:"bg-green-100 text-green-800 border-green-200",children:[i.jsx(Ur,{className:"w-3 h-3 mr-1"}),"Completed"]});case"pending_review":return i.jsxs(an,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[i.jsx(Qm,{className:"w-3 h-3 mr-1"}),"Pending Review"]});case"pending_approval":return i.jsxs(an,{className:"bg-orange-100 text-orange-800 border-orange-200",children:[i.jsx(Qm,{className:"w-3 h-3 mr-1"}),"Pending Approval"]});case"investigating":return i.jsxs(an,{className:"bg-red-100 text-red-800 border-red-200",children:[i.jsx(qo,{className:"w-3 h-3 mr-1"}),"Investigating"]});default:return i.jsx(an,{variant:"secondary",children:A})}},V=A=>{switch(A){case"user_registration":return i.jsx(c0,{className:"h-4 w-4"});case"content_upload":return i.jsx(l0,{className:"h-4 w-4"});case"verification_submitted":return i.jsx(o0,{className:"h-4 w-4"});case"payment_received":return i.jsx(pc,{className:"h-4 w-4"});case"security_alert":return i.jsx(Bx,{className:"h-4 w-4"});case"brand_contract_signed":return i.jsx(ph,{className:"h-4 w-4"});case"system_maintenance":return i.jsx(tl,{className:"h-4 w-4"});case"content_approved":return i.jsx(Ur,{className:"h-4 w-4"});default:return i.jsx(Xl,{className:"h-4 w-4"})}},z=A=>{const T=new Date(A),P=Math.floor((new Date-T)/(1e3*60));return P<1?"Just now":P<60?`${P}m ago`:P<1440?`${Math.floor(P/60)}h ago`:T.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},D=(A,T)=>{console.log(`${A} activity:`,T)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Activity Feed"}),i.jsx("p",{className:"text-muted-foreground",children:"Real-time monitoring of system activities, user actions, and business events"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Se,{variant:"outline",children:[i.jsx($N,{className:"mr-2 h-4 w-4"}),"Notifications"]}),i.jsxs(Se,{variant:"outline",children:[i.jsx(Sv,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-6",children:[i.jsxs(De,{children:[i.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(nt,{className:"text-sm font-medium",children:"Total Activities"}),i.jsx(Xl,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(He,{children:[i.jsx("div",{className:"text-2xl font-bold",children:_.totalActivities}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 24 hours"})]})]}),i.jsxs(De,{children:[i.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(nt,{className:"text-sm font-medium",children:"Critical Alerts"}),i.jsx(Bx,{className:"h-4 w-4 text-red-500"})]}),i.jsxs(He,{children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:_.criticalAlerts}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Require immediate attention"})]})]}),i.jsxs(De,{children:[i.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(nt,{className:"text-sm font-medium",children:"Pending Actions"}),i.jsx(Qm,{className:"h-4 w-4 text-yellow-500"})]}),i.jsxs(He,{children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:_.pendingActions}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting review/approval"})]})]}),i.jsxs(De,{children:[i.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(nt,{className:"text-sm font-medium",children:"New Users"}),i.jsx(Ts,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(He,{children:[i.jsx("div",{className:"text-2xl font-bold",children:_.recentUsers}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered today"})]})]}),i.jsxs(De,{children:[i.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(nt,{className:"text-sm font-medium",children:"Revenue Events"}),i.jsx(pc,{className:"h-4 w-4 text-green-500"})]}),i.jsxs(He,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:_.revenueEvents}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Payment activities"})]})]}),i.jsxs(De,{children:[i.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(nt,{className:"text-sm font-medium",children:"Security Events"}),i.jsx(o0,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(He,{children:[i.jsx("div",{className:"text-2xl font-bold",children:_.securityEvents}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Security-related activities"})]})]})]}),i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Recent Activities"}),i.jsx(Vt,{children:"Monitor all system activities, user actions, and business events in real-time"})]}),i.jsxs(He,{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(qo,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(gt,{placeholder:"Search activities by title, description, or actor...",value:r,onChange:A=>a(A.target.value),className:"pl-10"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Ns,{value:l,onValueChange:d,children:[i.jsx(ds,{className:"w-40",children:i.jsx(Ss,{placeholder:"Category"})}),i.jsxs(us,{children:[i.jsx($e,{value:"all",children:"All Categories"}),i.jsx($e,{value:"user_management",children:"User Management"}),i.jsx($e,{value:"content_management",children:"Content"}),i.jsx($e,{value:"verification",children:"Verification"}),i.jsx($e,{value:"financial",children:"Financial"}),i.jsx($e,{value:"security",children:"Security"}),i.jsx($e,{value:"business",children:"Business"}),i.jsx($e,{value:"system",children:"System"})]})]}),i.jsxs(Ns,{value:u,onValueChange:f,children:[i.jsx(ds,{className:"w-32",children:i.jsx(Ss,{placeholder:"Severity"})}),i.jsxs(us,{children:[i.jsx($e,{value:"all",children:"All Levels"}),i.jsx($e,{value:"critical",children:"Critical"}),i.jsx($e,{value:"warning",children:"Warning"}),i.jsx($e,{value:"success",children:"Success"}),i.jsx($e,{value:"info",children:"Info"})]})]}),i.jsxs(Ns,{value:m,onValueChange:p,children:[i.jsx(ds,{className:"w-32",children:i.jsx(Ss,{placeholder:"Time Range"})}),i.jsxs(us,{children:[i.jsx($e,{value:"1h",children:"Last Hour"}),i.jsx($e,{value:"24h",children:"Last 24h"}),i.jsx($e,{value:"7d",children:"Last 7 Days"}),i.jsx($e,{value:"30d",children:"Last 30 Days"}),i.jsx($e,{value:"all",children:"All Time"})]})]})]})]}),i.jsx("div",{className:"space-y-4",children:C.map(A=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"h-10 w-10 rounded-lg bg-gray-100 flex items-center justify-center",children:V(A.type)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900",children:A.title}),I(A.severity),M(A.status)]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:z(A.timestamp)}),i.jsxs(Ho,{children:[i.jsx(Wo,{asChild:!0,children:i.jsxs(Se,{variant:"ghost",className:"h-8 w-8 p-0",children:[i.jsx("span",{className:"sr-only",children:"Open menu"}),i.jsx(hO,{className:"h-4 w-4"})]})}),i.jsxs(Wa,{align:"end",children:[i.jsx(Uh,{children:"Actions"}),i.jsxs(zt,{onClick:()=>{w(A),S(!0)},children:[i.jsx(Zi,{className:"mr-2 h-4 w-4"}),"View Details"]}),t(["manage_all_users","approve_verifications"])&&i.jsxs(i.Fragment,{children:[i.jsx(fi,{}),i.jsxs(zt,{onClick:()=>D("investigate",A.id),children:[i.jsx(qo,{className:"mr-2 h-4 w-4"}),"Investigate"]}),i.jsxs(zt,{onClick:()=>D("resolve",A.id),children:[i.jsx(Ur,{className:"mr-2 h-4 w-4"}),"Mark Resolved"]})]})]})]})]})]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A.description}),i.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(bh,{className:"h-6 w-6",children:[i.jsx(wh,{src:A.actor.avatar,alt:A.actor.name}),i.jsx(_h,{children:A.actor.name.charAt(0)})]}),i.jsx("span",{className:"text-xs text-muted-foreground",children:A.actor.name})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:A.category.replace("_"," ").toUpperCase()}),A.target&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:["→ ",A.target.name]})]})]})]},A.id))}),C.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Xl,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No activities found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})]}),i.jsx(xc,{open:j,onOpenChange:S,children:i.jsxs(nl,{className:"max-w-2xl",children:[i.jsxs(yc,{children:[i.jsxs(sl,{className:"flex items-center gap-2",children:[x&&V(x.type),x==null?void 0:x.title]}),i.jsx(Ud,{children:"Detailed information about this activity"})]}),x&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Activity Information"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Type:"})," ",x.type.replace("_"," ")]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Category:"})," ",x.category.replace("_"," ")]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Timestamp:"})," ",new Date(x.timestamp).toLocaleString()]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:"Severity:"})," ",I(x.severity)]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:"Status:"})," ",M(x.status)]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Actor Information"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(bh,{className:"h-8 w-8",children:[i.jsx(wh,{src:x.actor.avatar,alt:x.actor.name}),i.jsx(_h,{children:x.actor.name.charAt(0)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:x.actor.name}),i.jsx("div",{className:"text-muted-foreground",children:x.actor.email})]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Role:"})," ",x.actor.role.replace("_"," ")]})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Description"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:x.description})]}),x.target&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Target"}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Type:"})," ",x.target.type]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Name:"})," ",x.target.name]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"ID:"})," ",x.target.id]})]})]}),x.metadata&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Additional Details"}),i.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:i.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap",children:JSON.stringify(x.metadata,null,2)})})]})]})]})})]})}function Vse(){return i.jsx("div",{className:"container mx-auto",children:i.jsx(Lse,{})})}var Gv="Switch",[Use,Zue]=xi(Gv),[Fse,Bse]=Use(Gv),y6=b.forwardRef((t,e)=>{const{__scopeSwitch:n,name:s,checked:r,defaultChecked:a,required:l,disabled:d,value:u="on",onCheckedChange:f,form:m,...p}=t,[x,w]=b.useState(null),j=Kt(e,I=>w(I)),S=b.useRef(!1),_=x?m||!!x.closest("form"):!0,[E,C]=Ld({prop:r,defaultProp:a??!1,onChange:f,caller:Gv});return i.jsxs(Fse,{scope:n,checked:E,disabled:d,children:[i.jsx(bt.button,{type:"button",role:"switch","aria-checked":E,"aria-required":l,"data-state":_6(E),"data-disabled":d?"":void 0,disabled:d,value:u,...p,ref:j,onClick:tt(t.onClick,I=>{C(M=>!M),_&&(S.current=I.isPropagationStopped(),S.current||I.stopPropagation())})}),_&&i.jsx(w6,{control:x,bubbles:!S.current,name:s,value:u,checked:E,required:l,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});y6.displayName=Gv;var v6="SwitchThumb",b6=b.forwardRef((t,e)=>{const{__scopeSwitch:n,...s}=t,r=Bse(v6,n);return i.jsx(bt.span,{"data-state":_6(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:e})});b6.displayName=v6;var zse="SwitchBubbleInput",w6=b.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:s=!0,...r},a)=>{const l=b.useRef(null),d=Kt(l,a),u=lL(n),f=E5(e);return b.useEffect(()=>{const m=l.current;if(!m)return;const p=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(p,"checked").set;if(u!==n&&w){const j=new Event("click",{bubbles:s});w.call(m,n),m.dispatchEvent(j)}},[u,n,s]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:d,style:{...r.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});w6.displayName=zse;function _6(t){return t?"checked":"unchecked"}var $se=y6,qse=b6;function Un({className:t,...e}){return i.jsx($se,{"data-slot":"switch",className:Qe("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:i.jsx(qse,{"data-slot":"switch-thumb",className:Qe("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Hse(){const{canAccess:t,hasRole:e}=Mv(),[n,s]=b.useState({general:{siteName:"EngageNatural",siteDescription:"Connecting brands with engaged communities through authentic partnerships",siteUrl:"https://engagenatural.com",adminEmail:"admin@engagenatural.com",supportEmail:"support@engagenatural.com",timezone:"America/New_York",language:"en",maintenanceMode:!1,registrationEnabled:!0,emailVerificationRequired:!0},security:{passwordMinLength:8,passwordRequireSpecialChars:!0,passwordRequireNumbers:!0,passwordRequireUppercase:!0,sessionTimeout:24,maxLoginAttempts:5,lockoutDuration:30,twoFactorRequired:!1,ipWhitelist:[],allowedDomains:["engagenatural.com"],encryptionEnabled:!0,auditLogging:!0},notifications:{emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,adminAlerts:!0,userWelcomeEmails:!0,paymentNotifications:!0,securityAlerts:!0,maintenanceNotifications:!0,marketingEmails:!1,weeklyReports:!0},payments:{currency:"USD",taxRate:8.5,processingFee:2.9,monthlyPlanPrice:5e3,yearlyPlanPrice:5e4,additionalLessonPrice:1e5,trialPeriodDays:14,gracePeriodDays:7,autoRenewal:!0,prorationEnabled:!0,refundPolicy:"partial"},content:{maxFileSize:100,allowedFileTypes:["mp4","pdf","jpg","png","docx"],autoApproval:!1,contentModeration:!0,backupFrequency:"daily",storageLimit:1e3,cdnEnabled:!0,compressionEnabled:!0,watermarkEnabled:!1},integrations:{googleAnalytics:{enabled:!0,trackingId:"GA-XXXXXXXXX",enhancedEcommerce:!0},stripe:{enabled:!0,publicKey:"pk_test_...",webhookSecret:"whsec_..."},sendgrid:{enabled:!0,apiKey:"SG.XXXXXXXXX",fromEmail:"noreply@engagenatural.com"},firebase:{enabled:!0,projectId:"engagenatural-prod",authDomain:"engagenatural-prod.firebaseapp.com"},slack:{enabled:!1,webhookUrl:"",channel:"#admin-alerts"}}}),[r,a]=b.useState("general"),[l,d]=b.useState(!1),[u,f]=b.useState(!1),[m,p]=b.useState(!1),x=(_,E,C)=>{s(I=>({...I,[_]:{...I[_],[E]:C}})),d(!0)},w=(_,E,C,I)=>{s(M=>({...M,[_]:{...M[_],[E]:{...M[_][E],[C]:I}}})),d(!0)},j=async()=>{f(!0);try{await new Promise(_=>setTimeout(_,1e3)),d(!1),console.log("Settings saved:",n)}catch(_){console.error("Error saving settings:",_)}finally{f(!1)}},S=()=>{d(!1),console.log("Settings reset to defaults")};return t(["manage_system_settings"])?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"System Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Configure platform settings, security, integrations, and system preferences"})]}),i.jsxs("div",{className:"flex gap-2",children:[l&&i.jsx(an,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Unsaved Changes"}),i.jsxs(Se,{variant:"outline",onClick:S,children:[i.jsx(Lo,{className:"mr-2 h-4 w-4"}),"Reset"]}),i.jsxs(Se,{onClick:j,disabled:u||!l,children:[i.jsx(a0,{className:"mr-2 h-4 w-4"}),u?"Saving...":"Save Changes"]})]})]}),i.jsxs(ll,{value:r,onValueChange:a,className:"space-y-4",children:[i.jsxs(eo,{className:"grid w-full grid-cols-6",children:[i.jsx(on,{value:"general",children:"General"}),i.jsx(on,{value:"security",children:"Security"}),i.jsx(on,{value:"notifications",children:"Notifications"}),i.jsx(on,{value:"payments",children:"Payments"}),i.jsx(on,{value:"content",children:"Content"}),i.jsx(on,{value:"integrations",children:"Integrations"})]}),i.jsx(yn,{value:"general",className:"space-y-4",children:i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(RK,{className:"h-5 w-5"}),"Site Configuration"]}),i.jsx(Vt,{children:"Basic site information and global settings"})]}),i.jsxs(He,{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"siteName",children:"Site Name"}),i.jsx(gt,{id:"siteName",value:n.general.siteName,onChange:_=>x("general","siteName",_.target.value)})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"siteUrl",children:"Site URL"}),i.jsx(gt,{id:"siteUrl",value:n.general.siteUrl,onChange:_=>x("general","siteUrl",_.target.value)})]})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"siteDescription",children:"Site Description"}),i.jsx(ta,{id:"siteDescription",value:n.general.siteDescription,onChange:_=>x("general","siteDescription",_.target.value),rows:3})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"adminEmail",children:"Admin Email"}),i.jsx(gt,{id:"adminEmail",type:"email",value:n.general.adminEmail,onChange:_=>x("general","adminEmail",_.target.value)})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"supportEmail",children:"Support Email"}),i.jsx(gt,{id:"supportEmail",type:"email",value:n.general.supportEmail,onChange:_=>x("general","supportEmail",_.target.value)})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"timezone",children:"Timezone"}),i.jsxs(Ns,{value:n.general.timezone,onValueChange:_=>x("general","timezone",_),children:[i.jsx(ds,{children:i.jsx(Ss,{})}),i.jsxs(us,{children:[i.jsx($e,{value:"America/New_York",children:"Eastern Time"}),i.jsx($e,{value:"America/Chicago",children:"Central Time"}),i.jsx($e,{value:"America/Denver",children:"Mountain Time"}),i.jsx($e,{value:"America/Los_Angeles",children:"Pacific Time"}),i.jsx($e,{value:"UTC",children:"UTC"})]})]})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"language",children:"Default Language"}),i.jsxs(Ns,{value:n.general.language,onValueChange:_=>x("general","language",_),children:[i.jsx(ds,{children:i.jsx(Ss,{})}),i.jsxs(us,{children:[i.jsx($e,{value:"en",children:"English"}),i.jsx($e,{value:"es",children:"Spanish"}),i.jsx($e,{value:"fr",children:"French"}),i.jsx($e,{value:"de",children:"German"})]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"maintenanceMode",children:"Maintenance Mode"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Temporarily disable public access to the site"})]}),i.jsx(Un,{id:"maintenanceMode",checked:n.general.maintenanceMode,onCheckedChange:_=>x("general","maintenanceMode",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"registrationEnabled",children:"User Registration"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow new users to register accounts"})]}),i.jsx(Un,{id:"registrationEnabled",checked:n.general.registrationEnabled,onCheckedChange:_=>x("general","registrationEnabled",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"emailVerificationRequired",children:"Email Verification"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Require email verification for new accounts"})]}),i.jsx(Un,{id:"emailVerificationRequired",checked:n.general.emailVerificationRequired,onCheckedChange:_=>x("general","emailVerificationRequired",_)})]})]})]})]})}),i.jsx(yn,{value:"security",className:"space-y-4",children:i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(o0,{className:"h-5 w-5"}),"Security Configuration"]}),i.jsx(Vt,{children:"Password policies, session management, and security features"})]}),i.jsxs(He,{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"passwordMinLength",children:"Minimum Password Length"}),i.jsx(gt,{id:"passwordMinLength",type:"number",min:"6",max:"32",value:n.security.passwordMinLength,onChange:_=>x("security","passwordMinLength",parseInt(_.target.value))})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"sessionTimeout",children:"Session Timeout (hours)"}),i.jsx(gt,{id:"sessionTimeout",type:"number",min:"1",max:"168",value:n.security.sessionTimeout,onChange:_=>x("security","sessionTimeout",parseInt(_.target.value))})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"maxLoginAttempts",children:"Max Login Attempts"}),i.jsx(gt,{id:"maxLoginAttempts",type:"number",min:"3",max:"10",value:n.security.maxLoginAttempts,onChange:_=>x("security","maxLoginAttempts",parseInt(_.target.value))})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"lockoutDuration",children:"Lockout Duration (minutes)"}),i.jsx(gt,{id:"lockoutDuration",type:"number",min:"5",max:"1440",value:n.security.lockoutDuration,onChange:_=>x("security","lockoutDuration",parseInt(_.target.value))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"passwordRequireSpecialChars",children:"Require Special Characters"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Passwords must contain special characters"})]}),i.jsx(Un,{id:"passwordRequireSpecialChars",checked:n.security.passwordRequireSpecialChars,onCheckedChange:_=>x("security","passwordRequireSpecialChars",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"passwordRequireNumbers",children:"Require Numbers"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Passwords must contain numbers"})]}),i.jsx(Un,{id:"passwordRequireNumbers",checked:n.security.passwordRequireNumbers,onCheckedChange:_=>x("security","passwordRequireNumbers",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"passwordRequireUppercase",children:"Require Uppercase"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Passwords must contain uppercase letters"})]}),i.jsx(Un,{id:"passwordRequireUppercase",checked:n.security.passwordRequireUppercase,onCheckedChange:_=>x("security","passwordRequireUppercase",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"twoFactorRequired",children:"Two-Factor Authentication"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Require 2FA for all admin accounts"})]}),i.jsx(Un,{id:"twoFactorRequired",checked:n.security.twoFactorRequired,onCheckedChange:_=>x("security","twoFactorRequired",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"auditLogging",children:"Audit Logging"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Log all admin actions and security events"})]}),i.jsx(Un,{id:"auditLogging",checked:n.security.auditLogging,onCheckedChange:_=>x("security","auditLogging",_)})]})]})]})]})}),i.jsx(yn,{value:"notifications",className:"space-y-4",children:i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx($N,{className:"h-5 w-5"}),"Notification Preferences"]}),i.jsx(Vt,{children:"Configure email, SMS, and push notification settings"})]}),i.jsx(He,{className:"space-y-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"emailNotifications",children:"Email Notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send notifications via email"})]}),i.jsx(Un,{id:"emailNotifications",checked:n.notifications.emailNotifications,onCheckedChange:_=>x("notifications","emailNotifications",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"smsNotifications",children:"SMS Notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send notifications via SMS"})]}),i.jsx(Un,{id:"smsNotifications",checked:n.notifications.smsNotifications,onCheckedChange:_=>x("notifications","smsNotifications",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"pushNotifications",children:"Push Notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send browser push notifications"})]}),i.jsx(Un,{id:"pushNotifications",checked:n.notifications.pushNotifications,onCheckedChange:_=>x("notifications","pushNotifications",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"adminAlerts",children:"Admin Alerts"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Critical system alerts for administrators"})]}),i.jsx(Un,{id:"adminAlerts",checked:n.notifications.adminAlerts,onCheckedChange:_=>x("notifications","adminAlerts",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"userWelcomeEmails",children:"Welcome Emails"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send welcome emails to new users"})]}),i.jsx(Un,{id:"userWelcomeEmails",checked:n.notifications.userWelcomeEmails,onCheckedChange:_=>x("notifications","userWelcomeEmails",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"paymentNotifications",children:"Payment Notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notify about payment events"})]}),i.jsx(Un,{id:"paymentNotifications",checked:n.notifications.paymentNotifications,onCheckedChange:_=>x("notifications","paymentNotifications",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"securityAlerts",children:"Security Alerts"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Notify about security events"})]}),i.jsx(Un,{id:"securityAlerts",checked:n.notifications.securityAlerts,onCheckedChange:_=>x("notifications","securityAlerts",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"weeklyReports",children:"Weekly Reports"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send weekly analytics reports"})]}),i.jsx(Un,{id:"weeklyReports",checked:n.notifications.weeklyReports,onCheckedChange:_=>x("notifications","weeklyReports",_)})]})]})})]})}),i.jsx(yn,{value:"payments",className:"space-y-4",children:i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(pc,{className:"h-5 w-5"}),"Payment Configuration"]}),i.jsx(Vt,{children:"Pricing, billing, and payment processing settings"})]}),i.jsxs(He,{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"currency",children:"Currency"}),i.jsxs(Ns,{value:n.payments.currency,onValueChange:_=>x("payments","currency",_),children:[i.jsx(ds,{children:i.jsx(Ss,{})}),i.jsxs(us,{children:[i.jsx($e,{value:"USD",children:"USD - US Dollar"}),i.jsx($e,{value:"EUR",children:"EUR - Euro"}),i.jsx($e,{value:"GBP",children:"GBP - British Pound"}),i.jsx($e,{value:"CAD",children:"CAD - Canadian Dollar"})]})]})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"taxRate",children:"Tax Rate (%)"}),i.jsx(gt,{id:"taxRate",type:"number",step:"0.1",min:"0",max:"50",value:n.payments.taxRate,onChange:_=>x("payments","taxRate",parseFloat(_.target.value))})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"monthlyPlanPrice",children:"Monthly Plan Price ($)"}),i.jsx(gt,{id:"monthlyPlanPrice",type:"number",min:"0",value:n.payments.monthlyPlanPrice/100,onChange:_=>x("payments","monthlyPlanPrice",parseInt(_.target.value)*100)})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"yearlyPlanPrice",children:"Yearly Plan Price ($)"}),i.jsx(gt,{id:"yearlyPlanPrice",type:"number",min:"0",value:n.payments.yearlyPlanPrice/100,onChange:_=>x("payments","yearlyPlanPrice",parseInt(_.target.value)*100)})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"additionalLessonPrice",children:"Additional Lesson Price ($)"}),i.jsx(gt,{id:"additionalLessonPrice",type:"number",min:"0",value:n.payments.additionalLessonPrice/100,onChange:_=>x("payments","additionalLessonPrice",parseInt(_.target.value)*100)})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"trialPeriodDays",children:"Trial Period (days)"}),i.jsx(gt,{id:"trialPeriodDays",type:"number",min:"0",max:"90",value:n.payments.trialPeriodDays,onChange:_=>x("payments","trialPeriodDays",parseInt(_.target.value))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"autoRenewal",children:"Auto Renewal"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically renew subscriptions"})]}),i.jsx(Un,{id:"autoRenewal",checked:n.payments.autoRenewal,onCheckedChange:_=>x("payments","autoRenewal",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"prorationEnabled",children:"Proration"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Prorate charges for plan changes"})]}),i.jsx(Un,{id:"prorationEnabled",checked:n.payments.prorationEnabled,onCheckedChange:_=>x("payments","prorationEnabled",_)})]})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"refundPolicy",children:"Refund Policy"}),i.jsxs(Ns,{value:n.payments.refundPolicy,onValueChange:_=>x("payments","refundPolicy",_),children:[i.jsx(ds,{children:i.jsx(Ss,{})}),i.jsxs(us,{children:[i.jsx($e,{value:"full",children:"Full Refund"}),i.jsx($e,{value:"partial",children:"Partial Refund"}),i.jsx($e,{value:"none",children:"No Refunds"})]})]})]})]})]})}),i.jsx(yn,{value:"content",className:"space-y-4",children:i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(hi,{className:"h-5 w-5"}),"Content Management"]}),i.jsx(Vt,{children:"File upload limits, content moderation, and storage settings"})]}),i.jsxs(He,{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"maxFileSize",children:"Max File Size (MB)"}),i.jsx(gt,{id:"maxFileSize",type:"number",min:"1",max:"1000",value:n.content.maxFileSize,onChange:_=>x("content","maxFileSize",parseInt(_.target.value))})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"storageLimit",children:"Storage Limit (GB)"}),i.jsx(gt,{id:"storageLimit",type:"number",min:"10",max:"10000",value:n.content.storageLimit,onChange:_=>x("content","storageLimit",parseInt(_.target.value))})]})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"allowedFileTypes",children:"Allowed File Types"}),i.jsx(gt,{id:"allowedFileTypes",value:n.content.allowedFileTypes.join(", "),onChange:_=>x("content","allowedFileTypes",_.target.value.split(", ")),placeholder:"mp4, pdf, jpg, png, docx"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Separate file extensions with commas"})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"backupFrequency",children:"Backup Frequency"}),i.jsxs(Ns,{value:n.content.backupFrequency,onValueChange:_=>x("content","backupFrequency",_),children:[i.jsx(ds,{children:i.jsx(Ss,{})}),i.jsxs(us,{children:[i.jsx($e,{value:"hourly",children:"Hourly"}),i.jsx($e,{value:"daily",children:"Daily"}),i.jsx($e,{value:"weekly",children:"Weekly"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"autoApproval",children:"Auto Approval"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically approve uploaded content"})]}),i.jsx(Un,{id:"autoApproval",checked:n.content.autoApproval,onCheckedChange:_=>x("content","autoApproval",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"contentModeration",children:"Content Moderation"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable automated content moderation"})]}),i.jsx(Un,{id:"contentModeration",checked:n.content.contentModeration,onCheckedChange:_=>x("content","contentModeration",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"cdnEnabled",children:"CDN Enabled"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Use content delivery network for faster loading"})]}),i.jsx(Un,{id:"cdnEnabled",checked:n.content.cdnEnabled,onCheckedChange:_=>x("content","cdnEnabled",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"compressionEnabled",children:"Compression"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically compress uploaded files"})]}),i.jsx(Un,{id:"compressionEnabled",checked:n.content.compressionEnabled,onCheckedChange:_=>x("content","compressionEnabled",_)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"watermarkEnabled",children:"Watermark"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Add watermark to uploaded images"})]}),i.jsx(Un,{id:"watermarkEnabled",checked:n.content.watermarkEnabled,onCheckedChange:_=>x("content","watermarkEnabled",_)})]})]})]})]})}),i.jsx(yn,{value:"integrations",className:"space-y-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(qN,{className:"h-5 w-5"}),"Google Analytics"]}),i.jsx(Vt,{children:"Configure Google Analytics tracking"})]}),i.jsxs(He,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"gaEnabled",children:"Enable Google Analytics"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Track website analytics"})]}),i.jsx(Un,{id:"gaEnabled",checked:n.integrations.googleAnalytics.enabled,onCheckedChange:_=>w("integrations","googleAnalytics","enabled",_)})]}),n.integrations.googleAnalytics.enabled&&i.jsxs("div",{children:[i.jsx(We,{htmlFor:"gaTrackingId",children:"Tracking ID"}),i.jsx(gt,{id:"gaTrackingId",value:n.integrations.googleAnalytics.trackingId,onChange:_=>w("integrations","googleAnalytics","trackingId",_.target.value),placeholder:"GA-XXXXXXXXX"})]})]})]}),i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(pc,{className:"h-5 w-5"}),"Stripe Payment Processing"]}),i.jsx(Vt,{children:"Configure Stripe for payment processing"})]}),i.jsxs(He,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"stripeEnabled",children:"Enable Stripe"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Process payments through Stripe"})]}),i.jsx(Un,{id:"stripeEnabled",checked:n.integrations.stripe.enabled,onCheckedChange:_=>w("integrations","stripe","enabled",_)})]}),n.integrations.stripe.enabled&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"stripePublicKey",children:"Public Key"}),i.jsxs("div",{className:"relative",children:[i.jsx(gt,{id:"stripePublicKey",type:m?"text":"password",value:n.integrations.stripe.publicKey,onChange:_=>w("integrations","stripe","publicKey",_.target.value),placeholder:"pk_test_..."}),i.jsx(Se,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>p(!m),children:m?i.jsx(bK,{className:"h-4 w-4"}):i.jsx(Zi,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"stripeWebhookSecret",children:"Webhook Secret"}),i.jsx(gt,{id:"stripeWebhookSecret",type:m?"text":"password",value:n.integrations.stripe.webhookSecret,onChange:_=>w("integrations","stripe","webhookSecret",_.target.value),placeholder:"whsec_..."})]})]})]})]}),i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center gap-2",children:[i.jsx(gO,{className:"h-5 w-5"}),"SendGrid Email Service"]}),i.jsx(Vt,{children:"Configure SendGrid for email delivery"})]}),i.jsxs(He,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"sendgridEnabled",children:"Enable SendGrid"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send emails through SendGrid"})]}),i.jsx(Un,{id:"sendgridEnabled",checked:n.integrations.sendgrid.enabled,onCheckedChange:_=>w("integrations","sendgrid","enabled",_)})]}),n.integrations.sendgrid.enabled&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(We,{htmlFor:"sendgridApiKey",children:"API Key"}),i.jsx(gt,{id:"sendgridApiKey",type:m?"text":"password",value:n.integrations.sendgrid.apiKey,onChange:_=>w("integrations","sendgrid","apiKey",_.target.value),placeholder:"SG.XXXXXXXXX"})]}),i.jsxs("div",{children:[i.jsx(We,{htmlFor:"sendgridFromEmail",children:"From Email"}),i.jsx(gt,{id:"sendgridFromEmail",type:"email",value:n.integrations.sendgrid.fromEmail,onChange:_=>w("integrations","sendgrid","fromEmail",_.target.value),placeholder:"noreply@engagenatural.com"})]})]})]})]})]})})]})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(r0,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have permission to access system settings."})]})})}function Wse(){return i.jsx("div",{className:"container mx-auto",children:i.jsx(Hse,{})})}const UR={rescue:"rescue-remedy",bach:"bach-flower-remedies",spatone:"spatone-iron"};async function Gse(t){console.log("🧪 Testing Firestore permissions before seeding demo data...");try{console.log("  • Checking if user has super_admin role...");const e=Je(ce,"users",t),n=await _r(e);if(!n.exists())throw new Error(`User document not found for UID: ${t}`);const s=n.data();if(s.role!=="super_admin")throw new Error(`User does not have super_admin role. Current role: ${s.role}`);console.log("    ✓ User has super_admin role"),console.log("  • Testing write permissions with test document...");const r=await cr(Ue(ce,"test_permissions"),{message:"Permission test for demo seeding",createdBy:t,createdAt:ze(),isTest:!0});return console.log("    ✓ Successfully created test document"),console.log("  • Testing delete permissions..."),await Zs(r),console.log("    ✓ Successfully deleted test document"),console.log("✅ All permission tests passed! Proceeding with demo data seeding."),!0}catch(e){throw console.error("❌ Firestore permission test failed:",e),console.error("   code:",e.code,"| name:",e.name,"| message:",e.message),new Error(`Permission test failed: ${e.message||e}`)}}async function Yse(t){console.log("🔐 Creating Firebase Auth accounts for demo users...");let e;const n=Q4().find(d=>d.name==="seed");n?e=n:e=Ly(Js.options,"seed");const s=pg(e);if(typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&!s._emuConnected)try{SN(s,"http://127.0.0.1:9099",{disableWarnings:!0})}catch{}finally{s._emuConnected=!0}const a=or.currentUser,l=[];for(const d of t)try{console.log(`  • Creating auth account for ${d.email}…`);const u=await dP(s,d.email,d.password);l.push({uid:u.user.uid,email:d.email,displayName:d.displayName}),console.log(`    ✓ Created auth account with UID: ${u.user.uid}`),await e0(s)}catch(u){console.warn(`    ⚠️ Create failed for ${d.email} → attempting sign-in…`,(u==null?void 0:u.code)||(u==null?void 0:u.message)||u);try{const f=await TN(s,d.email,d.password);l.push({uid:f.user.uid,email:d.email,displayName:d.displayName}),console.log(`    ✓ Using existing account with UID: ${f.user.uid}`),await e0(s)}catch(f){if(f.code==="auth/invalid-credential"){console.warn(`    ⚠️ Existing account password mismatch for ${d.email}. Using placeholder UID.`);const m=`EXISTING_ACCOUNT_${d.email.replace(/[@.]/g,"_").toUpperCase()}_${Date.now()}`;l.push({uid:m,email:d.email,displayName:d.displayName}),console.log(`    ✓ Placeholder UID assigned for ${d.email}`)}else throw f.code==="auth/user-not-found"?new Error(`Create and sign-in failed for ${d.email}: ${(u==null?void 0:u.message)||"unknown error"}`):(console.error(`    ❌ Sign-in fallback failed for ${d.email}:`,f),new Error(`Account flow failed for ${d.email}: ${(f==null?void 0:f.message)||"unknown error"}`))}}return a&&console.log("  • Restoring original user session…"),console.log(`✅ Created/verified ${l.length} Firebase Auth accounts`),l}async function Kse(t,e){var n,s;if(console.log("🔥 DEBUGGING: Comprehensive updated demoSeed.ts file is being used!"),!ce)throw console.error("❌ CRITICAL ERROR: Firestore database instance is undefined or null. Cannot proceed with seeding. Please check your Firebase configuration and ensure db is properly initialized."),new Error("Firestore database not initialized - check Firebase configuration");try{await Gse(t),console.log("🔐 Creating Firebase Auth accounts for demo users...");const a=await Yse([{email:"bm.demo@engagenatural.com",password:"password123",displayName:"Alex Morgan"},{email:"staff.demo@engagenatural.com",password:"password123",displayName:"Sam Wilson"}]),l=(n=a.find(E=>E.email==="bm.demo@engagenatural.com"))==null?void 0:n.uid,d=(s=a.find(E=>E.email==="staff.demo@engagenatural.com"))==null?void 0:s.uid;if(!l||!d)throw new Error("Failed to create required Firebase Auth accounts");let u=Ta(ce),f=0;const m={};let p=UR.rescue;const x=[],w=[],j=[{email:"bm.demo@engagenatural.com",displayName:"Alex Morgan",role:"brand_manager",approved:!0},{email:"bm.pending@demo.com",displayName:"Jordan Taylor",role:"brand_manager",approved:!1}],S=[{email:"staff.demo@engagenatural.com",displayName:"Sam Wilson",retailerIndex:0},{email:"staff.b@demo.com",displayName:"Jamie Lee",retailerIndex:0},{email:"staff.c@demo.com",displayName:"Casey Brown",retailerIndex:1},{email:"staff.d@demo.com",displayName:"Riley Johnson",retailerIndex:1}];console.log("🧪 Testing write to different collection first...");try{const E=Je(Ue(ce,"test_brands"));await qr(E,{test:!0,createdAt:ze(),uid:t}),console.log("  ✅ Successfully wrote to test_brands collection"),await Zs(E),console.log("  ✅ Successfully deleted test document")}catch(E){console.error("  ❌ Failed to write to test_brands:",E.message)}try{console.log("📝 Creating brand...");const E=Je(ce,"brands",UR.rescue),C={name:"Rescue Remedy",slug:"rescue-remedy",ownerUid:t,createdAt:ze(),demoSeed:!0};await qr(E,C,{merge:!0}),m.brands=1,console.log(`  ✓ Brand created with ID: ${p}`),console.log("  ✓ Brand committed successfully (direct write)")}catch(E){throw console.error("❌ Error creating brand:",E),new Error(`Failed to create brand: ${E.message}`)}const _=[];try{console.log("📝 Creating retailers...");const E=[{chain:"Sprouts",name:"Sprouts – Winter Park",storeCode:"SP-WP",city:"Winter Park",state:"FL",createdAt:ze(),demoSeed:!0},{chain:"Natural Grocers",name:"Natural Grocers – Denver",storeCode:"NG-DN",city:"Denver",state:"CO",createdAt:ze(),demoSeed:!0}];for(const C of E){const I=Je(Ue(ce,"retailers"));_.push({id:I.id,storeCode:C.storeCode}),u.set(I,C),f++}m.retailers=E.length,console.log(`  ✓ Created ${E.length} retailers`),f>0&&(console.log("  ⚡ Committing batch after RETAILERS creation..."),await u.commit(),u=Ta(ce),f=0,console.log("  ✓ Batch committed successfully"))}catch(E){throw console.error("❌ Error creating retailers:",E),new Error(`Failed to create retailers: ${E.message}`)}try{console.log("📝 Creating user documents..."),j.forEach(M=>Object.assign(M,{brandId:p}));const E=(e==null?void 0:e.brandManagerUid)||l,C={uid:E,email:j[0].email,displayName:j[0].displayName,role:"brand_manager",approved:!0,brandId:p,createdAt:ze(),demoSeed:!0};u.set(Je(ce,"users",E),C),x.push({id:E,approved:!0}),f++,console.log(`  ✓ Created brand manager with ID: ${E}`);const I=(e==null?void 0:e.staffUids)||[];for(let M=0;M<S.length;M++){const V=S[M],z=M===0&&d?d:I[M]||`DEMO_STAFF_${M}_${Date.now()}`;w.push({id:z,email:V.email});const D=_[V.retailerIndex];u.set(Je(ce,"users",z),{uid:z,email:V.email,displayName:V.displayName,role:"staff",verified:!0,verificationStatus:M===0?"approved":"pending",retailerId:D.id,storeCode:D.storeCode,createdAt:ze(),demoSeed:!0}),f++}m.brand_managers=1,m.staff=w.length,console.log(`  ✓ Created ${w.length} staff users`),f>350&&(console.log("  ⚡ Committing batch due to size limit..."),await u.commit(),u=Ta(ce),f=0,console.log("  ✓ Batch committed successfully")),f>0&&(console.log("  ⚡ Committing batch after USER creation..."),await u.commit(),u=Ta(ce),f=0,console.log("  ✓ Batch committed successfully"))}catch(E){throw console.error("❌ Error creating user documents:",E),new Error(`Failed to create user documents: ${E.message}`)}try{console.log("📝 Creating comprehensive trainings...");const E=[],C=[{brandId:p,authorUid:x[0].id,title:"Rescue Sleep: How to Recommend",description:"Learn how to effectively recommend Rescue Sleep products to customers with sleep concerns. This comprehensive training covers the science behind natural sleep support and practical customer interaction strategies.",durationMins:30,modules:["Sleep Basics","Product Information","Customer Scenarios"],published:!0,visibility:"public",createdAt:ze(),metrics:{enrolled:0,completed:0},sections:[{id:"section1",title:"Understanding Sleep Issues",type:"text",content:"<h2>Common Sleep Problems</h2><p>This section covers the most common sleep issues customers face, from difficulty falling asleep to staying asleep throughout the night. Understanding these challenges helps you recommend appropriate solutions.</p><h3>Types of Sleep Issues</h3><ul><li>Difficulty falling asleep (sleep onset insomnia)</li><li>Frequent nighttime awakenings</li><li>Early morning awakening</li><li>Non-restorative sleep</li></ul><p>Each type may require different approaches and product recommendations.</p>"},{id:"section2",title:"Product Features & Benefits",type:"text",content:"<h2>Key Ingredients</h2><p>Our sleep formula contains scientifically-backed ingredients that work synergistically to promote natural sleep.</p><h3>Active Ingredients:</h3><ul><li><strong>Valerian Root Extract:</strong> Traditional sleep aid that helps reduce the time it takes to fall asleep</li><li><strong>Passionflower:</strong> Calms the nervous system and reduces anxiety</li><li><strong>Lemon Balm:</strong> Promotes relaxation and improves sleep quality</li><li><strong>Chamomile:</strong> Gentle sedative properties for peaceful sleep</li></ul><p>These ingredients are carefully selected for their synergistic effects and safety profile.</p>"},{id:"section3",title:"Customer Interaction Scenarios",type:"video",content:"<h2>Practical Customer Scenarios</h2><p>This video module demonstrates real customer interactions and how to handle common questions about sleep products.</p>",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ"},{id:"section4",title:"Dosage and Safety Guidelines",type:"text",content:"<h2>Proper Dosage Recommendations</h2><p>Understanding correct dosage is crucial for customer satisfaction and safety.</p><h3>Standard Dosing:</h3><ul><li>Adults: 2-3 drops under tongue 30 minutes before bedtime</li><li>Sensitive individuals: Start with 1 drop</li><li>Maximum: 4 drops per night</li></ul><h3>Safety Considerations:</h3><ul><li>Not recommended during pregnancy or nursing</li><li>May interact with sedative medications</li><li>Advise customers to consult healthcare providers if on medications</li></ul>"}],demoSeed:!0},{brandId:p,authorUid:x[0].id,title:"Bach Flower Basics for Floor Staff",description:"Essential knowledge about Bach Flower remedies for retail staff. Learn the history, philosophy, and practical application of these time-tested natural remedies.",durationMins:45,modules:["History of Bach Flowers","Core Remedies","Recommendation Guide"],published:!0,visibility:"public",createdAt:ze(),metrics:{enrolled:0,completed:0},sections:[{id:"section1",title:"Bach Flower History & Philosophy",type:"text",content:"<h2>Dr. Edward Bach's Legacy</h2><p>Learn about the founder of Bach flower remedies and his revolutionary approach to natural healing through emotional balance.</p><h3>Dr. Bach's Discovery</h3><p>In the 1930s, Dr. Edward Bach, a prominent physician and homeopath, discovered that emotional states directly impact physical health. He identified 38 flower essences that address specific emotional imbalances.</p><h3>Core Philosophy</h3><ul><li>Treat the person, not just the symptoms</li><li>Address emotional root causes</li><li>Gentle, natural healing without side effects</li><li>Self-healing through emotional balance</li></ul><p>This holistic approach revolutionized natural healthcare and remains relevant today.</p>"},{id:"section2",title:"The 38 Flower Remedies",type:"text",content:"<h2>Understanding the Core Remedies</h2><p>The 38 Bach flower remedies are organized into seven emotional groups, each addressing specific psychological states.</p><h3>The Seven Groups:</h3><ol><li><strong>Fear:</strong> Rock Rose, Mimulus, Cherry Plum, Aspen, Red Chestnut</li><li><strong>Uncertainty:</strong> Cerato, Scleranthus, Gentian, Gorse, Hornbeam, Wild Oat</li><li><strong>Insufficient Interest:</strong> Clematis, Honeysuckle, Wild Rose, Olive, White Chestnut, Mustard, Chestnut Bud</li><li><strong>Loneliness:</strong> Water Violet, Impatiens, Heather</li><li><strong>Over-sensitivity:</strong> Agrimony, Centaury, Walnut, Holly</li><li><strong>Despondency:</strong> Larch, Pine, Elm, Sweet Chestnut, Star of Bethlehem, Willow, Oak, Crab Apple</li><li><strong>Over-care:</strong> Chicory, Vervain, Vine, Beech, Rock Water</li></ol><p>Understanding these groups helps in making appropriate recommendations.</p>"},{id:"section3",title:"Practical Recommendation Guide",type:"text",content:"<h2>How to Recommend Bach Flowers</h2><p>Practical guidance for helping customers select the most appropriate remedies for their emotional needs.</p><h3>Assessment Questions:</h3><ul><li>What emotional challenges are you facing?</li><li>How long have you been experiencing this?</li><li>What triggers these feelings?</li><li>How do you typically cope with stress?</li></ul><h3>Common Combinations:</h3><ul><li><strong>Stress & Anxiety:</strong> Rock Rose + Impatiens + Clematis</li><li><strong>Work Pressure:</strong> Elm + Olive + Oak</li><li><strong>Sleep Issues:</strong> White Chestnut + Rock Rose</li><li><strong>Decision Making:</strong> Scleranthus + Cerato</li></ul><h3>Usage Instructions:</h3><p>4 drops, 4 times daily under the tongue or in water. Can be used individually or in combinations up to 7 remedies.</p>"}],demoSeed:!0},{brandId:p,authorUid:x[0].id,title:"Spatone Iron: Absorption Science",description:"Understand the science behind Spatone's liquid iron and its superior absorption compared to traditional iron supplements.",durationMins:25,modules:["Iron Deficiency Basics","Absorption Science","Customer Education"],published:!0,visibility:"public",createdAt:ze(),metrics:{enrolled:0,completed:0},sections:[{id:"section1",title:"Iron Deficiency: Recognition and Impact",type:"text",content:"<h2>Understanding Iron Deficiency</h2><p>Iron deficiency is one of the most common nutritional deficiencies worldwide, particularly affecting women, vegetarians, and athletes.</p><h3>Signs and Symptoms:</h3><ul><li>Fatigue and weakness</li><li>Pale skin, nails, or inner eyelids</li><li>Shortness of breath</li><li>Cold hands and feet</li><li>Brittle or spoon-shaped nails</li><li>Cravings for ice or starch</li><li>Restless leg syndrome</li></ul><h3>Who's at Risk:</h3><ul><li>Menstruating women (especially heavy periods)</li><li>Pregnant and breastfeeding women</li><li>Vegetarians and vegans</li><li>Endurance athletes</li><li>People with digestive disorders</li><li>Frequent blood donors</li></ul><p>Understanding these risk factors helps identify customers who may benefit from iron supplementation.</p>"},{id:"section2",title:"Superior Absorption Science",type:"text",content:"<h2>Why Liquid Iron Works Better</h2><p>Spatone's unique liquid iron format offers significant advantages over traditional iron tablets and capsules.</p><h3>Absorption Advantages:</h3><ul><li><strong>Natural Iron Form:</strong> Spatone contains iron in its natural sulfate form, which is readily absorbed</li><li><strong>Low Iron Content:</strong> 5mg per sachet - gentle on the stomach while being highly bioavailable</li><li><strong>No Additives:</strong> Pure iron-rich water without synthetic additives that can interfere with absorption</li><li><strong>Optimal pH:</strong> Natural acidity enhances iron absorption in the digestive tract</li></ul><h3>Comparison to Tablets:</h3><table><tr><th>Factor</th><th>Spatone Liquid</th><th>Iron Tablets</th></tr><tr><td>Absorption Rate</td><td>Up to 40%</td><td>5-20%</td></tr><tr><td>Stomach Irritation</td><td>Minimal</td><td>Common</td></tr><tr><td>Constipation</td><td>Rare</td><td>Frequent</td></tr><tr><td>Metallic Taste</td><td>Mild</td><td>Strong</td></tr></table><p>This superior absorption means customers need less iron to achieve better results.</p>"},{id:"section3",title:"Customer Education & FAQs",type:"text",content:"<h2>Common Customer Questions</h2><p>Prepare for the most frequently asked questions about iron supplementation and Spatone specifically.</p><h3>Frequently Asked Questions:</h3><h4>Q: Why is Spatone better than my current iron supplement?</h4><p>A: Spatone offers superior absorption with fewer side effects. Many customers experience less stomach upset and constipation compared to traditional iron tablets.</p><h4>Q: How quickly will I see results?</h4><p>A: Most customers notice increased energy within 2-4 weeks of consistent use. Full iron stores may take 2-3 months to replenish.</p><h4>Q: Can I take it with other supplements?</h4><p>A: Yes, but avoid taking with calcium, zinc, or coffee as these can reduce absorption. Take with vitamin C (orange juice) to enhance absorption.</p><h4>Q: Is it safe during pregnancy?</h4><p>A: Spatone is safe for pregnancy and breastfeeding. Many healthcare providers recommend it specifically because of its gentle nature.</p><h4>Q: What if I forget a dose?</h4><p>A: Simply take it when you remember, but don't double up. Consistency is more important than perfection.</p><h3>Usage Tips for Customers:</h3><ul><li>Take on an empty stomach for best absorption</li><li>Mix with orange juice to enhance absorption and improve taste</li><li>Take away from coffee, tea, and dairy products</li><li>Be consistent with daily use</li><li>Monitor energy levels and consider retesting iron levels after 3 months</li></ul>"}],demoSeed:!0},{brandId:p,authorUid:x[0].id,title:"Stress & Anxiety Support Products",description:"Comprehensive guide to recommending products for stress and anxiety relief, including natural alternatives and lifestyle recommendations.",durationMins:35,modules:["Understanding Stress","Product Categories","Holistic Approaches"],published:!0,visibility:"public",createdAt:ze(),metrics:{enrolled:0,completed:0},sections:[{id:"section1",title:"Stress Physiology & Modern Triggers",type:"text",content:"<h2>The Science of Stress Response</h2><p>Understanding how stress affects the body helps you recommend appropriate natural solutions to customers.</p><h3>The Stress Response System:</h3><ul><li><strong>Acute Stress:</strong> Fight-or-flight response - short-term, adaptive</li><li><strong>Chronic Stress:</strong> Long-term activation leading to health problems</li><li><strong>Hormonal Impact:</strong> Cortisol, adrenaline, and other stress hormones</li><li><strong>Physical Symptoms:</strong> Tension, digestive issues, sleep problems</li></ul><h3>Modern Stress Triggers:</h3><ul><li>Work pressure and deadlines</li><li>Financial concerns</li><li>Relationship challenges</li><li>Health issues</li><li>Information overload</li><li>Social media and constant connectivity</li></ul><h3>Signs Customers May Mention:</h3><ul><li>Feeling overwhelmed or anxious</li><li>Difficulty concentrating</li><li>Muscle tension or headaches</li><li>Sleep disturbances</li><li>Digestive upset</li><li>Irritability or mood swings</li><li>Fatigue despite adequate sleep</li></ul><p>Recognizing these patterns helps you suggest targeted natural solutions.</p>"},{id:"section2",title:"Natural Stress Relief Categories",type:"text",content:"<h2>Categories of Stress Support Products</h2><p>Different types of stress and anxiety benefit from different natural approaches and products.</p><h3>Adaptogenic Herbs:</h3><ul><li><strong>Ashwagandha:</strong> Reduces cortisol levels, improves stress resilience</li><li><strong>Rhodiola:</strong> Enhances energy and mental clarity under stress</li><li><strong>Holy Basil:</strong> Balances stress hormones, promotes calm alertness</li><li><strong>Schisandra:</strong> Supports adrenal function and mental endurance</li></ul><h3>Calming Nervines:</h3><ul><li><strong>Passionflower:</strong> Reduces anxiety without drowsiness</li><li><strong>Lemon Balm:</strong> Calms nervous tension and improves mood</li><li><strong>Chamomile:</strong> Gentle relaxation for mild anxiety</li><li><strong>Lavender:</strong> Promotes relaxation and better sleep</li></ul><h3>Amino Acids & Nutrients:</h3><ul><li><strong>L-Theanine:</strong> Promotes calm alertness without sedation</li><li><strong>GABA:</strong> Naturally calming neurotransmitter</li><li><strong>Magnesium:</strong> Muscle relaxation and nervous system support</li><li><strong>B-Complex:</strong> Supports healthy stress response and energy</li></ul><h3>Bach Flower Remedies for Stress:</h3><ul><li><strong>Rescue Remedy:</strong> Emergency stress relief blend</li><li><strong>Impatiens:</strong> For irritability and impatience</li><li><strong>Rock Rose:</strong> For panic and terror</li><li><strong>White Chestnut:</strong> For repetitive worried thoughts</li></ul>"},{id:"section3",title:"Holistic Stress Management Approach",type:"text",content:"<h2>Beyond Supplements: Complete Stress Support</h2><p>While natural products provide valuable support, customers benefit most from a holistic approach to stress management.</p><h3>Lifestyle Recommendations:</h3><h4>Sleep Hygiene:</h4><ul><li>Consistent bedtime routine</li><li>Limit screens before bed</li><li>Create a calming bedroom environment</li><li>Consider sleep-supporting supplements</li></ul><h4>Nutrition for Stress:</h4><ul><li>Regular, balanced meals to stabilize blood sugar</li><li>Limit caffeine, especially in the afternoon</li><li>Increase omega-3 rich foods</li><li>Consider probiotic foods for gut-brain connection</li></ul><h4>Movement & Exercise:</h4><ul><li>Regular physical activity reduces stress hormones</li><li>Yoga or tai chi for mind-body connection</li><li>Nature walks for natural stress relief</li><li>Even 10 minutes of movement helps</li></ul><h4>Mindfulness Practices:</h4><ul><li>Meditation apps for beginners</li><li>Deep breathing exercises</li><li>Journaling for emotional processing</li><li>Gratitude practices to shift perspective</li></ul><h3>When to Recommend Professional Help:</h3><ul><li>Symptoms interfere with daily functioning</li><li>Persistent anxiety or panic attacks</li><li>Depression or mood changes</li><li>Substance use as coping mechanism</li><li>Customer expresses thoughts of self-harm</li></ul><p>Remember: Natural products support overall wellness but don't replace professional mental health care when needed.</p><h3>Creating Personalized Recommendations:</h3><p>Ask customers about:</p><ul><li>Primary stress triggers</li><li>Time of day symptoms are worst</li><li>Current coping strategies</li><li>Sleep quality and energy levels</li><li>Any current medications or supplements</li></ul><p>This information helps you suggest the most appropriate combination of products and lifestyle strategies.</p>"}],demoSeed:!0},{brandId:p,authorUid:x[0].id,title:"Immune Support Essentials",description:"Learn about immune system basics and seasonal support strategies to help customers maintain optimal health year-round.",durationMins:30,modules:["Immune System Basics","Key Nutrients","Seasonal Strategies"],published:!0,visibility:"public",createdAt:ze(),metrics:{enrolled:0,completed:0},sections:[{id:"section1",title:"Immune System Overview",type:"text",content:"<h2>Understanding Immune Function</h2><p>The immune system is our body's defense network against pathogens, toxins, and other harmful substances.</p><h3>Two Types of Immunity:</h3><h4>Innate Immunity (First Line of Defense):</h4><ul><li>Physical barriers: skin, mucous membranes</li><li>Chemical barriers: stomach acid, enzymes</li><li>Cellular defenses: white blood cells, macrophages</li><li>Responds quickly but non-specifically</li></ul><h4>Adaptive Immunity (Learned Defense):</h4><ul><li>B cells: produce antibodies</li><li>T cells: cell-mediated immunity</li><li>Memory cells: remember past threats</li><li>Highly specific but slower to respond</li></ul><h3>Factors That Weaken Immunity:</h3><ul><li>Chronic stress and lack of sleep</li><li>Poor nutrition and dehydration</li><li>Sedentary lifestyle</li><li>Excessive alcohol consumption</li><li>Smoking and environmental toxins</li><li>Age-related immune decline</li><li>Certain medications</li></ul><h3>Signs of Compromised Immunity:</h3><ul><li>Frequent colds or infections</li><li>Slow wound healing</li><li>Persistent fatigue</li><li>Recurring digestive issues</li><li>Seasonal allergies</li></ul>"},{id:"section2",title:"Key Immune Supporting Nutrients",type:"text",content:"<h2>Essential Nutrients for Immune Health</h2><p>Certain vitamins, minerals, and compounds play crucial roles in maintaining optimal immune function.</p><h3>Vitamin C:</h3><ul><li><strong>Function:</strong> Antioxidant, supports white blood cell function</li><li><strong>Sources:</strong> Citrus fruits, berries, leafy greens</li><li><strong>Supplementation:</strong> 500-1000mg daily for prevention, up to 3000mg during illness</li><li><strong>Benefits:</strong> Reduces duration and severity of colds</li></ul><h3>Vitamin D:</h3><ul><li><strong>Function:</strong> Regulates immune cell activity, antimicrobial peptide production</li><li><strong>Sources:</strong> Sun exposure, fatty fish, fortified foods</li><li><strong>Supplementation:</strong> 1000-4000 IU daily (test levels first)</li><li><strong>Note:</strong> Deficiency linked to increased infection risk</li></ul><h3>Zinc:</h3><ul><li><strong>Function:</strong> Essential for immune cell development and function</li><li><strong>Sources:</strong> Oysters, meat, pumpkin seeds, legumes</li><li><strong>Supplementation:</strong> 8-11mg daily for adults</li><li><strong>Timing:</strong> Take on empty stomach or with small amount of food</li></ul><h3>Probiotics:</h3><ul><li><strong>Function:</strong> Support gut-associated lymphoid tissue (70% of immune system)</li><li><strong>Strains:</strong> Lactobacillus acidophilus, Bifidobacterium bifidum</li><li><strong>Benefits:</strong> Reduce respiratory and digestive infections</li><li><strong>Sources:</strong> Fermented foods, quality supplements</li></ul><h3>Elderberry:</h3><ul><li><strong>Function:</strong> Antiviral properties, immune modulation</li><li><strong>Research:</strong> May reduce flu duration by 3-4 days</li><li><strong>Forms:</strong> Syrup, gummies, capsules</li><li><strong>Dosage:</strong> Follow product instructions, start at first symptoms</li></ul>"},{id:"section3",title:"Seasonal Immune Strategies",type:"text",content:"<h2>Year-Round Immune Support</h2><p>Different seasons present unique challenges and opportunities for immune support.</p><h3>Fall/Winter Strategy (Cold & Flu Season):</h3><h4>Prevention Focus:</h4><ul><li>Daily vitamin D supplementation (higher doses)</li><li>Consistent vitamin C intake</li><li>Zinc lozenges at first sign of symptoms</li><li>Elderberry syrup for family use</li><li>Probiotic maintenance</li></ul><h4>Lifestyle Support:</h4><ul><li>Adequate sleep (7-9 hours)</li><li>Hand hygiene and surface cleaning</li><li>Stay hydrated with warm liquids</li><li>Manage stress levels</li><li>Indoor air quality (humidifiers, air purifiers)</li></ul><h3>Spring Strategy (Allergy Season):</h3><h4>Natural Antihistamines:</h4><ul><li>Quercetin with bromelain</li><li>Nettle leaf extract</li><li>Vitamin C for mast cell stabilization</li><li>Local honey for seasonal allergies</li></ul><h4>Detox Support:</h4><ul><li>Liver supporting herbs (milk thistle, dandelion)</li><li>Increased water intake</li><li>Fresh, seasonal produce</li><li>Gentle exercise to support lymphatic drainage</li></ul><h3>Summer Strategy (Travel & Activity Season):</h3><h4>On-the-Go Support:</h4><ul><li>Portable immune support packets</li><li>Electrolyte replacement</li><li>Digestive enzymes for varied diets</li><li>Travel-size hand sanitizers</li></ul><h4>Heat Stress Management:</h4><ul><li>Increased fluid intake</li><li>Cooling foods and herbs (mint, cucumber)</li><li>Adaptogens for physical stress</li><li>Sun protection for skin barrier function</li></ul><h3>Customizing Recommendations:</h3><h4>For Frequent Travelers:</h4><ul><li>Immune support packs</li><li>Probiotic maintenance</li><li>Vitamin C powder for flights</li><li>Sleep support for jet lag</li></ul><h4>For Parents/Teachers:</h4><ul><li>Family-friendly immune products</li><li>Hand hygiene education</li><li>Stress management tools</li><li>Back-to-school immune prep</li></ul><h4>For Active Individuals:</h4><ul><li>Post-workout recovery support</li><li>Anti-inflammatory nutrients</li><li>Electrolyte balance</li><li>Sleep optimization</li></ul><h4>For Seniors:</h4><ul><li>Higher vitamin D doses</li><li>B-complex for energy and immune function</li><li>Antioxidants for cellular protection</li><li>Digestive support for nutrient absorption</li></ul>"}],demoSeed:!0}];for(const I of C){const M=Je(Ue(ce,"trainings"));E.push({id:M.id,title:I.title}),u.set(M,I),f++}m.trainings=C.length,console.log(`  ✓ Created ${C.length} comprehensive trainings`),f>350&&(console.log("  ⚡ Committing batch due to size limit..."),await u.commit(),u=Ta(ce),f=0,console.log("  ✓ Batch committed successfully")),f>0&&(console.log("  ⚡ Committing batch after TRAININGS creation..."),await u.commit(),u=Ta(ce),f=0,console.log("  ✓ Batch committed successfully"))}catch(E){throw console.error("❌ Error creating trainings:",E),new Error(`Failed to create trainings: ${E.message}`)}try{console.log("📝 Creating sample programs and requests...");const E=[],C=[{brandId:p,name:"Spring Wellness Sampler",productName:"Rescue Remedy Essentials Pack",unitsAvailable:100,startDate:new Date,endDate:new Date(Date.now()+30*24*60*60*1e3),createdBy:x[0].id,createdAt:ze(),demoSeed:!0},{brandId:p,name:"Staff Education Program",productName:"Sleep Support Kit",unitsAvailable:50,startDate:new Date,endDate:new Date(Date.now()+60*24*60*60*1e3),createdBy:x[0].id,createdAt:ze(),demoSeed:!0}];for(const M of C){const V=Je(Ue(ce,"sample_programs"));E.push({id:V.id,name:M.name}),u.set(V,M),f++}m.sample_programs=C.length,console.log(`  ✓ Created ${C.length} sample programs`);const I=[{programId:E[0].id,brandId:p,userId:w[0].id,retailerId:_[0].id,quantity:5,status:"pending",createdAt:ze(),updatedAt:ze(),demoSeed:!0},{programId:E[0].id,brandId:p,userId:w[1].id,retailerId:_[0].id,quantity:3,status:"approved",createdAt:ze(),updatedAt:ze(),demoSeed:!0},{programId:E[1].id,brandId:p,userId:w[2].id,retailerId:_[1].id,quantity:10,status:"shipped",notes:"Please deliver to store manager",createdAt:ze(),updatedAt:ze(),demoSeed:!0},{programId:E[1].id,brandId:p,userId:w[3].id,retailerId:_[1].id,quantity:2,status:"denied",notes:"Exceeds store allocation",createdAt:ze(),updatedAt:ze(),demoSeed:!0}];for(const M of I){const V=Je(Ue(ce,"sample_requests"));u.set(V,M),f++}m.sample_requests=I.length,console.log(`  ✓ Created ${I.length} sample requests`),f>350&&(console.log("  ⚡ Committing batch due to size limit..."),await u.commit(),u=Ta(ce),f=0,console.log("  ✓ Batch committed successfully"))}catch(E){throw console.error("❌ Error creating sample programs and requests:",E),new Error(`Failed to create sample programs and requests: ${E.message}`)}try{console.log("📝 Creating announcements and communities...");const E=[{brandId:p,title:"New Product Training Available",message:"We've just released a new training module for our Sleep Support line. Complete it by the end of the month for special recognition!",audience:["staff"],retailerIds:[_[0].id],createdBy:x[0].id,createdAt:ze(),demoSeed:!0},{brandId:p,title:"Upcoming Seasonal Promotion",message:"Get ready for our spring wellness campaign! New promotional materials will be arriving next week. Please set up displays according to the planogram.",audience:["staff"],createdBy:x[0].id,createdAt:ze(),demoSeed:!0}];for(const M of E){const V=Je(Ue(ce,"announcements"));u.set(V,M),f++}m.announcements=E.length,console.log(`  ✓ Created ${E.length} announcements`);const C=[],I=[{id:"whats-good",createdByRole:"super_admin",createdBy:t,name:"What's Good",description:"Check out What's Good for the latest product drops and industry buzz!",members:2500,isPublic:!0,requiresVerification:!1,hasEasterEggs:!0,badge:"🌟 Open to All",isActive:!0,createdAt:ze(),demoSeed:!0},{id:"supplement-scoop",createdByRole:"super_admin",createdBy:t,name:"Supplement Scoop",description:"Stop guessing what supplements actually work and start getting insider intel from the pros who sell $10M+ in products every year.",members:850,isPublic:!1,requiresVerification:!0,hasEasterEggs:!1,badge:"🔒 Verification Required",isActive:!0,createdAt:ze(),demoSeed:!0}];for(const M of I){const V=Je(Ue(ce,"communities"),M.id);C.push({id:V.id,name:M.name}),u.set(V,{...M,brandId:p}),f++}m.communities=I.length,console.log(`  ✓ Created ${I.length} communities`)}catch(E){throw console.error("❌ Error creating announcements and communities:",E),new Error(`Failed to create announcements and communities: ${E.message}`)}try{console.log("📝 Committing final batch..."),await u.commit(),console.log("✅ All comprehensive demo data created successfully!")}catch(E){throw console.error("❌ Error committing final batch:",E),new Error(`Failed to commit final batch: ${E.message}`)}return{counts:m}}catch(r){console.error("❌ Error seeding comprehensive demo data:",r);const a={message:r.message||"Unknown error",code:r.code||"unknown",stack:r.stack||"No stack trace available"};throw console.error("Error details:",a),r}}async function Xse(){console.log("🗑️ Starting demo data reset...");try{console.log("  • Testing delete permissions...");const t=await cr(Ue(ce,"test_permissions"),{message:"Reset permission test",createdAt:ze(),isTest:!0});await Zs(t),console.log("    ✓ Delete permissions verified");const e=["brands","retailers","users","trainings","training_progress","sample_programs","sample_requests","announcements","communities","community_posts","community_comments","community_likes"];for(const n of e)try{console.log(`  • Deleting demo documents from ${n}...`),await Qse(n)}catch(s){throw console.error(`❌ Error deleting from ${n}:`,s),new Error(`Failed to delete from ${n}: ${s.message}`)}console.log("✅ All demo data reset successfully!")}catch(t){console.error("❌ Error resetting demo data:",t);const e={message:t.message||"Unknown error",code:t.code||"unknown",stack:t.stack||"No stack trace available"};throw console.error("Error details:",e),t}}async function Qse(t){const e=Ue(ce,t),n=yt(e,ht("demoSeed","==",!0));try{const s=await fs(n);if(s.empty){console.log(`    ✓ No demo documents found in ${t}`);return}console.log(`    • Found ${s.size} demo documents to delete in ${t}`);const r=400,a=[];let l=Ta(ce),d=0;s.docs.forEach(u=>{l.delete(u.ref),d++,d>=r&&(a.push(l.commit()),l=Ta(ce),d=0)}),d>0&&a.push(l.commit()),await Promise.all(a),console.log(`    ✓ Deleted ${s.size} demo documents from ${t}`)}catch(s){throw console.error(`❌ Error querying or deleting from ${t}:`,s),s}}const Zse=()=>{const{user:t,isSuperAdmin:e}=bn(),[n,s]=b.useState(!1),[r,a]=b.useState(null),[l,d]=b.useState(null),[u,f]=b.useState(null),[m,p]=b.useState(!1),[x,w]=b.useState(""),[j,S]=b.useState(""),_=b.useCallback(()=>{d(null),f(null)},[]),E=b.useCallback(async()=>{if(t!=null&&t.uid)try{console.log("🧪  Testing Firestore permissions …");const{doc:M,getDoc:V,addDoc:z,collection:D,serverTimestamp:A,deleteDoc:T}=await Ah(async()=>{const{doc:F,getDoc:J,addDoc:Z,collection:q,serverTimestamp:Y,deleteDoc:W}=await Promise.resolve().then(()=>Ij);return{doc:F,getDoc:J,addDoc:Z,collection:q,serverTimestamp:Y,deleteDoc:W}},[]),{db:R}=await Ah(async()=>{const{db:F}=await Promise.resolve().then(()=>TG);return{db:F}},void 0);console.log("  • Test 1: reading current user document");const P=await V(M(R,"users",t.uid));console.log("    ↳ exists:",P.exists(),"| data:",P.data()),console.log("  • Test 2: creating test_permissions document");const O=await z(D(R,"test_permissions"),{message:"Permission test",createdAt:A(),createdBy:t.uid,isDemo:!0});console.log("    ↳ created with id:",O.id),console.log("  • Test 3: deleting test_permissions document"),await T(O),console.log("    ↳ deleted successfully"),console.log("🎉  All permission tests passed!")}catch(M){console.error("❌  Firestore permission test failed:",M),console.error("     code:",M.code,"| name:",M.name,"| message:",M.message),f(`${M.code||M.name}: ${M.message}`)}},[t==null?void 0:t.uid]),C=b.useCallback(async()=>{_(),a("seed"),s(!0);const M=j.split(",").map(z=>z.trim()).filter(Boolean),V={};x.trim()&&(V.brandManagerUid=x.trim()),M.length&&(V.staffUids=M);try{const z=await Kse(t.uid,V);d(z.counts),f(null)}catch(z){const D=z.code||z.name||"Error";f(`${D}: ${z.message}`),d(null)}finally{s(!1)}},[t==null?void 0:t.uid,x,j,_]),I=b.useCallback(async()=>{_(),a("reset"),s(!0),p(!1);try{await Xse(),d({reset:!0}),f(null)}catch(M){const V=M.code||M.name||"Error";f(`${V}: ${M.message}`),d(null)}finally{s(!1)}},[_]);return e?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Demo Data Management"}),i.jsx("p",{className:"text-gray-500 mt-2",children:"Seed or reset demo data for testing and development purposes."}),i.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mt-4",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current User Debug Info"}),i.jsxs("div",{className:"text-xs space-y-1 text-gray-600",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"UID:"})," ",(t==null?void 0:t.uid)||"Not available"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Email:"})," ",(t==null?void 0:t.email)||"Not available"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Role:"})," ",(t==null?void 0:t.role)||"Not available"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Is Super Admin:"})," ",e?"Yes":"No"]})]}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{type:"button",onClick:E,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-xs font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors",children:"🧪 Test Firestore Permissions"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:i.jsx(Lh,{className:"h-5 w-5 text-blue-700"})}),i.jsx("h2",{className:"text-lg font-medium",children:"Seed Demo Data"})]}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Creates sample brands, users, trainings, sample requests, and announcements for testing purposes. All created data will be marked as demo data and can be safely removed later."}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Brand Manager UID ",i.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),i.jsx("input",{type:"text",value:x,onChange:M=>w(M.target.value),placeholder:"Existing Brand Manager UID",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Staff UIDs ",i.jsx("span",{className:"text-gray-400",children:"(comma-separated, optional)"})]}),i.jsx("input",{type:"text",value:j,onChange:M=>S(M.target.value),placeholder:"uid1, uid2, uid3 …",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]}),i.jsx("button",{onClick:C,disabled:n,className:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors","aria-label":"Seed demo data",children:n&&r==="seed"?i.jsxs("span",{className:"flex items-center justify-center",children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Seeding Data..."]}):"Seed Demo Data"})]})}),i.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"bg-red-100 p-2 rounded-full",children:i.jsx(ac,{className:"h-5 w-5 text-red-700"})}),i.jsx("h2",{className:"text-lg font-medium",children:"Reset Demo Data"})]}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Removes all demo data from the database. This will only delete records marked as demo data and will not affect any real production data."}),i.jsx("button",{onClick:()=>p(!0),disabled:n,className:"w-full py-2 px-4 bg-red-600 hover:bg-red-700 disabled:bg-red-300 text-white font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors","aria-label":"Reset demo data",children:n&&r==="reset"?i.jsxs("span",{className:"flex items-center justify-center",children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting Data..."]}):"Reset Demo Data"})]})})]}),l&&!u&&i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 animate-fadeIn",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Ur,{className:"h-5 w-5 text-green-600","aria-hidden":"true"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-lg font-medium text-green-800",children:r==="seed"?"Demo Data Created Successfully":"Demo Data Reset Successfully"}),r==="seed"&&i.jsxs("div",{className:"mt-2 text-sm text-green-700",children:[i.jsx("p",{className:"font-medium mb-2",children:"Created the following demo records:"}),i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:Object.entries(l).map(([M,V])=>i.jsxs("li",{children:[M,": ",V]},M))})]}),r==="reset"&&i.jsx("div",{className:"mt-2 text-sm text-green-700",children:i.jsx("p",{children:"All demo data has been successfully removed from the database."})})]})]})}),u&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 animate-fadeIn",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(js,{className:"h-5 w-5 text-red-600","aria-hidden":"true"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Error"}),i.jsx("div",{className:"mt-2 text-sm text-red-700",children:i.jsx("p",{children:u})})]})]})}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Reset"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset all demo data? This action cannot be undone."}),i.jsxs("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Cancel"}),i.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Reset Data"})]})]})}),i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-yellow-800 mb-2",children:"Important Notes"}),i.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-sm text-yellow-700",children:[i.jsx("li",{children:"Demo data is intended for testing purposes only and should not be used in production environments."}),i.jsxs("li",{children:["All demo data is marked with ",i.jsx("code",{className:"bg-yellow-100 px-1 py-0.5 rounded",children:"demoSeed: true"})," and can be safely removed using the reset function."]}),i.jsxs("li",{children:["When ",i.jsx("code",{className:"bg-yellow-100 px-1 py-0.5 rounded",children:"VITE_USE_EMULATOR=true"}),", demo users are created in Firebase Auth on the local emulator (safe). ",i.jsx("strong",{children:"Do not"})," run seeding against production (",i.jsx("code",{className:"bg-yellow-100 px-1 py-0.5 rounded",children:"VITE_USE_EMULATOR=false"}),"), as it would create real Auth accounts."]}),i.jsx("li",{children:"This feature is only available to super administrators."})]})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[i.jsx("h2",{className:"text-lg font-medium text-red-800 mb-2",children:"Unauthorized Access"}),i.jsx("p",{className:"text-red-600",children:"This page is only accessible to super administrators."})]})})},Jse=()=>{var m;const[t,e]=b.useState({message:"",isError:!1}),[n,s]=b.useState({message:"",isError:!1,count:0}),[r,a]=b.useState(!1),[l,d]=b.useState(!1),u=async()=>{if(!or.currentUser){e({message:"No user is currently signed in.",isError:!0});return}a(!0),e({message:"Promoting user...",isError:!1});try{const p=Je(ce,"users",or.currentUser.uid);await qr(p,{role:"super_admin",approved:!0,email:or.currentUser.email??null,uid:or.currentUser.uid},{merge:!0}),e({message:`Successfully promoted ${or.currentUser.email} to super_admin!`,isError:!1})}catch(p){e({message:`Error promoting user: ${p.message}`,isError:!0})}finally{a(!1)}},f=async()=>{d(!0),s({message:"Starting migration...",isError:!1,count:0});try{const p=Ue(ce,"users"),x=await fs(p);let w=0,j=0;for(const S of x.docs){const _=S.data();if(_.uid&&S.id!==_.uid)try{const E=Je(ce,"users",_.uid);await qr(E,{..._},{merge:!0}),await Zs(S.ref),w++}catch{j++}}s({message:`Migration complete! ${w} documents migrated.${j>0?` ${j} errors encountered.`:""}`,isError:j>0,count:w})}catch(p){s({message:`Error during migration: ${p.message}`,isError:!0,count:0})}finally{d(!1)}};return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Developer Tools"}),i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:i.jsxs("p",{className:"text-yellow-700",children:["⚠️ These tools modify data directly and are intended for development use only. Current environment: ","Emulator"]})})]}),i.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"User Role Management"}),i.jsxs("p",{className:"text-gray-600 mb-4",children:["Promote the current user (",((m=or.currentUser)==null?void 0:m.email)||"Not signed in",") to super_admin role."]}),i.jsx("button",{onClick:u,disabled:r||!or.currentUser,className:`px-4 py-2 rounded-md ${r?"bg-blue-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:r?"Promoting...":"Promote me to super_admin"}),t.message&&i.jsx("div",{className:`mt-4 p-3 rounded-md ${t.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:t.message})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"User Document Migration"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Migrate user documents to use their UID as the document ID."}),i.jsx("button",{onClick:f,disabled:l,className:`px-4 py-2 rounded-md ${l?"bg-purple-300 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:l?"Migrating...":"Migrate user docs to UID keys"}),n.message&&i.jsxs("div",{className:`mt-4 p-3 rounded-md ${n.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:[n.message,n.count>0&&i.jsxs("div",{className:"mt-2 font-semibold",children:["Documents migrated: ",n.count]})]})]})]})]})},ere=()=>{const{user:t}=bn(),e=Js.options.projectId,n="production",s="true",r="true",a=r==="true",d={label:"Emulator",className:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200"};return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:"Environment Check"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Current runtime environment information"})]}),i.jsx(an,{variant:"outline",className:`text-md py-1 px-3 ${d.className}`,children:d.label})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs(De,{children:[i.jsx(et,{className:"pb-2",children:i.jsx(nt,{className:"text-sm font-medium",children:"Netlify Context"})}),i.jsx(He,{children:i.jsx("p",{className:"text-xl font-semibold",children:"undefined"})})]}),i.jsxs(De,{children:[i.jsx(et,{className:"pb-2",children:i.jsx(nt,{className:"text-sm font-medium",children:"Mode"})}),i.jsx(He,{children:i.jsx("p",{className:"text-xl font-semibold",children:n})})]}),i.jsxs(De,{children:[i.jsx(et,{className:"pb-2",children:i.jsx(nt,{className:"text-sm font-medium",children:"Using Emulator"})}),i.jsx(He,{children:i.jsx("p",{className:"text-xl font-semibold",children:s})})]}),i.jsxs(De,{children:[i.jsx(et,{className:"pb-2",children:i.jsxs(nt,{className:"text-sm font-medium",children:["Show Demo Tools ",i.jsx("span",{className:"text-xs text-gray-500",children:"(build-time)"})]})}),i.jsxs(He,{children:[i.jsxs("p",{className:"text-sm",children:["Raw: ",i.jsx("span",{className:"font-semibold",children:String(r)})]}),i.jsxs("p",{className:"text-sm",children:["Computed: ",i.jsx("span",{className:"font-semibold",children:String(a)})]})]})]}),i.jsxs(De,{children:[i.jsx(et,{className:"pb-2",children:i.jsx(nt,{className:"text-sm font-medium",children:"Firebase Project ID"})}),i.jsx(He,{children:i.jsx("p",{className:"text-xl font-semibold",children:e})})]}),i.jsxs(De,{children:[i.jsx(et,{className:"pb-2",children:i.jsx(nt,{className:"text-sm font-medium",children:"User UID"})}),i.jsx(He,{children:i.jsx("p",{className:"text-xl font-semibold",children:(t==null?void 0:t.uid)||"Not authenticated"})})]}),i.jsxs(De,{children:[i.jsx(et,{className:"pb-2",children:i.jsx(nt,{className:"text-sm font-medium",children:"User Role"})}),i.jsx(He,{children:i.jsx("p",{className:"text-xl font-semibold",children:(t==null?void 0:t.role)||"None"})})]})]})]})};function tre(){const t=ks(),e=async()=>{try{await e0(or),localStorage.setItem("FORCE_PUBLIC_WEBSITE","true"),t("/?logout=1")}catch{}};return i.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 max-w-md w-full text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Your account is pending approval"}),i.jsx("p",{className:"text-gray-600 mb-8",children:"We'll email you when it's live."}),i.jsxs(Se,{onClick:e,className:"flex items-center justify-center",children:[i.jsx(xh,{className:"w-4 h-4 mr-2"}),"Back to home"]})]})})}var DS="Progress",MS=100,[nre,Jue]=xi(DS),[sre,rre]=nre(DS),j6=b.forwardRef((t,e)=>{const{__scopeProgress:n,value:s=null,max:r,getValueLabel:a=ire,...l}=t;(r||r===0)&&!FR(r)&&console.error(are(`${r}`,"Progress"));const d=FR(r)?r:MS;s!==null&&!BR(s,d)&&console.error(ore(`${s}`,"Progress"));const u=BR(s,d)?s:null,f=T0(u)?a(u,d):void 0;return i.jsx(sre,{scope:n,value:u,max:d,children:i.jsx(bt.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":T0(u)?u:void 0,"aria-valuetext":f,role:"progressbar","data-state":E6(u,d),"data-value":u??void 0,"data-max":d,...l,ref:e})})});j6.displayName=DS;var N6="ProgressIndicator",S6=b.forwardRef((t,e)=>{const{__scopeProgress:n,...s}=t,r=rre(N6,n);return i.jsx(bt.div,{"data-state":E6(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...s,ref:e})});S6.displayName=N6;function ire(t,e){return`${Math.round(t/e*100)}%`}function E6(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function T0(t){return typeof t=="number"}function FR(t){return T0(t)&&!isNaN(t)&&t>0}function BR(t,e){return T0(t)&&!isNaN(t)&&t<=e&&t>=0}function are(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${MS}\`.`}function ore(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${MS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var C6=j6,lre=S6;const T6=b.forwardRef(({className:t,value:e,...n},s)=>i.jsx(C6,{ref:s,className:Qe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:i.jsx(lre,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));T6.displayName=C6.displayName;var cre="Separator",zR="horizontal",dre=["horizontal","vertical"],A6=b.forwardRef((t,e)=>{const{decorative:n,orientation:s=zR,...r}=t,a=ure(s)?s:zR,d=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(bt.div,{"data-orientation":a,...d,...r,ref:e})});A6.displayName=cre;function ure(t){return dre.includes(t)}var hre=A6;function oh({className:t,orientation:e="horizontal",decorative:n=!0,...s}){return i.jsx(hre,{"data-slot":"separator-root",decorative:n,orientation:e,className:Qe("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...s})}function A0(t,e="Firestore Query"){if(t.code==="failed-precondition"||t.message.includes("index")){const n=/(https?:\/\/[^\s)]+)/,s=t.message.match(n);if(s&&s[1]){const r=s[1];console.groupCollapsed(`🔍 Missing Firestore Index for: ${e}`),console.info(`Create the index here: ${r}`),console.error("Original error:",t),console.groupEnd()}else console.error(`${e} error:`,t)}else t.code==="permission-denied"?(console.groupCollapsed(`🔒 Firestore Permission Denied: ${e}`),console.error("Access denied:",t.message),console.info("Check your Firestore security rules"),console.error("Original error:",t),console.groupEnd()):console.error(`${e} error:`,t)}async function f1(t,e="Firestore Query"){try{return await fs(t)}catch(n){throw A0(n,e),n}}function fre(t,e,n,s="Firestore Listener"){return Ln(t,e,r=>{A0(r,s),n&&n(r)})}function mre({onConfirm:t,onCancel:e}){return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[i.jsx("h2",{className:"text-xl font-bold mb-2 text-red-600",children:"Warning"}),i.jsx("p",{className:"mb-4",children:"This challenge has already been published and may have user participation. Editing it could affect users who have already started or completed it. Are you sure you want to continue?"}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:e,children:"Cancel"}),i.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded",onClick:t,children:"Yes, Edit Anyway"})]})]})})}const $R=[{value:"photo",label:"Photo Upload"},{value:"quiz",label:"Quiz"},{value:"social",label:"Social Media Ask"},{value:"video_quiz",label:"Watch Video + Quiz"},{value:"read_quiz",label:"Read Lesson + Quiz"},{value:"document",label:"Document Upload"},{value:"audio",label:"Audio Recording"}];function gre({tabs:t,current:e,setCurrent:n}){return i.jsx("div",{className:"flex space-x-2 mb-4",children:t.map((s,r)=>i.jsx("button",{className:`px-4 py-2 rounded-t ${e===r?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>n(r),children:s},s))})}function pre({brandId:t,challenge:e,mode:n,onSaved:s,onCancel:r}){const[a,l]=b.useState(0),[d,u]=b.useState({title:"",description:"",communityId:"",startDate:"",endDate:"",points:0,status:"draft",reusedContent:!1}),[f,m]=b.useState([]),[p,x]=b.useState(!1);b.useEffect(()=>{var I,M,V,z;e&&(u({title:e.title||"",description:e.description||"",communityId:e.communityId||"",startDate:e.startDate?(M=(I=e.startDate).toDate)==null?void 0:M.call(I).toISOString().slice(0,10):"",endDate:e.endDate?(z=(V=e.endDate).toDate)==null?void 0:z.call(V).toISOString().slice(0,10):"",points:e.points||0,status:e.status||"draft",reusedContent:e.reusedContent||!1}),m(e.activities||[]))},[e]);const w=I=>{const{name:M,value:V,type:z,checked:D}=I.target;u(A=>({...A,[M]:z==="checkbox"?D:V}))},j=()=>{m(I=>[...I,{type:"",instructions:"",specs:""}])},S=(I,M,V)=>{m(z=>z.map((D,A)=>A===I?{...D,[M]:V}:D))},_=I=>{m(M=>M.filter((V,z)=>z!==I))},E=async()=>{if(n==="edit"&&d.status==="published"){x(!0);return}await C()},C=async()=>{const I={...d,activities:f,createdAt:(e==null?void 0:e.createdAt)||ze(),updatedAt:ze()};n==="edit"&&(e!=null&&e.id)?await Qn(Je(ce,"brands",t,"challenges",e.id),I):await cr(Ue(ce,"brands",t,"challenges"),I),s()};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-2xl relative",children:[i.jsx("button",{className:"absolute top-2 right-2 text-gray-500",onClick:r,children:"×"}),i.jsx(gre,{tabs:["Basic Info","Activities","Review & Publish"],current:a,setCurrent:l}),a===0&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Title"}),i.jsx("input",{className:"w-full border rounded p-2",name:"title",value:d.title,onChange:w})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Description"}),i.jsx("textarea",{className:"w-full border rounded p-2",name:"description",value:d.description,onChange:w})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Community"}),i.jsxs("select",{className:"w-full border rounded p-2",name:"communityId",value:d.communityId,onChange:w,children:[i.jsx("option",{value:"",children:"Select community"}),i.jsx("option",{value:"public",children:"Public"}),i.jsx("option",{value:"retail1",children:"Retail Community 1"}),i.jsx("option",{value:"retail2",children:"Retail Community 2"}),i.jsx("option",{value:"retail3",children:"Retail Community 3"})]})]}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Start Date"}),i.jsx("input",{type:"date",className:"border rounded p-2",name:"startDate",value:d.startDate,onChange:w})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"End Date"}),i.jsx("input",{type:"date",className:"border rounded p-2",name:"endDate",value:d.endDate,onChange:w})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Points"}),i.jsx("input",{type:"number",className:"border rounded p-2",name:"points",value:d.points,onChange:w,min:0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Status"}),i.jsxs("select",{className:"w-full border rounded p-2",name:"status",value:d.status,onChange:w,children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"})]})]}),i.jsx("div",{children:i.jsxs("label",{children:[i.jsx("input",{type:"checkbox",name:"reusedContent",checked:d.reusedContent,onChange:w})," ","Re-use content (yearly subscription required)"]})})]}),a===1&&i.jsxs("div",{children:[i.jsx("div",{className:"mb-4",children:i.jsx("button",{className:"px-3 py-1 bg-blue-500 text-white rounded",onClick:j,children:"+ Add Activity"})}),f.map((I,M)=>i.jsxs("div",{className:"border rounded p-3 mb-3 bg-gray-50 relative",children:[i.jsx("button",{className:"absolute top-2 right-2 text-red-500",onClick:()=>_(M),children:"×"}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Type"}),i.jsxs("select",{className:"w-full border rounded p-2",value:I.type,onChange:V=>S(M,"type",V.target.value),children:[i.jsx("option",{value:"",children:"Select type"}),$R.map(V=>i.jsx("option",{value:V.value,children:V.label},V.value))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Instructions"}),i.jsx("input",{className:"w-full border rounded p-2",value:I.instructions,onChange:V=>S(M,"instructions",V.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Specs (file type, size, etc.)"}),i.jsx("input",{className:"w-full border rounded p-2",value:I.specs,onChange:V=>S(M,"specs",V.target.value)})]})]},M))]}),a===2&&i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold mb-2",children:"Review Challenge"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Title:"})," ",d.title]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Description:"})," ",d.description]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Community:"})," ",d.communityId]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Start:"})," ",d.startDate]}),i.jsxs("div",{children:[i.jsx("strong",{children:"End:"})," ",d.endDate]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Points:"})," ",d.points]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Status:"})," ",d.status]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Re-used Content:"})," ",d.reusedContent?"Yes":"No"]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("strong",{children:"Activities:"}),i.jsx("ul",{children:f.map((I,M)=>{var V;return i.jsxs("li",{children:[i.jsx("b",{children:((V=$R.find(z=>z.value===I.type))==null?void 0:V.label)||I.type}),": ",I.instructions," (",I.specs,")"]},M)})})]})]}),i.jsxs("div",{className:"flex justify-between mt-6",children:[i.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:r,children:"Cancel"}),i.jsxs("div",{children:[a>0&&i.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded mr-2",onClick:()=>l(a-1),children:"Back"}),a<2&&i.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>l(a+1),children:"Next"}),a===2&&i.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded",onClick:E,children:"Save Challenge"})]})]}),p&&i.jsx(mre,{onConfirm:async()=>{x(!1),await C()},onCancel:()=>x(!1)})]})})}function xre(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}Array(12).fill(0);let m1=1;class yre{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:s,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:m1++,l=this.toasts.find(u=>u.id===a),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),l?this.toasts=this.toasts.map(u=>u.id===a?(this.publish({...u,...e,id:a,title:s}),{...u,...e,id:a,dismissible:d,title:s}):u):this.addToast({title:s,...r,dismissible:d,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let a=s!==void 0,l;const d=r.then(async f=>{if(l=["resolve",f],Ct.isValidElement(f))a=!1,this.create({id:s,type:"default",message:f});else if(bre(f)&&!f.ok){a=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${f.status}`):n.error,x=typeof n.description=="function"?await n.description(`HTTP error! status: ${f.status}`):n.description,j=typeof p=="object"&&!Ct.isValidElement(p)?p:{message:p};this.create({id:s,type:"error",description:x,...j})}else if(f instanceof Error){a=!1;const p=typeof n.error=="function"?await n.error(f):n.error,x=typeof n.description=="function"?await n.description(f):n.description,j=typeof p=="object"&&!Ct.isValidElement(p)?p:{message:p};this.create({id:s,type:"error",description:x,...j})}else if(n.success!==void 0){a=!1;const p=typeof n.success=="function"?await n.success(f):n.success,x=typeof n.description=="function"?await n.description(f):n.description,j=typeof p=="object"&&!Ct.isValidElement(p)?p:{message:p};this.create({id:s,type:"success",description:x,...j})}}).catch(async f=>{if(l=["reject",f],n.error!==void 0){a=!1;const m=typeof n.error=="function"?await n.error(f):n.error,p=typeof n.description=="function"?await n.description(f):n.description,w=typeof m=="object"&&!Ct.isValidElement(m)?m:{message:m};this.create({id:s,type:"error",description:p,...w})}}).finally(()=>{a&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((f,m)=>d.then(()=>l[0]==="reject"?m(l[1]):f(l[1])).catch(m));return typeof s!="string"&&typeof s!="number"?{unwrap:u}:Object.assign(s,{unwrap:u})},this.custom=(e,n)=>{const s=(n==null?void 0:n.id)||m1++;return this.create({jsx:e(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ri=new yre,vre=(t,e)=>{const n=(e==null?void 0:e.id)||m1++;return Ri.addToast({title:t,...e,id:n}),n},bre=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",wre=vre,_re=()=>Ri.toasts,jre=()=>Ri.getActiveToasts(),un=Object.assign(wre,{success:Ri.success,info:Ri.info,warning:Ri.warning,error:Ri.error,custom:Ri.custom,message:Ri.message,promise:Ri.promise,dismiss:Ri.dismiss,loading:Ri.loading},{getHistory:_re,getToasts:jre});xre("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const Nre=10;function g1({onUploadComplete:t,onUploadError:e,folder:n="uploads",allowedTypes:s=["image/jpeg","image/png","image/gif","application/pdf"],maxSizeMB:r=Nre,buttonText:a="Upload File",showPreview:l=!0,className:d="",disabled:u=!1,brandId:f=null,resizeImage:m=!0,maxWidth:p=1200,maxHeight:x=1200,quality:w=.8}){const[j,S]=b.useState(null),[_,E]=b.useState(null),[C,I]=b.useState(0),[M,V]=b.useState(!1),[z,D]=b.useState(null),[A,T]=b.useState(!1),[R,P]=b.useState(null),[O,F]=b.useState(null),[J,Z]=b.useState(0),q=b.useRef(null),Y=r*1024*1024,W=!1,H=!1,B=b.useCallback(()=>{S(null),E(null),I(0),D(null),T(!1),P(null),F(null),q.current&&(q.current.value="")},[]),K=le=>{const Ne=le.target.files[0];if(Ne){if(D(null),T(!1),I(0),P(null),F(null),s&&!s.includes(Ne.type)){D(`Invalid file type. Allowed types: ${s.join(", ")}`);return}if(Ne.size>Y){D(`File size exceeds the maximum limit of ${r}MB`);return}if(S(Ne),Ne.type.startsWith("image/")&&l){const Pe=new FileReader;Pe.onload=Ge=>{E(Ge.target.result)},Pe.readAsDataURL(Ne)}else E(null)}},ne=le=>{const Ne=Date.now(),Pe=Math.random().toString(36).substring(2,10),Ge=le.split(".").pop();return`${Ne}_${Pe}.${Ge}`},te=le=>{let Ne=n;return f&&(Ne=`${Ne}/${f}`),`${Ne}/${le}`},fe=async()=>{if(!(!j||M)){V(!0),I(0),D(null),T(!1);try{const le=ne(j.name),Ne=te(le);F(Ne);let Pe=j;if(j.type.startsWith("image/")&&m)try{Pe=await ve(j)}catch(ot){console.error("Error resizing image:",ot),Pe=j}const Ge=af(Xa,Ne),Ye=BP(Ge,Pe);Ye.on("state_changed",ot=>{const Dt=ot.bytesTransferred/ot.totalBytes*100;I(Dt)},ot=>{console.error("Upload error:",ot),D(`Upload failed: ${ot.message}`),V(!1),e&&e(ot)},async()=>{try{const ot=await sp(Ye.snapshot.ref);P(ot),T(!0),V(!1),t&&t({url:ot,path:Ne,fileName:le,originalName:j.name,size:j.size,type:j.type})}catch(ot){console.error("Error getting download URL:",ot),D(`Failed to get download URL: ${ot.message}`),V(!1),e&&e(ot)}})}catch(le){console.error("Upload setup error:",le),D(`Failed to start upload: ${le.message}`),V(!1),e&&e(le)}}},ke=()=>{Z(le=>le+1),D(null),fe()},Ee=b.useCallback(async()=>!0,[]);Ct.useEffect(()=>{},[Ee]);const ve=async le=>!m||!le.type.startsWith("image/")||p<=0&&x<=0?le:new Promise((Ne,Pe)=>{const Ge=new Image;Ge.onload=()=>{let{width:Ye,height:ot}=Ge;if(Ye<=p&&ot<=x)return Ne(le);const Dt=Math.min(p/Ye,x/ot),je=Math.round(Ye*Dt),qe=Math.round(ot*Dt),ct=document.createElement("canvas");ct.width=je,ct.height=qe,ct.getContext("2d").drawImage(Ge,0,0,je,qe);const pt=le.type==="image/png"?"image/png":le.type==="image/webp"?"image/webp":"image/jpeg";ct.toBlob(X=>{if(!X)return Pe(new Error("Canvas is empty"));Ne(X)},pt,w)},Ge.onerror=Pe,Ge.src=URL.createObjectURL(le)});return i.jsx("div",{className:`file-uploader ${d}`,children:i.jsxs("div",{className:"mb-4",children:[i.jsx("input",{type:"file",onChange:K,className:"hidden",ref:q,accept:s.join(","),disabled:M||u}),!j&&i.jsxs(Se,{type:"button",onClick:()=>{var le;return(le=q.current)==null?void 0:le.click()},disabled:M||u,variant:"outline",className:"w-full",children:[i.jsx(l0,{className:"h-4 w-4 mr-2"}),a]}),m&&i.jsxs("p",{className:"mt-2 text-xs text-muted-foreground",children:["Recommended image size ≤ ",p,"×",x,"px"]}),j&&i.jsx(De,{className:"mt-2",children:i.jsxs(He,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Sk,{className:"h-5 w-5 mr-2 text-green-600"}),i.jsx("div",{className:"truncate max-w-[200px]",children:j.name})]}),!M&&i.jsx(Se,{variant:"ghost",size:"icon",onClick:B,className:"h-8 w-8",children:i.jsx(WN,{className:"h-4 w-4"})})]}),_&&l&&i.jsx("div",{className:"mt-3 relative",children:i.jsx("img",{src:_,alt:"Preview",className:"max-h-40 max-w-full rounded-md object-contain mx-auto"})}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[(j.size/1024/1024).toFixed(2),"MB"]}),M&&i.jsxs("div",{className:"mt-3",children:[i.jsx(T6,{value:C,className:"h-2"}),i.jsxs("div",{className:"text-xs text-center mt-1",children:[C.toFixed(0),"%"]})]}),j&&!M&&!A&&i.jsxs(Se,{onClick:fe,className:"w-full mt-3",disabled:M||u,children:[i.jsx(l0,{className:"h-4 w-4 mr-2"}),"Upload"]}),M&&i.jsxs("div",{className:"flex items-center justify-center mt-3 text-sm text-muted-foreground",children:[i.jsx(Da,{className:"h-3 w-3 mr-2 animate-spin"}),"Uploading..."]}),A&&i.jsx(Pi,{className:"mt-3 bg-green-50 text-green-800 border-green-200",children:i.jsxs(Oi,{className:"flex items-center text-sm",children:[i.jsx(Sk,{className:"h-4 w-4 mr-2"}),"File uploaded successfully"]})}),z&&i.jsx(Pi,{className:"mt-3 bg-red-50 text-red-800 border-red-200",children:i.jsxs(Oi,{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(js,{className:"h-4 w-4 mr-2"}),z]}),i.jsxs(Se,{variant:"outline",size:"sm",onClick:ke,className:"self-start",children:[i.jsx(sX,{className:"h-3 w-3 mr-2"}),"Retry Upload"]})]})}),W]})})]})})}function Sre({brandId:t,lesson:e=null,onSuccess:n,onCancel:s}){const[r,a]=b.useState(""),[l,d]=b.useState(""),[u,f]=b.useState(""),[m,p]=b.useState("article"),[x,w]=b.useState("draft"),[j,S]=b.useState(""),[_,E]=b.useState(""),[C,I]=b.useState(!1),[M,V]=b.useState(null),[z,D]=b.useState("details"),A=!!e;b.useEffect(()=>{e&&(a(e.title||""),d(e.description||""),f(e.content||""),p(e.type||"article"),w(e.status||"draft"),S(e.featuredImage||""),e.type==="video"&&e.content&&E(e.content))},[e]);const T=async O=>{if(O.preventDefault(),!r.trim()){un.error("Title is required");return}try{I(!0),V(null);const F={title:r,description:l,content:m==="video"?_:u,type:m,status:x,brandId:t,featuredImage:j,updatedAt:ze()};if(A||(F.createdAt=ze()),A){const J=Je(ce,"lessons",e.id);await Qn(J,F),un.success("Lesson updated successfully")}else await cr(Ue(ce,"lessons"),F),un.success("Lesson created successfully");n&&n()}catch(F){console.error("Error saving lesson:",F),V(F.message||"Failed to save lesson"),un.error(`Error: ${F.message||"Failed to save lesson"}`)}finally{I(!1)}},R=O=>{S(O)},P=O=>{E(O),m==="video"&&f(O)};return i.jsxs("form",{onSubmit:T,className:"space-y-6",children:[i.jsxs(ll,{value:z,onValueChange:D,children:[i.jsxs(eo,{className:"grid grid-cols-3 mb-4",children:[i.jsx(on,{value:"details",children:"Basic Details"}),i.jsx(on,{value:"content",children:"Content"}),i.jsx(on,{value:"media",children:"Media"})]}),i.jsxs(yn,{value:"details",className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{htmlFor:"title",className:"text-sm font-medium",children:["Title ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(gt,{id:"title",value:r,onChange:O=>a(O.target.value),placeholder:"Lesson title",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"status",className:"text-sm font-medium",children:"Status"}),i.jsxs(Ns,{value:x,onValueChange:w,children:[i.jsx(ds,{id:"status",children:i.jsx(Ss,{placeholder:"Select status"})}),i.jsxs(us,{children:[i.jsx($e,{value:"draft",children:"Draft"}),i.jsx($e,{value:"published",children:"Published"})]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),i.jsx(ta,{id:"description",value:l,onChange:O=>d(O.target.value),placeholder:"Brief description of this lesson",rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"type",className:"text-sm font-medium",children:"Content Type"}),i.jsxs(Ns,{value:m,onValueChange:O=>{p(O),O==="video"&&_&&f(_)},children:[i.jsx(ds,{id:"type",children:i.jsx(Ss,{placeholder:"Select type"})}),i.jsxs(us,{children:[i.jsx($e,{value:"article",children:"Article"}),i.jsx($e,{value:"video",children:"Video"}),i.jsx($e,{value:"audio",children:"Audio"}),i.jsx($e,{value:"event",children:"Event"})]})]})]})]}),i.jsx(yn,{value:"content",className:"space-y-4",children:m==="article"?i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"content",className:"text-sm font-medium",children:"Article Content"}),i.jsx(ta,{id:"content",value:u,onChange:O=>f(O.target.value),placeholder:"Enter the article content here...",rows:12,className:"font-mono"})]}):m==="video"?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Video URL"}),i.jsx(gt,{value:_,onChange:O=>{E(O.target.value),f(O.target.value)},placeholder:"Enter video URL or upload below"})]}),i.jsx(De,{children:i.jsx(He,{className:"pt-6",children:i.jsx(g1,{folder:`brands/${t}/lessons/videos`,filePrefix:`lesson-video-${new Date().getTime()}`,defaultValue:_,onUploadComplete:P,allowedTypes:["video/mp4","video/webm"],maxSizeMB:200})})}),_&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Video Preview"}),i.jsx("div",{className:"aspect-video bg-gray-100 rounded-md overflow-hidden",children:i.jsx("iframe",{src:_,className:"w-full h-full",allowFullScreen:!0,title:"Video preview"})})]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"content",className:"text-sm font-medium",children:"Content"}),i.jsx(ta,{id:"content",value:u,onChange:O=>f(O.target.value),placeholder:`Enter ${m} content or URL here...`,rows:8})]})}),i.jsx(yn,{value:"media",className:"space-y-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-sm font-medium",children:"Featured Image"}),i.jsx(De,{children:i.jsx(He,{className:"pt-6",children:i.jsx(g1,{folder:`brands/${t}/lessons/images`,filePrefix:`lesson-image-${new Date().getTime()}`,defaultValue:j,onUploadComplete:R,allowedTypes:["image/jpeg","image/png","image/gif","image/webp"],maxSizeMB:10})})})]})})]}),M&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 rounded-md p-4",children:M}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(Se,{type:"button",variant:"outline",onClick:s,disabled:C,children:"Cancel"}),i.jsx(Se,{type:"submit",disabled:C||!r.trim(),className:"flex items-center gap-2",children:C?i.jsxs(i.Fragment,{children:[i.jsx(Da,{className:"h-4 w-4 animate-spin"}),A?"Saving...":"Creating..."]}):A?i.jsxs(i.Fragment,{children:[i.jsx(a0,{className:"h-4 w-4"}),"Save Changes"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ma,{className:"h-4 w-4"}),"Create Lesson"]})})]})]})}const lh=t=>{if(!t)return"N/A";try{return(t.toDate?t.toDate():new Date(t)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(e){return console.error("Date formatting error:",e),"Invalid date"}},U_=({status:t})=>{let e;switch(t){case"published":e="bg-green-100 text-green-800 border-green-200";break;case"draft":e="bg-amber-100 text-amber-800 border-amber-200";break;case"archived":e="bg-gray-100 text-gray-800 border-gray-200";break;default:e="bg-blue-100 text-blue-800 border-blue-200"}return i.jsx(an,{className:`${e} capitalize`,variant:"outline",children:t})},Ere=({type:t})=>{switch(t){case"article":return i.jsx(hi,{className:"h-4 w-4 text-blue-500"});case"image":return i.jsx(Sy,{className:"h-4 w-4 text-green-500"});case"video":return i.jsx(DX,{className:"h-4 w-4 text-red-500"});case"document":return i.jsx(hi,{className:"h-4 w-4 text-amber-500"});case"audio":return i.jsx(hi,{className:"h-4 w-4 text-purple-500"});default:return i.jsx(hi,{className:"h-4 w-4 text-gray-500"})}},Cre=({type:t})=>{switch(t){case"article":return i.jsx($a,{className:"h-4 w-4 text-blue-500"});case"video":return i.jsx(EK,{className:"h-4 w-4 text-red-500"});case"audio":return i.jsx(hi,{className:"h-4 w-4 text-purple-500"});case"event":return i.jsx(cf,{className:"h-4 w-4 text-green-500"});default:return i.jsx(hi,{className:"h-4 w-4 text-gray-500"})}},qR=({children:t,title:e="App Preview"})=>i.jsxs("div",{className:"flex flex-col",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:e}),i.jsxs("div",{className:"border-[12px] border-gray-800 rounded-[36px] max-w-[320px] mx-auto shadow-xl",children:[i.jsxs("div",{className:"bg-gray-800 rounded-t-lg py-2 px-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(fX,{className:"h-3 w-3 text-white"}),i.jsx("span",{className:"text-white text-xs",children:"5G"})]}),i.jsx("div",{className:"w-16 h-4 bg-black rounded-full"}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(PX,{className:"h-3 w-3 text-white"}),i.jsx(UY,{className:"h-3 w-3 text-white"})]})]}),i.jsx("div",{className:"bg-white h-[520px] overflow-y-auto",children:t||i.jsxs("div",{className:"h-full flex items-center justify-center text-gray-400 flex-col p-4",children:[i.jsx(gX,{className:"h-12 w-12 mb-2"}),i.jsx("p",{className:"text-center",children:"Select content to preview how it will appear in the mobile app"})]})}),i.jsx("div",{className:"bg-gray-800 rounded-b-lg py-2 flex justify-center",children:i.jsx("div",{className:"w-24 h-1 bg-gray-400 rounded-full"})})]})]}),Tre=({challenge:t})=>t?i.jsxs("div",{className:"bg-gray-50 h-full",children:[i.jsx("div",{className:"bg-primary text-white p-4",children:i.jsx("h2",{className:"font-bold text-lg",children:"Challenge"})}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-bold text-lg",children:t.title||"Challenge Title"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description||"No description provided"}),t.points>0&&i.jsxs("div",{className:"mt-2 flex items-center",children:[i.jsx(cO,{className:"h-4 w-4 text-amber-500 mr-1"}),i.jsxs("span",{className:"text-sm font-medium",children:[t.points," points"]})]}),t.startDate&&i.jsxs("div",{className:"mt-1 flex items-center",children:[i.jsx(cf,{className:"h-4 w-4 text-gray-500 mr-1"}),i.jsxs("span",{className:"text-xs text-gray-500",children:[lh(t.startDate)," - ",lh(t.endDate)]})]})]}),t.activities&&t.activities.length>0?i.jsxs("div",{className:"p-4 border-t",children:[i.jsx("h4",{className:"font-medium mb-2",children:"Activities"}),i.jsx("div",{className:"space-y-3",children:t.activities.map((e,n)=>i.jsxs("div",{className:"bg-white p-3 rounded-lg border shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:e.title||`Activity ${n+1}`}),i.jsx(an,{variant:"outline",className:"bg-gray-100",children:e.type||"Task"})]}),e.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]},n))})]}):i.jsx("div",{className:"p-4 border-t text-center text-gray-500",children:i.jsx("p",{children:"No activities added yet"})}),i.jsx("div",{className:"p-4 border-t fixed bottom-0 left-0 right-0 bg-white",children:i.jsx(Se,{className:"w-full",children:"Start Challenge"})})]}):null,HR=({lesson:t})=>t?i.jsxs("div",{className:"bg-gray-50 h-full",children:[i.jsx("div",{className:"bg-primary text-white p-4",children:i.jsx("h2",{className:"font-bold text-lg",children:"Lesson"})}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-bold text-lg",children:t.title||"Lesson Title"}),t.featuredImage&&i.jsx("div",{className:"mt-3 rounded-lg overflow-hidden",children:i.jsx("img",{src:t.featuredImage,alt:t.title,className:"w-full h-auto"})}),i.jsx("div",{className:"mt-3",children:i.jsx("p",{className:"text-sm text-gray-600",children:t.description||"No description provided"})}),t.type==="video"&&t.content&&i.jsx("div",{className:"mt-4 aspect-video bg-black rounded-md overflow-hidden",children:i.jsx("iframe",{src:t.content,className:"w-full h-full",allowFullScreen:!0,title:"Video preview"})}),t.type==="article"&&t.content&&i.jsx("div",{className:"mt-4 prose max-w-none",children:t.content.split(`
`).map((e,n)=>i.jsx("p",{className:"mb-2 text-sm",children:e},n))})]}),i.jsx("div",{className:"p-4 border-t fixed bottom-0 left-0 right-0 bg-white",children:i.jsx(Se,{className:"w-full",children:"Mark as Complete"})})]}):null,Are=({brandId:t,onUploadComplete:e})=>{const[n,s]=b.useState(null),[r,a]=b.useState(""),[l,d]=b.useState(""),[u,f]=b.useState(""),[m,p]=b.useState(!1),[x,w]=b.useState(0),[j,S]=b.useState(!1),[_,E]=b.useState(""),[C,I]=b.useState(""),[M,V]=b.useState(""),z={image:5,video:50,document:10,audio:20,other:10},D=P=>{let O="other";P.type.startsWith("image/")&&(O="image"),P.type.startsWith("video/")&&(O="video"),P.type.startsWith("audio/")&&(O="audio"),(P.type.startsWith("application/pdf")||P.type.includes("document"))&&(O="document");const F=P.size/(1024*1024);return F>z[O]?(E(`File too large! ${O} files must be under ${z[O]}MB`),I(""),V(""),!1):(E(""),I(`✓ File size OK (${F.toFixed(2)}MB)`),O==="video"?A(P):V(""),!0)},A=P=>{const O=document.createElement("video");O.preload="metadata",O.onloadedmetadata=function(){const F=Math.round(O.duration),J=Math.floor(F/60),Z=F%60;F>300?V(`⚠️ Video is ${J}:${Z.toString().padStart(2,"0")} - consider keeping under 5:00 for optimal performance`):V(`✓ Video: ${J}:${Z.toString().padStart(2,"0")} duration - good length for mobile viewing`),URL.revokeObjectURL(O.src)},O.src=URL.createObjectURL(P)},T=P=>{const O=P.target.files[0];s(O),O?D(O):(E(""),I(""),V(""))},R=async()=>{if(!n||!r||!u){E("Please provide a title, select content type, and choose a file");return}if(D(n)){S(!0),w(0);try{const P=`${Date.now()}_${n.name}`,O=af(Xa,`brands/${t}/content/${P}`),F=BP(O,n);F.on("state_changed",J=>{const Z=Math.round(J.bytesTransferred/J.totalBytes*100);w(Z)},J=>{E(`Upload error: ${J.message}`),S(!1)},async()=>{const J=await sp(F.snapshot.ref),Z={title:r,description:l,type:u,mediaUrl:J,isPublished:m,createdAt:ze(),updatedAt:ze(),size:n.size,fileName:n.name};await cr(Ue(ce,"brands",t,"content"),Z),a(""),d(""),f(""),p(!1),s(null),I(""),V(""),S(!1),w(0),e&&e()})}catch(P){E(`Error: ${P.message}`),S(!1)}}};return i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Upload New Content"}),i.jsx(Vt,{children:"Add videos, images, articles, or documents to your brand's content library"})]}),i.jsx(He,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"title",className:"text-sm font-medium",children:"Title *"}),i.jsx(gt,{id:"title",placeholder:"Enter content title",value:r,onChange:P=>a(P.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),i.jsx("textarea",{id:"description",className:"w-full min-h-[100px] p-2 border rounded-md",placeholder:"Enter content description...",value:l,onChange:P=>d(P.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"type",className:"text-sm font-medium",children:"Content Type *"}),i.jsxs(Ns,{value:u,onValueChange:f,children:[i.jsx(ds,{children:i.jsx(Ss,{placeholder:"Select content type"})}),i.jsxs(us,{children:[i.jsx($e,{value:"article",children:"Article"}),i.jsx($e,{value:"image",children:"Image"}),i.jsx($e,{value:"video",children:"Video (720p recommended)"}),i.jsx($e,{value:"document",children:"Document"}),i.jsx($e,{value:"audio",children:"Audio"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"file",className:"text-sm font-medium",children:"Upload File *"}),i.jsx(gt,{id:"file",type:"file",onChange:T,accept:"image/*,video/mp4,video/mov,video/avi,audio/*,.pdf,.doc,.docx"}),_&&i.jsx("p",{className:"text-sm text-red-500",children:_}),C&&i.jsx("p",{className:"text-sm text-green-500",children:C}),M&&i.jsx("p",{className:`text-sm ${M.startsWith("✓")?"text-green-500":"text-amber-500"}`,children:M})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"isPublished",checked:m,onChange:P=>p(P.target.checked),className:"rounded border-gray-300"}),i.jsx("label",{htmlFor:"isPublished",className:"text-sm",children:"Publish immediately"})]}),x>0&&i.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:[i.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${x}%`}}),i.jsxs("p",{className:"text-xs text-center mt-1",children:[x,"% uploaded"]})]}),i.jsx(Se,{onClick:R,disabled:j,className:"w-full",children:j?i.jsxs(i.Fragment,{children:[i.jsx(Lo,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(l0,{className:"h-4 w-4 mr-2"}),"Upload Content"]})})]})})]})},kre=({brandId:t})=>{const{brandId:e}=Nc(),n=t||e||"default-brand",[s,r]=b.useState("challenges"),[a,l]=b.useState([]),[d,u]=b.useState([]),[f,m]=b.useState(!0),[p,x]=b.useState(null),[w,j]=b.useState(null),[S,_]=b.useState(!1),[E,C]=b.useState("create"),[I,M]=b.useState(""),[V,z]=b.useState("all"),[D,A]=b.useState("updatedAt"),[T,R]=b.useState(null),[P,O]=b.useState([]),[F,J]=b.useState([]),[Z,q]=b.useState(!0),[Y,W]=b.useState(null),[H,B]=b.useState(null),[K,ne]=b.useState(!1),[te,fe]=b.useState(""),[ke,Ee]=b.useState("all"),[ve,le]=b.useState("updatedAt"),[Ne,Pe]=b.useState(null),[Ge,Ye]=b.useState(!1),[ot,Dt]=b.useState([]),[je,qe]=b.useState(!0),[ct,dt]=b.useState(null),[pt,X]=b.useState([]),[re,he]=b.useState(!0),Ae=async()=>{m(!0),x(null);try{const ge=Ue(ce,"brands",n,"challenges"),Ce=yt(ge,Jn("updatedAt","desc")),Et=(await fs(Ce)).docs.map(Ot=>({id:Ot.id,...Ot.data()}));l(Et),Ke(Et,I,V),m(!1),Et.length>0&&!T&&R(Et[0])}catch(ge){console.error("Error fetching challenges:",ge),x("Failed to load challenges. Please try again."),m(!1)}},Re=async()=>{q(!0),W(null);try{const ge=yt(Ue(ce,"lessons"),ht("brandId","==",n),Jn("updatedAt","desc")),Mt=(await f1(ge,`Lessons (brandId=${n})`)).docs.map(Et=>({id:Et.id,...Et.data()}));O(Mt),xt(Mt,te,ke),q(!1),Mt.length>0&&!Ne&&Pe(Mt[0])}catch(ge){console.error("Error fetching lessons:",ge),W("Failed to load lessons. Please try again."),q(!1)}},Te=async()=>{he(!0);try{const ge=Ue(ce,"brands",n,"content"),Ce=yt(ge,Jn("createdAt","desc")),Et=(await fs(Ce)).docs.map(Ot=>({id:Ot.id,...Ot.data()}));X(Et),he(!1)}catch(ge){console.error("Error fetching content library:",ge),he(!1),X([])}},Me=async()=>{qe(!0),dt(null);try{const ge=yt(Ue(ce,"announcements"),ht("brandId","==",n),Jn("createdAt","desc")),Mt=(await f1(ge,`Announcements (brandId=${n})`)).docs.map(Et=>({id:Et.id,...Et.data()}));Dt(Mt),qe(!1)}catch(ge){console.error("Error fetching announcements:",ge),dt("Failed to load announcements. Please try again."),qe(!1)}};b.useEffect(()=>{Ae(),Re(),Te(),Me()},[n]);const Ke=(ge,Ce,Mt)=>{let Et=[...ge||a];if(Ce){const Ot=Ce.toLowerCase();Et=Et.filter(Hn=>{var Nr,gs;return((Nr=Hn.title)==null?void 0:Nr.toLowerCase().includes(Ot))||((gs=Hn.description)==null?void 0:gs.toLowerCase().includes(Ot))})}Mt&&Mt!=="all"&&(Et=Et.filter(Ot=>Ot.status===Mt)),Et.sort((Ot,Hn)=>{var Nr,gs,da,Wr,Gr,Yr,Kr,Xr;if(D==="title")return(Ot.title||"").localeCompare(Hn.title||"");if(D==="startDate"){const Ds=Ot.startDate?((gs=(Nr=Ot.startDate).toDate)==null?void 0:gs.call(Nr))||new Date(Ot.startDate):new Date(0);return(Hn.startDate?((Wr=(da=Hn.startDate).toDate)==null?void 0:Wr.call(da))||new Date(Hn.startDate):new Date(0))-Ds}else{const Ds=Ot.updatedAt?((Yr=(Gr=Ot.updatedAt).toDate)==null?void 0:Yr.call(Gr))||new Date(Ot.updatedAt):new Date(0);return(Hn.updatedAt?((Xr=(Kr=Hn.updatedAt).toDate)==null?void 0:Xr.call(Kr))||new Date(Hn.updatedAt):new Date(0))-Ds}}),u(Et)},xt=(ge,Ce,Mt)=>{let Et=[...ge||P];if(Ce){const Ot=Ce.toLowerCase();Et=Et.filter(Hn=>{var Nr,gs;return((Nr=Hn.title)==null?void 0:Nr.toLowerCase().includes(Ot))||((gs=Hn.description)==null?void 0:gs.toLowerCase().includes(Ot))})}Mt&&Mt!=="all"&&(Et=Et.filter(Ot=>Ot.status===Mt)),Et.sort((Ot,Hn)=>{var Nr,gs,da,Wr;if(ve==="title")return(Ot.title||"").localeCompare(Hn.title||"");{const Gr=Ot.updatedAt?((gs=(Nr=Ot.updatedAt).toDate)==null?void 0:gs.call(Nr))||new Date(Ot.updatedAt):new Date(0);return(Hn.updatedAt?((Wr=(da=Hn.updatedAt).toDate)==null?void 0:Wr.call(da))||new Date(Hn.updatedAt):new Date(0))-Gr}}),J(Et)},Jt=ge=>{const Ce=ge.target.value;M(Ce),Ke(null,Ce,V)},dr=ge=>{z(ge),Ke(null,I,ge)},Rs=ge=>{A(ge),Ke(null,I,V)},ur=ge=>{const Ce=ge.target.value;fe(Ce),xt(null,Ce,ke)},zs=ge=>{Ee(ge),xt(null,te,ge)},$s=ge=>{le(ge),xt(null,te,ge)},pe=()=>{j(null),C("create"),_(!0)},Pt=ge=>{j(ge),C("edit"),_(!0)},wn=ge=>{j({...ge,title:`${ge.title} (Copy)`,status:"draft"}),C("duplicate"),_(!0)},Wt=async ge=>{if(confirm("Are you sure you want to delete this challenge?"))try{await Zs(Je(ce,"brands",n,"challenges",ge)),l(a.filter(Ce=>Ce.id!==ge)),u(d.filter(Ce=>Ce.id!==ge)),T&&T.id===ge&&R(a.find(Ce=>Ce.id!==ge)||null)}catch(Ce){console.error("Error deleting challenge:",Ce),x("Failed to delete challenge. Please try again.")}},en=ge=>{R(ge)},_n=()=>{_(!1),Ae()},ss=()=>{_(!1)},Mn=()=>{B(null),ne(!0)},Fe=ge=>{B(ge),ne(!0)},Nt=ge=>{Pe(ge),Ye(!0)},Fn=async ge=>{if(confirm("Are you sure you want to delete this lesson?"))try{await Zs(Je(ce,"lessons",ge)),O(P.filter(Ce=>Ce.id!==ge)),J(F.filter(Ce=>Ce.id!==ge)),Ne&&Ne.id===ge&&Pe(P.find(Ce=>Ce.id!==ge)||null)}catch(Ce){console.error("Error deleting lesson:",Ce),W("Failed to delete lesson. Please try again.")}},cn=()=>{ne(!1),Re()},Is=()=>{ne(!1)},fn=async ge=>{if(confirm("Are you sure you want to delete this content item?"))try{await Zs(Je(ce,"brands",n,"content",ge)),X(pt.filter(Ce=>Ce.id!==ge))}catch(Ce){console.error("Error deleting content:",Ce),alert("Failed to delete content. Please try again.")}};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:"Content Management"}),i.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Create and manage challenges, lessons, and content for ",n]})]})}),i.jsxs(ll,{value:s,onValueChange:r,className:"space-y-6",children:[i.jsxs(eo,{className:"grid grid-cols-4 w-full max-w-md",children:[i.jsxs(on,{value:"challenges",className:"flex items-center gap-2",children:[i.jsx(Ek,{className:"h-4 w-4"}),i.jsx("span",{children:"Challenges"})]}),i.jsxs(on,{value:"lessons",className:"flex items-center gap-2",children:[i.jsx($a,{className:"h-4 w-4"}),i.jsx("span",{children:"Lessons"})]}),i.jsxs(on,{value:"announcements",className:"flex items-center gap-2",children:[i.jsx(js,{className:"h-4 w-4"}),i.jsx("span",{children:"Announcements"})]}),i.jsxs(on,{value:"content",className:"flex items-center gap-2",children:[i.jsx(Tk,{className:"h-4 w-4"}),i.jsx("span",{children:"Content Library"})]})]}),i.jsx(yn,{value:"challenges",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(De,{children:[i.jsx(et,{className:"pb-3",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx(nt,{children:"Challenges"}),i.jsx(Vt,{children:"Create and manage challenges for your brand"})]}),i.jsxs(Se,{onClick:pe,className:"sm:self-end",children:[i.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Create Challenge"]})]})}),i.jsxs(He,{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),i.jsx(gt,{placeholder:"Search challenges...",className:"pl-10",value:I,onChange:Jt})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Ns,{value:V,onValueChange:dr,children:[i.jsx(ds,{className:"w-[140px]",children:i.jsx(Ss,{placeholder:"Status"})}),i.jsxs(us,{children:[i.jsx($e,{value:"all",children:"All Statuses"}),i.jsx($e,{value:"published",children:"Published"}),i.jsx($e,{value:"draft",children:"Draft"}),i.jsx($e,{value:"archived",children:"Archived"})]})]}),i.jsxs(Ns,{value:D,onValueChange:Rs,children:[i.jsx(ds,{className:"w-[140px]",children:i.jsx(Ss,{placeholder:"Sort by"})}),i.jsxs(us,{children:[i.jsx($e,{value:"updatedAt",children:"Last Updated"}),i.jsx($e,{value:"title",children:"Title"}),i.jsx($e,{value:"startDate",children:"Start Date"})]})]})]})]}),p&&i.jsxs(Pi,{variant:"destructive",className:"mb-6",children:[i.jsx(js,{className:"h-4 w-4"}),i.jsx(Ed,{children:"Error"}),i.jsxs(Oi,{children:[p,i.jsxs(Se,{variant:"outline",size:"sm",className:"mt-2",onClick:Ae,children:[i.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Retry"]})]})]}),f?i.jsx("div",{className:"flex justify-center items-center p-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):d.length===0?i.jsxs("div",{className:"text-center p-12 border rounded-lg bg-gray-50 dark:bg-gray-800",children:[i.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4",children:i.jsx(Ek,{className:"h-6 w-6 text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No challenges found"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:I||V!=="all"?"Try adjusting your search or filters":"Get started by creating your first challenge"}),I||V!=="all"?i.jsx(Se,{variant:"outline",onClick:()=>{M(""),z("all"),Ke(null,"","all")},children:"Clear Filters"}):i.jsxs(Se,{onClick:pe,children:[i.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Create Challenge"]})]}):i.jsx("div",{className:"space-y-4",children:d.map(ge=>i.jsxs("div",{className:`border rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${T&&T.id===ge.id?"border-primary bg-primary/5":""}`,onClick:()=>en(ge),children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"font-medium text-lg",children:ge.title}),i.jsx(U_,{status:ge.status})]}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 line-clamp-2",children:ge.description||"No description provided"}),i.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-2 text-sm text-gray-500 dark:text-gray-400",children:[ge.startDate&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(cf,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:[lh(ge.startDate)," - ",lh(ge.endDate)]})]}),ge.communityId&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ts,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:ge.communityId})]}),ge.points>0&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(cO,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:[ge.points," points"]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-center",children:[i.jsxs(Se,{variant:"outline",size:"sm",onClick:Ce=>{Ce.stopPropagation(),Pt(ge)},children:[i.jsx(Ql,{className:"h-4 w-4 mr-1"}),"Edit"]}),i.jsxs(Ho,{children:[i.jsx(Wo,{asChild:!0,onClick:Ce=>Ce.stopPropagation(),children:i.jsx(Se,{variant:"ghost",size:"sm",children:i.jsx(Nk,{className:"h-4 w-4"})})}),i.jsxs(Wa,{align:"end",children:[i.jsxs(zt,{onClick:Ce=>{Ce.stopPropagation(),Pt(ge)},className:"cursor-pointer",children:[i.jsx(Ql,{className:"h-4 w-4 mr-2"}),"Edit"]}),i.jsxs(zt,{onClick:Ce=>{Ce.stopPropagation(),wn(ge)},className:"cursor-pointer",children:[i.jsx(fK,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),i.jsxs(zt,{onClick:Ce=>{Ce.stopPropagation(),en(ge)},className:"cursor-pointer",children:[i.jsx(Zi,{className:"h-4 w-4 mr-2"}),"Preview"]}),i.jsx(fi,{}),i.jsxs(zt,{onClick:Ce=>{Ce.stopPropagation(),Wt(ge.id)},className:"text-red-600 cursor-pointer focus:text-red-600",children:[i.jsx(ac,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]}),ge.activities&&ge.activities.length>0&&i.jsxs("div",{className:"mt-3 pt-3 border-t",children:[i.jsxs("p",{className:"text-sm font-medium mb-2",children:["Activities (",ge.activities.length,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:ge.activities.map((Ce,Mt)=>i.jsxs(an,{variant:"secondary",children:[Ce.type||"Activity"," ",Mt+1]},Mt))})]})]},ge.id))})]})]})}),i.jsx("div",{className:"order-first lg:order-last",children:i.jsxs(De,{className:"sticky top-6",children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Mobile App Preview"}),i.jsx(Vt,{children:"See how your challenge will appear in the mobile app"})]}),i.jsx(He,{children:i.jsx(qR,{title:"Challenge Preview",children:i.jsx(Tre,{challenge:T})})})]})})]})}),i.jsx(yn,{value:"lessons",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(De,{children:[i.jsx(et,{className:"pb-3",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx(nt,{children:"Lessons"}),i.jsx(Vt,{children:"Create and manage lessons for your brand"})]}),i.jsxs(Se,{onClick:Mn,className:"sm:self-end",children:[i.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Create Lesson"]})]})}),i.jsxs(He,{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),i.jsx(gt,{placeholder:"Search lessons...",className:"pl-10",value:te,onChange:ur})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Ns,{value:ke,onValueChange:zs,children:[i.jsx(ds,{className:"w-[140px]",children:i.jsx(Ss,{placeholder:"Status"})}),i.jsxs(us,{children:[i.jsx($e,{value:"all",children:"All Statuses"}),i.jsx($e,{value:"published",children:"Published"}),i.jsx($e,{value:"draft",children:"Draft"})]})]}),i.jsxs(Ns,{value:ve,onValueChange:$s,children:[i.jsx(ds,{className:"w-[140px]",children:i.jsx(Ss,{placeholder:"Sort by"})}),i.jsxs(us,{children:[i.jsx($e,{value:"updatedAt",children:"Last Updated"}),i.jsx($e,{value:"title",children:"Title"})]})]})]})]}),Y&&i.jsxs(Pi,{variant:"destructive",className:"mb-6",children:[i.jsx(js,{className:"h-4 w-4"}),i.jsx(Ed,{children:"Error"}),i.jsxs(Oi,{children:[Y,i.jsxs(Se,{variant:"outline",size:"sm",className:"mt-2",onClick:Re,children:[i.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Retry"]})]})]}),Z?i.jsx("div",{className:"flex justify-center items-center p-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):F.length===0?i.jsxs("div",{className:"text-center p-12 border rounded-lg bg-gray-50 dark:bg-gray-800",children:[i.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4",children:i.jsx($a,{className:"h-6 w-6 text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No lessons found"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:te||ke!=="all"?"Try adjusting your search or filters":"Get started by creating your first lesson"}),te||ke!=="all"?i.jsx(Se,{variant:"outline",onClick:()=>{fe(""),Ee("all"),xt(null,"","all")},children:"Clear Filters"}):i.jsxs(Se,{onClick:Mn,children:[i.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Create Lesson"]})]}):i.jsx("div",{className:"space-y-4",children:F.map(ge=>i.jsx("div",{className:`border rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer ${Ne&&Ne.id===ge.id?"border-primary bg-primary/5":""}`,onClick:()=>Pe(ge),children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Cre,{type:ge.type}),i.jsx("h3",{className:"font-medium text-lg",children:ge.title}),i.jsx(U_,{status:ge.status})]}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 line-clamp-2",children:ge.description||"No description provided"})]}),i.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-center",children:[i.jsxs(Se,{variant:"outline",size:"sm",onClick:Ce=>{Ce.stopPropagation(),Nt(ge)},children:[i.jsx(Zi,{className:"h-4 w-4 mr-1"}),"Preview"]}),i.jsxs(Se,{variant:"outline",size:"sm",onClick:Ce=>{Ce.stopPropagation(),Fe(ge)},children:[i.jsx(Ql,{className:"h-4 w-4 mr-1"}),"Edit"]}),i.jsxs(Ho,{children:[i.jsx(Wo,{asChild:!0,onClick:Ce=>Ce.stopPropagation(),children:i.jsx(Se,{variant:"ghost",size:"sm",children:i.jsx(Nk,{className:"h-4 w-4"})})}),i.jsxs(Wa,{align:"end",children:[i.jsxs(zt,{onClick:Ce=>{Ce.stopPropagation(),Fe(ge)},className:"cursor-pointer",children:[i.jsx(Ql,{className:"h-4 w-4 mr-2"}),"Edit"]}),i.jsxs(zt,{onClick:Ce=>{Ce.stopPropagation(),Nt(ge)},className:"cursor-pointer",children:[i.jsx(Zi,{className:"h-4 w-4 mr-2"}),"Preview"]}),i.jsx(fi,{}),i.jsxs(zt,{onClick:Ce=>{Ce.stopPropagation(),Fn(ge.id)},className:"text-red-600 cursor-pointer focus:text-red-600",children:[i.jsx(ac,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]})},ge.id))})]})]})}),i.jsx("div",{className:"order-first lg:order-last",children:i.jsxs(De,{className:"sticky top-6",children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Mobile App Preview"}),i.jsx(Vt,{children:"See how your lesson will appear in the mobile app"})]}),i.jsx(He,{children:i.jsx(qR,{title:"Lesson Preview",children:i.jsx(HR,{lesson:Ne})})})]})})]})}),i.jsx(yn,{value:"announcements",className:"space-y-6",children:i.jsxs(De,{children:[i.jsx(et,{className:"pb-3",children:i.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:i.jsxs("div",{children:[i.jsx(nt,{children:"Announcements"}),i.jsx(Vt,{children:"View and manage announcements for your brand"})]})})}),i.jsxs(He,{children:[ct&&i.jsxs(Pi,{variant:"destructive",className:"mb-6",children:[i.jsx(js,{className:"h-4 w-4"}),i.jsx(Ed,{children:"Error"}),i.jsxs(Oi,{children:[ct,i.jsxs(Se,{variant:"outline",size:"sm",className:"mt-2",onClick:Me,children:[i.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Retry"]})]})]}),je?i.jsx("div",{className:"flex justify-center items-center p-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):ot.length===0?i.jsxs("div",{className:"text-center p-12 border rounded-lg bg-gray-50 dark:bg-gray-800",children:[i.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4",children:i.jsx(js,{className:"h-6 w-6 text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No announcements found"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"You haven't created any announcements yet."})]}):i.jsx("div",{className:"space-y-4",children:ot.map(ge=>i.jsxs(De,{children:[i.jsxs(et,{className:"pb-2",children:[i.jsx(nt,{className:"text-base",children:ge.title}),i.jsx(Vt,{className:"line-clamp-2",children:ge.message})]}),i.jsxs(xg,{className:"flex justify-between pt-2 border-t",children:[i.jsx("span",{className:"text-xs text-gray-500",children:lh(ge.createdAt)}),i.jsx(Se,{asChild:!0,variant:"outline",size:"sm",children:i.jsx("a",{href:"#!",target:"_blank",rel:"noopener noreferrer",children:"View"})})]})]},ge.id))})]})]})}),i.jsx(yn,{value:"content",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(De,{children:[i.jsx(et,{children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx(nt,{children:"Content Library"}),i.jsx(Vt,{children:"Manage and organize your brand content"})]}),i.jsxs(Se,{variant:"outline",size:"sm",onClick:Te,className:"sm:self-end",children:[i.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),i.jsxs(He,{children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx(qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),i.jsx(gt,{placeholder:"Search content library...",className:"pl-10"})]}),re?i.jsx("div",{className:"flex justify-center items-center p-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):pt.length===0?i.jsxs("div",{className:"text-center p-12 border rounded-lg bg-gray-50 dark:bg-gray-800",children:[i.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4",children:i.jsx(Tk,{className:"h-6 w-6 text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Content library is empty"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Add content items to your library to get started"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:pt.map(ge=>i.jsxs(De,{children:[i.jsx(et,{className:"pb-2",children:i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ere,{type:ge.type}),i.jsx(nt,{className:"text-base",children:ge.title})]}),i.jsx(U_,{status:ge.isPublished?"published":"draft"})]})}),i.jsxs(He,{className:"pb-2",children:[i.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:ge.description||ge.body||"No description provided"}),ge.mediaUrl&&i.jsx("div",{className:"mt-2",children:i.jsxs("a",{href:ge.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline flex items-center",children:[i.jsx(Zi,{className:"h-3 w-3 mr-1"}),"View content"]})})]}),i.jsxs(xg,{className:"flex justify-between pt-2 border-t",children:[i.jsx("span",{className:"text-xs text-gray-500",children:lh(ge.createdAt)}),i.jsx("div",{className:"flex gap-2",children:i.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>fn(ge.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:i.jsx(ac,{className:"h-4 w-4"})})})]})]},ge.id))})]})]})}),i.jsxs("div",{children:[i.jsx(Are,{brandId:n,onUploadComplete:Te}),i.jsxs(De,{className:"mt-6",children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Upload Guidelines"}),i.jsx(Vt,{children:"Follow these guidelines for optimal content"})]}),i.jsx(He,{children:i.jsxs("div",{className:"space-y-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-1",children:"File Size Limits"}),i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Images: Max 5MB (JPG, PNG, GIF)"}),i.jsx("li",{children:"Videos: Max 50MB, 5 minutes (MP4, MOV)"}),i.jsx("li",{children:"Documents: Max 10MB (PDF, DOC)"}),i.jsx("li",{children:"Audio: Max 20MB (MP3, WAV)"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-1",children:"Video Tips"}),i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Use 720p resolution for mobile screens"}),i.jsx("li",{children:"Keep videos under 5 minutes"}),i.jsx("li",{children:"Use MP4 format with H.264 codec"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-1",children:"Content Retention"}),i.jsx("p",{children:"All uploaded content is tied to your active subscription. Upon contract expiration, content will be removed within 30 days."})]})]})})]})]})]})})]}),S&&i.jsx(pre,{brandId:n,challenge:w,mode:E,onSaved:_n,onCancel:ss}),i.jsx(xc,{open:K,onOpenChange:ne,children:i.jsxs(nl,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsx(yc,{children:i.jsx(sl,{children:H?"Edit Lesson":"Create New Lesson"})}),i.jsx(Sre,{brandId:n,lesson:H,onSuccess:cn,onCancel:Is})]})}),i.jsx(xc,{open:Ge,onOpenChange:Ye,children:i.jsxs(nl,{className:"max-w-3xl",children:[i.jsx(yc,{children:i.jsx(sl,{children:"Lesson Preview"})}),i.jsx(HR,{lesson:Ne})]})})]})};function Rre(){const{signOut:t}=bn();return{logout:b.useCallback(async()=>{try{localStorage.setItem("FORCE_PUBLIC_WEBSITE","true"),await new Promise(n=>setTimeout(n,50)),await t();try{const n=localStorage.getItem("FORCE_PUBLIC_WEBSITE");localStorage.clear(),sessionStorage.clear(),localStorage.setItem("FORCE_PUBLIC_WEBSITE",n)}catch(n){console.warn("Storage clearing failed:",n)}window.location.href="/?forcepublic=true&ts="+new Date().getTime()}catch(n){console.error("Failed to sign out:",n),window.location.href="/?forcepublic=true&ts="+new Date().getTime()}},[t])}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function dp(t){return t+.5|0}const Jl=(t,e,n)=>Math.max(Math.min(t,n),e);function Um(t){return Jl(dp(t*2.55),0,255)}function lc(t){return Jl(dp(t*255),0,255)}function Do(t){return Jl(dp(t/2.55)/100,0,1)}function WR(t){return Jl(dp(t*100),0,100)}const ki={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},p1=[..."0123456789ABCDEF"],Ire=t=>p1[t&15],Dre=t=>p1[(t&240)>>4]+p1[t&15],Xx=t=>(t&240)>>4===(t&15),Mre=t=>Xx(t.r)&&Xx(t.g)&&Xx(t.b)&&Xx(t.a);function Pre(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ki[t[1]]*17,g:255&ki[t[2]]*17,b:255&ki[t[3]]*17,a:e===5?ki[t[4]]*17:255}:(e===7||e===9)&&(n={r:ki[t[1]]<<4|ki[t[2]],g:ki[t[3]]<<4|ki[t[4]],b:ki[t[5]]<<4|ki[t[6]],a:e===9?ki[t[7]]<<4|ki[t[8]]:255})),n}const Ore=(t,e)=>t<255?e(t):"";function Lre(t){var e=Mre(t)?Ire:Dre;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Ore(t.a,e):void 0}const Vre=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function k6(t,e,n){const s=e*Math.min(n,1-n),r=(a,l=(a+t/30)%12)=>n-s*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function Ure(t,e,n){const s=(r,a=(r+t/60)%6)=>n-n*e*Math.max(Math.min(a,4-a,1),0);return[s(5),s(3),s(1)]}function Fre(t,e,n){const s=k6(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function Bre(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function PS(t){const n=t.r/255,s=t.g/255,r=t.b/255,a=Math.max(n,s,r),l=Math.min(n,s,r),d=(a+l)/2;let u,f,m;return a!==l&&(m=a-l,f=d>.5?m/(2-a-l):m/(a+l),u=Bre(n,s,r,m,a),u=u*60+.5),[u|0,f||0,d]}function OS(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(lc)}function LS(t,e,n){return OS(k6,t,e,n)}function zre(t,e,n){return OS(Fre,t,e,n)}function $re(t,e,n){return OS(Ure,t,e,n)}function R6(t){return(t%360+360)%360}function qre(t){const e=Vre.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?Um(+e[5]):lc(+e[5]));const r=R6(+e[2]),a=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?s=zre(r,a,l):e[1]==="hsv"?s=$re(r,a,l):s=LS(r,a,l),{r:s[0],g:s[1],b:s[2],a:n}}function Hre(t,e){var n=PS(t);n[0]=R6(n[0]+e),n=LS(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Wre(t){if(!t)return;const e=PS(t),n=e[0],s=WR(e[1]),r=WR(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${Do(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const GR={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},YR={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Gre(){const t={},e=Object.keys(YR),n=Object.keys(GR);let s,r,a,l,d;for(s=0;s<e.length;s++){for(l=d=e[s],r=0;r<n.length;r++)a=n[r],d=d.replace(a,GR[a]);a=parseInt(YR[l],16),t[d]=[a>>16&255,a>>8&255,a&255]}return t}let Qx;function Yre(t){Qx||(Qx=Gre(),Qx.transparent=[0,0,0,0]);const e=Qx[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Kre=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Xre(t){const e=Kre.exec(t);let n=255,s,r,a;if(e){if(e[7]!==s){const l=+e[7];n=e[8]?Um(l):Jl(l*255,0,255)}return s=+e[1],r=+e[3],a=+e[5],s=255&(e[2]?Um(s):Jl(s,0,255)),r=255&(e[4]?Um(r):Jl(r,0,255)),a=255&(e[6]?Um(a):Jl(a,0,255)),{r:s,g:r,b:a,a:n}}}function Qre(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Do(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const F_=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Qu=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Zre(t,e,n){const s=Qu(Do(t.r)),r=Qu(Do(t.g)),a=Qu(Do(t.b));return{r:lc(F_(s+n*(Qu(Do(e.r))-s))),g:lc(F_(r+n*(Qu(Do(e.g))-r))),b:lc(F_(a+n*(Qu(Do(e.b))-a))),a:t.a+n*(e.a-t.a)}}function Zx(t,e,n){if(t){let s=PS(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=LS(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function I6(t,e){return t&&Object.assign(e||{},t)}function KR(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=lc(t[3]))):(e=I6(t,{r:0,g:0,b:0,a:1}),e.a=lc(e.a)),e}function Jre(t){return t.charAt(0)==="r"?Xre(t):qre(t)}class Sg{constructor(e){if(e instanceof Sg)return e;const n=typeof e;let s;n==="object"?s=KR(e):n==="string"&&(s=Pre(e)||Yre(e)||Jre(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=I6(this._rgb);return e&&(e.a=Do(e.a)),e}set rgb(e){this._rgb=KR(e)}rgbString(){return this._valid?Qre(this._rgb):void 0}hexString(){return this._valid?Lre(this._rgb):void 0}hslString(){return this._valid?Wre(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let a;const l=n===a?.5:n,d=2*l-1,u=s.a-r.a,f=((d*u===-1?d:(d+u)/(1+d*u))+1)/2;a=1-f,s.r=255&f*s.r+a*r.r+.5,s.g=255&f*s.g+a*r.g+.5,s.b=255&f*s.b+a*r.b+.5,s.a=l*s.a+(1-l)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=Zre(this._rgb,e._rgb,n)),this}clone(){return new Sg(this.rgb)}alpha(e){return this._rgb.a=lc(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=dp(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Zx(this._rgb,2,e),this}darken(e){return Zx(this._rgb,2,-e),this}saturate(e){return Zx(this._rgb,1,e),this}desaturate(e){return Zx(this._rgb,1,-e),this}rotate(e){return Hre(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function To(){}const eie=(()=>{let t=0;return()=>t++})();function vn(t){return t==null}function Es(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Zt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function jr(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Na(t,e){return jr(t)?t:e}function Ut(t,e){return typeof t>"u"?e:t}const tie=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,D6=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function zn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Cn(t,e,n,s){let r,a,l;if(Es(t))for(a=t.length,r=0;r<a;r++)e.call(n,t[r],r);else if(Zt(t))for(l=Object.keys(t),a=l.length,r=0;r<a;r++)e.call(n,t[l[r]],l[r])}function k0(t,e){let n,s,r,a;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],a=e[n],r.datasetIndex!==a.datasetIndex||r.index!==a.index)return!1;return!0}function R0(t){if(Es(t))return t.map(R0);if(Zt(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=R0(t[n[r]]);return e}return t}function M6(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function nie(t,e,n,s){if(!M6(t))return;const r=e[t],a=n[t];Zt(r)&&Zt(a)?Eg(r,a,s):e[t]=R0(a)}function Eg(t,e,n){const s=Es(e)?e:[e],r=s.length;if(!Zt(t))return t;n=n||{};const a=n.merger||nie;let l;for(let d=0;d<r;++d){if(l=s[d],!Zt(l))continue;const u=Object.keys(l);for(let f=0,m=u.length;f<m;++f)a(u[f],t,l,n)}return t}function eg(t,e){return Eg(t,e,{merger:sie})}function sie(t,e,n){if(!M6(t))return;const s=e[t],r=n[t];Zt(s)&&Zt(r)?eg(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=R0(r))}const XR={"":t=>t,x:t=>t.x,y:t=>t.y};function rie(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function iie(t){const e=rie(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function qd(t,e){return(XR[e]||(XR[e]=iie(e)))(t)}function VS(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Cg=t=>typeof t<"u",jc=t=>typeof t=="function",QR=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function aie(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const An=Math.PI,es=2*An,oie=es+An,I0=Number.POSITIVE_INFINITY,lie=An/180,Fs=An/2,dd=An/4,ZR=An*2/3,P6=Math.log10,Ya=Math.sign;function tg(t,e,n){return Math.abs(t-e)<n}function JR(t){const e=Math.round(t);t=tg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(P6(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function cie(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,a)=>r-a).pop(),e}function die(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Tg(t){return!die(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function uie(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function hie(t,e,n){let s,r,a;for(s=0,r=t.length;s<r;s++)a=t[s][n],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function Vo(t){return t*(An/180)}function fie(t){return t*(180/An)}function eI(t){if(!jr(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function O6(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let a=Math.atan2(s,n);return a<-.5*An&&(a+=es),{angle:a,distance:r}}function x1(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function mie(t,e){return(t-e+oie)%es-An}function ai(t){return(t%es+es)%es}function Ag(t,e,n,s){const r=ai(t),a=ai(e),l=ai(n),d=ai(a-r),u=ai(l-r),f=ai(r-a),m=ai(r-l);return r===a||r===l||s&&a===l||d>u&&f<m}function yr(t,e,n){return Math.max(e,Math.min(n,t))}function gie(t){return yr(t,-32768,32767)}function Uo(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function US(t,e,n){n=n||(l=>t[l]<e);let s=t.length-1,r=0,a;for(;s-r>1;)a=r+s>>1,n(a)?r=a:s=a;return{lo:r,hi:s}}const Nd=(t,e,n,s)=>US(t,n,s?r=>{const a=t[r][e];return a<n||a===n&&t[r+1][e]===n}:r=>t[r][e]<n),pie=(t,e,n)=>US(t,n,s=>t[s][e]>=n);function xie(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const L6=["push","pop","shift","splice","unshift"];function yie(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),L6.forEach(n=>{const s="_onData"+VS(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...a){const l=r.apply(this,a);return t._chartjs.listeners.forEach(d=>{typeof d[s]=="function"&&d[s](...a)}),l}})})}function tI(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(L6.forEach(a=>{delete t[a]}),delete t._chartjs)}function V6(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const U6=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function F6(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,U6.call(window,()=>{s=!1,t.apply(e,n)}))}}function vie(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const FS=t=>t==="start"?"left":t==="end"?"right":"center",gr=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,bie=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function wie(t,e,n){const s=e.length;let r=0,a=s;if(t._sorted){const{iScale:l,vScale:d,_parsed:u}=t,f=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,m=l.axis,{min:p,max:x,minDefined:w,maxDefined:j}=l.getUserBounds();if(w){if(r=Math.min(Nd(u,m,p).lo,n?s:Nd(e,m,l.getPixelForValue(p)).lo),f){const S=u.slice(0,r+1).reverse().findIndex(_=>!vn(_[d.axis]));r-=Math.max(0,S)}r=yr(r,0,s-1)}if(j){let S=Math.max(Nd(u,l.axis,x,!0).hi+1,n?0:Nd(e,m,l.getPixelForValue(x),!0).hi+1);if(f){const _=u.slice(S-1).findIndex(E=>!vn(E[d.axis]));S+=Math.max(0,_)}a=yr(S,r,s)-r}else a=s-r}return{start:r,count:a}}function _ie(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=r,!0;const a=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),a}const Jx=t=>t===0||t===1,nI=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*es/n)),sI=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*es/n)+1,ng={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Fs)+1,easeOutSine:t=>Math.sin(t*Fs),easeInOutSine:t=>-.5*(Math.cos(An*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Jx(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Jx(t)?t:nI(t,.075,.3),easeOutElastic:t=>Jx(t)?t:sI(t,.075,.3),easeInOutElastic(t){return Jx(t)?t:t<.5?.5*nI(t*2,.1125,.45):.5+.5*sI(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ng.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ng.easeInBounce(t*2)*.5:ng.easeOutBounce(t*2-1)*.5+.5};function BS(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function rI(t){return BS(t)?t:new Sg(t)}function B_(t){return BS(t)?t:new Sg(t).saturate(.5).darken(.1).hexString()}const jie=["x","y","borderWidth","radius","tension"],Nie=["color","borderColor","backgroundColor"];function Sie(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Nie},numbers:{type:"number",properties:jie}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Eie(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const iI=new Map;function Cie(t,e){e=e||{};const n=t+JSON.stringify(e);let s=iI.get(n);return s||(s=new Intl.NumberFormat(t,e),iI.set(n,s)),s}function zS(t,e,n){return Cie(e,n).format(t)}const Tie={values(t){return Es(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,a=t;if(n.length>1){const f=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(f<1e-4||f>1e15)&&(r="scientific"),a=Aie(t,n)}const l=P6(Math.abs(a)),d=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),u={notation:r,minimumFractionDigits:d,maximumFractionDigits:d};return Object.assign(u,this.options.ticks.format),zS(t,s,u)}};function Aie(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var B6={formatters:Tie};function kie(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:B6.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Hd=Object.create(null),y1=Object.create(null);function sg(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const a=n[s];t=t[a]||(t[a]=Object.create(null))}return t}function z_(t,e,n){return typeof e=="string"?Eg(sg(t,e),n):Eg(sg(t,""),e)}class Rie{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>B_(r.backgroundColor),this.hoverBorderColor=(s,r)=>B_(r.borderColor),this.hoverColor=(s,r)=>B_(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return z_(this,e,n)}get(e){return sg(this,e)}describe(e,n){return z_(y1,e,n)}override(e,n){return z_(Hd,e,n)}route(e,n,s,r){const a=sg(this,e),l=sg(this,s),d="_"+n;Object.defineProperties(a,{[d]:{value:a[n],writable:!0},[n]:{enumerable:!0,get(){const u=this[d],f=l[r];return Zt(u)?Object.assign({},f,u):Ut(u,f)},set(u){this[d]=u}}})}apply(e){e.forEach(n=>n(this))}}var hs=new Rie({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Sie,Eie,kie]);function Iie(t){return!t||vn(t.size)||vn(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function aI(t,e,n,s,r){let a=e[r];return a||(a=e[r]=t.measureText(r).width,n.push(r)),a>s&&(s=a),s}function ud(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function oI(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function v1(t,e,n,s){z6(t,e,n,s,null)}function z6(t,e,n,s,r){let a,l,d,u,f,m,p,x;const w=e.pointStyle,j=e.rotation,S=e.radius;let _=(j||0)*lie;if(w&&typeof w=="object"&&(a=w.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(_),t.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),t.restore();return}if(!(isNaN(S)||S<=0)){switch(t.beginPath(),w){default:r?t.ellipse(n,s,r/2,S,0,0,es):t.arc(n,s,S,0,es),t.closePath();break;case"triangle":m=r?r/2:S,t.moveTo(n+Math.sin(_)*m,s-Math.cos(_)*S),_+=ZR,t.lineTo(n+Math.sin(_)*m,s-Math.cos(_)*S),_+=ZR,t.lineTo(n+Math.sin(_)*m,s-Math.cos(_)*S),t.closePath();break;case"rectRounded":f=S*.516,u=S-f,l=Math.cos(_+dd)*u,p=Math.cos(_+dd)*(r?r/2-f:u),d=Math.sin(_+dd)*u,x=Math.sin(_+dd)*(r?r/2-f:u),t.arc(n-p,s-d,f,_-An,_-Fs),t.arc(n+x,s-l,f,_-Fs,_),t.arc(n+p,s+d,f,_,_+Fs),t.arc(n-x,s+l,f,_+Fs,_+An),t.closePath();break;case"rect":if(!j){u=Math.SQRT1_2*S,m=r?r/2:u,t.rect(n-m,s-u,2*m,2*u);break}_+=dd;case"rectRot":p=Math.cos(_)*(r?r/2:S),l=Math.cos(_)*S,d=Math.sin(_)*S,x=Math.sin(_)*(r?r/2:S),t.moveTo(n-p,s-d),t.lineTo(n+x,s-l),t.lineTo(n+p,s+d),t.lineTo(n-x,s+l),t.closePath();break;case"crossRot":_+=dd;case"cross":p=Math.cos(_)*(r?r/2:S),l=Math.cos(_)*S,d=Math.sin(_)*S,x=Math.sin(_)*(r?r/2:S),t.moveTo(n-p,s-d),t.lineTo(n+p,s+d),t.moveTo(n+x,s-l),t.lineTo(n-x,s+l);break;case"star":p=Math.cos(_)*(r?r/2:S),l=Math.cos(_)*S,d=Math.sin(_)*S,x=Math.sin(_)*(r?r/2:S),t.moveTo(n-p,s-d),t.lineTo(n+p,s+d),t.moveTo(n+x,s-l),t.lineTo(n-x,s+l),_+=dd,p=Math.cos(_)*(r?r/2:S),l=Math.cos(_)*S,d=Math.sin(_)*S,x=Math.sin(_)*(r?r/2:S),t.moveTo(n-p,s-d),t.lineTo(n+p,s+d),t.moveTo(n+x,s-l),t.lineTo(n-x,s+l);break;case"line":l=r?r/2:Math.cos(_)*S,d=Math.sin(_)*S,t.moveTo(n-l,s-d),t.lineTo(n+l,s+d);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(_)*(r?r/2:S),s+Math.sin(_)*S);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function kg(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Yv(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Kv(t){t.restore()}function Die(t,e,n,s,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const a=(e.x+n.x)/2;t.lineTo(a,e.y),t.lineTo(a,n.y)}else r==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Mie(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Pie(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),vn(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Oie(t,e,n,s,r){if(r.strikethrough||r.underline){const a=t.measureText(s),l=e-a.actualBoundingBoxLeft,d=e+a.actualBoundingBoxRight,u=n-a.actualBoundingBoxAscent,f=n+a.actualBoundingBoxDescent,m=r.strikethrough?(u+f)/2:f;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(l,m),t.lineTo(d,m),t.stroke()}}function Lie(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Rg(t,e,n,s,r,a={}){const l=Es(e)?e:[e],d=a.strokeWidth>0&&a.strokeColor!=="";let u,f;for(t.save(),t.font=r.string,Pie(t,a),u=0;u<l.length;++u)f=l[u],a.backdrop&&Lie(t,a.backdrop),d&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),vn(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(f,n,s,a.maxWidth)),t.fillText(f,n,s,a.maxWidth),Oie(t,n,s,f,a),s+=Number(r.lineHeight);t.restore()}function D0(t,e){const{x:n,y:s,w:r,h:a,radius:l}=e;t.arc(n+l.topLeft,s+l.topLeft,l.topLeft,1.5*An,An,!0),t.lineTo(n,s+a-l.bottomLeft),t.arc(n+l.bottomLeft,s+a-l.bottomLeft,l.bottomLeft,An,Fs,!0),t.lineTo(n+r-l.bottomRight,s+a),t.arc(n+r-l.bottomRight,s+a-l.bottomRight,l.bottomRight,Fs,0,!0),t.lineTo(n+r,s+l.topRight),t.arc(n+r-l.topRight,s+l.topRight,l.topRight,0,-Fs,!0),t.lineTo(n+l.topLeft,s)}const Vie=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Uie=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Fie(t,e){const n=(""+t).match(Vie);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Bie=t=>+t||0;function $S(t,e){const n={},s=Zt(e),r=s?Object.keys(e):e,a=Zt(t)?s?l=>Ut(t[l],t[e[l]]):l=>t[l]:()=>t;for(const l of r)n[l]=Bie(a(l));return n}function $6(t){return $S(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Nh(t){return $S(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ui(t){const e=$6(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function vr(t,e){t=t||{},e=e||hs.font;let n=Ut(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Ut(t.style,e.style);s&&!(""+s).match(Uie)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:Ut(t.family,e.family),lineHeight:Fie(Ut(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:Ut(t.weight,e.weight),string:""};return r.string=Iie(r),r}function ey(t,e,n,s){let r,a,l;for(r=0,a=t.length;r<a;++r)if(l=t[r],l!==void 0&&l!==void 0)return l}function zie(t,e,n){const{min:s,max:r}=t,a=D6(e,(r-s)/2),l=(d,u)=>n&&d===0?0:d+u;return{min:l(s,-Math.abs(a)),max:l(r,a)}}function tu(t,e){return Object.assign(Object.create(t),e)}function qS(t,e=[""],n,s,r=()=>t[0]){const a=n||t;typeof s>"u"&&(s=G6("_fallback",t));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:s,_getTarget:r,override:d=>qS([d,...t],e,a,s)};return new Proxy(l,{deleteProperty(d,u){return delete d[u],delete d._keys,delete t[0][u],!0},get(d,u){return H6(d,u,()=>Xie(u,e,t,d))},getOwnPropertyDescriptor(d,u){return Reflect.getOwnPropertyDescriptor(d._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(d,u){return cI(d).includes(u)},ownKeys(d){return cI(d)},set(d,u,f){const m=d._storage||(d._storage=r());return d[u]=m[u]=f,delete d._keys,!0}})}function qh(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:q6(t,s),setContext:a=>qh(t,a,n,s),override:a=>qh(t.override(a),e,n,s)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete t[l],!0},get(a,l,d){return H6(a,l,()=>qie(a,l,d))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(t,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,l)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(a,l){return Reflect.has(t,l)},ownKeys(){return Reflect.ownKeys(t)},set(a,l,d){return t[l]=d,delete a[l],!0}})}function q6(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:jc(n)?n:()=>n,isIndexable:jc(s)?s:()=>s}}const $ie=(t,e)=>t?t+VS(e):e,HS=(t,e)=>Zt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function H6(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function qie(t,e,n){const{_proxy:s,_context:r,_subProxy:a,_descriptors:l}=t;let d=s[e];return jc(d)&&l.isScriptable(e)&&(d=Hie(e,d,t,n)),Es(d)&&d.length&&(d=Wie(e,d,t,l.isIndexable)),HS(e,d)&&(d=qh(d,r,a&&a[e],l)),d}function Hie(t,e,n,s){const{_proxy:r,_context:a,_subProxy:l,_stack:d}=n;if(d.has(t))throw new Error("Recursion detected: "+Array.from(d).join("->")+"->"+t);d.add(t);let u=e(a,l||s);return d.delete(t),HS(t,u)&&(u=WS(r._scopes,r,t,u)),u}function Wie(t,e,n,s){const{_proxy:r,_context:a,_subProxy:l,_descriptors:d}=n;if(typeof a.index<"u"&&s(t))return e[a.index%e.length];if(Zt(e[0])){const u=e,f=r._scopes.filter(m=>m!==u);e=[];for(const m of u){const p=WS(f,r,t,m);e.push(qh(p,a,l&&l[t],d))}}return e}function W6(t,e,n){return jc(t)?t(e,n):t}const Gie=(t,e)=>t===!0?e:typeof t=="string"?qd(e,t):void 0;function Yie(t,e,n,s,r){for(const a of e){const l=Gie(n,a);if(l){t.add(l);const d=W6(l._fallback,n,r);if(typeof d<"u"&&d!==n&&d!==s)return d}else if(l===!1&&typeof s<"u"&&n!==s)return null}return!1}function WS(t,e,n,s){const r=e._rootScopes,a=W6(e._fallback,n,s),l=[...t,...r],d=new Set;d.add(s);let u=lI(d,l,n,a||n,s);return u===null||typeof a<"u"&&a!==n&&(u=lI(d,l,a,u,s),u===null)?!1:qS(Array.from(d),[""],r,a,()=>Kie(e,n,s))}function lI(t,e,n,s,r){for(;n;)n=Yie(t,e,n,s,r);return n}function Kie(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return Es(r)&&Zt(n)?n:r||{}}function Xie(t,e,n,s){let r;for(const a of e)if(r=G6($ie(a,t),n),typeof r<"u")return HS(t,r)?WS(n,s,t,r):r}function G6(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function cI(t){let e=t._keys;return e||(e=t._keys=Qie(t._scopes)),e}function Qie(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}const Zie=Number.EPSILON||1e-14,Hh=(t,e)=>e<t.length&&!t[e].skip&&t[e],Y6=t=>t==="x"?"y":"x";function Jie(t,e,n,s){const r=t.skip?e:t,a=e,l=n.skip?e:n,d=x1(a,r),u=x1(l,a);let f=d/(d+u),m=u/(d+u);f=isNaN(f)?0:f,m=isNaN(m)?0:m;const p=s*f,x=s*m;return{previous:{x:a.x-p*(l.x-r.x),y:a.y-p*(l.y-r.y)},next:{x:a.x+x*(l.x-r.x),y:a.y+x*(l.y-r.y)}}}function eae(t,e,n){const s=t.length;let r,a,l,d,u,f=Hh(t,0);for(let m=0;m<s-1;++m)if(u=f,f=Hh(t,m+1),!(!u||!f)){if(tg(e[m],0,Zie)){n[m]=n[m+1]=0;continue}r=n[m]/e[m],a=n[m+1]/e[m],d=Math.pow(r,2)+Math.pow(a,2),!(d<=9)&&(l=3/Math.sqrt(d),n[m]=r*l*e[m],n[m+1]=a*l*e[m])}}function tae(t,e,n="x"){const s=Y6(n),r=t.length;let a,l,d,u=Hh(t,0);for(let f=0;f<r;++f){if(l=d,d=u,u=Hh(t,f+1),!d)continue;const m=d[n],p=d[s];l&&(a=(m-l[n])/3,d[`cp1${n}`]=m-a,d[`cp1${s}`]=p-a*e[f]),u&&(a=(u[n]-m)/3,d[`cp2${n}`]=m+a,d[`cp2${s}`]=p+a*e[f])}}function nae(t,e="x"){const n=Y6(e),s=t.length,r=Array(s).fill(0),a=Array(s);let l,d,u,f=Hh(t,0);for(l=0;l<s;++l)if(d=u,u=f,f=Hh(t,l+1),!!u){if(f){const m=f[e]-u[e];r[l]=m!==0?(f[n]-u[n])/m:0}a[l]=d?f?Ya(r[l-1])!==Ya(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}eae(t,r,a),tae(t,a,e)}function ty(t,e,n){return Math.max(Math.min(t,n),e)}function sae(t,e){let n,s,r,a,l,d=kg(t[0],e);for(n=0,s=t.length;n<s;++n)l=a,a=d,d=n<s-1&&kg(t[n+1],e),a&&(r=t[n],l&&(r.cp1x=ty(r.cp1x,e.left,e.right),r.cp1y=ty(r.cp1y,e.top,e.bottom)),d&&(r.cp2x=ty(r.cp2x,e.left,e.right),r.cp2y=ty(r.cp2y,e.top,e.bottom)))}function rae(t,e,n,s,r){let a,l,d,u;if(e.spanGaps&&(t=t.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")nae(t,r);else{let f=s?t[t.length-1]:t[0];for(a=0,l=t.length;a<l;++a)d=t[a],u=Jie(f,d,t[Math.min(a+1,l-(s?0:1))%l],e.tension),d.cp1x=u.previous.x,d.cp1y=u.previous.y,d.cp2x=u.next.x,d.cp2y=u.next.y,f=d}e.capBezierPoints&&sae(t,n)}function GS(){return typeof window<"u"&&typeof document<"u"}function YS(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function M0(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const Xv=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function iae(t,e){return Xv(t).getPropertyValue(e)}const aae=["top","right","bottom","left"];function Cd(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const a=aae[r];s[a]=parseFloat(t[e+"-"+a+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const oae=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function lae(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:a}=s;let l=!1,d,u;if(oae(r,a,t.target))d=r,u=a;else{const f=e.getBoundingClientRect();d=s.clientX-f.left,u=s.clientY-f.top,l=!0}return{x:d,y:u,box:l}}function xd(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=Xv(n),a=r.boxSizing==="border-box",l=Cd(r,"padding"),d=Cd(r,"border","width"),{x:u,y:f,box:m}=lae(t,n),p=l.left+(m&&d.left),x=l.top+(m&&d.top);let{width:w,height:j}=e;return a&&(w-=l.width+d.width,j-=l.height+d.height),{x:Math.round((u-p)/w*n.width/s),y:Math.round((f-x)/j*n.height/s)}}function cae(t,e,n){let s,r;if(e===void 0||n===void 0){const a=t&&YS(t);if(!a)e=t.clientWidth,n=t.clientHeight;else{const l=a.getBoundingClientRect(),d=Xv(a),u=Cd(d,"border","width"),f=Cd(d,"padding");e=l.width-f.width-u.width,n=l.height-f.height-u.height,s=M0(d.maxWidth,a,"clientWidth"),r=M0(d.maxHeight,a,"clientHeight")}}return{width:e,height:n,maxWidth:s||I0,maxHeight:r||I0}}const ny=t=>Math.round(t*10)/10;function dae(t,e,n,s){const r=Xv(t),a=Cd(r,"margin"),l=M0(r.maxWidth,t,"clientWidth")||I0,d=M0(r.maxHeight,t,"clientHeight")||I0,u=cae(t,e,n);let{width:f,height:m}=u;if(r.boxSizing==="content-box"){const x=Cd(r,"border","width"),w=Cd(r,"padding");f-=w.width+x.width,m-=w.height+x.height}return f=Math.max(0,f-a.width),m=Math.max(0,s?f/s:m-a.height),f=ny(Math.min(f,l,u.maxWidth)),m=ny(Math.min(m,d,u.maxHeight)),f&&!m&&(m=ny(f/2)),(e!==void 0||n!==void 0)&&s&&u.height&&m>u.height&&(m=u.height,f=ny(Math.floor(m*s))),{width:f,height:m}}function dI(t,e,n){const s=e||1,r=Math.floor(t.height*s),a=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const l=t.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${t.height}px`,l.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||l.height!==r||l.width!==a?(t.currentDevicePixelRatio=s,l.height=r,l.width=a,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const uae=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};GS()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function uI(t,e){const n=iae(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function yd(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function hae(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function fae(t,e,n,s){const r={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},l=yd(t,r,n),d=yd(r,a,n),u=yd(a,e,n),f=yd(l,d,n),m=yd(d,u,n);return yd(f,m,n)}const mae=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},gae=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Sh(t,e,n){return t?mae(e,n):gae()}function K6(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function X6(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Q6(t){return t==="angle"?{between:Ag,compare:mie,normalize:ai}:{between:Uo,compare:(e,n)=>e-n,normalize:e=>e}}function hI({start:t,end:e,count:n,loop:s,style:r}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:r}}function pae(t,e,n){const{property:s,start:r,end:a}=n,{between:l,normalize:d}=Q6(s),u=e.length;let{start:f,end:m,loop:p}=t,x,w;if(p){for(f+=u,m+=u,x=0,w=u;x<w&&l(d(e[f%u][s]),r,a);++x)f--,m--;f%=u,m%=u}return m<f&&(m+=u),{start:f,end:m,loop:p,style:t.style}}function Z6(t,e,n){if(!n)return[t];const{property:s,start:r,end:a}=n,l=e.length,{compare:d,between:u,normalize:f}=Q6(s),{start:m,end:p,loop:x,style:w}=pae(t,e,n),j=[];let S=!1,_=null,E,C,I;const M=()=>u(r,I,E)&&d(r,I)!==0,V=()=>d(a,E)===0||u(a,I,E),z=()=>S||M(),D=()=>!S||V();for(let A=m,T=m;A<=p;++A)C=e[A%l],!C.skip&&(E=f(C[s]),E!==I&&(S=u(E,r,a),_===null&&z()&&(_=d(E,r)===0?A:T),_!==null&&D()&&(j.push(hI({start:_,end:A,loop:x,count:l,style:w})),_=null),T=A,I=E));return _!==null&&j.push(hI({start:_,end:p,loop:x,count:l,style:w})),j}function J6(t,e){const n=[],s=t.segments;for(let r=0;r<s.length;r++){const a=Z6(s[r],t.points,e);a.length&&n.push(...a)}return n}function xae(t,e,n,s){let r=0,a=e-1;if(n&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(a+=r);a>r&&t[a%e].skip;)a--;return a%=e,{start:r,end:a}}function yae(t,e,n,s){const r=t.length,a=[];let l=e,d=t[e],u;for(u=e+1;u<=n;++u){const f=t[u%r];f.skip||f.stop?d.skip||(s=!1,a.push({start:e%r,end:(u-1)%r,loop:s}),e=l=f.stop?u:null):(l=u,d.skip&&(e=u)),d=f}return l!==null&&a.push({start:e%r,end:l%r,loop:s}),a}function vae(t,e){const n=t.points,s=t.options.spanGaps,r=n.length;if(!r)return[];const a=!!t._loop,{start:l,end:d}=xae(n,r,a,s);if(s===!0)return fI(t,[{start:l,end:d,loop:a}],n,e);const u=d<l?d+r:d,f=!!t._fullLoop&&l===0&&d===r-1;return fI(t,yae(n,l,u,f),n,e)}function fI(t,e,n,s){return!s||!s.setContext||!n?e:bae(t,e,n,s)}function bae(t,e,n,s){const r=t._chart.getContext(),a=mI(t.options),{_datasetIndex:l,options:{spanGaps:d}}=t,u=n.length,f=[];let m=a,p=e[0].start,x=p;function w(j,S,_,E){const C=d?-1:1;if(j!==S){for(j+=u;n[j%u].skip;)j-=C;for(;n[S%u].skip;)S+=C;j%u!==S%u&&(f.push({start:j%u,end:S%u,loop:_,style:E}),m=E,p=S%u)}}for(const j of e){p=d?p:j.start;let S=n[p%u],_;for(x=p+1;x<=j.end;x++){const E=n[x%u];_=mI(s.setContext(tu(r,{type:"segment",p0:S,p1:E,p0DataIndex:(x-1)%u,p1DataIndex:x%u,datasetIndex:l}))),wae(_,m)&&w(p,x-1,j.loop,m),S=E,m=_}p<x-1&&w(p,x-1,j.loop,m)}return f}function mI(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function wae(t,e){if(!e)return!1;const n=[],s=function(r,a){return BS(a)?(n.includes(a)||n.push(a),n.indexOf(a)):a};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function sy(t,e,n){return t.options.clip?t[n]:e[n]}function _ae(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:sy(n,e,"left"),right:sy(n,e,"right"),top:sy(s,e,"top"),bottom:sy(s,e,"bottom")}:e}function eV(t,e){const n=e._clip;if(n.disabled)return!1;const s=_ae(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class jae{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const a=n.listeners[r],l=n.duration;a.forEach(d=>d({chart:e,initial:n.initial,numSteps:l,currentStep:Math.min(s-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=U6.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const a=s.items;let l=a.length-1,d=!1,u;for(;l>=0;--l)u=a[l],u._active?(u._total>s.duration&&(s.duration=u._total),u.tick(e),d=!0):(a[l]=a[a.length-1],a.pop());d&&(r.draw(),this._notify(r,s,e,"progress")),a.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=a.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ko=new jae;const gI="transparent",Nae={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=rI(t||gI),r=s.valid&&rI(e||gI);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Sae{constructor(e,n,s,r){const a=n[s];r=ey([e.to,r,a,e.from]);const l=ey([e.from,a,r]);this._active=!0,this._fn=e.fn||Nae[e.type||typeof l],this._easing=ng[e.easing]||ng.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],a=s-this._start,l=this._duration-a;this._start=s,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=ey([e.to,n,r,e.from]),this._from=ey([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,a=this._from,l=this._loop,d=this._to;let u;if(this._active=a!==d&&(l||n<s),!this._active){this._target[r]=d,this._notify(!0);return}if(n<0){this._target[r]=a;return}u=n/s%2,u=l&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[r]=this._fn(a,d,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class tV{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Zt(e))return;const n=Object.keys(hs.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const a=e[r];if(!Zt(a))return;const l={};for(const d of n)l[d]=a[d];(Es(a.properties)&&a.properties||[r]).forEach(d=>{(d===r||!s.has(d))&&s.set(d,l)})})}_animateOptions(e,n){const s=n.options,r=Cae(e,s);if(!r)return[];const a=this._createAnimations(r,s);return s.$shared&&Eae(e.options.$animations,s).then(()=>{e.options=s},()=>{}),a}_createAnimations(e,n){const s=this._properties,r=[],a=e.$animations||(e.$animations={}),l=Object.keys(n),d=Date.now();let u;for(u=l.length-1;u>=0;--u){const f=l[u];if(f.charAt(0)==="$")continue;if(f==="options"){r.push(...this._animateOptions(e,n));continue}const m=n[f];let p=a[f];const x=s.get(f);if(p)if(x&&p.active()){p.update(x,m,d);continue}else p.cancel();if(!x||!x.duration){e[f]=m;continue}a[f]=p=new Sae(x,e,f,m),r.push(p)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return ko.add(this._chart,s),!0}}function Eae(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const a=t[s[r]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}function Cae(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function pI(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,a=n.max===void 0?e:0;return{start:s?a:r,end:s?r:a}}function Tae(t,e,n){if(n===!1)return!1;const s=pI(t,n),r=pI(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function Aae(t){let e,n,s,r;return Zt(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function nV(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,a;for(r=0,a=s.length;r<a;++r)n.push(s[r].index);return n}function xI(t,e,n,s={}){const r=t.keys,a=s.mode==="single";let l,d,u,f;if(e===null)return;let m=!1;for(l=0,d=r.length;l<d;++l){if(u=+r[l],u===n){if(m=!0,s.all)continue;break}f=t.values[u],jr(f)&&(a||e===0||Ya(e)===Ya(f))&&(e+=f)}return!m&&!s.all?0:e}function kae(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",a=s.axis==="x"?"x":"y",l=Object.keys(t),d=new Array(l.length);let u,f,m;for(u=0,f=l.length;u<f;++u)m=l[u],d[u]={[r]:m,[a]:t[m]};return d}function $_(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Rae(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Iae(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function Dae(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function yI(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const a=t[r.index];if(n&&a>0||!n&&a<0)return r.index}return null}function vI(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:a,vScale:l,index:d}=s,u=a.axis,f=l.axis,m=Rae(a,l,s),p=e.length;let x;for(let w=0;w<p;++w){const j=e[w],{[u]:S,[f]:_}=j,E=j._stacks||(j._stacks={});x=E[f]=Dae(r,m,S),x[d]=_,x._top=yI(x,l,!0,s.type),x._bottom=yI(x,l,!1,s.type);const C=x._visualValues||(x._visualValues={});C[d]=_}}function q_(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function Mae(t,e){return tu(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Pae(t,e,n){return tu(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function _m(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const a=r._stacks;if(!a||a[s]===void 0||a[s][n]===void 0)return;delete a[s][n],a[s]._visualValues!==void 0&&a[s]._visualValues[n]!==void 0&&delete a[s]._visualValues[n]}}}const H_=t=>t==="reset"||t==="none",bI=(t,e)=>e?t:Object.assign({},t),Oae=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:nV(n,!0),values:null};class Td{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=$_(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_m(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(p,x,w,j)=>p==="x"?x:p==="r"?j:w,a=n.xAxisID=Ut(s.xAxisID,q_(e,"x")),l=n.yAxisID=Ut(s.yAxisID,q_(e,"y")),d=n.rAxisID=Ut(s.rAxisID,q_(e,"r")),u=n.indexAxis,f=n.iAxisID=r(u,a,l,d),m=n.vAxisID=r(u,l,a,d);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(d),n.iScale=this.getScaleForId(f),n.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&tI(this._data,this),e._stacked&&_m(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Zt(n)){const r=this._cachedMeta;this._data=kae(n,r)}else if(s!==n){if(s){tI(s,this);const r=this._cachedMeta;_m(r),r._parsed=[]}n&&Object.isExtensible(n)&&yie(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const a=n._stacked;n._stacked=$_(n.vScale,n),n.stack!==s.stack&&(r=!0,_m(n),n.stack=s.stack),this._resyncElements(e),(r||a!==n._stacked)&&(vI(this,n._parsed),n._stacked=$_(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:a,_stacked:l}=s,d=a.axis;let u=e===0&&n===r.length?!0:s._sorted,f=e>0&&s._parsed[e-1],m,p,x;if(this._parsing===!1)s._parsed=r,s._sorted=!0,x=r;else{Es(r[e])?x=this.parseArrayData(s,r,e,n):Zt(r[e])?x=this.parseObjectData(s,r,e,n):x=this.parsePrimitiveData(s,r,e,n);const w=()=>p[d]===null||f&&p[d]<f[d];for(m=0;m<n;++m)s._parsed[m+e]=p=x[m],u&&(w()&&(u=!1),f=p);s._sorted=u}l&&vI(this,x)}parsePrimitiveData(e,n,s,r){const{iScale:a,vScale:l}=e,d=a.axis,u=l.axis,f=a.getLabels(),m=a===l,p=new Array(r);let x,w,j;for(x=0,w=r;x<w;++x)j=x+s,p[x]={[d]:m||a.parse(f[j],j),[u]:l.parse(n[j],j)};return p}parseArrayData(e,n,s,r){const{xScale:a,yScale:l}=e,d=new Array(r);let u,f,m,p;for(u=0,f=r;u<f;++u)m=u+s,p=n[m],d[u]={x:a.parse(p[0],m),y:l.parse(p[1],m)};return d}parseObjectData(e,n,s,r){const{xScale:a,yScale:l}=e,{xAxisKey:d="x",yAxisKey:u="y"}=this._parsing,f=new Array(r);let m,p,x,w;for(m=0,p=r;m<p;++m)x=m+s,w=n[x],f[m]={x:a.parse(qd(w,d),x),y:l.parse(qd(w,u),x)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,a=this._cachedMeta,l=n[e.axis],d={keys:nV(r,!0),values:n._stacks[e.axis]._visualValues};return xI(d,l,a.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const a=s[n.axis];let l=a===null?NaN:a;const d=r&&s._stacks[n.axis];r&&d&&(r.values=d,l=xI(r,a,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,a=s._sorted&&e===s.iScale,l=r.length,d=this._getOtherScale(e),u=Oae(n,s,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:p}=Iae(d);let x,w;function j(){w=r[x];const S=w[d.axis];return!jr(w[e.axis])||m>S||p<S}for(x=0;x<l&&!(!j()&&(this.updateRangeFromParsed(f,e,w,u),a));++x);if(a){for(x=l-1;x>=0;--x)if(!j()){this.updateRangeFromParsed(f,e,w,u);break}}return f}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,a,l;for(r=0,a=n.length;r<a;++r)l=n[r][e.axis],jr(l)&&s.push(l);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,a=this.getParsed(e);return{label:s?""+s.getLabelForValue(a[s.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Aae(Ut(this.options.clip,Tae(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],a=n.chartArea,l=[],d=this._drawStart||0,u=this._drawCount||r.length-d,f=this.options.drawActiveElementsOnTop;let m;for(s.dataset&&s.dataset.draw(e,a,d,u),m=d;m<d+u;++m){const p=r[m];p.hidden||(p.active&&f?l.push(p):p.draw(e,a))}for(m=0;m<l.length;++m)l[m].draw(e,a)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];a=l.$context||(l.$context=Pae(this.getContext(),e,l)),a.parsed=this.getParsed(e),a.raw=r.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=Mae(this.chart.getContext(),this.index)),a.dataset=r,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=s,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",a=this._cachedDataOpts,l=e+"-"+n,d=a[l],u=this.enableOptionSharing&&Cg(s);if(d)return bI(d,u);const f=this.chart.config,m=f.datasetElementScopeKeys(this._type,e),p=r?[`${e}Hover`,"hover",e,""]:[e,""],x=f.getOptionScopes(this.getDataset(),m),w=Object.keys(hs.elements[e]),j=()=>this.getContext(s,r,n),S=f.resolveNamedOptions(x,w,j,p);return S.$shared&&(S.$shared=u,a[l]=Object.freeze(bI(S,u))),S}_resolveAnimations(e,n,s){const r=this.chart,a=this._cachedDataOpts,l=`animation-${n}`,d=a[l];if(d)return d;let u;if(r.options.animation!==!1){const m=this.chart.config,p=m.datasetAnimationScopeKeys(this._type,n),x=m.getOptionScopes(this.getDataset(),p);u=m.createResolver(x,this.getContext(e,s,n))}const f=new tV(r,u&&u.animations);return u&&u._cacheable&&(a[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||H_(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,a=this.getSharedOptions(s),l=this.includeOptions(n,a)||a!==r;return this.updateSharedOptions(a,n,s),{sharedOptions:a,includeOptions:l}}updateElement(e,n,s,r){H_(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!H_(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const a=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(a)||a})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[d,u,f]of this._syncList)this[d](u,f);this._syncList=[];const r=s.length,a=n.length,l=Math.min(a,r);l&&this.parse(0,l),a>r?this._insertElements(r,a-r,e):a<r&&this._removeElements(a,r-a)}_insertElements(e,n,s=!0){const r=this._cachedMeta,a=r.data,l=e+n;let d;const u=f=>{for(f.length+=n,d=f.length-1;d>=l;d--)f[d]=f[d-n]};for(u(a),d=e;d<l;++d)a[d]=new this.dataElementType;this._parsing&&u(r._parsed),this.parse(e,n),s&&this.updateElements(a,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&_m(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}rt(Td,"defaults",{}),rt(Td,"datasetElementType",null),rt(Td,"dataElementType",null);function Lae(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let r=0,a=n.length;r<a;r++)s=s.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=V6(s.sort((r,a)=>r-a))}return t._cache.$bar}function Vae(t){const e=t.iScale,n=Lae(e,t.type);let s=e._length,r,a,l,d;const u=()=>{l===32767||l===-32768||(Cg(d)&&(s=Math.min(s,Math.abs(l-d)||s)),d=l)};for(r=0,a=n.length;r<a;++r)l=e.getPixelForValue(n[r]),u();for(d=void 0,r=0,a=e.ticks.length;r<a;++r)l=e.getPixelForTick(r),u();return s}function Uae(t,e,n,s){const r=n.barThickness;let a,l;return vn(r)?(a=e.min*n.categoryPercentage,l=n.barPercentage):(a=r*s,l=1),{chunk:a/s,ratio:l,start:e.pixels[t]-a/2}}function Fae(t,e,n,s){const r=e.pixels,a=r[t];let l=t>0?r[t-1]:null,d=t<r.length-1?r[t+1]:null;const u=n.categoryPercentage;l===null&&(l=a-(d===null?e.end-e.start:d-a)),d===null&&(d=a+a-l);const f=a-(a-Math.min(l,d))/2*u;return{chunk:Math.abs(d-l)/2*u/s,ratio:n.barPercentage,start:f}}function Bae(t,e,n,s){const r=n.parse(t[0],s),a=n.parse(t[1],s),l=Math.min(r,a),d=Math.max(r,a);let u=l,f=d;Math.abs(l)>Math.abs(d)&&(u=d,f=l),e[n.axis]=f,e._custom={barStart:u,barEnd:f,start:r,end:a,min:l,max:d}}function sV(t,e,n,s){return Es(t)?Bae(t,e,n,s):e[n.axis]=n.parse(t,s),e}function wI(t,e,n,s){const r=t.iScale,a=t.vScale,l=r.getLabels(),d=r===a,u=[];let f,m,p,x;for(f=n,m=n+s;f<m;++f)x=e[f],p={},p[r.axis]=d||r.parse(l[f],f),u.push(sV(x,p,a,f));return u}function W_(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function zae(t,e,n){return t!==0?Ya(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function $ae(t){let e,n,s,r,a;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(r="end",a="start"):(r="start",a="end"),{start:n,end:s,reverse:e,top:r,bottom:a}}function qae(t,e,n,s){let r=e.borderSkipped;const a={};if(!r){t.borderSkipped=a;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:d,reverse:u,top:f,bottom:m}=$ae(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?r=f:(n._bottom||0)===s?r=m:(a[_I(m,l,d,u)]=!0,r=f)),a[_I(r,l,d,u)]=!0,t.borderSkipped=a}function _I(t,e,n,s){return s?(t=Hae(t,e,n),t=jI(t,n,e)):t=jI(t,e,n),t}function Hae(t,e,n){return t===e?n:t===n?e:t}function jI(t,e,n){return t==="start"?e:t==="end"?n:t}function Wae(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class ky extends Td{parsePrimitiveData(e,n,s,r){return wI(e,n,s,r)}parseArrayData(e,n,s,r){return wI(e,n,s,r)}parseObjectData(e,n,s,r){const{iScale:a,vScale:l}=e,{xAxisKey:d="x",yAxisKey:u="y"}=this._parsing,f=a.axis==="x"?d:u,m=l.axis==="x"?d:u,p=[];let x,w,j,S;for(x=s,w=s+r;x<w;++x)S=n[x],j={},j[a.axis]=a.parse(qd(S,f),x),p.push(sV(qd(S,m),j,l,x));return p}updateRangeFromParsed(e,n,s,r){super.updateRangeFromParsed(e,n,s,r);const a=s._custom;a&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:r}=n,a=this.getParsed(e),l=a._custom,d=W_(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+s.getLabelForValue(a[s.axis]),value:d}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,r){const a=r==="reset",{index:l,_cachedMeta:{vScale:d}}=this,u=d.getBasePixel(),f=d.isHorizontal(),m=this._getRuler(),{sharedOptions:p,includeOptions:x}=this._getSharedOptions(n,r);for(let w=n;w<n+s;w++){const j=this.getParsed(w),S=a||vn(j[d.axis])?{base:u,head:u}:this._calculateBarValuePixels(w),_=this._calculateBarIndexPixels(w,m),E=(j._stacks||{})[d.axis],C={horizontal:f,base:S.base,enableBorderRadius:!E||W_(j._custom)||l===E._top||l===E._bottom,x:f?S.head:_.center,y:f?_.center:S.head,height:f?_.size:Math.abs(S.size),width:f?Math.abs(S.size):_.size};x&&(C.options=p||this.resolveDataElementOptions(w,e[w].active?"active":r));const I=C.options||e[w].options;qae(C,I,E,l),Wae(C,I,m.ratio),this.updateElement(e[w],w,C,r)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),a=s.options.stacked,l=[],d=this._cachedMeta.controller.getParsed(n),u=d&&d[s.axis],f=m=>{const p=m._parsed.find(w=>w[s.axis]===u),x=p&&p[m.vScale.axis];if(vn(x)||isNaN(x))return!0};for(const m of r)if(!(n!==void 0&&f(m))&&((a===!1||l.indexOf(m.stack)===-1||a===void 0&&m.stack===void 0)&&l.push(m.stack),m.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[Ut(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,s){const r=this._getStacks(e,s),a=n!==void 0?r.indexOf(n):-1;return a===-1?r.length-1:a}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,r=[];let a,l;for(a=0,l=n.data.length;a<l;++a)r.push(s.getPixelForValue(this.getParsed(a)[s.axis],a));const d=e.barThickness;return{min:d||Vae(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:d?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:a,minBarLength:l}}=this,d=a||0,u=this.getParsed(e),f=u._custom,m=W_(f);let p=u[n.axis],x=0,w=s?this.applyStack(n,u,s):p,j,S;w!==p&&(x=w-p,w=p),m&&(p=f.barStart,w=f.barEnd-f.barStart,p!==0&&Ya(p)!==Ya(f.barEnd)&&(x=0),x+=p);const _=!vn(a)&&!m?a:x;let E=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?j=n.getPixelForValue(x+w):j=E,S=j-E,Math.abs(S)<l){S=zae(S,n,d)*l,p===d&&(E-=S/2);const C=n.getPixelForDecimal(0),I=n.getPixelForDecimal(1),M=Math.min(C,I),V=Math.max(C,I);E=Math.max(Math.min(E,V),M),j=E+S,s&&!m&&(u._stacks[n.axis]._visualValues[r]=n.getValueForPixel(j)-n.getValueForPixel(E))}if(E===n.getPixelForValue(d)){const C=Ya(S)*n.getLineWidthForValue(d)/2;E+=C,S-=C}return{size:S,base:E,head:j,center:j+S/2}}_calculateBarIndexPixels(e,n){const s=n.scale,r=this.options,a=r.skipNull,l=Ut(r.maxBarThickness,1/0);let d,u;const f=this._getAxisCount();if(n.grouped){const m=a?this._getStackCount(e):n.stackCount,p=r.barThickness==="flex"?Fae(e,n,r,m*f):Uae(e,n,r,m*f),x=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,w=this._getAxis().indexOf(Ut(x,this.getFirstScaleIdForIndexAxis())),j=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+w;d=p.start+p.chunk*j+p.chunk/2,u=Math.min(l,p.chunk*p.ratio)}else d=s.getPixelForValue(this.getParsed(e)[s.axis],e),u=Math.min(l,n.min*n.ratio);return{base:d-u/2,head:d+u/2,center:d,size:u}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,r=s.length;let a=0;for(;a<r;++a)this.getParsed(a)[n.axis]!==null&&!s[a].hidden&&s[a].draw(this._ctx)}}rt(ky,"id","bar"),rt(ky,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),rt(ky,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Gae(t,e,n){let s=1,r=1,a=0,l=0;if(e<es){const d=t,u=d+e,f=Math.cos(d),m=Math.sin(d),p=Math.cos(u),x=Math.sin(u),w=(I,M,V)=>Ag(I,d,u,!0)?1:Math.max(M,M*n,V,V*n),j=(I,M,V)=>Ag(I,d,u,!0)?-1:Math.min(M,M*n,V,V*n),S=w(0,f,p),_=w(Fs,m,x),E=j(An,f,p),C=j(An+Fs,m,x);s=(S-E)/2,r=(_-C)/2,a=-(S+E)/2,l=-(_+C)/2}return{ratioX:s,ratioY:r,offsetX:a,offsetY:l}}class ch extends Td{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let a=u=>+s[u];if(Zt(s[e])){const{key:u="value"}=this._parsing;a=f=>+qd(s[f],u)}let l,d;for(l=e,d=e+n;l<d;++l)r._parsed[l]=a(l)}}_getRotation(){return Vo(this.options.rotation-90)}_getCircumference(){return Vo(this.options.circumference)}_getRotationExtents(){let e=es,n=-es;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,a=r._getRotation(),l=r._getCircumference();e=Math.min(e,a),n=Math.max(n,a+l)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,a=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,d=Math.max((Math.min(s.width,s.height)-l)/2,0),u=Math.min(tie(this.options.cutout,d),1),f=this._getRingWeight(this.index),{circumference:m,rotation:p}=this._getRotationExtents(),{ratioX:x,ratioY:w,offsetX:j,offsetY:S}=Gae(p,m,u),_=(s.width-l)/x,E=(s.height-l)/w,C=Math.max(Math.min(_,E)/2,0),I=D6(this.options.radius,C),M=Math.max(I*u,0),V=(I-M)/this._getVisibleDatasetWeightTotal();this.offsetX=j*I,this.offsetY=S*I,r.total=this.calculateTotal(),this.outerRadius=I-V*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-V*f,0),this.updateElements(a,0,a.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,a=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*a/es)}updateElements(e,n,s,r){const a=r==="reset",l=this.chart,d=l.chartArea,f=l.options.animation,m=(d.left+d.right)/2,p=(d.top+d.bottom)/2,x=a&&f.animateScale,w=x?0:this.innerRadius,j=x?0:this.outerRadius,{sharedOptions:S,includeOptions:_}=this._getSharedOptions(n,r);let E=this._getRotation(),C;for(C=0;C<n;++C)E+=this._circumference(C,a);for(C=n;C<n+s;++C){const I=this._circumference(C,a),M=e[C],V={x:m+this.offsetX,y:p+this.offsetY,startAngle:E,endAngle:E+I,circumference:I,outerRadius:j,innerRadius:w};_&&(V.options=S||this.resolveDataElementOptions(C,M.active?"active":r)),E+=I,this.updateElement(M,C,V,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const a=e._parsed[r];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(a))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?es*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],a=zS(n._parsed[e],s.options.locale);return{label:r[e]||"",value:a}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,a,l,d,u;if(!e){for(r=0,a=s.data.datasets.length;r<a;++r)if(s.isDatasetVisible(r)){l=s.getDatasetMeta(r),e=l.data,d=l.controller;break}}if(!e)return 0;for(r=0,a=e.length;r<a;++r)u=d.resolveDataElementOptions(r),u.borderAlign!=="inner"&&(n=Math.max(n,u.borderWidth||0,u.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const a=this.resolveDataElementOptions(s);n=Math.max(n,a.offset||0,a.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(Ut(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}rt(ch,"id","doughnut"),rt(ch,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),rt(ch,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),rt(ch,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:r}}=e.legend.options;return n.labels.map((a,l)=>{const u=e.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:r,lineWidth:u.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class Ry extends Td{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:a}=n,l=this.chart._animationsDisabled;let{start:d,count:u}=wie(n,r,l);this._drawStart=d,this._drawCount=u,_ie(n)&&(d=0,u=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!a._decimated,s.points=r;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(s,void 0,{animated:!l,options:f},e),this.updateElements(r,d,u,e)}updateElements(e,n,s,r){const a=r==="reset",{iScale:l,vScale:d,_stacked:u,_dataset:f}=this._cachedMeta,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(n,r),x=l.axis,w=d.axis,{spanGaps:j,segment:S}=this.options,_=Tg(j)?j:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||a||r==="none",C=n+s,I=e.length;let M=n>0&&this.getParsed(n-1);for(let V=0;V<I;++V){const z=e[V],D=E?z:{};if(V<n||V>=C){D.skip=!0;continue}const A=this.getParsed(V),T=vn(A[w]),R=D[x]=l.getPixelForValue(A[x],V),P=D[w]=a||T?d.getBasePixel():d.getPixelForValue(u?this.applyStack(d,A,u):A[w],V);D.skip=isNaN(R)||isNaN(P)||T,D.stop=V>0&&Math.abs(A[x]-M[x])>_,S&&(D.parsed=A,D.raw=f.data[V]),p&&(D.options=m||this.resolveDataElementOptions(V,z.active?"active":r)),E||this.updateElement(z,V,D,r),M=A}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return s;const a=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,a,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}rt(Ry,"id","line"),rt(Ry,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),rt(Ry,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class b1 extends ch{}rt(b1,"id","pie"),rt(b1,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function hd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class KS{constructor(e){rt(this,"options");this.options=e||{}}static override(e){Object.assign(KS.prototype,e)}init(){}formats(){return hd()}parse(){return hd()}format(){return hd()}add(){return hd()}diff(){return hd()}startOf(){return hd()}endOf(){return hd()}}var Yae={_date:KS};function Kae(t,e,n,s){const{controller:r,data:a,_sorted:l}=t,d=r._cachedMeta.iScale,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(d&&e===d.axis&&e!=="r"&&l&&a.length){const f=d._reversePixels?pie:Nd;if(s){if(r._sharedOptions){const m=a[0],p=typeof m.getRange=="function"&&m.getRange(e);if(p){const x=f(a,e,n-p),w=f(a,e,n+p);return{lo:x.lo,hi:w.hi}}}}else{const m=f(a,e,n);if(u){const{vScale:p}=r._cachedMeta,{_parsed:x}=t,w=x.slice(0,m.lo+1).reverse().findIndex(S=>!vn(S[p.axis]));m.lo-=Math.max(0,w);const j=x.slice(m.hi).findIndex(S=>!vn(S[p.axis]));m.hi+=Math.max(0,j)}return m}}return{lo:0,hi:a.length-1}}function Qv(t,e,n,s,r){const a=t.getSortedVisibleDatasetMetas(),l=n[e];for(let d=0,u=a.length;d<u;++d){const{index:f,data:m}=a[d],{lo:p,hi:x}=Kae(a[d],e,l,r);for(let w=p;w<=x;++w){const j=m[w];j.skip||s(j,f,w)}}}function Xae(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const a=e?Math.abs(s.x-r.x):0,l=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function G_(t,e,n,s,r){const a=[];return!r&&!t.isPointInArea(e)||Qv(t,n,e,function(d,u,f){!r&&!kg(d,t.chartArea,0)||d.inRange(e.x,e.y,s)&&a.push({element:d,datasetIndex:u,index:f})},!0),a}function Qae(t,e,n,s){let r=[];function a(l,d,u){const{startAngle:f,endAngle:m}=l.getProps(["startAngle","endAngle"],s),{angle:p}=O6(l,{x:e.x,y:e.y});Ag(p,f,m)&&r.push({element:l,datasetIndex:d,index:u})}return Qv(t,n,e,a),r}function Zae(t,e,n,s,r,a){let l=[];const d=Xae(n);let u=Number.POSITIVE_INFINITY;function f(m,p,x){const w=m.inRange(e.x,e.y,r);if(s&&!w)return;const j=m.getCenterPoint(r);if(!(!!a||t.isPointInArea(j))&&!w)return;const _=d(e,j);_<u?(l=[{element:m,datasetIndex:p,index:x}],u=_):_===u&&l.push({element:m,datasetIndex:p,index:x})}return Qv(t,n,e,f),l}function Y_(t,e,n,s,r,a){return!a&&!t.isPointInArea(e)?[]:n==="r"&&!s?Qae(t,e,n,r):Zae(t,e,n,s,r,a)}function NI(t,e,n,s,r){const a=[],l=n==="x"?"inXRange":"inYRange";let d=!1;return Qv(t,n,e,(u,f,m)=>{u[l]&&u[l](e[n],r)&&(a.push({element:u,datasetIndex:f,index:m}),d=d||u.inRange(e.x,e.y,r))}),s&&!d?[]:a}var Jae={modes:{index(t,e,n,s){const r=xd(e,t),a=n.axis||"x",l=n.includeInvisible||!1,d=n.intersect?G_(t,r,a,s,l):Y_(t,r,a,!1,s,l),u=[];return d.length?(t.getSortedVisibleDatasetMetas().forEach(f=>{const m=d[0].index,p=f.data[m];p&&!p.skip&&u.push({element:p,datasetIndex:f.index,index:m})}),u):[]},dataset(t,e,n,s){const r=xd(e,t),a=n.axis||"xy",l=n.includeInvisible||!1;let d=n.intersect?G_(t,r,a,s,l):Y_(t,r,a,!1,s,l);if(d.length>0){const u=d[0].datasetIndex,f=t.getDatasetMeta(u).data;d=[];for(let m=0;m<f.length;++m)d.push({element:f[m],datasetIndex:u,index:m})}return d},point(t,e,n,s){const r=xd(e,t),a=n.axis||"xy",l=n.includeInvisible||!1;return G_(t,r,a,s,l)},nearest(t,e,n,s){const r=xd(e,t),a=n.axis||"xy",l=n.includeInvisible||!1;return Y_(t,r,a,n.intersect,s,l)},x(t,e,n,s){const r=xd(e,t);return NI(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=xd(e,t);return NI(t,r,"y",n.intersect,s)}}};const rV=["left","top","right","bottom"];function jm(t,e){return t.filter(n=>n.pos===e)}function SI(t,e){return t.filter(n=>rV.indexOf(n.pos)===-1&&n.box.axis===e)}function Nm(t,e){return t.sort((n,s)=>{const r=e?s:n,a=e?n:s;return r.weight===a.weight?r.index-a.index:r.weight-a.weight})}function eoe(t){const e=[];let n,s,r,a,l,d;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:a,options:{stack:l,stackWeight:d=1}}=r,e.push({index:n,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&a+l,stackWeight:d});return e}function toe(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:a}=n;if(!s||!rV.includes(r))continue;const l=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return e}function noe(t,e){const n=toe(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let a,l,d;for(a=0,l=t.length;a<l;++a){d=t[a];const{fullSize:u}=d.box,f=n[d.stack],m=f&&d.stackWeight/f.weight;d.horizontal?(d.width=m?m*s:u&&e.availableWidth,d.height=r):(d.width=s,d.height=m?m*r:u&&e.availableHeight)}return n}function soe(t){const e=eoe(t),n=Nm(e.filter(f=>f.box.fullSize),!0),s=Nm(jm(e,"left"),!0),r=Nm(jm(e,"right")),a=Nm(jm(e,"top"),!0),l=Nm(jm(e,"bottom")),d=SI(e,"x"),u=SI(e,"y");return{fullSize:n,leftAndTop:s.concat(a),rightAndBottom:r.concat(u).concat(l).concat(d),chartArea:jm(e,"chartArea"),vertical:s.concat(r).concat(u),horizontal:a.concat(l).concat(d)}}function EI(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function iV(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function roe(t,e,n,s){const{pos:r,box:a}=n,l=t.maxPadding;if(!Zt(r)){n.size&&(t[r]-=n.size);const p=s[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?a.height:a.width),n.size=p.size/p.count,t[r]+=n.size}a.getPadding&&iV(l,a.getPadding());const d=Math.max(0,e.outerWidth-EI(l,t,"left","right")),u=Math.max(0,e.outerHeight-EI(l,t,"top","bottom")),f=d!==t.w,m=u!==t.h;return t.w=d,t.h=u,n.horizontal?{same:f,other:m}:{same:m,other:f}}function ioe(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function aoe(t,e){const n=e.maxPadding;function s(r){const a={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{a[l]=Math.max(e[l],n[l])}),a}return s(t?["left","right"]:["top","bottom"])}function Fm(t,e,n,s){const r=[];let a,l,d,u,f,m;for(a=0,l=t.length,f=0;a<l;++a){d=t[a],u=d.box,u.update(d.width||e.w,d.height||e.h,aoe(d.horizontal,e));const{same:p,other:x}=roe(e,n,d,s);f|=p&&r.length,m=m||x,u.fullSize||r.push(d)}return f&&Fm(r,e,n,s)||m}function ry(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function CI(t,e,n,s){const r=n.padding;let{x:a,y:l}=e;for(const d of t){const u=d.box,f=s[d.stack]||{placed:0,weight:1},m=d.stackWeight/f.weight||1;if(d.horizontal){const p=e.w*m,x=f.size||u.height;Cg(f.start)&&(l=f.start),u.fullSize?ry(u,r.left,l,n.outerWidth-r.right-r.left,x):ry(u,e.left+f.placed,l,p,x),f.start=l,f.placed+=p,l=u.bottom}else{const p=e.h*m,x=f.size||u.width;Cg(f.start)&&(a=f.start),u.fullSize?ry(u,a,r.top,x,n.outerHeight-r.bottom-r.top):ry(u,a,e.top+f.placed,x,p),f.start=a,f.placed+=p,a=u.right}}e.x=a,e.y=l}var Di={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=Ui(t.options.layout.padding),a=Math.max(e-r.width,0),l=Math.max(n-r.height,0),d=soe(t.boxes),u=d.vertical,f=d.horizontal;Cn(t.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});const m=u.reduce((S,_)=>_.box.options&&_.box.options.display===!1?S:S+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/m,hBoxMaxHeight:l/2}),x=Object.assign({},r);iV(x,Ui(s));const w=Object.assign({maxPadding:x,w:a,h:l,x:r.left,y:r.top},r),j=noe(u.concat(f),p);Fm(d.fullSize,w,p,j),Fm(u,w,p,j),Fm(f,w,p,j)&&Fm(u,w,p,j),ioe(w),CI(d.leftAndTop,w,p,j),w.x+=w.w,w.y+=w.h,CI(d.rightAndBottom,w,p,j),t.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},Cn(d.chartArea,S=>{const _=S.box;Object.assign(_,t.chartArea),_.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class aV{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class ooe extends aV{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Iy="$chartjs",loe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},TI=t=>t===null||t==="";function coe(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[Iy]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",TI(r)){const a=uI(t,"width");a!==void 0&&(t.width=a)}if(TI(s))if(t.style.height==="")t.height=t.width/(e||2);else{const a=uI(t,"height");a!==void 0&&(t.height=a)}return t}const oV=uae?{passive:!0}:!1;function doe(t,e,n){t&&t.addEventListener(e,n,oV)}function uoe(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,oV)}function hoe(t,e){const n=loe[t.type]||t.type,{x:s,y:r}=xd(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function P0(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function foe(t,e,n){const s=t.canvas,r=new MutationObserver(a=>{let l=!1;for(const d of a)l=l||P0(d.addedNodes,s),l=l&&!P0(d.removedNodes,s);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function moe(t,e,n){const s=t.canvas,r=new MutationObserver(a=>{let l=!1;for(const d of a)l=l||P0(d.removedNodes,s),l=l&&!P0(d.addedNodes,s);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Ig=new Map;let AI=0;function lV(){const t=window.devicePixelRatio;t!==AI&&(AI=t,Ig.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function goe(t,e){Ig.size||window.addEventListener("resize",lV),Ig.set(t,e)}function poe(t){Ig.delete(t),Ig.size||window.removeEventListener("resize",lV)}function xoe(t,e,n){const s=t.canvas,r=s&&YS(s);if(!r)return;const a=F6((d,u)=>{const f=r.clientWidth;n(d,u),f<r.clientWidth&&n()},window),l=new ResizeObserver(d=>{const u=d[0],f=u.contentRect.width,m=u.contentRect.height;f===0&&m===0||a(f,m)});return l.observe(r),goe(t,a),l}function K_(t,e,n){n&&n.disconnect(),e==="resize"&&poe(t)}function yoe(t,e,n){const s=t.canvas,r=F6(a=>{t.ctx!==null&&n(hoe(a,t))},t);return doe(s,e,r),r}class voe extends aV{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(coe(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Iy])return!1;const s=n[Iy].initial;["height","width"].forEach(a=>{const l=s[a];vn(l)?n.removeAttribute(a):n.setAttribute(a,l)});const r=s.style||{};return Object.keys(r).forEach(a=>{n.style[a]=r[a]}),n.width=n.width,delete n[Iy],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),l={attach:foe,detach:moe,resize:xoe}[n]||yoe;r[n]=l(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:K_,detach:K_,resize:K_}[n]||uoe)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return dae(e,n,s,r)}isAttached(e){const n=e&&YS(e);return!!(n&&n.isConnected)}}function boe(t){return!GS()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?ooe:voe}var hy;let dl=(hy=class{constructor(){rt(this,"x");rt(this,"y");rt(this,"active",!1);rt(this,"options");rt(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return Tg(this.x)&&Tg(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(a=>{r[a]=s[a]&&s[a].active()?s[a]._to:this[a]}),r}},rt(hy,"defaults",{}),rt(hy,"defaultRoutes"),hy);function woe(t,e){const n=t.options.ticks,s=_oe(t),r=Math.min(n.maxTicksLimit||s,s),a=n.major.enabled?Noe(e):[],l=a.length,d=a[0],u=a[l-1],f=[];if(l>r)return Soe(e,f,a,l/r),f;const m=joe(a,e,r);if(l>0){let p,x;const w=l>1?Math.round((u-d)/(l-1)):null;for(iy(e,f,m,vn(w)?0:d-w,d),p=0,x=l-1;p<x;p++)iy(e,f,m,a[p],a[p+1]);return iy(e,f,m,u,vn(w)?e.length:u+w),f}return iy(e,f,m),f}function _oe(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function joe(t,e,n){const s=Eoe(t),r=e.length/n;if(!s)return Math.max(r,1);const a=cie(s);for(let l=0,d=a.length-1;l<d;l++){const u=a[l];if(u>r)return u}return Math.max(r,1)}function Noe(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function Soe(t,e,n,s){let r=0,a=n[0],l;for(s=Math.ceil(s),l=0;l<t.length;l++)l===a&&(e.push(t[l]),r++,a=n[r*s])}function iy(t,e,n,s,r){const a=Ut(s,0),l=Math.min(Ut(r,t.length),t.length);let d=0,u,f,m;for(n=Math.ceil(n),r&&(u=r-s,n=u/Math.floor(u/n)),m=a;m<0;)d++,m=Math.round(a+d*n);for(f=Math.max(a,0);f<l;f++)f===m&&(e.push(t[f]),d++,m=Math.round(a+d*n))}function Eoe(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const Coe=t=>t==="left"?"right":t==="right"?"left":t,kI=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,RI=(t,e)=>Math.min(e||t,t);function II(t,e){const n=[],s=t.length/e,r=t.length;let a=0;for(;a<r;a+=s)n.push(t[Math.floor(a)]);return n}function Toe(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),a=t._startPixel,l=t._endPixel,d=1e-6;let u=t.getPixelForTick(r),f;if(!(n&&(s===1?f=Math.max(u-a,l-u):e===0?f=(t.getPixelForTick(1)-u)/2:f=(u-t.getPixelForTick(r-1))/2,u+=r<e?f:-f,u<a-d||u>l+d)))return u}function Aoe(t,e){Cn(t,n=>{const s=n.gc,r=s.length/2;let a;if(r>e){for(a=0;a<r;++a)delete n.data[s[a]];s.splice(0,r)}})}function Sm(t){return t.drawTicks?t.tickLength:0}function DI(t,e){if(!t.display)return 0;const n=vr(t.font,e),s=Ui(t.padding);return(Es(t.text)?t.text.length:1)*n.lineHeight+s.height}function koe(t,e){return tu(t,{scale:e,type:"scale"})}function Roe(t,e,n){return tu(t,{tick:n,index:e,type:"tick"})}function Ioe(t,e,n){let s=FS(t);return(n&&e!=="right"||!n&&e==="right")&&(s=Coe(s)),s}function Doe(t,e,n,s){const{top:r,left:a,bottom:l,right:d,chart:u}=t,{chartArea:f,scales:m}=u;let p=0,x,w,j;const S=l-r,_=d-a;if(t.isHorizontal()){if(w=gr(s,a,d),Zt(n)){const E=Object.keys(n)[0],C=n[E];j=m[E].getPixelForValue(C)+S-e}else n==="center"?j=(f.bottom+f.top)/2+S-e:j=kI(t,n,e);x=d-a}else{if(Zt(n)){const E=Object.keys(n)[0],C=n[E];w=m[E].getPixelForValue(C)-_+e}else n==="center"?w=(f.left+f.right)/2-_+e:w=kI(t,n,e);j=gr(s,l,r),p=n==="left"?-Fs:Fs}return{titleX:w,titleY:j,maxWidth:x,rotation:p}}class ff extends dl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=Na(e,Number.POSITIVE_INFINITY),n=Na(n,Number.NEGATIVE_INFINITY),s=Na(s,Number.POSITIVE_INFINITY),r=Na(r,Number.NEGATIVE_INFINITY),{min:Na(e,s),max:Na(n,r),minDefined:jr(e),maxDefined:jr(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:a}=this.getUserBounds(),l;if(r&&a)return{min:n,max:s};const d=this.getMatchingVisibleMetas();for(let u=0,f=d.length;u<f;++u)l=d[u].controller.getMinMax(this,e),r||(n=Math.min(n,l.min)),a||(s=Math.max(s,l.max));return n=a&&n>s?s:n,s=r&&n>s?n:s,{min:Na(n,Na(s,n)),max:Na(s,Na(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){zn(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:a,ticks:l}=this.options,d=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=zie(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=d<this.ticks.length;this._convertTicksToLabels(u?II(this.ticks,d):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=woe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){zn(this.options.afterUpdate,[this])}beforeSetDimensions(){zn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){zn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),zn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){zn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,a;for(s=0,r=e.length;s<r;s++)a=e[s],a.label=zn(n.callback,[a.value,s,e],this)}afterTickToLabelConversion(){zn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){zn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=RI(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,a=n.maxRotation;let l=r,d,u,f;if(!this._isVisible()||!n.display||r>=a||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const m=this._getLabelSizes(),p=m.widest.width,x=m.highest.height,w=yr(this.chart.width-p,0,this.maxWidth);d=e.offset?this.maxWidth/s:w/(s-1),p+6>d&&(d=w/(s-(e.offset?.5:1)),u=this.maxHeight-Sm(e.grid)-n.padding-DI(e.title,this.chart.options.font),f=Math.sqrt(p*p+x*x),l=fie(Math.min(Math.asin(yr((m.highest.height+6)/d,-1,1)),Math.asin(yr(u/f,-1,1))-Math.asin(yr(x/f,-1,1)))),l=Math.max(r,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){zn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){zn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:a}}=this,l=this._isVisible(),d=this.isHorizontal();if(l){const u=DI(r,n.options.font);if(d?(e.width=this.maxWidth,e.height=Sm(a)+u):(e.height=this.maxHeight,e.width=Sm(a)+u),s.display&&this.ticks.length){const{first:f,last:m,widest:p,highest:x}=this._getLabelSizes(),w=s.padding*2,j=Vo(this.labelRotation),S=Math.cos(j),_=Math.sin(j);if(d){const E=s.mirror?0:_*p.width+S*x.height;e.height=Math.min(this.maxHeight,e.height+E+w)}else{const E=s.mirror?0:S*p.width+_*x.height;e.width=Math.min(this.maxWidth,e.width+E+w)}this._calculatePadding(f,m,_,S)}}this._handleMargins(),d?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:a,padding:l},position:d}=this.options,u=this.labelRotation!==0,f=d!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,w=0;u?f?(x=r*e.width,w=s*n.height):(x=s*e.height,w=r*n.width):a==="start"?w=n.width:a==="end"?x=e.width:a!=="inner"&&(x=e.width/2,w=n.width/2),this.paddingLeft=Math.max((x-m+l)*this.width/(this.width-m),0),this.paddingRight=Math.max((w-p+l)*this.width/(this.width-p),0)}else{let m=n.height/2,p=e.height/2;a==="start"?(m=0,p=e.height):a==="end"&&(m=n.height,p=0),this.paddingTop=m+l,this.paddingBottom=p+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){zn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)vn(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=II(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:a}=this,l=[],d=[],u=Math.floor(n/RI(n,s));let f=0,m=0,p,x,w,j,S,_,E,C,I,M,V;for(p=0;p<n;p+=u){if(j=e[p].label,S=this._resolveTickFontOptions(p),r.font=_=S.string,E=a[_]=a[_]||{data:{},gc:[]},C=S.lineHeight,I=M=0,!vn(j)&&!Es(j))I=aI(r,E.data,E.gc,I,j),M=C;else if(Es(j))for(x=0,w=j.length;x<w;++x)V=j[x],!vn(V)&&!Es(V)&&(I=aI(r,E.data,E.gc,I,V),M+=C);l.push(I),d.push(M),f=Math.max(I,f),m=Math.max(M,m)}Aoe(a,n);const z=l.indexOf(f),D=d.indexOf(m),A=T=>({width:l[T]||0,height:d[T]||0});return{first:A(0),last:A(n-1),widest:A(z),highest:A(D),widths:l,heights:d}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return gie(this._alignToPixels?ud(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=Roe(this.getContext(),e,s))}return this.$context||(this.$context=koe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Vo(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),a=this._getLabelSizes(),l=e.autoSkipPadding||0,d=a?a.widest.width+l:0,u=a?a.highest.height+l:0;return this.isHorizontal()?u*s>d*r?d/s:u/r:u*r<d*s?u/s:d/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:a,position:l,border:d}=r,u=a.offset,f=this.isHorizontal(),p=this.ticks.length+(u?1:0),x=Sm(a),w=[],j=d.setContext(this.getContext()),S=j.display?j.width:0,_=S/2,E=function(q){return ud(s,q,S)};let C,I,M,V,z,D,A,T,R,P,O,F;if(l==="top")C=E(this.bottom),D=this.bottom-x,T=C-_,P=E(e.top)+_,F=e.bottom;else if(l==="bottom")C=E(this.top),P=e.top,F=E(e.bottom)-_,D=C+_,T=this.top+x;else if(l==="left")C=E(this.right),z=this.right-x,A=C-_,R=E(e.left)+_,O=e.right;else if(l==="right")C=E(this.left),R=e.left,O=E(e.right)-_,z=C+_,A=this.left+x;else if(n==="x"){if(l==="center")C=E((e.top+e.bottom)/2+.5);else if(Zt(l)){const q=Object.keys(l)[0],Y=l[q];C=E(this.chart.scales[q].getPixelForValue(Y))}P=e.top,F=e.bottom,D=C+_,T=D+x}else if(n==="y"){if(l==="center")C=E((e.left+e.right)/2);else if(Zt(l)){const q=Object.keys(l)[0],Y=l[q];C=E(this.chart.scales[q].getPixelForValue(Y))}z=C-_,A=z-x,R=e.left,O=e.right}const J=Ut(r.ticks.maxTicksLimit,p),Z=Math.max(1,Math.ceil(p/J));for(I=0;I<p;I+=Z){const q=this.getContext(I),Y=a.setContext(q),W=d.setContext(q),H=Y.lineWidth,B=Y.color,K=W.dash||[],ne=W.dashOffset,te=Y.tickWidth,fe=Y.tickColor,ke=Y.tickBorderDash||[],Ee=Y.tickBorderDashOffset;M=Toe(this,I,u),M!==void 0&&(V=ud(s,M,H),f?z=A=R=O=V:D=T=P=F=V,w.push({tx1:z,ty1:D,tx2:A,ty2:T,x1:R,y1:P,x2:O,y2:F,width:H,color:B,borderDash:K,borderDashOffset:ne,tickWidth:te,tickColor:fe,tickBorderDash:ke,tickBorderDashOffset:Ee}))}return this._ticksLength=p,this._borderValue=C,w}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:a}=s,l=this.isHorizontal(),d=this.ticks,{align:u,crossAlign:f,padding:m,mirror:p}=a,x=Sm(s.grid),w=x+m,j=p?-m:w,S=-Vo(this.labelRotation),_=[];let E,C,I,M,V,z,D,A,T,R,P,O,F="middle";if(r==="top")z=this.bottom-j,D=this._getXAxisLabelAlignment();else if(r==="bottom")z=this.top+j,D=this._getXAxisLabelAlignment();else if(r==="left"){const Z=this._getYAxisLabelAlignment(x);D=Z.textAlign,V=Z.x}else if(r==="right"){const Z=this._getYAxisLabelAlignment(x);D=Z.textAlign,V=Z.x}else if(n==="x"){if(r==="center")z=(e.top+e.bottom)/2+w;else if(Zt(r)){const Z=Object.keys(r)[0],q=r[Z];z=this.chart.scales[Z].getPixelForValue(q)+w}D=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")V=(e.left+e.right)/2-w;else if(Zt(r)){const Z=Object.keys(r)[0],q=r[Z];V=this.chart.scales[Z].getPixelForValue(q)}D=this._getYAxisLabelAlignment(x).textAlign}n==="y"&&(u==="start"?F="top":u==="end"&&(F="bottom"));const J=this._getLabelSizes();for(E=0,C=d.length;E<C;++E){I=d[E],M=I.label;const Z=a.setContext(this.getContext(E));A=this.getPixelForTick(E)+a.labelOffset,T=this._resolveTickFontOptions(E),R=T.lineHeight,P=Es(M)?M.length:1;const q=P/2,Y=Z.color,W=Z.textStrokeColor,H=Z.textStrokeWidth;let B=D;l?(V=A,D==="inner"&&(E===C-1?B=this.options.reverse?"left":"right":E===0?B=this.options.reverse?"right":"left":B="center"),r==="top"?f==="near"||S!==0?O=-P*R+R/2:f==="center"?O=-J.highest.height/2-q*R+R:O=-J.highest.height+R/2:f==="near"||S!==0?O=R/2:f==="center"?O=J.highest.height/2-q*R:O=J.highest.height-P*R,p&&(O*=-1),S!==0&&!Z.showLabelBackdrop&&(V+=R/2*Math.sin(S))):(z=A,O=(1-P)*R/2);let K;if(Z.showLabelBackdrop){const ne=Ui(Z.backdropPadding),te=J.heights[E],fe=J.widths[E];let ke=O-ne.top,Ee=0-ne.left;switch(F){case"middle":ke-=te/2;break;case"bottom":ke-=te;break}switch(D){case"center":Ee-=fe/2;break;case"right":Ee-=fe;break;case"inner":E===C-1?Ee-=fe:E>0&&(Ee-=fe/2);break}K={left:Ee,top:ke,width:fe+ne.width,height:te+ne.height,color:Z.backdropColor}}_.push({label:M,font:T,textOffset:O,options:{rotation:S,color:Y,strokeColor:W,strokeWidth:H,textAlign:B,textBaseline:F,translation:[V,z],backdrop:K}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Vo(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:a}}=this.options,l=this._getLabelSizes(),d=e+a,u=l.widest.width;let f,m;return n==="left"?r?(m=this.right+a,s==="near"?f="left":s==="center"?(f="center",m+=u/2):(f="right",m+=u)):(m=this.right-d,s==="near"?f="right":s==="center"?(f="center",m-=u/2):(f="left",m=this.left)):n==="right"?r?(m=this.left+a,s==="near"?f="right":s==="center"?(f="center",m-=u/2):(f="left",m-=u)):(m=this.left+d,s==="near"?f="left":s==="center"?(f="center",m+=u/2):(f="right",m=this.right)):f="right",{textAlign:f,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:a,height:l}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,a,l),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(a=>a.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,l;const d=(u,f,m)=>{!m.width||!m.color||(s.save(),s.lineWidth=m.width,s.strokeStyle=m.color,s.setLineDash(m.borderDash||[]),s.lineDashOffset=m.borderDashOffset,s.beginPath(),s.moveTo(u.x,u.y),s.lineTo(f.x,f.y),s.stroke(),s.restore())};if(n.display)for(a=0,l=r.length;a<l;++a){const u=r[a];n.drawOnChartArea&&d({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),n.drawTicks&&d({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,a=s.setContext(this.getContext()),l=s.display?a.width:0;if(!l)return;const d=r.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let f,m,p,x;this.isHorizontal()?(f=ud(e,this.left,l)-l/2,m=ud(e,this.right,d)+d/2,p=x=u):(p=ud(e,this.top,l)-l/2,x=ud(e,this.bottom,d)+d/2,f=m=u),n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.beginPath(),n.moveTo(f,p),n.lineTo(m,x),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&Yv(s,r);const a=this.getLabelItems(e);for(const l of a){const d=l.options,u=l.font,f=l.label,m=l.textOffset;Rg(s,f,0,m,u,d)}r&&Kv(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const a=vr(s.font),l=Ui(s.padding),d=s.align;let u=a.lineHeight/2;n==="bottom"||n==="center"||Zt(n)?(u+=l.bottom,Es(s.text)&&(u+=a.lineHeight*(s.text.length-1))):u+=l.top;const{titleX:f,titleY:m,maxWidth:p,rotation:x}=Doe(this,u,n,d);Rg(e,s.text,0,0,a,{color:s.color,maxWidth:p,rotation:x,textAlign:Ioe(d,n,r),textBaseline:"middle",translation:[f,m]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Ut(e.grid&&e.grid.z,-1),r=Ut(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ff.prototype.draw?[{z:n,draw:a=>{this.draw(a)}}]:[{z:s,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let a,l;for(a=0,l=n.length;a<l;++a){const d=n[a];d[s]===this.id&&(!e||d.type===e)&&r.push(d)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return vr(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ay{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;Ooe(n)&&(s=this.register(n));const r=this.items,a=e.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in r||(r[a]=e,Moe(e,l,s),this.override&&hs.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in hs[r]&&(delete hs[r][s],this.override&&delete Hd[s])}}function Moe(t,e,n){const s=Eg(Object.create(null),[n?hs.get(n):{},hs.get(e),t.defaults]);hs.set(e,s),t.defaultRoutes&&Poe(e,t.defaultRoutes),t.descriptors&&hs.describe(e,t.descriptors)}function Poe(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),a=[t].concat(s).join("."),l=e[n].split("."),d=l.pop(),u=l.join(".");hs.route(a,r,u,d)})}function Ooe(t){return"id"in t&&"defaults"in t}class Loe{constructor(){this.controllers=new ay(Td,"datasets",!0),this.elements=new ay(dl,"elements"),this.plugins=new ay(Object,"plugins"),this.scales=new ay(ff,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const a=s||this._getRegistryForType(r);s||a.isForType(r)||a===this.plugins&&r.id?this._exec(e,a,r):Cn(r,l=>{const d=s||this._getRegistryForType(l);this._exec(e,d,l)})})}_exec(e,n,s){const r=VS(e);zn(s["before"+r],[],s),n[e](s),zn(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var Ea=new Loe;class Voe{constructor(){this._init=[]}notify(e,n,s,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=r?this._descriptors(e).filter(r):this._descriptors(e),l=this._notify(a,e,n,s);return n==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,n,s,r){r=r||{};for(const a of e){const l=a.plugin,d=l[s],u=[n,r,a.options];if(zn(d,u,l)===!1&&r.cancelable)return!1}return!0}invalidate(){vn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=Ut(s.options&&s.options.plugins,{}),a=Uoe(s);return r===!1&&!n?[]:Boe(e,a,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(a,l)=>a.filter(d=>!l.some(u=>d.plugin.id===u.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function Uoe(t){const e={},n=[],s=Object.keys(Ea.plugins.items);for(let a=0;a<s.length;a++)n.push(Ea.getPlugin(s[a]));const r=t.plugins||[];for(let a=0;a<r.length;a++){const l=r[a];n.indexOf(l)===-1&&(n.push(l),e[l.id]=!0)}return{plugins:n,localIds:e}}function Foe(t,e){return!e&&t===!1?null:t===!0?{}:t}function Boe(t,{plugins:e,localIds:n},s,r){const a=[],l=t.getContext();for(const d of e){const u=d.id,f=Foe(s[u],r);f!==null&&a.push({plugin:d,options:zoe(t.config,{plugin:d,local:n[u]},f,l)})}return a}function zoe(t,{plugin:e,local:n},s,r){const a=t.pluginScopeKeys(e),l=t.getOptionScopes(s,a);return n&&e.defaults&&l.push(e.defaults),t.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function w1(t,e){const n=hs.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function $oe(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function qoe(t,e){return t===e?"_index_":"_value_"}function MI(t){if(t==="x"||t==="y"||t==="r")return t}function Hoe(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function _1(t,...e){if(MI(t))return t;for(const n of e){const s=n.axis||Hoe(n.position)||t.length>1&&MI(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function PI(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Woe(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return PI(t,"x",n[0])||PI(t,"y",n[0])}return{}}function Goe(t,e){const n=Hd[t.type]||{scales:{}},s=e.scales||{},r=w1(t.type,e),a=Object.create(null);return Object.keys(s).forEach(l=>{const d=s[l];if(!Zt(d))return console.error(`Invalid scale configuration for scale: ${l}`);if(d._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const u=_1(l,d,Woe(l,t),hs.scales[d.type]),f=qoe(u,r),m=n.scales||{};a[l]=eg(Object.create(null),[{axis:u},d,m[u],m[f]])}),t.data.datasets.forEach(l=>{const d=l.type||t.type,u=l.indexAxis||w1(d,e),m=(Hd[d]||{}).scales||{};Object.keys(m).forEach(p=>{const x=$oe(p,u),w=l[x+"AxisID"]||x;a[w]=a[w]||Object.create(null),eg(a[w],[{axis:x},s[w],m[p]])})}),Object.keys(a).forEach(l=>{const d=a[l];eg(d,[hs.scales[d.type],hs.scale])}),a}function cV(t){const e=t.options||(t.options={});e.plugins=Ut(e.plugins,{}),e.scales=Goe(t,e)}function dV(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Yoe(t){return t=t||{},t.data=dV(t.data),cV(t),t}const OI=new Map,uV=new Set;function oy(t,e){let n=OI.get(t);return n||(n=e(),OI.set(t,n),uV.add(n)),n}const Em=(t,e,n)=>{const s=qd(e,n);s!==void 0&&t.add(s)};class Koe{constructor(e){this._config=Yoe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=dV(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),cV(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return oy(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return oy(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return oy(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return oy(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:a}=this,l=this._cachedScopes(e,s),d=l.get(n);if(d)return d;const u=new Set;n.forEach(m=>{e&&(u.add(e),m.forEach(p=>Em(u,e,p))),m.forEach(p=>Em(u,r,p)),m.forEach(p=>Em(u,Hd[a]||{},p)),m.forEach(p=>Em(u,hs,p)),m.forEach(p=>Em(u,y1,p))});const f=Array.from(u);return f.length===0&&f.push(Object.create(null)),uV.has(n)&&l.set(n,f),f}chartOptionScopes(){const{options:e,type:n}=this;return[e,Hd[n]||{},hs.datasets[n]||{},{type:n},hs,y1]}resolveNamedOptions(e,n,s,r=[""]){const a={$shared:!0},{resolver:l,subPrefixes:d}=LI(this._resolverCache,e,r);let u=l;if(Qoe(l,n)){a.$shared=!1,s=jc(s)?s():s;const f=this.createResolver(e,s,d);u=qh(l,s,f)}for(const f of n)a[f]=u[f];return a}createResolver(e,n,s=[""],r){const{resolver:a}=LI(this._resolverCache,e,s);return Zt(n)?qh(a,n,void 0,r):a}}function LI(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let a=s.get(r);return a||(a={resolver:qS(e,n),subPrefixes:n.filter(d=>!d.toLowerCase().includes("hover"))},s.set(r,a)),a}const Xoe=t=>Zt(t)&&Object.getOwnPropertyNames(t).some(e=>jc(t[e]));function Qoe(t,e){const{isScriptable:n,isIndexable:s}=q6(t);for(const r of e){const a=n(r),l=s(r),d=(l||a)&&t[r];if(a&&(jc(d)||Xoe(d))||l&&Es(d))return!0}return!1}var Zoe="4.5.0";const Joe=["top","bottom","left","right","chartArea"];function VI(t,e){return t==="top"||t==="bottom"||Joe.indexOf(t)===-1&&e==="x"}function UI(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function FI(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),zn(n&&n.onComplete,[t],e)}function ele(t){const e=t.chart,n=e.options.animation;zn(n&&n.onProgress,[t],e)}function hV(t){return GS()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Dy={},BI=t=>{const e=hV(t);return Object.values(Dy).filter(n=>n.canvas===e).pop()};function tle(t,e,n){const s=Object.keys(t);for(const r of s){const a=+r;if(a>=e){const l=t[r];delete t[r],(n>0||a>e)&&(t[a+n]=l)}}}function nle(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}var Vl;let mf=(Vl=class{static register(...e){Ea.add(...e),zI()}static unregister(...e){Ea.remove(...e),zI()}constructor(e,n){const s=this.config=new Koe(n),r=hV(e),a=BI(r);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||boe(r)),this.platform.updateConfig(s);const d=this.platform.acquireContext(r,l.aspectRatio),u=d&&d.canvas,f=u&&u.height,m=u&&u.width;if(this.id=eie(),this.ctx=d,this.canvas=u,this.width=m,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Voe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=vie(p=>this.update(p),l.resizeDelay||0),this._dataChanges=[],Dy[this.id]=this,!d||!u){console.error("Failed to create chart: can't acquire context from the given item");return}ko.listen(this,"complete",FI),ko.listen(this,"progress",ele),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:a}=this;return vn(e)?n&&a?a:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ea}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():dI(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return oI(this.canvas,this.ctx),this}stop(){return ko.stop(this),this}resize(e,n){ko.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,a=s.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,e,n,a),d=s.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,dI(this,d,!0)&&(this.notifyPlugins("resize",{size:l}),zn(s.onResize,[this,l],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Cn(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((l,d)=>(l[d]=!1,l),{});let a=[];n&&(a=a.concat(Object.keys(n).map(l=>{const d=n[l],u=_1(l,d),f=u==="r",m=u==="x";return{options:d,dposition:f?"chartArea":m?"bottom":"left",dtype:f?"radialLinear":m?"category":"linear"}}))),Cn(a,l=>{const d=l.options,u=d.id,f=_1(u,d),m=Ut(d.type,l.dtype);(d.position===void 0||VI(d.position,f)!==VI(l.dposition))&&(d.position=l.dposition),r[u]=!0;let p=null;if(u in s&&s[u].type===m)p=s[u];else{const x=Ea.getScale(m);p=new x({id:u,type:m,ctx:this.ctx,chart:this}),s[p.id]=p}p.init(d,e)}),Cn(r,(l,d)=>{l||delete s[d]}),Cn(s,l=>{Di.configure(this,l,l.options),Di.addBox(this,l)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,a)=>r.index-a.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(UI("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(a=>a===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const a=n[s];let l=this.getDatasetMeta(s);const d=a.type||this.config.type;if(l.type&&l.type!==d&&(this._destroyDatasetMeta(s),l=this.getDatasetMeta(s)),l.type=d,l.indexAxis=a.indexAxis||w1(d,this.options),l.order=a.order||0,l.index=s,l.label=""+a.label,l.visible=this.isDatasetVisible(s),l.controller)l.controller.updateIndex(s),l.controller.linkScales();else{const u=Ea.getController(d),{datasetElementType:f,dataElementType:m}=hs.datasets[d];Object.assign(u,{dataElementType:Ea.getElement(m),datasetElementType:f&&Ea.getElement(f)}),l.controller=new u(this,s),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Cn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,m=this.data.datasets.length;f<m;f++){const{controller:p}=this.getDatasetMeta(f),x=!r&&a.indexOf(p)===-1;p.buildOrUpdateElements(x),l=Math.max(+p.getMaxOverflow(),l)}l=this._minPadding=s.layout.autoPadding?l:0,this._updateLayout(l),r||Cn(a,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(UI("z","_idx"));const{_active:d,_lastEvent:u}=this;u?this._eventHandler(u,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){Cn(this.scales,e=>{Di.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!QR(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:a}of n){const l=s==="_removeElements"?-a:a;tle(e,r,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=a=>new Set(e.filter(l=>l[0]===a).map((l,d)=>d+","+l.splice(1).join(","))),r=s(0);for(let a=1;a<n;a++)if(!QR(r,s(a)))return;return Array.from(r).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Di.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Cn(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,a)=>{r._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,jc(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ko.has(this)?this.attached&&!ko.running(this)&&ko.start(this):(this.draw(),FI({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,a;for(r=0,a=n.length;r<a;++r){const l=n[r];(!e||l.visible)&&s.push(l)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=eV(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&Yv(n,r),e.controller.draw(),r&&Kv(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return kg(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const a=Jae.modes[n];return typeof a=="function"?a(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(a=>a&&a._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=tu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",a=this.getDatasetMeta(e),l=a.controller._resolveAnimations(void 0,r);Cg(n)?(a.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),l.update(a,{visible:s}),this.update(d=>d.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ko.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),oI(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Dy[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(a,l)=>{n.addEventListener(this,a,l),e[a]=l},r=(a,l,d)=>{a.offsetX=l,a.offsetY=d,this._eventHandler(a)};Cn(this.options.events,a=>s(a,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(u,f)=>{n.addEventListener(this,u,f),e[u]=f},r=(u,f)=>{e[u]&&(n.removeEventListener(this,u,f),delete e[u])},a=(u,f)=>{this.canvas&&this.resize(u,f)};let l;const d=()=>{r("attach",d),this.attached=!0,this.resize(),s("resize",a),s("detach",l)};l=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),s("attach",d)},n.isAttached(this.canvas)?d():l()}unbindEvents(){Cn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Cn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let a,l,d,u;for(n==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),d=0,u=e.length;d<u;++d){l=e[d];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:a,index:l})=>{const d=this.getDatasetMeta(a);if(!d)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:d.data[l],index:l}});!k0(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,a=(u,f)=>u.filter(m=>!f.some(p=>m.datasetIndex===p.datasetIndex&&m.index===p.index)),l=a(n,e),d=s?e:a(e,n);l.length&&this.updateHoverStyle(l,r.mode,!1),d.length&&r.mode&&this.updateHoverStyle(d,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const a=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(a||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:a}=this,l=n,d=this._getActiveElements(e,r,s,l),u=aie(e),f=nle(e,this._lastEvent,s,u);s&&(this._lastEvent=null,zn(a.onHover,[e,d,this],this),u&&zn(a.onClick,[e,d,this],this));const m=!k0(d,r);return(m||n)&&(this._active=d,this._updateHoverStyles(d,r,n)),this._lastEvent=f,m}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,r)}},rt(Vl,"defaults",hs),rt(Vl,"instances",Dy),rt(Vl,"overrides",Hd),rt(Vl,"registry",Ea),rt(Vl,"version",Zoe),rt(Vl,"getChart",BI),Vl);function zI(){return Cn(mf.instances,t=>t._plugins.invalidate())}function sle(t,e,n){const{startAngle:s,x:r,y:a,outerRadius:l,innerRadius:d,options:u}=e,{borderWidth:f,borderJoinStyle:m}=u,p=Math.min(f/l,ai(s-n));if(t.beginPath(),t.arc(r,a,l-f/2,s+p/2,n-p/2),d>0){const x=Math.min(f/d,ai(s-n));t.arc(r,a,d+f/2,n-x/2,s+x/2,!0)}else{const x=Math.min(f/2,l*ai(s-n));if(m==="round")t.arc(r,a,x,n-An/2,s+An/2,!0);else if(m==="bevel"){const w=2*x*x,j=-w*Math.cos(n+An/2)+r,S=-w*Math.sin(n+An/2)+a,_=w*Math.cos(s+An/2)+r,E=w*Math.sin(s+An/2)+a;t.lineTo(j,S),t.lineTo(_,E)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function rle(t,e,n){const{startAngle:s,pixelMargin:r,x:a,y:l,outerRadius:d,innerRadius:u}=e;let f=r/d;t.beginPath(),t.arc(a,l,d,s-f,n+f),u>r?(f=r/u,t.arc(a,l,u,n+f,s-f,!0)):t.arc(a,l,r,n+Fs,s-Fs),t.closePath(),t.clip()}function ile(t){return $S(t,["outerStart","outerEnd","innerStart","innerEnd"])}function ale(t,e,n,s){const r=ile(t.options.borderRadius),a=(n-e)/2,l=Math.min(a,s*e/2),d=u=>{const f=(n-Math.min(a,u))*s/2;return yr(u,0,Math.min(a,f))};return{outerStart:d(r.outerStart),outerEnd:d(r.outerEnd),innerStart:yr(r.innerStart,0,l),innerEnd:yr(r.innerEnd,0,l)}}function Zu(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function O0(t,e,n,s,r,a){const{x:l,y:d,startAngle:u,pixelMargin:f,innerRadius:m}=e,p=Math.max(e.outerRadius+s+n-f,0),x=m>0?m+s+n+f:0;let w=0;const j=r-u;if(s){const Z=m>0?m-s:0,q=p>0?p-s:0,Y=(Z+q)/2,W=Y!==0?j*Y/(Y+s):j;w=(j-W)/2}const S=Math.max(.001,j*p-n/An)/p,_=(j-S)/2,E=u+_+w,C=r-_-w,{outerStart:I,outerEnd:M,innerStart:V,innerEnd:z}=ale(e,x,p,C-E),D=p-I,A=p-M,T=E+I/D,R=C-M/A,P=x+V,O=x+z,F=E+V/P,J=C-z/O;if(t.beginPath(),a){const Z=(T+R)/2;if(t.arc(l,d,p,T,Z),t.arc(l,d,p,Z,R),M>0){const H=Zu(A,R,l,d);t.arc(H.x,H.y,M,R,C+Fs)}const q=Zu(O,C,l,d);if(t.lineTo(q.x,q.y),z>0){const H=Zu(O,J,l,d);t.arc(H.x,H.y,z,C+Fs,J+Math.PI)}const Y=(C-z/x+(E+V/x))/2;if(t.arc(l,d,x,C-z/x,Y,!0),t.arc(l,d,x,Y,E+V/x,!0),V>0){const H=Zu(P,F,l,d);t.arc(H.x,H.y,V,F+Math.PI,E-Fs)}const W=Zu(D,E,l,d);if(t.lineTo(W.x,W.y),I>0){const H=Zu(D,T,l,d);t.arc(H.x,H.y,I,E-Fs,T)}}else{t.moveTo(l,d);const Z=Math.cos(T)*p+l,q=Math.sin(T)*p+d;t.lineTo(Z,q);const Y=Math.cos(R)*p+l,W=Math.sin(R)*p+d;t.lineTo(Y,W)}t.closePath()}function ole(t,e,n,s,r){const{fullCircles:a,startAngle:l,circumference:d}=e;let u=e.endAngle;if(a){O0(t,e,n,s,u,r);for(let f=0;f<a;++f)t.fill();isNaN(d)||(u=l+(d%es||es))}return O0(t,e,n,s,u,r),t.fill(),u}function lle(t,e,n,s,r){const{fullCircles:a,startAngle:l,circumference:d,options:u}=e,{borderWidth:f,borderJoinStyle:m,borderDash:p,borderDashOffset:x,borderRadius:w}=u,j=u.borderAlign==="inner";if(!f)return;t.setLineDash(p||[]),t.lineDashOffset=x,j?(t.lineWidth=f*2,t.lineJoin=m||"round"):(t.lineWidth=f,t.lineJoin=m||"bevel");let S=e.endAngle;if(a){O0(t,e,n,s,S,r);for(let _=0;_<a;++_)t.stroke();isNaN(d)||(S=l+(d%es||es))}j&&rle(t,e,S),u.selfJoin&&S-l>=An&&w===0&&m!=="miter"&&sle(t,e,S),a||(O0(t,e,n,s,S,r),t.stroke())}class dh extends dl{constructor(n){super();rt(this,"circumference");rt(this,"endAngle");rt(this,"fullCircles");rt(this,"innerRadius");rt(this,"outerRadius");rt(this,"pixelMargin");rt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,r){const a=this.getProps(["x","y"],r),{angle:l,distance:d}=O6(a,{x:n,y:s}),{startAngle:u,endAngle:f,innerRadius:m,outerRadius:p,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),w=(this.options.spacing+this.options.borderWidth)/2,j=Ut(x,f-u),S=Ag(l,u,f)&&u!==f,_=j>=es||S,E=Uo(d,m+w,p+w);return _&&E}getCenterPoint(n){const{x:s,y:r,startAngle:a,endAngle:l,innerRadius:d,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:f,spacing:m}=this.options,p=(a+l)/2,x=(d+u+m+f)/2;return{x:s+Math.cos(p)*x,y:r+Math.sin(p)*x}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:r}=this,a=(s.offset||0)/4,l=(s.spacing||0)/2,d=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>es?Math.floor(r/es):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const u=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(u)*a,Math.sin(u)*a);const f=1-Math.sin(Math.min(An,r||0)),m=a*f;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,ole(n,this,m,l,d),lle(n,this,m,l,d),n.restore()}}rt(dh,"id","arc"),rt(dh,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),rt(dh,"defaultRoutes",{backgroundColor:"backgroundColor"}),rt(dh,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function fV(t,e,n=e){t.lineCap=Ut(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Ut(n.borderDash,e.borderDash)),t.lineDashOffset=Ut(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Ut(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ut(n.borderWidth,e.borderWidth),t.strokeStyle=Ut(n.borderColor,e.borderColor)}function cle(t,e,n){t.lineTo(n.x,n.y)}function dle(t){return t.stepped?Die:t.tension||t.cubicInterpolationMode==="monotone"?Mie:cle}function mV(t,e,n={}){const s=t.length,{start:r=0,end:a=s-1}=n,{start:l,end:d}=e,u=Math.max(r,l),f=Math.min(a,d),m=r<l&&a<l||r>d&&a>d;return{count:s,start:u,loop:e.loop,ilen:f<u&&!m?s+f-u:f-u}}function ule(t,e,n,s){const{points:r,options:a}=e,{count:l,start:d,loop:u,ilen:f}=mV(r,n,s),m=dle(a);let{move:p=!0,reverse:x}=s||{},w,j,S;for(w=0;w<=f;++w)j=r[(d+(x?f-w:w))%l],!j.skip&&(p?(t.moveTo(j.x,j.y),p=!1):m(t,S,j,x,a.stepped),S=j);return u&&(j=r[(d+(x?f:0))%l],m(t,S,j,x,a.stepped)),!!u}function hle(t,e,n,s){const r=e.points,{count:a,start:l,ilen:d}=mV(r,n,s),{move:u=!0,reverse:f}=s||{};let m=0,p=0,x,w,j,S,_,E;const C=M=>(l+(f?d-M:M))%a,I=()=>{S!==_&&(t.lineTo(m,_),t.lineTo(m,S),t.lineTo(m,E))};for(u&&(w=r[C(0)],t.moveTo(w.x,w.y)),x=0;x<=d;++x){if(w=r[C(x)],w.skip)continue;const M=w.x,V=w.y,z=M|0;z===j?(V<S?S=V:V>_&&(_=V),m=(p*m+M)/++p):(I(),t.lineTo(M,V),j=z,p=0,S=_=V),E=V}I()}function j1(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?hle:ule}function fle(t){return t.stepped?hae:t.tension||t.cubicInterpolationMode==="monotone"?fae:yd}function mle(t,e,n,s){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,s)&&r.closePath()),fV(t,e.options),t.stroke(r)}function gle(t,e,n,s){const{segments:r,options:a}=e,l=j1(e);for(const d of r)fV(t,a,d.style),t.beginPath(),l(t,e,d,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const ple=typeof Path2D=="function";function xle(t,e,n,s){ple&&!e.options.segment?mle(t,e,n,s):gle(t,e,n,s)}class La extends dl{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;rae(this._points,s,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=vae(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,r=e[n],a=this.points,l=J6(this,{property:n,start:r,end:r});if(!l.length)return;const d=[],u=fle(s);let f,m;for(f=0,m=l.length;f<m;++f){const{start:p,end:x}=l[f],w=a[p],j=a[x];if(w===j){d.push(w);continue}const S=Math.abs((r-w[n])/(j[n]-w[n])),_=u(w,j,S,s.stepped);_[n]=e[n],d.push(_)}return d.length===1?d[0]:d}pathSegment(e,n,s){return j1(this)(e,this,n,s)}path(e,n,s){const r=this.segments,a=j1(this);let l=this._loop;n=n||0,s=s||this.points.length-n;for(const d of r)l&=a(e,this,d,{start:n,end:n+s-1});return!!l}draw(e,n,s,r){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),xle(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}rt(La,"id","line"),rt(La,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),rt(La,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),rt(La,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function $I(t,e,n,s){const r=t.options,{[n]:a}=t.getProps([n],s);return Math.abs(e-a)<r.radius+r.hitRadius}class Eh extends dl{constructor(n){super();rt(this,"parsed");rt(this,"skip");rt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const a=this.options,{x:l,y:d}=this.getProps(["x","y"],r);return Math.pow(n-l,2)+Math.pow(s-d,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(n,s){return $I(this,n,"x",s)}inYRange(n,s){return $I(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!kg(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,v1(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}rt(Eh,"id","point"),rt(Eh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),rt(Eh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function gV(t,e){const{x:n,y:s,base:r,width:a,height:l}=t.getProps(["x","y","base","width","height"],e);let d,u,f,m,p;return t.horizontal?(p=l/2,d=Math.min(n,r),u=Math.max(n,r),f=s-p,m=s+p):(p=a/2,d=n-p,u=n+p,f=Math.min(s,r),m=Math.max(s,r)),{left:d,top:f,right:u,bottom:m}}function ec(t,e,n,s){return t?0:yr(e,n,s)}function yle(t,e,n){const s=t.options.borderWidth,r=t.borderSkipped,a=$6(s);return{t:ec(r.top,a.top,0,n),r:ec(r.right,a.right,0,e),b:ec(r.bottom,a.bottom,0,n),l:ec(r.left,a.left,0,e)}}function vle(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,a=Nh(r),l=Math.min(e,n),d=t.borderSkipped,u=s||Zt(r);return{topLeft:ec(!u||d.top||d.left,a.topLeft,0,l),topRight:ec(!u||d.top||d.right,a.topRight,0,l),bottomLeft:ec(!u||d.bottom||d.left,a.bottomLeft,0,l),bottomRight:ec(!u||d.bottom||d.right,a.bottomRight,0,l)}}function ble(t){const e=gV(t),n=e.right-e.left,s=e.bottom-e.top,r=yle(t,n/2,s/2),a=vle(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:a},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}function X_(t,e,n,s){const r=e===null,a=n===null,d=t&&!(r&&a)&&gV(t,s);return d&&(r||Uo(e,d.left,d.right))&&(a||Uo(n,d.top,d.bottom))}function wle(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function _le(t,e){t.rect(e.x,e.y,e.w,e.h)}function Q_(t,e,n={}){const s=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,a=(t.x+t.w!==n.x+n.w?e:0)-s,l=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+s,y:t.y+r,w:t.w+a,h:t.h+l,radius:t.radius}}class Ch extends dl{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:a,outer:l}=ble(this),d=wle(l.radius)?D0:_le;e.save(),(l.w!==a.w||l.h!==a.h)&&(e.beginPath(),d(e,Q_(l,n,a)),e.clip(),d(e,Q_(a,-n,l)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),d(e,Q_(a,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,s){return X_(this,e,n,s)}inXRange(e,n){return X_(this,e,null,n)}inYRange(e,n){return X_(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:r,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(n+r)/2:n,y:a?s:(s+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}rt(Ch,"id","bar"),rt(Ch,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),rt(Ch,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function jle(t,e,n){const s=t.segments,r=t.points,a=e.points,l=[];for(const d of s){let{start:u,end:f}=d;f=Zv(u,f,r);const m=N1(n,r[u],r[f],d.loop);if(!e.segments){l.push({source:d,target:m,start:r[u],end:r[f]});continue}const p=J6(e,m);for(const x of p){const w=N1(n,a[x.start],a[x.end],x.loop),j=Z6(d,r,w);for(const S of j)l.push({source:S,target:x,start:{[n]:qI(m,w,"start",Math.max)},end:{[n]:qI(m,w,"end",Math.min)}})}}return l}function N1(t,e,n,s){if(s)return;let r=e[t],a=n[t];return t==="angle"&&(r=ai(r),a=ai(a)),{property:t,start:r,end:a}}function Nle(t,e){const{x:n=null,y:s=null}=t||{},r=e.points,a=[];return e.segments.forEach(({start:l,end:d})=>{d=Zv(l,d,r);const u=r[l],f=r[d];s!==null?(a.push({x:u.x,y:s}),a.push({x:f.x,y:s})):n!==null&&(a.push({x:n,y:u.y}),a.push({x:n,y:f.y}))}),a}function Zv(t,e,n){for(;e>t;e--){const s=n[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function qI(t,e,n,s){return t&&e?s(t[n],e[n]):t?t[n]:e?e[n]:0}function pV(t,e){let n=[],s=!1;return Es(t)?(s=!0,n=t):n=Nle(t,e),n.length?new La({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function HI(t){return t&&t.fill!==!1}function Sle(t,e,n){let r=t[e].fill;const a=[e];let l;if(!n)return r;for(;r!==!1&&a.indexOf(r)===-1;){if(!jr(r))return r;if(l=t[r],!l)return!1;if(l.visible)return r;a.push(r),r=l.fill}return!1}function Ele(t,e,n){const s=kle(t);if(Zt(s))return isNaN(s.value)?!1:s;let r=parseFloat(s);return jr(r)&&Math.floor(r)===r?Cle(s[0],e,r,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function Cle(t,e,n,s){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=s?!1:n}function Tle(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Zt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function Ale(t,e,n){let s;return t==="start"?s=n:t==="end"?s=e.options.reverse?e.min:e.max:Zt(t)?s=t.value:s=e.getBaseValue(),s}function kle(t){const e=t.options,n=e.fill;let s=Ut(n&&n.target,n);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function Rle(t){const{scale:e,index:n,line:s}=t,r=[],a=s.segments,l=s.points,d=Ile(e,n);d.push(pV({x:null,y:e.bottom},s));for(let u=0;u<a.length;u++){const f=a[u];for(let m=f.start;m<=f.end;m++)Dle(r,l[m],d)}return new La({points:r,options:{}})}function Ile(t,e){const n=[],s=t.getMatchingVisibleMetas("line");for(let r=0;r<s.length;r++){const a=s[r];if(a.index===e)break;a.hidden||n.unshift(a.dataset)}return n}function Dle(t,e,n){const s=[];for(let r=0;r<n.length;r++){const a=n[r],{first:l,last:d,point:u}=Mle(a,e,"x");if(!(!u||l&&d)){if(l)s.unshift(u);else if(t.push(u),!d)break}}t.push(...s)}function Mle(t,e,n){const s=t.interpolate(e,n);if(!s)return{};const r=s[n],a=t.segments,l=t.points;let d=!1,u=!1;for(let f=0;f<a.length;f++){const m=a[f],p=l[m.start][n],x=l[m.end][n];if(Uo(r,p,x)){d=r===p,u=r===x;break}}return{first:d,last:u,point:s}}class xV{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,s){const{x:r,y:a,radius:l}=this;return n=n||{start:0,end:es},e.arc(r,a,l,n.end,n.start,!0),!s.bounds}interpolate(e){const{x:n,y:s,radius:r}=this,a=e.angle;return{x:n+Math.cos(a)*r,y:s+Math.sin(a)*r,angle:a}}}function Ple(t){const{chart:e,fill:n,line:s}=t;if(jr(n))return Ole(e,n);if(n==="stack")return Rle(t);if(n==="shape")return!0;const r=Lle(t);return r instanceof xV?r:pV(r,s)}function Ole(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Lle(t){return(t.scale||{}).getPointPositionForValue?Ule(t):Vle(t)}function Vle(t){const{scale:e={},fill:n}=t,s=Tle(n,e);if(jr(s)){const r=e.isHorizontal();return{x:r?s:null,y:r?null:s}}return null}function Ule(t){const{scale:e,fill:n}=t,s=e.options,r=e.getLabels().length,a=s.reverse?e.max:e.min,l=Ale(n,e,a),d=[];if(s.grid.circular){const u=e.getPointPositionForValue(0,a);return new xV({x:u.x,y:u.y,radius:e.getDistanceFromCenterForValue(l)})}for(let u=0;u<r;++u)d.push(e.getPointPositionForValue(u,l));return d}function Z_(t,e,n){const s=Ple(e),{chart:r,index:a,line:l,scale:d,axis:u}=e,f=l.options,m=f.fill,p=f.backgroundColor,{above:x=p,below:w=p}=m||{},j=r.getDatasetMeta(a),S=eV(r,j);s&&l.points.length&&(Yv(t,n),Fle(t,{line:l,target:s,above:x,below:w,area:n,scale:d,axis:u,clip:S}),Kv(t))}function Fle(t,e){const{line:n,target:s,above:r,below:a,area:l,scale:d,clip:u}=e,f=n._loop?"angle":e.axis;t.save();let m=a;a!==r&&(f==="x"?(WI(t,s,l.top),J_(t,{line:n,target:s,color:r,scale:d,property:f,clip:u}),t.restore(),t.save(),WI(t,s,l.bottom)):f==="y"&&(GI(t,s,l.left),J_(t,{line:n,target:s,color:a,scale:d,property:f,clip:u}),t.restore(),t.save(),GI(t,s,l.right),m=r)),J_(t,{line:n,target:s,color:m,scale:d,property:f,clip:u}),t.restore()}function WI(t,e,n){const{segments:s,points:r}=e;let a=!0,l=!1;t.beginPath();for(const d of s){const{start:u,end:f}=d,m=r[u],p=r[Zv(u,f,r)];a?(t.moveTo(m.x,m.y),a=!1):(t.lineTo(m.x,n),t.lineTo(m.x,m.y)),l=!!e.pathSegment(t,d,{move:l}),l?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function GI(t,e,n){const{segments:s,points:r}=e;let a=!0,l=!1;t.beginPath();for(const d of s){const{start:u,end:f}=d,m=r[u],p=r[Zv(u,f,r)];a?(t.moveTo(m.x,m.y),a=!1):(t.lineTo(n,m.y),t.lineTo(m.x,m.y)),l=!!e.pathSegment(t,d,{move:l}),l?t.closePath():t.lineTo(n,p.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function J_(t,e){const{line:n,target:s,property:r,color:a,scale:l,clip:d}=e,u=jle(n,s,r);for(const{source:f,target:m,start:p,end:x}of u){const{style:{backgroundColor:w=a}={}}=f,j=s!==!0;t.save(),t.fillStyle=w,Ble(t,l,d,j&&N1(r,p,x)),t.beginPath();const S=!!n.pathSegment(t,f);let _;if(j){S?t.closePath():YI(t,s,x,r);const E=!!s.pathSegment(t,m,{move:S,reverse:!0});_=S&&E,_||YI(t,s,p,r)}t.closePath(),t.fill(_?"evenodd":"nonzero"),t.restore()}}function Ble(t,e,n,s){const r=e.chart.chartArea,{property:a,start:l,end:d}=s||{};if(a==="x"||a==="y"){let u,f,m,p;a==="x"?(u=l,f=r.top,m=d,p=r.bottom):(u=r.left,f=l,m=r.right,p=d),t.beginPath(),n&&(u=Math.max(u,n.left),m=Math.min(m,n.right),f=Math.max(f,n.top),p=Math.min(p,n.bottom)),t.rect(u,f,m-u,p-f),t.clip()}}function YI(t,e,n,s){const r=e.interpolate(n,s);r&&t.lineTo(r.x,r.y)}var yV={id:"filler",afterDatasetsUpdate(t,e,n){const s=(t.data.datasets||[]).length,r=[];let a,l,d,u;for(l=0;l<s;++l)a=t.getDatasetMeta(l),d=a.dataset,u=null,d&&d.options&&d instanceof La&&(u={visible:t.isDatasetVisible(l),index:l,fill:Ele(d,l,s),chart:t,axis:a.controller.options.indexAxis,scale:a.vScale,line:d}),a.$filler=u,r.push(u);for(l=0;l<s;++l)u=r[l],!(!u||u.fill===!1)&&(u.fill=Sle(r,l,n.propagate))},beforeDraw(t,e,n){const s=n.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),a=t.chartArea;for(let l=r.length-1;l>=0;--l){const d=r[l].$filler;d&&(d.line.updateControlPoints(a,d.axis),s&&d.fill&&Z_(t.ctx,d,a))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=t.getSortedVisibleDatasetMetas();for(let r=s.length-1;r>=0;--r){const a=s[r].$filler;HI(a)&&Z_(t.ctx,a,t.chartArea)}},beforeDatasetDraw(t,e,n){const s=e.meta.$filler;!HI(s)||n.drawTime!=="beforeDatasetDraw"||Z_(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const KI=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},zle=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class XI extends dl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=zn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=vr(s.font),a=r.size,l=this._computeTitleHeight(),{boxWidth:d,itemHeight:u}=KI(s,a);let f,m;n.font=r.string,this.isHorizontal()?(f=this.maxWidth,m=this._fitRows(l,a,d,u)+10):(m=this.maxHeight,f=this._fitCols(l,r,d,u)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(m,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:a,maxWidth:l,options:{labels:{padding:d}}}=this,u=this.legendHitBoxes=[],f=this.lineWidths=[0],m=r+d;let p=e;a.textAlign="left",a.textBaseline="middle";let x=-1,w=-m;return this.legendItems.forEach((j,S)=>{const _=s+n/2+a.measureText(j.text).width;(S===0||f[f.length-1]+_+2*d>l)&&(p+=m,f[f.length-(S>0?0:1)]=0,w+=m,x++),u[S]={left:0,top:w,row:x,width:_,height:r},f[f.length-1]+=_+d}),p}_fitCols(e,n,s,r){const{ctx:a,maxHeight:l,options:{labels:{padding:d}}}=this,u=this.legendHitBoxes=[],f=this.columnSizes=[],m=l-e;let p=d,x=0,w=0,j=0,S=0;return this.legendItems.forEach((_,E)=>{const{itemWidth:C,itemHeight:I}=$le(s,n,a,_,r);E>0&&w+I+2*d>m&&(p+=x+d,f.push({width:x,height:w}),j+=x+d,S++,x=w=0),u[E]={left:j,top:w,col:S,width:C,height:I},x=Math.max(x,C),w+=I+d}),p+=x,f.push({width:x,height:w}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:a}}=this,l=Sh(a,this.left,this.width);if(this.isHorizontal()){let d=0,u=gr(s,this.left+r,this.right-this.lineWidths[d]);for(const f of n)d!==f.row&&(d=f.row,u=gr(s,this.left+r,this.right-this.lineWidths[d])),f.top+=this.top+e+r,f.left=l.leftForLtr(l.x(u),f.width),u+=f.width+r}else{let d=0,u=gr(s,this.top+e+r,this.bottom-this.columnSizes[d].height);for(const f of n)f.col!==d&&(d=f.col,u=gr(s,this.top+e+r,this.bottom-this.columnSizes[d].height)),f.top=u,f.left+=this.left+r,f.left=l.leftForLtr(l.x(f.left),f.width),u+=f.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Yv(e,this),this._draw(),Kv(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:a,labels:l}=e,d=hs.color,u=Sh(e.rtl,this.left,this.width),f=vr(l.font),{padding:m}=l,p=f.size,x=p/2;let w;this.drawTitle(),r.textAlign=u.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=f.string;const{boxWidth:j,boxHeight:S,itemHeight:_}=KI(l,p),E=function(z,D,A){if(isNaN(j)||j<=0||isNaN(S)||S<0)return;r.save();const T=Ut(A.lineWidth,1);if(r.fillStyle=Ut(A.fillStyle,d),r.lineCap=Ut(A.lineCap,"butt"),r.lineDashOffset=Ut(A.lineDashOffset,0),r.lineJoin=Ut(A.lineJoin,"miter"),r.lineWidth=T,r.strokeStyle=Ut(A.strokeStyle,d),r.setLineDash(Ut(A.lineDash,[])),l.usePointStyle){const R={radius:S*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:T},P=u.xPlus(z,j/2),O=D+x;z6(r,R,P,O,l.pointStyleWidth&&j)}else{const R=D+Math.max((p-S)/2,0),P=u.leftForLtr(z,j),O=Nh(A.borderRadius);r.beginPath(),Object.values(O).some(F=>F!==0)?D0(r,{x:P,y:R,w:j,h:S,radius:O}):r.rect(P,R,j,S),r.fill(),T!==0&&r.stroke()}r.restore()},C=function(z,D,A){Rg(r,A.text,z,D+_/2,f,{strikethrough:A.hidden,textAlign:u.textAlign(A.textAlign)})},I=this.isHorizontal(),M=this._computeTitleHeight();I?w={x:gr(a,this.left+m,this.right-s[0]),y:this.top+m+M,line:0}:w={x:this.left+m,y:gr(a,this.top+M+m,this.bottom-n[0].height),line:0},K6(this.ctx,e.textDirection);const V=_+m;this.legendItems.forEach((z,D)=>{r.strokeStyle=z.fontColor,r.fillStyle=z.fontColor;const A=r.measureText(z.text).width,T=u.textAlign(z.textAlign||(z.textAlign=l.textAlign)),R=j+x+A;let P=w.x,O=w.y;u.setWidth(this.width),I?D>0&&P+R+m>this.right&&(O=w.y+=V,w.line++,P=w.x=gr(a,this.left+m,this.right-s[w.line])):D>0&&O+V>this.bottom&&(P=w.x=P+n[w.line].width+m,w.line++,O=w.y=gr(a,this.top+M+m,this.bottom-n[w.line].height));const F=u.x(P);if(E(F,O,z),P=bie(T,P+j+x,I?P+R:this.right,e.rtl),C(u.x(P),O,z),I)w.x+=R+m;else if(typeof z.text!="string"){const J=f.lineHeight;w.y+=vV(z,J)+m}else w.y+=V}),X6(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=vr(n.font),r=Ui(n.padding);if(!n.display)return;const a=Sh(e.rtl,this.left,this.width),l=this.ctx,d=n.position,u=s.size/2,f=r.top+u;let m,p=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),m=this.top+f,p=gr(e.align,p,this.right-x);else{const j=this.columnSizes.reduce((S,_)=>Math.max(S,_.height),0);m=f+gr(e.align,this.top,this.bottom-j-e.labels.padding-this._computeTitleHeight())}const w=gr(d,p,p+x);l.textAlign=a.textAlign(FS(d)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=s.string,Rg(l,n.text,w,m,s)}_computeTitleHeight(){const e=this.options.title,n=vr(e.font),s=Ui(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,a;if(Uo(e,this.left,this.right)&&Uo(n,this.top,this.bottom)){for(a=this.legendHitBoxes,s=0;s<a.length;++s)if(r=a[s],Uo(e,r.left,r.left+r.width)&&Uo(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!Wle(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,a=zle(r,s);r&&!a&&zn(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!a&&zn(n.onHover,[e,s,this],this)}else s&&zn(n.onClick,[e,s,this],this)}}function $le(t,e,n,s,r){const a=qle(s,t,e,n),l=Hle(r,s,e.lineHeight);return{itemWidth:a,itemHeight:l}}function qle(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((a,l)=>a.length>l.length?a:l)),e+n.size/2+s.measureText(r).width}function Hle(t,e,n){let s=t;return typeof e.text!="string"&&(s=vV(e,n)),s}function vV(t,e){const n=t.text?t.text.length:0;return e*n}function Wle(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var XS={id:"legend",_element:XI,start(t,e,n){const s=t.legend=new XI({ctx:t.ctx,options:n,chart:t});Di.configure(t,s,n),Di.addBox(t,s)},stop(t){Di.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Di.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:a,useBorderRadius:l,borderRadius:d}}=t.legend.options;return t._getSortedDatasetMetas().map(u=>{const f=u.controller.getStyle(n?0:void 0),m=Ui(f.borderWidth);return{text:e[u.index].label,fillStyle:f.backgroundColor,fontColor:a,hidden:!u.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:f.borderColor,pointStyle:s||f.pointStyle,rotation:f.rotation,textAlign:r||f.textAlign,borderRadius:l&&(d||f.borderRadius),datasetIndex:u.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class bV extends dl{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Es(s.text)?s.text.length:1;this._padding=Ui(s.padding);const a=r*vr(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:r,right:a,options:l}=this,d=l.align;let u=0,f,m,p;return this.isHorizontal()?(m=gr(d,s,a),p=n+e,f=a-s):(l.position==="left"?(m=s+e,p=gr(d,r,n),u=An*-.5):(m=a-e,p=gr(d,n,r),u=An*.5),f=r-n),{titleX:m,titleY:p,maxWidth:f,rotation:u}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=vr(n.font),a=s.lineHeight/2+this._padding.top,{titleX:l,titleY:d,maxWidth:u,rotation:f}=this._drawArgs(a);Rg(e,n.text,0,0,s,{color:n.color,maxWidth:u,rotation:f,textAlign:FS(n.align),textBaseline:"middle",translation:[l,d]})}}function Gle(t,e){const n=new bV({ctx:t.ctx,options:e,chart:t});Di.configure(t,n,e),Di.addBox(t,n),t.titleBlock=n}var QS={id:"title",_element:bV,start(t,e,n){Gle(t,n)},stop(t){const e=t.titleBlock;Di.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;Di.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Bm={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,a=0;for(e=0,n=t.length;e<n;++e){const d=t[e].element;if(d&&d.hasValue()){const u=d.tooltipPosition();s.add(u.x),r+=u.y,++a}}return a===0||s.size===0?!1:{x:[...s].reduce((d,u)=>d+u)/s.size,y:r/a}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,a,l,d;for(a=0,l=t.length;a<l;++a){const u=t[a].element;if(u&&u.hasValue()){const f=u.getCenterPoint(),m=x1(e,f);m<r&&(r=m,d=u)}}if(d){const u=d.tooltipPosition();n=u.x,s=u.y}return{x:n,y:s}}};function Sa(t,e){return e&&(Es(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ro(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Yle(t,e){const{element:n,datasetIndex:s,index:r}=e,a=t.getDatasetMeta(s).controller,{label:l,value:d}=a.getLabelAndValue(r);return{chart:t,label:l,parsed:a.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:d,dataset:a.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function QI(t,e){const n=t.chart.ctx,{body:s,footer:r,title:a}=t,{boxWidth:l,boxHeight:d}=e,u=vr(e.bodyFont),f=vr(e.titleFont),m=vr(e.footerFont),p=a.length,x=r.length,w=s.length,j=Ui(e.padding);let S=j.height,_=0,E=s.reduce((M,V)=>M+V.before.length+V.lines.length+V.after.length,0);if(E+=t.beforeBody.length+t.afterBody.length,p&&(S+=p*f.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),E){const M=e.displayColors?Math.max(d,u.lineHeight):u.lineHeight;S+=w*M+(E-w)*u.lineHeight+(E-1)*e.bodySpacing}x&&(S+=e.footerMarginTop+x*m.lineHeight+(x-1)*e.footerSpacing);let C=0;const I=function(M){_=Math.max(_,n.measureText(M).width+C)};return n.save(),n.font=f.string,Cn(t.title,I),n.font=u.string,Cn(t.beforeBody.concat(t.afterBody),I),C=e.displayColors?l+2+e.boxPadding:0,Cn(s,M=>{Cn(M.before,I),Cn(M.lines,I),Cn(M.after,I)}),C=0,n.font=m.string,Cn(t.footer,I),n.restore(),_+=j.width,{width:_,height:S}}function Kle(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function Xle(t,e,n,s){const{x:r,width:a}=s,l=n.caretSize+n.caretPadding;if(t==="left"&&r+a+l>e.width||t==="right"&&r-a-l<0)return!0}function Qle(t,e,n,s){const{x:r,width:a}=n,{width:l,chartArea:{left:d,right:u}}=t;let f="center";return s==="center"?f=r<=(d+u)/2?"left":"right":r<=a/2?f="left":r>=l-a/2&&(f="right"),Xle(f,t,e,n)&&(f="center"),f}function ZI(t,e,n){const s=n.yAlign||e.yAlign||Kle(t,n);return{xAlign:n.xAlign||e.xAlign||Qle(t,e,n,s),yAlign:s}}function Zle(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function Jle(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function JI(t,e,n,s){const{caretSize:r,caretPadding:a,cornerRadius:l}=t,{xAlign:d,yAlign:u}=n,f=r+a,{topLeft:m,topRight:p,bottomLeft:x,bottomRight:w}=Nh(l);let j=Zle(e,d);const S=Jle(e,u,f);return u==="center"?d==="left"?j+=f:d==="right"&&(j-=f):d==="left"?j-=Math.max(m,x)+r:d==="right"&&(j+=Math.max(p,w)+r),{x:yr(j,0,s.width-e.width),y:yr(S,0,s.height-e.height)}}function ly(t,e,n){const s=Ui(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function e4(t){return Sa([],Ro(t))}function ece(t,e,n){return tu(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function t4(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const wV={beforeTitle:To,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:To,beforeBody:To,beforeLabel:To,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return vn(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:To,afterBody:To,beforeFooter:To,footer:To,afterFooter:To};function Pr(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?wV[e].call(n,s):r}class S1 extends dl{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,a=new tV(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=ece(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=Pr(s,"beforeTitle",this,e),a=Pr(s,"title",this,e),l=Pr(s,"afterTitle",this,e);let d=[];return d=Sa(d,Ro(r)),d=Sa(d,Ro(a)),d=Sa(d,Ro(l)),d}getBeforeBody(e,n){return e4(Pr(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return Cn(e,a=>{const l={before:[],lines:[],after:[]},d=t4(s,a);Sa(l.before,Ro(Pr(d,"beforeLabel",this,a))),Sa(l.lines,Pr(d,"label",this,a)),Sa(l.after,Ro(Pr(d,"afterLabel",this,a))),r.push(l)}),r}getAfterBody(e,n){return e4(Pr(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=Pr(s,"beforeFooter",this,e),a=Pr(s,"footer",this,e),l=Pr(s,"afterFooter",this,e);let d=[];return d=Sa(d,Ro(r)),d=Sa(d,Ro(a)),d=Sa(d,Ro(l)),d}_createItems(e){const n=this._active,s=this.chart.data,r=[],a=[],l=[];let d=[],u,f;for(u=0,f=n.length;u<f;++u)d.push(Yle(this.chart,n[u]));return e.filter&&(d=d.filter((m,p,x)=>e.filter(m,p,x,s))),e.itemSort&&(d=d.sort((m,p)=>e.itemSort(m,p,s))),Cn(d,m=>{const p=t4(e.callbacks,m);r.push(Pr(p,"labelColor",this,m)),a.push(Pr(p,"labelPointStyle",this,m)),l.push(Pr(p,"labelTextColor",this,m))}),this.labelColors=r,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=d,d}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let a,l=[];if(!r.length)this.opacity!==0&&(a={opacity:0});else{const d=Bm[s.position].call(this,r,this._eventPosition);l=this._createItems(s),this.title=this.getTitle(l,s),this.beforeBody=this.getBeforeBody(l,s),this.body=this.getBody(l,s),this.afterBody=this.getAfterBody(l,s),this.footer=this.getFooter(l,s);const u=this._size=QI(this,s),f=Object.assign({},d,u),m=ZI(this.chart,s,f),p=JI(s,f,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,a={opacity:1,x:p.x,y:p.y,width:u.width,height:u.height,caretX:d.x,caretY:d.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const a=this.getCaretPosition(e,s,r);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:a}=this,{caretSize:l,cornerRadius:d}=s,{topLeft:u,topRight:f,bottomLeft:m,bottomRight:p}=Nh(d),{x,y:w}=e,{width:j,height:S}=n;let _,E,C,I,M,V;return a==="center"?(M=w+S/2,r==="left"?(_=x,E=_-l,I=M+l,V=M-l):(_=x+j,E=_+l,I=M-l,V=M+l),C=_):(r==="left"?E=x+Math.max(u,m)+l:r==="right"?E=x+j-Math.max(f,p)-l:E=this.caretX,a==="top"?(I=w,M=I-l,_=E-l,C=E+l):(I=w+S,M=I+l,_=E+l,C=E-l),V=I),{x1:_,x2:E,x3:C,y1:I,y2:M,y3:V}}drawTitle(e,n,s){const r=this.title,a=r.length;let l,d,u;if(a){const f=Sh(s.rtl,this.x,this.width);for(e.x=ly(this,s.titleAlign,s),n.textAlign=f.textAlign(s.titleAlign),n.textBaseline="middle",l=vr(s.titleFont),d=s.titleSpacing,n.fillStyle=s.titleColor,n.font=l.string,u=0;u<a;++u)n.fillText(r[u],f.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+d,u+1===a&&(e.y+=s.titleMarginBottom-d)}}_drawColorBox(e,n,s,r,a){const l=this.labelColors[s],d=this.labelPointStyles[s],{boxHeight:u,boxWidth:f}=a,m=vr(a.bodyFont),p=ly(this,"left",a),x=r.x(p),w=u<m.lineHeight?(m.lineHeight-u)/2:0,j=n.y+w;if(a.usePointStyle){const S={radius:Math.min(f,u)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},_=r.leftForLtr(x,f)+f/2,E=j+u/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,v1(e,S,_,E),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,v1(e,S,_,E)}else{e.lineWidth=Zt(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const S=r.leftForLtr(x,f),_=r.leftForLtr(r.xPlus(x,1),f-2),E=Nh(l.borderRadius);Object.values(E).some(C=>C!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,D0(e,{x:S,y:j,w:f,h:u,radius:E}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),D0(e,{x:_,y:j+1,w:f-2,h:u-2,radius:E}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(S,j,f,u),e.strokeRect(S,j,f,u),e.fillStyle=l.backgroundColor,e.fillRect(_,j+1,f-2,u-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:a,bodyAlign:l,displayColors:d,boxHeight:u,boxWidth:f,boxPadding:m}=s,p=vr(s.bodyFont);let x=p.lineHeight,w=0;const j=Sh(s.rtl,this.x,this.width),S=function(A){n.fillText(A,j.x(e.x+w),e.y+x/2),e.y+=x+a},_=j.textAlign(l);let E,C,I,M,V,z,D;for(n.textAlign=l,n.textBaseline="middle",n.font=p.string,e.x=ly(this,_,s),n.fillStyle=s.bodyColor,Cn(this.beforeBody,S),w=d&&_!=="right"?l==="center"?f/2+m:f+2+m:0,M=0,z=r.length;M<z;++M){for(E=r[M],C=this.labelTextColors[M],n.fillStyle=C,Cn(E.before,S),I=E.lines,d&&I.length&&(this._drawColorBox(n,e,M,j,s),x=Math.max(p.lineHeight,u)),V=0,D=I.length;V<D;++V)S(I[V]),x=p.lineHeight;Cn(E.after,S)}w=0,x=p.lineHeight,Cn(this.afterBody,S),e.y-=a}drawFooter(e,n,s){const r=this.footer,a=r.length;let l,d;if(a){const u=Sh(s.rtl,this.x,this.width);for(e.x=ly(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=u.textAlign(s.footerAlign),n.textBaseline="middle",l=vr(s.footerFont),n.fillStyle=s.footerColor,n.font=l.string,d=0;d<a;++d)n.fillText(r[d],u.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:a,yAlign:l}=this,{x:d,y:u}=e,{width:f,height:m}=s,{topLeft:p,topRight:x,bottomLeft:w,bottomRight:j}=Nh(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(d+p,u),l==="top"&&this.drawCaret(e,n,s,r),n.lineTo(d+f-x,u),n.quadraticCurveTo(d+f,u,d+f,u+x),l==="center"&&a==="right"&&this.drawCaret(e,n,s,r),n.lineTo(d+f,u+m-j),n.quadraticCurveTo(d+f,u+m,d+f-j,u+m),l==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(d+w,u+m),n.quadraticCurveTo(d,u+m,d,u+m-w),l==="center"&&a==="left"&&this.drawCaret(e,n,s,r),n.lineTo(d,u+p),n.quadraticCurveTo(d,u,d+p,u),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,a=s&&s.y;if(r||a){const l=Bm[e.position].call(this,this._active,this._eventPosition);if(!l)return;const d=this._size=QI(this,e),u=Object.assign({},l,this._size),f=ZI(n,e,u),m=JI(e,u,f,n);(r._to!==m.x||a._to!==m.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=d.width,this.height=d.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},a={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const l=Ui(n.padding),d=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&d&&(e.save(),e.globalAlpha=s,this.drawBackground(a,e,r,n),K6(e,n.textDirection),a.y+=l.top,this.drawTitle(a,e,n),this.drawBody(a,e,n),this.drawFooter(a,e,n),X6(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:d,index:u})=>{const f=this.chart.getDatasetMeta(d);if(!f)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:f.data[u],index:u}}),a=!k0(s,r),l=this._positionChanged(r,n);(a||l)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,a=this._active||[],l=this._getActiveElements(e,a,n,s),d=this._positionChanged(l,e),u=n||!k0(l,a)||d;return u&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),u}_getActiveElements(e,n,s,r){const a=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(d=>this.chart.data.datasets[d.datasetIndex]&&this.chart.getDatasetMeta(d.datasetIndex).controller.getParsed(d.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,a.mode,a,s);return a.reverse&&l.reverse(),l}_positionChanged(e,n){const{caretX:s,caretY:r,options:a}=this,l=Bm[a.position].call(this,e,n);return l!==!1&&(s!==l.x||r!==l.y)}}rt(S1,"positioners",Bm);var ZS={id:"tooltip",_element:S1,positioners:Bm,afterInit(t,e,n){n&&(t.tooltip=new S1({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:wV},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const tce=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function nce(t,e,n,s){const r=t.indexOf(e);if(r===-1)return tce(t,e,n,s);const a=t.lastIndexOf(e);return r!==a?n:r}const sce=(t,e)=>t===null?null:yr(Math.round(t),0,e);function n4(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Dg extends ff{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:a}of n)s[r]===a&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(vn(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:nce(s,e,Ut(n,e),this._addedLabels),sce(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let a=this.getLabels();a=e===0&&n===a.length-1?a:a.slice(e,n+1),this._valueRange=Math.max(a.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let l=e;l<=n;l++)r.push({value:l});return r}getLabelForValue(e){return n4.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}rt(Dg,"id","category"),rt(Dg,"defaults",{ticks:{callback:n4}});function rce(t,e){const n=[],{bounds:r,step:a,min:l,max:d,precision:u,count:f,maxTicks:m,maxDigits:p,includeBounds:x}=t,w=a||1,j=m-1,{min:S,max:_}=e,E=!vn(l),C=!vn(d),I=!vn(f),M=(_-S)/(p+1);let V=JR((_-S)/j/w)*w,z,D,A,T;if(V<1e-14&&!E&&!C)return[{value:S},{value:_}];T=Math.ceil(_/V)-Math.floor(S/V),T>j&&(V=JR(T*V/j/w)*w),vn(u)||(z=Math.pow(10,u),V=Math.ceil(V*z)/z),r==="ticks"?(D=Math.floor(S/V)*V,A=Math.ceil(_/V)*V):(D=S,A=_),E&&C&&a&&uie((d-l)/a,V/1e3)?(T=Math.round(Math.min((d-l)/V,m)),V=(d-l)/T,D=l,A=d):I?(D=E?l:D,A=C?d:A,T=f-1,V=(A-D)/T):(T=(A-D)/V,tg(T,Math.round(T),V/1e3)?T=Math.round(T):T=Math.ceil(T));const R=Math.max(eI(V),eI(D));z=Math.pow(10,vn(u)?R:u),D=Math.round(D*z)/z,A=Math.round(A*z)/z;let P=0;for(E&&(x&&D!==l?(n.push({value:l}),D<l&&P++,tg(Math.round((D+P*V)*z)/z,l,s4(l,M,t))&&P++):D<l&&P++);P<T;++P){const O=Math.round((D+P*V)*z)/z;if(C&&O>d)break;n.push({value:O})}return C&&x&&A!==d?n.length&&tg(n[n.length-1].value,d,s4(d,M,t))?n[n.length-1].value=d:n.push({value:d}):(!C||A===d)&&n.push({value:A}),n}function s4(t,e,{horizontal:n,minRotation:s}){const r=Vo(s),a=(n?Math.sin(r):Math.cos(r))||.001,l=.75*e*(""+t).length;return Math.min(e/a,l)}class ice extends ff{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return vn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:a}=this;const l=u=>r=n?r:u,d=u=>a=s?a:u;if(e){const u=Ya(r),f=Ya(a);u<0&&f<0?d(0):u>0&&f>0&&l(0)}if(r===a){let u=a===0?1:Math.abs(a*.05);d(a+u),e||l(r-u)}this.min=r,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},a=this._range||this,l=rce(r,a);return e.bounds==="ticks"&&hie(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return zS(e,this.chart.options.locale,this.options.ticks.format)}}class Mg extends ice{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=jr(e)?e:0,this.max=jr(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Vo(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,a.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}rt(Mg,"id","linear"),rt(Mg,"defaults",{ticks:{callback:B6.formatters.numeric}});const Jv={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},$r=Object.keys(Jv);function r4(t,e){return t-e}function i4(t,e){if(vn(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:a}=t._parseOpts;let l=e;return typeof s=="function"&&(l=s(l)),jr(l)||(l=typeof s=="string"?n.parse(l,s):n.parse(l)),l===null?null:(r&&(l=r==="week"&&(Tg(a)||a===!0)?n.startOf(l,"isoWeek",a):n.startOf(l,r)),+l)}function a4(t,e,n,s){const r=$r.length;for(let a=$r.indexOf(t);a<r-1;++a){const l=Jv[$r[a]],d=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-e)/(d*l.size))<=s)return $r[a]}return $r[r-1]}function ace(t,e,n,s,r){for(let a=$r.length-1;a>=$r.indexOf(n);a--){const l=$r[a];if(Jv[l].common&&t._adapter.diff(r,s,l)>=e-1)return l}return $r[n?$r.indexOf(n):0]}function oce(t){for(let e=$r.indexOf(t)+1,n=$r.length;e<n;++e)if(Jv[$r[e]].common)return $r[e]}function o4(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=US(n,e),a=n[s]>=e?n[s]:n[r];t[a]=!0}}function lce(t,e,n,s){const r=t._adapter,a=+r.startOf(e[0].value,s),l=e[e.length-1].value;let d,u;for(d=a;d<=l;d=+r.add(d,1,s))u=n[d],u>=0&&(e[u].major=!0);return e}function l4(t,e,n){const s=[],r={},a=e.length;let l,d;for(l=0;l<a;++l)d=e[l],r[d]=l,s.push({value:d,major:!1});return a===0||!n?s:lce(t,s,r,n)}class L0 extends ff{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new Yae._date(e.adapters.date);r.init(n),eg(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:i4(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:a,minDefined:l,maxDefined:d}=this.getUserBounds();function u(f){!l&&!isNaN(f.min)&&(r=Math.min(r,f.min)),!d&&!isNaN(f.max)&&(a=Math.max(a,f.max))}(!l||!d)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),r=jr(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),a=jr(a)&&!isNaN(a)?a:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,a-1),this.max=Math.max(r+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const a=this.min,l=this.max,d=xie(r,a,l);return this._unit=n.unit||(s.autoSkip?a4(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):ace(this,d.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:oce(this._unit),this.initOffsets(r),e.reverse&&d.reverse(),l4(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,a;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?s=a:s=(a-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;n=yr(n,0,l),s=yr(s,0,l),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,a=r.time,l=a.unit||a4(a.minUnit,n,s,this._getLabelCapacity(n)),d=Ut(r.ticks.stepSize,1),u=l==="week"?a.isoWeekday:!1,f=Tg(u)||u===!0,m={};let p=n,x,w;if(f&&(p=+e.startOf(p,"isoWeek",u)),p=+e.startOf(p,f?"day":l),e.diff(s,n,l)>1e5*d)throw new Error(n+" and "+s+" are too far apart with stepSize of "+d+" "+l);const j=r.ticks.source==="data"&&this.getDataTimestamps();for(x=p,w=0;x<s;x=+e.add(x,d,l),w++)o4(m,x,j);return(x===s||r.bounds==="ticks"||w===1)&&o4(m,x,j),Object.keys(m).sort(r4).map(S=>+S)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,a=this._unit,l=n||r[a];return this._adapter.format(e,l)}_tickFormatFunction(e,n,s,r){const a=this.options,l=a.ticks.callback;if(l)return zn(l,[e,n,s],this);const d=a.time.displayFormats,u=this._unit,f=this._majorUnit,m=u&&d[u],p=f&&d[f],x=s[n],w=f&&p&&x&&x.major;return this._adapter.format(e,r||(w?p:m))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=Vo(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(r),l=Math.sin(r),d=this._resolveTickFontOptions(0).size;return{w:s*a+d*l,h:s*l+d*a}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,a=this._tickFormatFunction(e,0,l4(this,[e],this._majorUnit),r),l=this._getLabelSize(a),d=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return d>0?d:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(i4(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return V6(e.sort(r4))}}rt(L0,"id","time"),rt(L0,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function cy(t,e,n){let s=0,r=t.length-1,a,l,d,u;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=Nd(t,"pos",e)),{pos:a,time:d}=t[s],{pos:l,time:u}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=Nd(t,"time",e)),{time:a,pos:d}=t[s],{time:l,pos:u}=t[r]);const f=l-a;return f?d+(u-d)*(e-a)/f:d}class c4 extends L0{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=cy(n,this.min),this._tableRange=cy(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],a=[];let l,d,u,f,m;for(l=0,d=e.length;l<d;++l)f=e[l],f>=n&&f<=s&&r.push(f);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(l=0,d=r.length;l<d;++l)m=r[l+1],u=r[l-1],f=r[l],Math.round((m+u)/2)!==f&&a.push({time:f,pos:l/(d-1)});return a}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,a)=>r-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(cy(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return cy(this._table,s*this._tableRange+this._minPos,!0)}}rt(c4,"id","timeseries"),rt(c4,"defaults",L0.defaults);const _V="label";function d4(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function cce(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function jV(t,e){t.labels=e}function NV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_V;const s=[];t.datasets=e.map(r=>{const a=t.datasets.find(l=>l[n]===r[n]);return!a||!r.data||s.includes(a)?{...r}:(s.push(a),Object.assign(a,r),a)})}function dce(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_V;const n={labels:[],datasets:[]};return jV(n,t.labels),NV(n,t.datasets,e),n}function uce(t,e){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:a,type:l,data:d,options:u,plugins:f=[],fallbackContent:m,updateMode:p,...x}=t,w=b.useRef(null),j=b.useRef(null),S=()=>{w.current&&(j.current=new mf(w.current,{type:l,data:dce(d,a),options:u&&{...u},plugins:f}),d4(e,j.current))},_=()=>{d4(e,null),j.current&&(j.current.destroy(),j.current=null)};return b.useEffect(()=>{!r&&j.current&&u&&cce(j.current,u)},[r,u]),b.useEffect(()=>{!r&&j.current&&jV(j.current.config.data,d.labels)},[r,d.labels]),b.useEffect(()=>{!r&&j.current&&d.datasets&&NV(j.current.config.data,d.datasets,a)},[r,d.datasets]),b.useEffect(()=>{j.current&&(r?(_(),setTimeout(S)):j.current.update(p))},[r,u,d.labels,d.datasets,p]),b.useEffect(()=>{j.current&&(_(),setTimeout(S))},[l]),b.useEffect(()=>(S(),()=>_()),[]),Ct.createElement("canvas",{ref:w,role:"img",height:n,width:s,...x},m)}const hce=b.forwardRef(uce);function eb(t,e){return mf.register(e),b.forwardRef((n,s)=>Ct.createElement(hce,{...n,ref:s,type:t}))}const V0=eb("line",Ry),Th=eb("bar",ky),fce=eb("doughnut",ch),SV=eb("pie",b1);function br(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Za(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function mce(t,e){const n=br(t);return isNaN(e)?Za(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function gce(t,e){const n=br(t);if(isNaN(e))return Za(t,NaN);if(!e)return n;const s=n.getDate(),r=Za(t,n.getTime());r.setMonth(n.getMonth()+e+1,0);const a=r.getDate();return s>=a?r:(n.setFullYear(r.getFullYear(),r.getMonth(),s),n)}const EV=6048e5,pce=864e5,CV=6e4,TV=36e5;let xce={};function tb(){return xce}function Pg(t,e){var d,u,f,m;const n=tb(),s=(e==null?void 0:e.weekStartsOn)??((u=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,r=br(t),a=r.getDay(),l=(a<s?7:0)+a-s;return r.setDate(r.getDate()-l),r.setHours(0,0,0,0),r}function U0(t){return Pg(t,{weekStartsOn:1})}function AV(t){const e=br(t),n=e.getFullYear(),s=Za(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const r=U0(s),a=Za(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const l=U0(a);return e.getTime()>=r.getTime()?n+1:e.getTime()>=l.getTime()?n:n-1}function u4(t){const e=br(t);return e.setHours(0,0,0,0),e}function h4(t){const e=br(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function yce(t,e){const n=u4(t),s=u4(e),r=+n-h4(n),a=+s-h4(s);return Math.round((r-a)/pce)}function vce(t){const e=AV(t),n=Za(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),U0(n)}function bce(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function wce(t){if(!bce(t)&&typeof t!="number")return!1;const e=br(t);return!isNaN(Number(e))}function _ce(t){const e=br(t),n=Za(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const jce={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Nce=(t,e,n)=>{let s;const r=jce[t];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function ej(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Sce={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ece={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Cce={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tce={date:ej({formats:Sce,defaultWidth:"full"}),time:ej({formats:Ece,defaultWidth:"full"}),dateTime:ej({formats:Cce,defaultWidth:"full"})},Ace={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},kce=(t,e,n,s)=>Ace[t];function Cm(t){return(e,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let r;if(s==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,d=n!=null&&n.width?String(n.width):l;r=t.formattingValues[d]||t.formattingValues[l]}else{const l=t.defaultWidth,d=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[d]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return r[a]}}const Rce={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ice={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Dce={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Mce={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Pce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Oce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Lce=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Vce={ordinalNumber:Lce,era:Cm({values:Rce,defaultWidth:"wide"}),quarter:Cm({values:Ice,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Cm({values:Dce,defaultWidth:"wide"}),day:Cm({values:Mce,defaultWidth:"wide"}),dayPeriod:Cm({values:Pce,defaultWidth:"wide",formattingValues:Oce,defaultFormattingWidth:"wide"})};function Tm(t){return(e,n={})=>{const s=n.width,r=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],a=e.match(r);if(!a)return null;const l=a[0],d=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(d)?Fce(d,p=>p.test(l)):Uce(d,p=>p.test(l));let f;f=t.valueCallback?t.valueCallback(u):u,f=n.valueCallback?n.valueCallback(f):f;const m=e.slice(l.length);return{value:f,rest:m}}}function Uce(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Fce(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Bce(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const r=s[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const d=e.slice(r.length);return{value:l,rest:d}}}const zce=/^(\d+)(th|st|nd|rd)?/i,$ce=/\d+/i,qce={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Hce={any:[/^b/i,/^(a|c)/i]},Wce={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Gce={any:[/1/i,/2/i,/3/i,/4/i]},Yce={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Kce={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Xce={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qce={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Zce={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Jce={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ede={ordinalNumber:Bce({matchPattern:zce,parsePattern:$ce,valueCallback:t=>parseInt(t,10)}),era:Tm({matchPatterns:qce,defaultMatchWidth:"wide",parsePatterns:Hce,defaultParseWidth:"any"}),quarter:Tm({matchPatterns:Wce,defaultMatchWidth:"wide",parsePatterns:Gce,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Tm({matchPatterns:Yce,defaultMatchWidth:"wide",parsePatterns:Kce,defaultParseWidth:"any"}),day:Tm({matchPatterns:Xce,defaultMatchWidth:"wide",parsePatterns:Qce,defaultParseWidth:"any"}),dayPeriod:Tm({matchPatterns:Zce,defaultMatchWidth:"any",parsePatterns:Jce,defaultParseWidth:"any"})},tde={code:"en-US",formatDistance:Nce,formatLong:Tce,formatRelative:kce,localize:Vce,match:ede,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nde(t){const e=br(t);return yce(e,_ce(e))+1}function sde(t){const e=br(t),n=+U0(e)-+vce(e);return Math.round(n/EV)+1}function kV(t,e){var m,p,x,w;const n=br(t),s=n.getFullYear(),r=tb(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((w=(x=r.locale)==null?void 0:x.options)==null?void 0:w.firstWeekContainsDate)??1,l=Za(t,0);l.setFullYear(s+1,0,a),l.setHours(0,0,0,0);const d=Pg(l,e),u=Za(t,0);u.setFullYear(s,0,a),u.setHours(0,0,0,0);const f=Pg(u,e);return n.getTime()>=d.getTime()?s+1:n.getTime()>=f.getTime()?s:s-1}function rde(t,e){var d,u,f,m;const n=tb(),s=(e==null?void 0:e.firstWeekContainsDate)??((u=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,r=kV(t,e),a=Za(t,0);return a.setFullYear(r,0,s),a.setHours(0,0,0,0),Pg(a,e)}function ide(t,e){const n=br(t),s=+Pg(n,e)-+rde(n,e);return Math.round(s/EV)+1}function En(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const Ll={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return En(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):En(n+1,2)},d(t,e){return En(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return En(t.getHours()%12||12,e.length)},H(t,e){return En(t.getHours(),e.length)},m(t,e){return En(t.getMinutes(),e.length)},s(t,e){return En(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),r=Math.trunc(s*Math.pow(10,n-3));return En(r,e.length)}},Ju={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},f4={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),r=s>0?s:1-s;return n.ordinalNumber(r,{unit:"year"})}return Ll.y(t,e)},Y:function(t,e,n,s){const r=kV(t,s),a=r>0?r:1-r;if(e==="YY"){const l=a%100;return En(l,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):En(a,e.length)},R:function(t,e){const n=AV(t);return En(n,e.length)},u:function(t,e){const n=t.getFullYear();return En(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return En(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return En(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return Ll.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return En(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const r=ide(t,s);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):En(r,e.length)},I:function(t,e,n){const s=sde(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):En(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ll.d(t,e)},D:function(t,e,n){const s=nde(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):En(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const r=t.getDay(),a=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return En(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const r=t.getDay(),a=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return En(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return En(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let r;switch(s===12?r=Ju.noon:s===0?r=Ju.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let r;switch(s>=17?r=Ju.evening:s>=12?r=Ju.afternoon:s>=4?r=Ju.morning:r=Ju.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return Ll.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ll.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):En(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):En(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ll.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ll.s(t,e)},S:function(t,e){return Ll.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return g4(s);case"XXXX":case"XX":return vd(s);case"XXXXX":case"XXX":default:return vd(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return g4(s);case"xxxx":case"xx":return vd(s);case"xxxxx":case"xxx":default:return vd(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+m4(s,":");case"OOOO":default:return"GMT"+vd(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+m4(s,":");case"zzzz":default:return"GMT"+vd(s,":")}},t:function(t,e,n){const s=Math.trunc(t.getTime()/1e3);return En(s,e.length)},T:function(t,e,n){const s=t.getTime();return En(s,e.length)}};function m4(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Math.trunc(s/60),a=s%60;return a===0?n+String(r):n+String(r)+e+En(a,2)}function g4(t,e){return t%60===0?(t>0?"-":"+")+En(Math.abs(t)/60,2):vd(t,e)}function vd(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=En(Math.trunc(s/60),2),a=En(s%60,2);return n+r+e+a}const p4=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},RV=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ade=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],r=n[2];if(!r)return p4(t,e);let a;switch(s){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",p4(s,e)).replace("{{time}}",RV(r,e))},ode={p:RV,P:ade},lde=/^D+$/,cde=/^Y+$/,dde=["D","DD","YY","YYYY"];function ude(t){return lde.test(t)}function hde(t){return cde.test(t)}function fde(t,e,n){const s=mde(t,e,n);if(console.warn(s),dde.includes(t))throw new RangeError(s)}function mde(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gde=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pde=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xde=/^'([^]*?)'?$/,yde=/''/g,vde=/[a-zA-Z]/;function bd(t,e,n){var m,p,x,w;const s=tb(),r=s.locale??tde,a=s.firstWeekContainsDate??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,l=s.weekStartsOn??((w=(x=s.locale)==null?void 0:x.options)==null?void 0:w.weekStartsOn)??0,d=br(t);if(!wce(d))throw new RangeError("Invalid time value");let u=e.match(pde).map(j=>{const S=j[0];if(S==="p"||S==="P"){const _=ode[S];return _(j,r.formatLong)}return j}).join("").match(gde).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const S=j[0];if(S==="'")return{isToken:!1,value:bde(j)};if(f4[S])return{isToken:!0,value:j};if(S.match(vde))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:j}});r.localize.preprocessor&&(u=r.localize.preprocessor(d,u));const f={firstWeekContainsDate:a,weekStartsOn:l,locale:r};return u.map(j=>{if(!j.isToken)return j.value;const S=j.value;(hde(S)||ude(S))&&fde(S,e,String(t));const _=f4[S[0]];return _(d,S,r.localize,f)}).join("")}function bde(t){const e=t.match(xde);return e?e[1].replace(yde,"'"):t}function wde(t,e){const n=+br(t),[s,r]=[+br(e.start),+br(e.end)].sort((a,l)=>a-l);return n>=s&&n<=r}function Ii(t,e){return mce(t,-e)}function wd(t,e){const s=Sde(t);let r;if(s.date){const u=Ede(s.date,2);r=Cde(u.restDateString,u.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);const a=r.getTime();let l=0,d;if(s.time&&(l=Tde(s.time),isNaN(l)))return new Date(NaN);if(s.timezone){if(d=Ade(s.timezone),isNaN(d))return new Date(NaN)}else{const u=new Date(a+l),f=new Date(0);return f.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),f.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),f}return new Date(a+l+d)}const dy={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},_de=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,jde=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Nde=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Sde(t){const e={},n=t.split(dy.dateTimeDelimiter);let s;if(n.length>2)return e;if(/:/.test(n[0])?s=n[0]:(e.date=n[0],s=n[1],dy.timeZoneDelimiter.test(e.date)&&(e.date=t.split(dy.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const r=dy.timezone.exec(s);r?(e.time=s.replace(r[1],""),e.timezone=r[1]):e.time=s}return e}function Ede(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};const r=s[1]?parseInt(s[1]):null,a=s[2]?parseInt(s[2]):null;return{year:a===null?r:a*100,restDateString:t.slice((s[1]||s[2]).length)}}function Cde(t,e){if(e===null)return new Date(NaN);const n=t.match(_de);if(!n)return new Date(NaN);const s=!!n[4],r=Am(n[1]),a=Am(n[2])-1,l=Am(n[3]),d=Am(n[4]),u=Am(n[5])-1;if(s)return Mde(e,d,u)?kde(e,d,u):new Date(NaN);{const f=new Date(0);return!Ide(e,a,l)||!Dde(e,r)?new Date(NaN):(f.setUTCFullYear(e,a,Math.max(r,l)),f)}}function Am(t){return t?parseInt(t):1}function Tde(t){const e=t.match(jde);if(!e)return NaN;const n=tj(e[1]),s=tj(e[2]),r=tj(e[3]);return Pde(n,s,r)?n*TV+s*CV+r*1e3:NaN}function tj(t){return t&&parseFloat(t.replace(",","."))||0}function Ade(t){if(t==="Z")return 0;const e=t.match(Nde);if(!e)return 0;const n=e[1]==="+"?-1:1,s=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return Ode(s,r)?n*(s*TV+r*CV):NaN}function kde(t,e,n){const s=new Date(0);s.setUTCFullYear(t,0,4);const r=s.getUTCDay()||7,a=(e-1)*7+n+1-r;return s.setUTCDate(s.getUTCDate()+a),s}const Rde=[31,null,31,30,31,30,31,31,30,31,30,31];function IV(t){return t%400===0||t%4===0&&t%100!==0}function Ide(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Rde[e]||(IV(t)?29:28))}function Dde(t,e){return e>=1&&e<=(IV(t)?366:365)}function Mde(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Pde(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Ode(t,e){return e>=0&&e<=59}function E1(t,e){return gce(t,-e)}function fd({className:t,...e}){return i.jsx("div",{"data-slot":"skeleton",className:Qe("bg-accent animate-pulse rounded-md",t),...e})}mf.register(dh,Dg,Mg,Eh,La,Ch,QS,ZS,XS,yV);function Lde({brandId:t}){const[e,n]=b.useState(!0),[s,r]=b.useState(null),[a,l]=b.useState("30d"),[d,u]=b.useState("all"),[f,m]=b.useState(0),[p,x]=b.useState({totalViews:0,engagementRate:0,completionRate:0,salesImpact:0,totalUsers:0,totalContent:0}),[w,j]=b.useState({viewsByContent:[],engagementOverTime:[],completionRates:[]}),[S,_]=b.useState({trainingCompletion:[],userGrowth:[],geographicDistribution:[]}),[E,C]=b.useState({productsSoldPerUser:[],salesAttribution:[],revenueByContent:[]}),I=b.useRef(null),M=b.useRef(null),V=b.useRef(null),z=b.useRef(null),D=b.useRef(null),A=le=>{l(le),m(Ne=>Ne+1)},T=le=>{u(le),m(Ne=>Ne+1)},R=le=>{const Ne=new Date;switch(le){case"7d":return Ii(Ne,7);case"30d":return Ii(Ne,30);case"90d":return Ii(Ne,90);case"1y":return E1(Ne,12);default:return Ii(Ne,30)}},P=le=>new Intl.NumberFormat("en-US").format(le),O=le=>`${le.toFixed(1)}%`,F=le=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(le);b.useEffect(()=>{(async()=>{var Ne;if(!t){r("No brand ID available. Please select a brand."),n(!1);return}try{n(!0),r(null);const Pe=R(a),Ge=Tn.fromDate(Pe),Ye=yt(Ue(ce,"trainings"),ht("brandId","==",t),Jn("createdAt","desc")),Dt=(await fs(Ye)).docs.map(Fe=>({id:Fe.id,...Fe.data()})),je=Dt.map(Fe=>Fe.id);let qe=[];if(je.length>0)for(let Nt=0;Nt<je.length;Nt+=10){const Fn=je.slice(Nt,Nt+10),cn=yt(Ue(ce,"training_progress"),ht("trainingId","in",Fn),ht("updatedAt",">=",Ge)),Is=await fs(cn);qe=[...qe,...Is.docs.map(fn=>({id:fn.id,...fn.data()}))]}const ct=yt(Ue(ce,"sample_requests"),ht("brandId","==",t),ht("createdAt",">=",Ge),Jn("createdAt","desc")),pt=(await fs(ct)).docs.map(Fe=>({id:Fe.id,...Fe.data()})),X=qe.reduce((Fe,Nt)=>Fe+(Nt.viewCount||0),0),re=qe.reduce((Fe,Nt)=>Fe+(Nt.engagementCount||0),0),he=qe.filter(Fe=>Fe.status==="completed").length,Ae=qe.length,Re=X>0?re/X*100:0,Te=Ae>0?he/Ae*100:0,Me=49.99,Ke=.4,xt=3,Jt=he*xt*Me*Ke;x({totalViews:X,engagementRate:Re,completionRate:Te,salesImpact:Jt,totalUsers:new Set(qe.map(Fe=>Fe.userId)).size,totalContent:Dt.length});const dr=Dt.map(Fe=>{const Nt=qe.filter(fn=>fn.trainingId===Fe.id),Fn=Nt.reduce((fn,ge)=>fn+(ge.viewCount||0),0),cn=Nt.reduce((fn,ge)=>fn+(ge.engagementCount||0),0),Is=Nt.filter(fn=>fn.status==="completed").length;return{id:Fe.id,title:Fe.title,type:Fe.type||"training",views:Fn,engagements:cn,completions:Is,engagementRate:Fn>0?cn/Fn*100:0,completionRate:Nt.length>0?Is/Nt.length*100:0}}).sort((Fe,Nt)=>Nt.views-Fe.views),Rs=[],ur=new Date,zs=a==="7d"?7:a==="30d"?30:a==="90d"?90:365;for(let Fe=zs-1;Fe>=0;Fe--){const Nt=Ii(ur,Fe),Fn=bd(Nt,"yyyy-MM-dd"),cn=new Date(Nt);cn.setHours(0,0,0,0);const Is=new Date(Nt);Is.setHours(23,59,59,999);const fn=qe.filter(ge=>{var Mt;const Ce=(Mt=ge.updatedAt)==null?void 0:Mt.toDate();return Ce&&Ce>=cn&&Ce<=Is});Rs.push({date:Fn,views:fn.reduce((ge,Ce)=>ge+(Ce.viewCount||0),0),engagements:fn.reduce((ge,Ce)=>ge+(Ce.engagementCount||0),0),completions:fn.filter(ge=>ge.status==="completed").length})}const $s=[];["video","article","quiz","training"].forEach(Fe=>{const Nt=Dt.filter(fn=>(fn.type||"training")===Fe),Fn=qe.filter(fn=>{const ge=Dt.find(Ce=>Ce.id===fn.trainingId);return ge&&(ge.type||"training")===Fe}),cn=Fn.length,Is=Fn.filter(fn=>fn.status==="completed").length;$s.push({type:Fe,attempts:cn,completed:Is,rate:cn>0?Is/cn*100:0})}),j({viewsByContent:dr,engagementOverTime:Rs,completionRates:$s});const Pt=[{status:"completed",count:qe.filter(Fe=>Fe.status==="completed").length},{status:"in_progress",count:qe.filter(Fe=>Fe.status==="in_progress").length},{status:"not_started",count:qe.filter(Fe=>Fe.status==="not_started"||!Fe.status).length}],wn=[],Wt=new Map;qe.forEach(Fe=>{if(Fe.createdAt&&Fe.userId){const Nt=bd(Fe.createdAt.toDate(),"yyyy-MM-dd");Wt.has(Nt)||Wt.set(Nt,new Set),Wt.get(Nt).add(Fe.userId)}});let en=0;for(let Fe=zs-1;Fe>=0;Fe--){const Nt=Ii(ur,Fe),Fn=bd(Nt,"yyyy-MM-dd"),cn=((Ne=Wt.get(Fn))==null?void 0:Ne.size)||0;en+=cn,wn.push({date:Fn,users:en,newUsers:cn})}_({trainingCompletion:Pt,userGrowth:wn,geographicDistribution:[{region:"North America",users:65},{region:"Europe",users:20},{region:"Asia",users:10},{region:"Other",users:5}]});const ss=[{category:"Trained Users",value:4.5},{category:"Untrained Users",value:1.5}],Mn=dr.map(Fe=>{const cn=Fe.completions*xt;return{id:Fe.id,title:Fe.title,type:Fe.type,sales:cn,revenue:cn*Me,profit:cn*Me*Ke}}).sort((Fe,Nt)=>Nt.sales-Fe.sales);C({productsSoldPerUser:ss,salesAttribution:Mn,revenueByContent:Mn})}catch(Pe){console.error("Error fetching analytics data:",Pe),r(`Failed to load analytics data: ${Pe.message}`)}finally{n(!1)}})()},[t,a,d,f]);const J={labels:w.engagementOverTime.map(le=>bd(wd(le.date),"MMM d")),datasets:[{label:"Views",data:w.engagementOverTime.map(le=>le.views),borderColor:"rgba(54, 162, 235, 1)",backgroundColor:"rgba(54, 162, 235, 0.2)",tension:.4,fill:!0},{label:"Engagements",data:w.engagementOverTime.map(le=>le.engagements),borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.4,fill:!0},{label:"Completions",data:w.engagementOverTime.map(le=>le.completions),borderColor:"rgba(153, 102, 255, 1)",backgroundColor:"rgba(153, 102, 255, 0.2)",tension:.4,fill:!0}]},Z={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Engagement Over Time"},tooltip:{mode:"index",intersect:!1}},scales:{x:{title:{display:!0,text:"Date"}},y:{beginAtZero:!0,title:{display:!0,text:"Count"}}},interaction:{mode:"index",intersect:!1}},q={labels:w.viewsByContent.slice(0,10).map(le=>le.title),datasets:[{label:"Views",data:w.viewsByContent.slice(0,10).map(le=>le.views),backgroundColor:["rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)","rgba(255, 206, 86, 0.7)","rgba(75, 192, 192, 0.7)","rgba(153, 102, 255, 0.7)","rgba(255, 159, 64, 0.7)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},Y={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Views by Content"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Views"}},x:{title:{display:!0,text:"Content"}}}},W={labels:S.trainingCompletion.map(le=>le.status),datasets:[{data:S.trainingCompletion.map(le=>le.count),backgroundColor:["rgba(75, 192, 192, 0.7)","rgba(255, 206, 86, 0.7)","rgba(255, 99, 132, 0.7)"],borderColor:["rgba(75, 192, 192, 1)","rgba(255, 206, 86, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]},H={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},title:{display:!0,text:"Training Completion Status"}}},B={labels:S.userGrowth.map(le=>bd(wd(le.date),"MMM d")),datasets:[{label:"Users",data:S.userGrowth.map(le=>le.users),borderColor:"rgb(153, 102, 255)",backgroundColor:"rgba(153, 102, 255, 0.5)",tension:.4,fill:!0}]},K={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"User Growth Over Time"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Users"}},x:{title:{display:!0,text:"Date"}}}},ne={labels:S.geographicDistribution.map(le=>le.region),datasets:[{data:S.geographicDistribution.map(le=>le.users),backgroundColor:["rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)","rgba(255, 206, 86, 0.7)","rgba(75, 192, 192, 0.7)","rgba(153, 102, 255, 0.7)","rgba(255, 159, 64, 0.7)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},te={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},title:{display:!0,text:"User Geographic Distribution"}}},fe={labels:E.productsSoldPerUser.map(le=>le.category),datasets:[{label:"Products Sold",data:E.productsSoldPerUser.map(le=>le.value),backgroundColor:["rgba(75, 192, 192, 0.7)","rgba(255, 99, 132, 0.7)"],borderColor:["rgba(75, 192, 192, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]},ke={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Products Sold Per User"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Products"}}}},Ee={labels:E.salesAttribution.slice(0,10).map(le=>le.title),datasets:[{label:"Sales",data:E.salesAttribution.slice(0,10).map(le=>le.sales),backgroundColor:"rgba(75, 192, 192, 0.7)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Revenue",data:E.salesAttribution.slice(0,10).map(le=>le.revenue/100),backgroundColor:"rgba(54, 162, 235, 0.7)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]},ve={responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sales Attribution by Content"},tooltip:{callbacks:{label:function(le){const Ne=le.dataset.label||"",Pe=le.raw;return Ne==="Revenue"?`${Ne}: ${F(Pe*100)}`:`${Ne}: ${P(Pe)}`}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Count / Amount"}},x:{title:{display:!0,text:"Content"}}}};return i.jsxs("div",{className:"container mx-auto px-4 py-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Brand Analytics"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Comprehensive analytics and insights for your brand"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 md:mt-0",children:[i.jsxs(Ns,{value:a,onValueChange:A,children:[i.jsx(ds,{className:"w-[180px]",children:i.jsx(Ss,{placeholder:"Select date range"})}),i.jsxs(us,{children:[i.jsx($e,{value:"7d",children:"Last 7 days"}),i.jsx($e,{value:"30d",children:"Last 30 days"}),i.jsx($e,{value:"90d",children:"Last 90 days"}),i.jsx($e,{value:"1y",children:"Last year"})]})]}),i.jsxs(Ns,{value:d,onValueChange:T,children:[i.jsx(ds,{className:"w-[180px]",children:i.jsx(Ss,{placeholder:"Select content type"})}),i.jsxs(us,{children:[i.jsx($e,{value:"all",children:"All Content"}),i.jsx($e,{value:"video",children:"Videos"}),i.jsx($e,{value:"article",children:"Articles"}),i.jsx($e,{value:"quiz",children:"Quizzes"}),i.jsx($e,{value:"training",children:"Trainings"})]})]}),i.jsxs(Se,{variant:"outline",onClick:()=>m(le=>le+1),children:[i.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Refresh"]}),i.jsxs(Se,{variant:"outline",children:[i.jsx(Sv,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),s&&i.jsxs(Pi,{variant:"destructive",className:"mb-6",children:[i.jsx(js,{className:"h-4 w-4"}),i.jsx(Ed,{children:"Error"}),i.jsx(Oi,{children:s})]}),e?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[...Array(4)].map((le,Ne)=>i.jsxs(De,{className:"overflow-hidden",children:[i.jsx(et,{className:"pb-2",children:i.jsx(fd,{className:"h-4 w-24"})}),i.jsxs(He,{children:[i.jsx(fd,{className:"h-8 w-32 mb-2"}),i.jsx(fd,{className:"h-4 w-16"})]})]},Ne))}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[i.jsxs(De,{className:"overflow-hidden",children:[i.jsx(et,{className:"pb-2",children:i.jsx(fd,{className:"h-5 w-40"})}),i.jsx(He,{children:i.jsx(fd,{className:"h-64 w-full"})})]}),i.jsxs(De,{className:"overflow-hidden",children:[i.jsx(et,{className:"pb-2",children:i.jsx(fd,{className:"h-5 w-40"})}),i.jsx(He,{children:i.jsx(fd,{className:"h-64 w-full"})})]})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 p-3 rounded-md bg-blue-100 text-blue-600",children:i.jsx(Zi,{className:"h-6 w-6"})}),i.jsx("div",{className:"ml-5 w-0 flex-1",children:i.jsxs("dl",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Views"}),i.jsx("dd",{className:"flex items-baseline",children:i.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:P(p.totalViews)})})]})})]})}),i.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 p-3 rounded-md bg-green-100 text-green-600",children:i.jsx(fO,{className:"h-6 w-6"})}),i.jsx("div",{className:"ml-5 w-0 flex-1",children:i.jsxs("dl",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Engagement Rate"}),i.jsx("dd",{className:"flex items-baseline",children:i.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:O(p.engagementRate)})})]})})]})}),i.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 p-3 rounded-md bg-indigo-100 text-indigo-600",children:i.jsx($a,{className:"h-6 w-6"})}),i.jsx("div",{className:"ml-5 w-0 flex-1",children:i.jsxs("dl",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Completion Rate"}),i.jsx("dd",{className:"flex items-baseline",children:i.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:O(p.completionRate)})})]})})]})}),i.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 p-3 rounded-md bg-purple-100 text-purple-600",children:i.jsx(pc,{className:"h-6 w-6"})}),i.jsx("div",{className:"ml-5 w-0 flex-1",children:i.jsxs("dl",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Sales Impact"}),i.jsx("dd",{className:"flex items-baseline",children:i.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:F(p.salesImpact)})})]})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Engagement Over Time"}),i.jsx("div",{className:"h-64",children:i.jsx(V0,{ref:I,options:Z,data:J})})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Views by Content"}),i.jsx("div",{className:"h-64",children:i.jsx(Th,{ref:M,options:Y,data:q})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Training Completion"}),i.jsx("div",{className:"h-64",children:i.jsx(fce,{options:H,data:W})})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"User Growth"}),i.jsx("div",{className:"h-64",children:i.jsx(V0,{ref:V,options:K,data:B})})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Geographic Distribution"}),i.jsx("div",{className:"h-64",children:i.jsx(SV,{ref:z,options:te,data:ne})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Products Sold Per User"}),i.jsx("div",{className:"h-64",children:i.jsx(Th,{options:ke,data:fe})}),i.jsx("div",{className:"mt-4 text-center text-sm text-gray-500",children:i.jsx("p",{children:"Trained users sell an average of 3 more products than untrained users"})})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Sales Attribution by Content"}),i.jsx("div",{className:"h-64",children:i.jsx(Th,{ref:D,options:ve,data:Ee})})]})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Content Performance Details"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Content Title"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Views"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completion Rate"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sales Attribution"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue Impact"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.viewsByContent.map((le,Ne)=>{var Pe,Ge,Ye;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:le.title}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P(le.views)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O(((Pe=w.completionRates.find(ot=>ot.type===le.type))==null?void 0:Pe.rate)||0)}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[P(((Ge=E.salesAttribution[Ne])==null?void 0:Ge.sales)||0)," sales"]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:F(((Ye=E.revenueByContent[Ne])==null?void 0:Ye.revenue)||0)})]},Ne)})})]})})]})]})]})}mf.register(Dg,Mg,Eh,La,Ch,QS,ZS,XS);function Vde({brandId:t}){const{user:e}=bn(),[n,s]=b.useState(!1),[r,a]=b.useState(!1),[l,d]=b.useState(null),[u,f]=b.useState([]),[m,p]=b.useState("calculator"),[x,w]=b.useState({numUsers:100,productPrice:49.99,profitMargin:40,platformCost:199,timeframe:12,scenarioName:"New Scenario"}),[j,S]=b.useState({additionalProducts:0,additionalRevenue:0,additionalProfit:0,platformCostTotal:0,netProfit:0,roi:0,breakEvenUsers:0,paybackPeriod:0,monthlyData:[]}),_=b.useRef(null),E=b.useRef(null);b.useEffect(()=>{(async()=>{try{if(s(!0),!t){d("No brand selected"),s(!1);return}const W=yt(Ue(ce,"roi_scenarios"),ht("brandId","==",t),Jn("createdAt","desc")),B=(await fs(W)).docs.map(K=>({id:K.id,...K.data()}));f(B)}catch(W){console.error("Error loading scenarios:",W),d("Failed to load saved scenarios")}finally{s(!1)}})()},[e,t]),b.useEffect(()=>{C()},[x]);const C=()=>{const{numUsers:Y,productPrice:W,profitMargin:H,platformCost:B,timeframe:K}=x,ne=W*H/100,te=3,fe=Y*te,ke=fe*W,Ee=fe*ne,ve=B*K,le=Ee-ve,Ne=ve>0?le/ve*100:0,Pe=Math.ceil(ve/(te*ne)),Ge=B>0?ve/(Ee/K):0,Ye=[];let ot=0,Dt=0;for(let je=1;je<=K;je++){const qe=ke/K,ct=Ee/K;ot+=ct,Dt+=B,Ye.push({month:je,revenue:qe,profit:ct,cumulativeProfit:ot,cumulativeCost:Dt,netProfit:ot-Dt})}S({additionalProducts:fe,additionalRevenue:ke,additionalProfit:Ee,platformCostTotal:ve,netProfit:le,roi:Ne,breakEvenUsers:Pe,paybackPeriod:Ge,monthlyData:Ye})},I=Y=>{const{name:W,value:H}=Y.target;w(B=>({...B,[W]:W==="scenarioName"?H:parseFloat(H)||0}))},M=async()=>{try{if(a(!0),!t){d("No brand selected"),a(!1);return}const Y={brandId:t,name:x.scenarioName,inputs:{...x},results:{...j},createdAt:ze(),createdBy:(e==null?void 0:e.uid)||"unknown"};await cr(Ue(ce,"roi_scenarios"),Y);const W=yt(Ue(ce,"roi_scenarios"),ht("brandId","==",t),Jn("createdAt","desc")),B=(await fs(W)).docs.map(K=>({id:K.id,...K.data()}));f(B),p("saved")}catch(Y){console.error("Error saving scenario:",Y),d("Failed to save scenario")}finally{a(!1)}},V=Y=>{w(Y.inputs),S(Y.results),p("calculator")},z=async Y=>{try{s(!0),await Zs(Je(ce,"roi_scenarios",Y)),f(W=>W.filter(H=>H.id!==Y))}catch(W){console.error("Error deleting scenario:",W),d("Failed to delete scenario")}finally{s(!1)}},D=Y=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(Y),A=Y=>`${Y.toFixed(2)}%`,T=Y=>new Intl.NumberFormat("en-US").format(Math.round(Y)),R=Y=>{const W=Math.floor(Y),H=Math.round((Y-W)*30);return W===0?`${H} days`:H===0?W===1?"1 month":`${W} months`:`${W} month${W!==1?"s":""} and ${H} day${H!==1?"s":""}`},P={labels:j.monthlyData.map(Y=>`Month ${Y.month}`),datasets:[{label:"Cumulative Profit",data:j.monthlyData.map(Y=>Y.cumulativeProfit),borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",fill:!0,tension:.4},{label:"Cumulative Cost",data:j.monthlyData.map(Y=>Y.cumulativeCost),borderColor:"rgba(255, 99, 132, 1)",backgroundColor:"rgba(255, 99, 132, 0.2)",fill:!0,tension:.4},{label:"Net Profit",data:j.monthlyData.map(Y=>Y.netProfit),borderColor:"rgba(54, 162, 235, 1)",backgroundColor:"rgba(54, 162, 235, 0.2)",fill:!0,tension:.4}]},O={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"ROI Projection Over Time"},tooltip:{callbacks:{label:function(Y){let W=Y.dataset.label||"";return W&&(W+=": "),Y.parsed.y!==null&&(W+=D(Y.parsed.y)),W}}}},scales:{x:{title:{display:!0,text:"Time Period"}},y:{title:{display:!0,text:"Amount ($)"},ticks:{callback:function(Y){return D(Y)}}}}},F={labels:["Current Users","Break-Even Users"],datasets:[{label:"Users",data:[x.numUsers,j.breakEvenUsers],backgroundColor:[x.numUsers>=j.breakEvenUsers?"rgba(75, 192, 192, 0.7)":"rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)"],borderColor:[x.numUsers>=j.breakEvenUsers?"rgba(75, 192, 192, 1)":"rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]},J={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Break-Even Analysis"},tooltip:{callbacks:{label:function(Y){let W=Y.dataset.label||"";return W&&(W+=": "),Y.parsed.y!==null&&(W+=T(Y.parsed.y)+" users"),W}}}},scales:{y:{title:{display:!0,text:"Number of Users"},beginAtZero:!0,ticks:{callback:function(Y){return T(Y)}}}}},Z={labels:j.monthlyData.map(Y=>`Month ${Y.month}`),datasets:[{type:"line",label:"Net Profit",data:j.monthlyData.map(Y=>Y.netProfit),borderColor:"rgba(54, 162, 235, 1)",backgroundColor:"rgba(54, 162, 235, 0.5)",yAxisID:"y",tension:.4},{type:"bar",label:"Monthly Revenue",data:j.monthlyData.map(Y=>Y.revenue),backgroundColor:"rgba(75, 192, 192, 0.7)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,yAxisID:"y"},{type:"bar",label:"Monthly Cost",data:j.monthlyData.map(()=>x.platformCost),backgroundColor:"rgba(255, 99, 132, 0.7)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,yAxisID:"y"}]},q={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Monthly Projections"},tooltip:{callbacks:{label:function(Y){let W=Y.dataset.label||"";return W&&(W+=": "),Y.parsed.y!==null&&(W+=D(Y.parsed.y)),W}}}},scales:{x:{title:{display:!0,text:"Month"}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Amount ($)"},ticks:{callback:function(Y){return D(Y)}}}}};return i.jsxs("div",{className:"container mx-auto px-4 py-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"ROI Calculator"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Calculate the return on investment for your training programs"})]}),i.jsx("div",{className:"flex space-x-2 mt-4 md:mt-0",children:i.jsx(ll,{value:m,onValueChange:p,className:"w-full md:w-auto",children:i.jsxs(eo,{children:[i.jsx(on,{value:"calculator",children:"Calculator"}),i.jsx(on,{value:"saved",children:"Saved Scenarios"})]})})})]}),l&&i.jsxs(Pi,{variant:"destructive",className:"mb-6",children:[i.jsx(js,{className:"h-4 w-4"}),i.jsx(Ed,{children:"Error"}),i.jsx(Oi,{children:l})]}),i.jsx(yn,{value:"calculator",className:"mt-0",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(De,{className:"lg:col-span-1",children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center",children:[i.jsx(WY,{className:"h-5 w-5 mr-2"}),"ROI Calculator Inputs"]}),i.jsx(Vt,{children:"Enter your details to calculate ROI"})]}),i.jsxs(He,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"scenarioName",children:"Scenario Name"}),i.jsx(gt,{id:"scenarioName",name:"scenarioName",value:x.scenarioName,onChange:I,placeholder:"My ROI Scenario"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"numUsers",children:"Number of Trained Users"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(gt,{id:"numUsers",name:"numUsers",type:"number",min:"1",value:x.numUsers,onChange:I,className:"pl-10"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Number of retail employees who will complete training"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"productPrice",children:"Average Product Price ($)"}),i.jsxs("div",{className:"relative",children:[i.jsx(pc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(gt,{id:"productPrice",name:"productPrice",type:"number",min:"0.01",step:"0.01",value:x.productPrice,onChange:I,className:"pl-10"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Average price of products sold"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"profitMargin",children:"Profit Margin (%)"}),i.jsxs("div",{className:"relative",children:[i.jsx(Od,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(gt,{id:"profitMargin",name:"profitMargin",type:"number",min:"1",max:"100",value:x.profitMargin,onChange:I,className:"pl-10"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Percentage profit on each product sold"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"platformCost",children:"Monthly Platform Cost ($)"}),i.jsxs("div",{className:"relative",children:[i.jsx(pc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(gt,{id:"platformCost",name:"platformCost",type:"number",min:"0",step:"0.01",value:x.platformCost,onChange:I,className:"pl-10"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Monthly cost of the training platform"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"timeframe",children:"Timeframe (Months)"}),i.jsxs("div",{className:"relative",children:[i.jsx(cf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(gt,{id:"timeframe",name:"timeframe",type:"number",min:"1",max:"60",value:x.timeframe,onChange:I,className:"pl-10"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Time period for ROI calculation"})]})]}),i.jsxs(xg,{className:"flex justify-between",children:[i.jsx(Se,{variant:"outline",onClick:()=>w({numUsers:100,productPrice:49.99,profitMargin:40,platformCost:199,timeframe:12,scenarioName:"New Scenario"}),children:"Reset"}),i.jsxs(Se,{onClick:M,disabled:r,children:[r?"Saving...":"Save Scenario",i.jsx(a0,{className:"ml-2 h-4 w-4"})]})]})]}),i.jsxs(De,{className:"lg:col-span-2",children:[i.jsxs(et,{children:[i.jsxs(nt,{className:"flex items-center",children:[i.jsx(Od,{className:"h-5 w-5 mr-2"}),"ROI Results"]}),i.jsx(Vt,{children:"Based on each trained user selling 3 additional products"})]}),i.jsxs(He,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Additional Products"}),i.jsx("p",{className:"text-2xl font-bold",children:T(j.additionalProducts)})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Additional Revenue"}),i.jsx("p",{className:"text-2xl font-bold",children:D(j.additionalRevenue)})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Additional Profit"}),i.jsx("p",{className:"text-2xl font-bold",children:D(j.additionalProfit)})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Platform Cost"}),i.jsx("p",{className:"text-2xl font-bold",children:D(j.platformCostTotal)})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Net Profit"}),i.jsx("p",{className:`text-2xl font-bold ${j.netProfit>=0?"text-green-600":"text-red-600"}`,children:D(j.netProfit)})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ROI"}),i.jsx("p",{className:`text-2xl font-bold ${j.roi>=0?"text-green-600":"text-red-600"}`,children:A(j.roi)})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Break-even Analysis"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Break-even Users"}),i.jsxs("p",{className:"text-xl font-bold",children:[T(j.breakEvenUsers)," users"]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:x.numUsers>=j.breakEvenUsers?`You are ${T(x.numUsers-j.breakEvenUsers)} users above break-even`:`You need ${T(j.breakEvenUsers-x.numUsers)} more users to break even`})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Payback Period"}),i.jsx("p",{className:"text-xl font-bold",children:R(j.paybackPeriod)}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Time needed to recover the investment"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"ROI Projection"}),i.jsx("div",{className:"h-72",children:i.jsx(V0,{ref:_,data:P,options:O})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Break-even Analysis"}),i.jsx("div",{className:"h-64",children:i.jsx(Th,{ref:E,data:F,options:J})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Monthly Projection"}),i.jsx("div",{className:"h-64",children:i.jsx(Th,{data:Z,options:q})})]})]})]}),i.jsxs(xg,{className:"flex justify-end",children:[i.jsxs(Se,{variant:"outline",className:"mr-2",children:[i.jsx(Sv,{className:"mr-2 h-4 w-4"}),"Export Report"]}),i.jsxs(Se,{onClick:M,disabled:r,children:[r?"Saving...":"Save Scenario",i.jsx(a0,{className:"ml-2 h-4 w-4"})]})]})]})]})}),i.jsx(yn,{value:"saved",className:"mt-0",children:i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Saved ROI Scenarios"}),i.jsx(Vt,{children:"View and compare your saved ROI calculations"})]}),i.jsx(He,{children:n?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary"})}):u.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No saved scenarios found"}),i.jsx(Se,{onClick:()=>p("calculator"),children:"Create New Scenario"})]}):i.jsx("div",{className:"space-y-4",children:u.map(Y=>{var W;return i.jsxs(De,{className:"bg-gray-50 dark:bg-gray-800",children:[i.jsxs(et,{className:"pb-2",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx(nt,{className:"text-lg",children:Y.name}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>V(Y),children:"Load"}),i.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>z(Y.id),children:i.jsx(ac,{className:"h-4 w-4 text-red-500"})})]})]}),i.jsx(Vt,{children:(W=Y.createdAt)!=null&&W.toDate?new Date(Y.createdAt.toDate()).toLocaleDateString():"Date not available"})]}),i.jsxs(He,{className:"pt-0",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500",children:"Users"}),i.jsx("p",{className:"font-medium",children:T(Y.inputs.numUsers)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500",children:"ROI"}),i.jsx("p",{className:`font-medium ${Y.results.roi>=0?"text-green-600":"text-red-600"}`,children:A(Y.results.roi)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500",children:"Net Profit"}),i.jsx("p",{className:`font-medium ${Y.results.netProfit>=0?"text-green-600":"text-red-600"}`,children:D(Y.results.netProfit)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500",children:"Payback Period"}),i.jsx("p",{className:"font-medium",children:R(Y.results.paybackPeriod)})]})]}),i.jsx(oh,{className:"my-2"}),i.jsxs("div",{className:"flex justify-between items-center pt-2",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Timeframe: "}),i.jsxs("span",{className:"font-medium",children:[Y.inputs.timeframe," months"]})]}),i.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>V(Y),children:["View Details",i.jsx(MY,{className:"ml-2 h-4 w-4"})]})]})]})]},Y.id)})})})]})})]})}mf.register(Dg,Mg,Eh,La,Ch,dh,QS,ZS,XS,yV);const md={sectionHeading:{fontFamily:"Playfair Display, serif",fontWeight:"700",letterSpacing:"-0.02em",lineHeight:"1.2"},subsectionTitle:{fontFamily:"Playfair Display, serif",fontWeight:"600"}},Ude=()=>{const t=new Date,e=[];for(let n=30;n>=0;n--){const s=Ii(t,n),r=bd(s,"yyyy-MM-dd");e.push({date:r,likes:Math.floor(Math.random()*50)+20,comments:Math.floor(Math.random()*30)+10,shares:Math.floor(Math.random()*15)+5,views:Math.floor(Math.random()*200)+100})}return e},nj=[{category:"Product Drop",posts:28,engagement:342,avgEngagement:12.2},{category:"Industry Buzz",posts:35,engagement:487,avgEngagement:13.9},{category:"Question",posts:42,engagement:318,avgEngagement:7.6},{category:"Tip & Trick",posts:23,engagement:276,avgEngagement:12},{category:"Discussion",posts:31,engagement:245,avgEngagement:7.9},{category:"Product Review",posts:18,engagement:198,avgEngagement:11},{category:"Easter Egg",posts:7,engagement:154,avgEngagement:22},{category:"Community Shoutout",posts:15,engagement:187,avgEngagement:12.5},{category:"Affirmation",posts:12,engagement:132,avgEngagement:11}],Fde={likes:2450,comments:1280,shares:640,saves:320,reactions:{love:580,insightful:420,celebrate:310,laugh:240}};function Bde({brandId:t}){const[e,n]=b.useState([]),[s,r]=b.useState("30d"),[a,l]=b.useState(""),[d,u]=b.useState(""),[f,m]=b.useState(!0),[p,x]=b.useState("total"),[w,j]=b.useState("engagement");b.useEffect(()=>{const R=Ude();n(R),m(!1)},[t]);const S=()=>{if(e.length===0)return[];const R=new Date;let P;if(s==="custom"&&a&&d){P=wd(a);const O=wd(d);return e.filter(F=>{const J=wd(F.date);return wde(J,{start:P,end:O})})}switch(s){case"7d":P=Ii(R,7);break;case"14d":P=Ii(R,14);break;case"30d":P=Ii(R,30);break;case"90d":P=Ii(R,90);break;case"6m":P=E1(R,6);break;case"1y":P=E1(R,12);break;default:P=Ii(R,30)}return e.filter(O=>{const F=wd(O.date);return F>=P&&F<=R})},_=()=>{const R=S(),P=R.map(F=>bd(wd(F.date),"MMM d")),O=[];return(p==="total"||p==="likes")&&O.push({label:"Likes",data:R.map(F=>F.likes),borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.4,fill:!0}),(p==="total"||p==="comments")&&O.push({label:"Comments",data:R.map(F=>F.comments),borderColor:"rgba(153, 102, 255, 1)",backgroundColor:"rgba(153, 102, 255, 0.2)",tension:.4,fill:!0}),(p==="total"||p==="shares")&&O.push({label:"Shares",data:R.map(F=>F.shares),borderColor:"rgba(255, 159, 64, 1)",backgroundColor:"rgba(255, 159, 64, 0.2)",tension:.4,fill:!0}),p==="views"&&O.push({label:"Views",data:R.map(F=>F.views),borderColor:"rgba(54, 162, 235, 1)",backgroundColor:"rgba(54, 162, 235, 0.2)",tension:.4,fill:!0}),{labels:P,datasets:O}},E=()=>{const P=[...nj].sort((O,F)=>w==="engagement"?F.engagement-O.engagement:w==="posts"?F.posts-O.posts:w==="avgEngagement"?F.avgEngagement-O.avgEngagement:0).slice(0,6);return{labels:P.map(O=>O.category),datasets:[{label:"Total Engagement",data:P.map(O=>O.engagement),backgroundColor:"rgba(75, 192, 192, 0.8)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Number of Posts",data:P.map(O=>O.posts*5),backgroundColor:"rgba(153, 102, 255, 0.8)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]}},C=()=>{const{likes:R,comments:P,shares:O,saves:F,reactions:J}=Fde,Z=Object.values(J).reduce((q,Y)=>q+Y,0);return{labels:["Likes","Comments","Shares","Saves","Other Reactions"],datasets:[{data:[R,P,O,F,Z],backgroundColor:["rgba(75, 192, 192, 0.8)","rgba(153, 102, 255, 0.8)","rgba(255, 159, 64, 0.8)","rgba(255, 99, 132, 0.8)","rgba(54, 162, 235, 0.8)"],borderColor:["rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]}},I=()=>{const R=S();return{likes:R.reduce((O,F)=>O+F.likes,0),comments:R.reduce((O,F)=>O+F.comments,0),shares:R.reduce((O,F)=>O+F.shares,0),views:R.reduce((O,F)=>O+F.views,0)}},M={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Community Engagement Over Time",font:{size:16,family:md.subsectionTitle.fontFamily,weight:md.subsectionTitle.fontWeight}},tooltip:{mode:"index",intersect:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}}},interaction:{mode:"index",intersect:!1}},V={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Performance by Post Category",font:{size:16,family:md.subsectionTitle.fontFamily,weight:md.subsectionTitle.fontWeight}},tooltip:{callbacks:{label:function(R){const P=R.dataset.label||"",O=R.raw;return P==="Number of Posts"?`${P}: ${O/5}`:`${P}: ${O}`}}}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}}}},z={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},title:{display:!0,text:"Engagement Types Distribution",font:{size:16,family:md.subsectionTitle.fontFamily,weight:md.subsectionTitle.fontWeight}}}},D=I(),A=D.likes+D.comments+D.shares,T=A>0&&D.views>0?(A/D.views*100).toFixed(1):0;return i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl mb-6",style:md.sectionHeading,children:"Community Engagement Metrics"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-sm text-blue-600",children:"Total Engagement"}),i.jsx("div",{className:"text-2xl font-bold",children:A.toLocaleString()}),i.jsx("div",{className:"text-xs text-blue-500",children:"Likes + Comments + Shares"})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-sm text-green-600",children:"Engagement Rate"}),i.jsxs("div",{className:"text-2xl font-bold",children:[T,"%"]}),i.jsx("div",{className:"text-xs text-green-500",children:"Engagement / Views"})]}),i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-sm text-purple-600",children:"Active Discussions"}),i.jsx("div",{className:"text-2xl font-bold",children:Math.floor(D.comments/3).toLocaleString()}),i.jsx("div",{className:"text-xs text-purple-500",children:"Posts with 3+ comments"})]}),i.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-sm text-orange-600",children:"Content Reach"}),i.jsx("div",{className:"text-2xl font-bold",children:D.views.toLocaleString()}),i.jsx("div",{className:"text-xs text-orange-500",children:"Total post views"})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6 pb-4 border-b border-gray-200",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),i.jsxs("select",{value:s,onChange:R=>r(R.target.value),className:"border border-gray-300 rounded-md shadow-sm p-2 text-sm focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"7d",children:"Last 7 days"}),i.jsx("option",{value:"14d",children:"Last 14 days"}),i.jsx("option",{value:"30d",children:"Last 30 days"}),i.jsx("option",{value:"90d",children:"Last 90 days"}),i.jsx("option",{value:"6m",children:"Last 6 months"}),i.jsx("option",{value:"1y",children:"Last year"}),i.jsx("option",{value:"custom",children:"Custom range"})]})]}),s==="custom"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),i.jsx("input",{type:"date",value:a,onChange:R=>l(R.target.value),className:"border border-gray-300 rounded-md shadow-sm p-2 text-sm focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),i.jsx("input",{type:"date",value:d,onChange:R=>u(R.target.value),className:"border border-gray-300 rounded-md shadow-sm p-2 text-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),i.jsxs("div",{className:"ml-auto",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Metric"}),i.jsxs("div",{className:"flex space-x-1",children:[i.jsx("button",{onClick:()=>x("total"),className:`px-3 py-1 text-sm rounded-md ${p==="total"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),i.jsx("button",{onClick:()=>x("likes"),className:`px-3 py-1 text-sm rounded-md ${p==="likes"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Likes"}),i.jsx("button",{onClick:()=>x("comments"),className:`px-3 py-1 text-sm rounded-md ${p==="comments"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Comments"}),i.jsx("button",{onClick:()=>x("shares"),className:`px-3 py-1 text-sm rounded-md ${p==="shares"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Shares"}),i.jsx("button",{onClick:()=>x("views"),className:`px-3 py-1 text-sm rounded-md ${p==="views"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Views"})]})]})]}),f?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"h-80",children:i.jsx(V0,{data:_(),options:M})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Category Performance"}),i.jsxs("select",{value:w,onChange:R=>j(R.target.value),className:"border border-gray-300 rounded-md shadow-sm p-1 text-sm",children:[i.jsx("option",{value:"engagement",children:"Sort by Engagement"}),i.jsx("option",{value:"posts",children:"Sort by Post Count"}),i.jsx("option",{value:"avgEngagement",children:"Sort by Avg Engagement"})]})]}),i.jsx("div",{className:"h-64",children:i.jsx(Th,{data:E(),options:V})})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Engagement Distribution"}),i.jsx("div",{className:"h-64",children:i.jsx(SV,{data:C(),options:z})})]})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Engagement Insights"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-blue-600 mr-2",children:"•"}),i.jsxs("span",{children:[p==="total"?"Overall engagement is ":`${p.charAt(0).toUpperCase()+p.slice(1)} are `,Math.random()>.5?"up":"down"," ",Math.floor(Math.random()*20)+5,"% compared to the previous period."]})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-blue-600 mr-2",children:"•"}),i.jsxs("span",{children:[nj.sort((R,P)=>P.engagement-R.engagement)[0].category," is your best performing category with"," ",nj.sort((R,P)=>P.engagement-R.engagement)[0].engagement," total engagements."]})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-blue-600 mr-2",children:"•"}),i.jsxs("span",{children:["Your content reaches an average of ",Math.floor(D.views/S().length)," views per day."]})]})]})]})]})]})}function zde(t,e){return b.useReducer((n,s)=>e[n][s]??n,t)}var JS="ScrollArea",[DV,nhe]=xi(JS),[$de,zi]=DV(JS),MV=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:s="hover",dir:r,scrollHideDelay:a=600,...l}=t,[d,u]=b.useState(null),[f,m]=b.useState(null),[p,x]=b.useState(null),[w,j]=b.useState(null),[S,_]=b.useState(null),[E,C]=b.useState(0),[I,M]=b.useState(0),[V,z]=b.useState(!1),[D,A]=b.useState(!1),T=Kt(e,P=>u(P)),R=rp(r);return i.jsx($de,{scope:n,type:s,dir:R,scrollHideDelay:a,scrollArea:d,viewport:f,onViewportChange:m,content:p,onContentChange:x,scrollbarX:w,onScrollbarXChange:j,scrollbarXEnabled:V,onScrollbarXEnabledChange:z,scrollbarY:S,onScrollbarYChange:_,scrollbarYEnabled:D,onScrollbarYEnabledChange:A,onCornerWidthChange:C,onCornerHeightChange:M,children:i.jsx(bt.div,{dir:R,...l,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":I+"px",...t.style}})})});MV.displayName=JS;var PV="ScrollAreaViewport",OV=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:s,nonce:r,...a}=t,l=zi(PV,n),d=b.useRef(null),u=Kt(e,d,l.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(bt.div,{"data-radix-scroll-area-viewport":"",...a,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:i.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});OV.displayName=PV;var no="ScrollAreaScrollbar",LV=b.forwardRef((t,e)=>{const{forceMount:n,...s}=t,r=zi(no,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:l}=r,d=t.orientation==="horizontal";return b.useEffect(()=>(d?a(!0):l(!0),()=>{d?a(!1):l(!1)}),[d,a,l]),r.type==="hover"?i.jsx(qde,{...s,ref:e,forceMount:n}):r.type==="scroll"?i.jsx(Hde,{...s,ref:e,forceMount:n}):r.type==="auto"?i.jsx(VV,{...s,ref:e,forceMount:n}):r.type==="always"?i.jsx(eE,{...s,ref:e}):null});LV.displayName=no;var qde=b.forwardRef((t,e)=>{const{forceMount:n,...s}=t,r=zi(no,t.__scopeScrollArea),[a,l]=b.useState(!1);return b.useEffect(()=>{const d=r.scrollArea;let u=0;if(d){const f=()=>{window.clearTimeout(u),l(!0)},m=()=>{u=window.setTimeout(()=>l(!1),r.scrollHideDelay)};return d.addEventListener("pointerenter",f),d.addEventListener("pointerleave",m),()=>{window.clearTimeout(u),d.removeEventListener("pointerenter",f),d.removeEventListener("pointerleave",m)}}},[r.scrollArea,r.scrollHideDelay]),i.jsx(yi,{present:n||a,children:i.jsx(VV,{"data-state":a?"visible":"hidden",...s,ref:e})})}),Hde=b.forwardRef((t,e)=>{const{forceMount:n,...s}=t,r=zi(no,t.__scopeScrollArea),a=t.orientation==="horizontal",l=sb(()=>u("SCROLL_END"),100),[d,u]=zde("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(d==="idle"){const f=window.setTimeout(()=>u("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(f)}},[d,r.scrollHideDelay,u]),b.useEffect(()=>{const f=r.viewport,m=a?"scrollLeft":"scrollTop";if(f){let p=f[m];const x=()=>{const w=f[m];p!==w&&(u("SCROLL"),l()),p=w};return f.addEventListener("scroll",x),()=>f.removeEventListener("scroll",x)}},[r.viewport,a,u,l]),i.jsx(yi,{present:n||d!=="hidden",children:i.jsx(eE,{"data-state":d==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:tt(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:tt(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),VV=b.forwardRef((t,e)=>{const n=zi(no,t.__scopeScrollArea),{forceMount:s,...r}=t,[a,l]=b.useState(!1),d=t.orientation==="horizontal",u=sb(()=>{if(n.viewport){const f=n.viewport.offsetWidth<n.viewport.scrollWidth,m=n.viewport.offsetHeight<n.viewport.scrollHeight;l(d?f:m)}},10);return Wh(n.viewport,u),Wh(n.content,u),i.jsx(yi,{present:s||a,children:i.jsx(eE,{"data-state":a?"visible":"hidden",...r,ref:e})})}),eE=b.forwardRef((t,e)=>{const{orientation:n="vertical",...s}=t,r=zi(no,t.__scopeScrollArea),a=b.useRef(null),l=b.useRef(0),[d,u]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=$V(d.viewport,d.content),m={...s,sizes:d,onSizesChange:u,hasThumb:f>0&&f<1,onThumbChange:x=>a.current=x,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:x=>l.current=x};function p(x,w){return Qde(x,l.current,d,w)}return n==="horizontal"?i.jsx(Wde,{...m,ref:e,onThumbPositionChange:()=>{if(r.viewport&&a.current){const x=r.viewport.scrollLeft,w=x4(x,d,r.dir);a.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:x=>{r.viewport&&(r.viewport.scrollLeft=x)},onDragScroll:x=>{r.viewport&&(r.viewport.scrollLeft=p(x,r.dir))}}):n==="vertical"?i.jsx(Gde,{...m,ref:e,onThumbPositionChange:()=>{if(r.viewport&&a.current){const x=r.viewport.scrollTop,w=x4(x,d);a.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:x=>{r.viewport&&(r.viewport.scrollTop=x)},onDragScroll:x=>{r.viewport&&(r.viewport.scrollTop=p(x))}}):null}),Wde=b.forwardRef((t,e)=>{const{sizes:n,onSizesChange:s,...r}=t,a=zi(no,t.__scopeScrollArea),[l,d]=b.useState(),u=b.useRef(null),f=Kt(e,u,a.onScrollbarXChange);return b.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),i.jsx(FV,{"data-orientation":"horizontal",...r,ref:f,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":nb(n)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.x),onDragScroll:m=>t.onDragScroll(m.x),onWheelScroll:(m,p)=>{if(a.viewport){const x=a.viewport.scrollLeft+m.deltaX;t.onWheelScroll(x),HV(x,p)&&m.preventDefault()}},onResize:()=>{u.current&&a.viewport&&l&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:B0(l.paddingLeft),paddingEnd:B0(l.paddingRight)}})}})}),Gde=b.forwardRef((t,e)=>{const{sizes:n,onSizesChange:s,...r}=t,a=zi(no,t.__scopeScrollArea),[l,d]=b.useState(),u=b.useRef(null),f=Kt(e,u,a.onScrollbarYChange);return b.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),i.jsx(FV,{"data-orientation":"vertical",...r,ref:f,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":nb(n)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.y),onDragScroll:m=>t.onDragScroll(m.y),onWheelScroll:(m,p)=>{if(a.viewport){const x=a.viewport.scrollTop+m.deltaY;t.onWheelScroll(x),HV(x,p)&&m.preventDefault()}},onResize:()=>{u.current&&a.viewport&&l&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:B0(l.paddingTop),paddingEnd:B0(l.paddingBottom)}})}})}),[Yde,UV]=DV(no),FV=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:r,onThumbChange:a,onThumbPointerUp:l,onThumbPointerDown:d,onThumbPositionChange:u,onDragScroll:f,onWheelScroll:m,onResize:p,...x}=t,w=zi(no,n),[j,S]=b.useState(null),_=Kt(e,T=>S(T)),E=b.useRef(null),C=b.useRef(""),I=w.viewport,M=s.content-s.viewport,V=Qs(m),z=Qs(u),D=sb(p,10);function A(T){if(E.current){const R=T.clientX-E.current.left,P=T.clientY-E.current.top;f({x:R,y:P})}}return b.useEffect(()=>{const T=R=>{const P=R.target;(j==null?void 0:j.contains(P))&&V(R,M)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[I,j,M,V]),b.useEffect(z,[s,z]),Wh(j,D),Wh(w.content,D),i.jsx(Yde,{scope:n,scrollbar:j,hasThumb:r,onThumbChange:Qs(a),onThumbPointerUp:Qs(l),onThumbPositionChange:z,onThumbPointerDown:Qs(d),children:i.jsx(bt.div,{...x,ref:_,style:{position:"absolute",...x.style},onPointerDown:tt(t.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),E.current=j.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),A(T))}),onPointerMove:tt(t.onPointerMove,A),onPointerUp:tt(t.onPointerUp,T=>{const R=T.target;R.hasPointerCapture(T.pointerId)&&R.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=C.current,w.viewport&&(w.viewport.style.scrollBehavior=""),E.current=null})})})}),F0="ScrollAreaThumb",BV=b.forwardRef((t,e)=>{const{forceMount:n,...s}=t,r=UV(F0,t.__scopeScrollArea);return i.jsx(yi,{present:n||r.hasThumb,children:i.jsx(Kde,{ref:e,...s})})}),Kde=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:s,...r}=t,a=zi(F0,n),l=UV(F0,n),{onThumbPositionChange:d}=l,u=Kt(e,p=>l.onThumbChange(p)),f=b.useRef(void 0),m=sb(()=>{f.current&&(f.current(),f.current=void 0)},100);return b.useEffect(()=>{const p=a.viewport;if(p){const x=()=>{if(m(),!f.current){const w=Zde(p,d);f.current=w,d()}};return d(),p.addEventListener("scroll",x),()=>p.removeEventListener("scroll",x)}},[a.viewport,m,d]),i.jsx(bt.div,{"data-state":l.hasThumb?"visible":"hidden",...r,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:tt(t.onPointerDownCapture,p=>{const w=p.target.getBoundingClientRect(),j=p.clientX-w.left,S=p.clientY-w.top;l.onThumbPointerDown({x:j,y:S})}),onPointerUp:tt(t.onPointerUp,l.onThumbPointerUp)})});BV.displayName=F0;var tE="ScrollAreaCorner",zV=b.forwardRef((t,e)=>{const n=zi(tE,t.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?i.jsx(Xde,{...t,ref:e}):null});zV.displayName=tE;var Xde=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,...s}=t,r=zi(tE,n),[a,l]=b.useState(0),[d,u]=b.useState(0),f=!!(a&&d);return Wh(r.scrollbarX,()=>{var p;const m=((p=r.scrollbarX)==null?void 0:p.offsetHeight)||0;r.onCornerHeightChange(m),u(m)}),Wh(r.scrollbarY,()=>{var p;const m=((p=r.scrollbarY)==null?void 0:p.offsetWidth)||0;r.onCornerWidthChange(m),l(m)}),f?i.jsx(bt.div,{...s,ref:e,style:{width:a,height:d,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function B0(t){return t?parseInt(t,10):0}function $V(t,e){const n=t/e;return isNaN(n)?0:n}function nb(t){const e=$V(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=(t.scrollbar.size-n)*e;return Math.max(s,18)}function Qde(t,e,n,s="ltr"){const r=nb(n),a=r/2,l=e||a,d=r-l,u=n.scrollbar.paddingStart+l,f=n.scrollbar.size-n.scrollbar.paddingEnd-d,m=n.content-n.viewport,p=s==="ltr"?[0,m]:[m*-1,0];return qV([u,f],p)(t)}function x4(t,e,n="ltr"){const s=nb(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-r,l=e.content-e.viewport,d=a-s,u=n==="ltr"?[0,l]:[l*-1,0],f=o1(t,u);return qV([0,l],[0,d])(f)}function qV(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(n-t[0])}}function HV(t,e){return t>0&&t<e}var Zde=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},s=0;return function r(){const a={left:t.scrollLeft,top:t.scrollTop},l=n.left!==a.left,d=n.top!==a.top;(l||d)&&e(),n=a,s=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(s)};function sb(t,e){const n=Qs(t),s=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),b.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,e)},[n,e])}function Wh(t,e){const n=Qs(e);As(()=>{let s=0;if(t){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return r.observe(t),()=>{window.cancelAnimationFrame(s),r.unobserve(t)}}},[t,n])}var Jde=MV,eue=OV,tue=zV;function C1({className:t,children:e,...n}){return i.jsxs(Jde,{"data-slot":"scroll-area",className:Qe("relative",t),...n,children:[i.jsx(eue,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),i.jsx(nue,{}),i.jsx(tue,{})]})}function nue({className:t,orientation:e="vertical",...n}){return i.jsx(LV,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Qe("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:i.jsx(BV,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function sue({brandId:t}){const{user:e}=bn(),n=(e==null?void 0:e.role)==="super_admin",s=t||(e==null?void 0:e.brandId),[r,a]=b.useState([]),[l,d]=b.useState(!0),[u,f]=b.useState(null),[m,p]=b.useState(!1),[x,w]=b.useState(!1),[j,S]=b.useState(null),[_,E]=b.useState(!1),[C,I]=b.useState({name:"",description:"",topics:[],status:"draft",memberCount:0,image:"",brandId:t||""}),[M,V]=b.useState(""),[z,D]=b.useState(!1),[A,T]=b.useState(null),[R,P]=b.useState(!1),[O,F]=b.useState(null),[J,Z]=b.useState(""),[q,Y]=b.useState(!1),[W,H]=b.useState(null),[B,K]=b.useState([]),[ne,te]=b.useState(!1),fe=b.useRef(null),[ke,Ee]=b.useState(""),[ve,le]=b.useState(null),[Ne,Pe]=b.useState({}),[Ge,Ye]=b.useState({totalPosts:0,totalComments:0,totalLikes:0}),ot=b.useRef(null),Dt=ks(),je=pe=>n||pe.authorUid===(e==null?void 0:e.uid)||pe.userId===(e==null?void 0:e.uid),qe=pe=>Dt(`/brand/community/${pe}/edit`),ct=async pe=>{if(pe)try{le(pe),await Zs(Je(ce,"community_posts",pe))}catch{un.error("Failed to delete post")}finally{le(null)}};b.useEffect(()=>{dt()},[t]),b.useEffect(()=>()=>{if(fe.current)try{fe.current()}catch{}if(ot.current)try{ot.current()}catch{}},[]),b.useEffect(()=>{if(!B.length)return;(async()=>{const Pt=B.filter(Wt=>Wt.userId&&!Wt.userName&&!Ne[Wt.userId]).map(Wt=>Wt.userId),wn=[...new Set(Pt)];if(wn.length!==0)try{const Wt=await Promise.all(wn.map(_n=>_r(Je(ce,"users",_n)))),en={};Wt.forEach((_n,ss)=>{const Mn=wn[ss];if(_n.exists()){const Fe=_n.data();en[Mn]=Fe.name||Fe.displayName||Fe.email||"Anonymous"}else en[Mn]="Anonymous"}),Pe(_n=>({..._n,...en}))}catch(Wt){console.error("Error fetching user display names:",Wt)}})()},[B]);const dt=async()=>{d(!0),f(null);try{if(!s)throw new Error("No brand ID available");const pe=yt(Ue(ce,"communities"),ht("brandId","==",s),Jn("createdAt","desc")),wn=(await fs(pe)).docs.map(en=>{var _n,ss;return{id:en.id,...en.data(),createdAt:((ss=(_n=en.data().createdAt)==null?void 0:_n.toDate)==null?void 0:ss.call(_n))||new Date}}),Wt=wn.some(en=>en.createdByRole==="brand_manager"&&en.brandId===s);E(Wt),a(wn)}catch(pe){console.error("Error fetching communities:",pe),f(pe.message),un.error("Failed to load communities")}finally{d(!1)}},pt=pe=>{const{name:Pt,value:wn}=pe.target;I({...C,[Pt]:wn})},X=pe=>{I({...C,status:pe})},re=()=>{if(M.trim()==="")return;const pe=M.trim().toLowerCase().replace(/\s+/g,"-");C.topics.includes(pe)||I({...C,topics:[...C.topics,pe]}),V("")},he=pe=>{F(pe),Z(""),P(!0)},Ae=async()=>{if(!(!J.trim()||!O)){Y(!0);try{await cr(Ue(ce,"community_posts"),{brandId:s,communityId:O.id,authorUid:(e==null?void 0:e.uid)||null,userId:(e==null?void 0:e.uid)||null,userName:(e==null?void 0:e.name)||(e==null?void 0:e.displayName)||(e==null?void 0:e.email)||"Anonymous",content:J.trim(),visibility:"public",likeCount:0,commentCount:0,createdAt:ze(),updatedAt:ze()}),un.success("Posted to community"),P(!1),F(null),Z("")}catch(pe){console.error("Error creating post:",pe),un.error("Failed to create post")}finally{Y(!1)}}},Re=pe=>{if(fe.current){try{fe.current()}catch{}fe.current=null}if(ot.current){try{ot.current()}catch{}ot.current=null}if(!pe){K([]),Ye({totalPosts:0,totalComments:0,totalLikes:0});return}te(!0);try{const Pt=yt(Ue(ce,"community_posts"),ht("brandId","==",s),ht("communityId","==",pe.id),Jn("createdAt","desc"),zr(50));fe.current=Ln(Pt,Wt=>{const en=Wt.docs.map(Mn=>({id:Mn.id,...Mn.data()}));K(en);const _n=en.length,ss=en.reduce((Mn,Fe)=>Mn+(Fe.likeCount||0),0);Ye(Mn=>({...Mn,totalPosts:_n,totalLikes:ss})),te(!1)},Wt=>{console.error("Posts listener error:",Wt),te(!1),un.error("Failed to load posts")});const wn=yt(Ue(ce,"community_comments"),ht("communityId","==",pe.id));ot.current=Ln(wn,Wt=>{Ye(en=>({...en,totalComments:Wt.size}))},Wt=>{console.error("Comments listener error:",Wt)})}catch(Pt){console.warn("Falling back to unordered posts query:",Pt==null?void 0:Pt.message);const wn=yt(Ue(ce,"community_posts"),ht("brandId","==",s),ht("communityId","==",pe.id));fe.current=Ln(wn,en=>{const _n=en.docs.map(Fe=>({id:Fe.id,...Fe.data()}));_n.sort((Fe,Nt)=>{var Fn,cn;return(((Fn=Nt.createdAt)==null?void 0:Fn.seconds)||0)-(((cn=Fe.createdAt)==null?void 0:cn.seconds)||0)}),K(_n);const ss=_n.length,Mn=_n.reduce((Fe,Nt)=>Fe+(Nt.likeCount||0),0);Ye(Fe=>({...Fe,totalPosts:ss,totalLikes:Mn})),te(!1)},()=>te(!1));const Wt=yt(Ue(ce,"community_comments"),ht("communityId","==",pe.id));ot.current=Ln(Wt,en=>{Ye(_n=>({..._n,totalComments:en.size}))},en=>{console.error("Comments listener error:",en)})}},Te=pe=>{H(pe),Re(pe)},Me=async()=>{if(!(!ke.trim()||!W)){Y(!0);try{await cr(Ue(ce,"community_posts"),{brandId:s,communityId:W.id,authorUid:(e==null?void 0:e.uid)||null,userId:(e==null?void 0:e.uid)||null,userName:(e==null?void 0:e.name)||(e==null?void 0:e.displayName)||(e==null?void 0:e.email)||"Anonymous",content:ke.trim(),visibility:"public",likeCount:0,commentCount:0,createdAt:ze(),updatedAt:ze()}),Ee("")}catch{un.error("Failed to post")}finally{Y(!1)}}},Ke=pe=>{I({...C,topics:C.topics.filter(Pt=>Pt!==pe)})},xt=()=>{if(!n&&_){un.error("Your brand already has a community. You can edit that one or post to existing communities.");return}I({name:"",description:"",topics:[],status:"draft",memberCount:0,image:"",brandId:t||(e==null?void 0:e.brandId)||"",isPublic:!0}),w(!1),p(!0)},Jt=pe=>{if(!(n||pe.createdByRole==="brand_manager"&&pe.brandId===(t||(e==null?void 0:e.brandId)))){un.error("You don't have permission to edit this community");return}S(pe),I({name:pe.name||"",description:pe.description||"",topics:pe.topics||[],status:pe.status||"draft",memberCount:pe.memberCount||0,image:pe.image||"",brandId:pe.brandId||t||(e==null?void 0:e.brandId)||"",isPublic:pe.isPublic??!0}),w(!0),p(!0)},dr=pe=>{if(!n){un.error("Only super administrators can delete communities.");return}T(pe),D(!0)},Rs=async()=>{if(!C.name||!C.description){un.error("Name and description are required");return}d(!0);try{const pe={...C,createdBy:(e==null?void 0:e.uid)||null,createdByRole:n?"super_admin":"brand_manager",createdAt:ze(),updatedAt:ze(),isPublic:!0};await cr(Ue(ce,"communities"),pe),un.success("Community created successfully"),p(!1),dt()}catch(pe){console.error("Error creating community:",pe),un.error("Failed to create community")}finally{d(!1)}},ur=async()=>{if(!j||!C.name||!C.description){un.error("Name and description are required");return}d(!0);try{const pe=Je(ce,"communities",j.id),Pt={...C,updatedAt:ze(),isPublic:C.isPublic??!0};await Qn(pe,Pt),un.success("Community updated successfully"),p(!1),dt()}catch(pe){console.error("Error updating community:",pe),un.error("Failed to update community")}finally{d(!1)}},zs=async()=>{if(A){d(!0);try{const pe=Je(ce,"communities",A.id);await Zs(pe),un.success("Community deleted successfully"),D(!1),T(null),dt()}catch(pe){console.error("Error deleting community:",pe),un.error("Failed to delete community")}finally{d(!1)}}},$s=pe=>pe?new Date(pe).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return l&&r.length===0?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx(Da,{className:"h-8 w-8 animate-spin text-primary"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold",children:"Communities"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your brand's communities and topics"})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(Se,{variant:"outline",size:"sm",onClick:dt,disabled:l,children:[i.jsx(Lo,{className:`h-4 w-4 mr-2 ${l?"animate-spin":""}`}),"Refresh"]}),i.jsxs(Se,{onClick:xt,children:[i.jsx(Ma,{className:"h-4 w-4 mr-2"}),"New Community"]})]})]}),u&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:u}),r.length===0&&!l?i.jsx(De,{children:i.jsxs(He,{className:"flex flex-col items-center justify-center h-64",children:[i.jsx(Ts,{className:"h-12 w-12 text-muted-foreground mb-4"}),i.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"No communities found for this brand."}),i.jsxs(Se,{onClick:xt,children:[i.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Create Your First Community"]})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(pe=>i.jsxs(De,{children:[i.jsx(et,{className:"pb-2",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx(nt,{className:"text-xl",children:pe.name}),i.jsxs(Vt,{children:[pe.memberCount||0," members"]})]}),i.jsx(an,{variant:pe.status==="active"?"success":"outline",className:pe.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"",children:pe.status==="active"?"Active":"Draft"})]})}),i.jsxs(He,{children:[pe.image&&i.jsx("img",{src:pe.image,alt:pe.name,className:"w-full h-28 object-cover rounded mb-3",onError:Pt=>Pt.currentTarget.style.display="none"}),i.jsx("p",{className:"text-sm mb-4",children:pe.description}),pe.topics&&pe.topics.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"Topics:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:pe.topics.map(Pt=>i.jsxs(an,{variant:"secondary",children:[i.jsx(yX,{className:"h-3 w-3 mr-1"}),Pt]},Pt))})]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Created: ",$s(pe.createdAt)]})]}),i.jsxs(xg,{className:"flex justify-end space-x-2 pt-0",children:[i.jsx(Se,{variant:"outline",size:"sm",onClick:()=>Te(pe),children:"View"}),i.jsxs(Se,{size:"sm",onClick:()=>he(pe),children:[i.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Post"]}),(()=>{const Pt=n||pe.createdByRole==="brand_manager"&&pe.brandId===s,wn=n;return i.jsxs(i.Fragment,{children:[Pt&&i.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>Jt(pe),children:[i.jsx(Ql,{className:"h-4 w-4 mr-2"}),"Edit"]}),wn&&i.jsxs(Se,{variant:"destructive",size:"sm",onClick:()=>dr(pe),children:[i.jsx(ac,{className:"h-4 w-4 mr-2"}),"Delete"]})]})})()]})]},pe.id))}),W&&i.jsxs(De,{className:"mt-6 ring-1 ring-primary/20",children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs(nt,{children:["Community Feed — ",W.name,i.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-primary/10 text-primary border border-primary/20",children:"Live Feed"})]}),i.jsx(Vt,{children:"Live updates"})]}),i.jsxs("div",{className:"space-x-2",children:[i.jsx(Se,{variant:"outline",size:"sm",onClick:()=>window.open(`/community/${W.id}`,"_blank"),children:"Open"}),i.jsx(Se,{size:"sm",onClick:()=>he(W),children:"Post"})]})]})}),i.jsxs(He,{children:[W.image&&i.jsx("img",{src:W.image,alt:W.name,className:"w-full h-32 object-cover rounded mb-3",onError:pe=>pe.currentTarget.style.display="none"}),i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{className:"bg-white/70 rounded border p-3 text-center",children:[i.jsx("div",{className:"text-xs text-muted-foreground",children:"Posts"}),i.jsx("div",{className:"text-lg font-semibold",children:Ge.totalPosts})]}),i.jsxs("div",{className:"bg-white/70 rounded border p-3 text-center",children:[i.jsx("div",{className:"text-xs text-muted-foreground",children:"Comments"}),i.jsx("div",{className:"text-lg font-semibold",children:Ge.totalComments})]}),i.jsxs("div",{className:"bg-white/70 rounded border p-3 text-center",children:[i.jsx("div",{className:"text-xs text-muted-foreground",children:"Likes"}),i.jsx("div",{className:"text-lg font-semibold",children:Ge.totalLikes})]})]}),i.jsxs("div",{className:"space-y-4 bg-muted/20 p-4 rounded-md border",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"viewerPost",children:"Quick Post"}),i.jsx(ta,{id:"viewerPost",rows:3,value:ke,onChange:pe=>Ee(pe.target.value),placeholder:"Share an update..."}),i.jsx("div",{className:"flex justify-end",children:i.jsx(Se,{onClick:Me,disabled:q||!ke.trim(),children:q?"Posting…":"Post"})})]}),i.jsx(oh,{}),ne?i.jsx("div",{className:"flex justify-center py-6 text-muted-foreground",children:"Loading posts…"}):B.length===0?i.jsx("div",{className:"text-muted-foreground",children:"No posts yet."}):i.jsx("div",{className:"space-y-4",children:B.map(pe=>{var Pt;return i.jsxs("div",{className:"border rounded-md p-3",children:[i.jsxs("div",{className:"text-sm text-muted-foreground mb-1",children:[i.jsx("span",{className:"font-medium",children:pe.userName||Ne[pe.userId]||"Anonymous"})," · ",new Date((((Pt=pe.createdAt)==null?void 0:Pt.seconds)||0)*1e3).toLocaleString()]}),i.jsx("div",{className:"whitespace-pre-wrap",children:pe.content}),je(pe)&&i.jsxs("div",{className:"mt-2 flex gap-3",children:[i.jsx("button",{onClick:()=>qe(pe.id),className:"text-blue-600 hover:underline text-xs",children:"Edit"}),i.jsx("button",{onClick:()=>ct(pe.id),disabled:ve===pe.id,className:"text-red-600 hover:underline text-xs",children:ve===pe.id?"Deleting…":"Delete"})]})]},pe.id)})})]})]})]}),i.jsx(xc,{open:m,onOpenChange:p,children:i.jsxs(nl,{className:"sm:max-w-[600px]",children:[i.jsxs(yc,{children:[i.jsx(sl,{children:x?"Edit Community":"Create New Community"}),i.jsx(Ud,{children:x?"Update the details of your community":"Create a new community for your brand"})]}),i.jsx("div",{className:"grid gap-4 py-4",children:i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"name",children:"Community Name"}),i.jsx(gt,{id:"name",name:"name",value:C.name,onChange:pt,placeholder:"Enter community name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"description",children:"Description"}),i.jsx(ta,{id:"description",name:"description",value:C.description,onChange:pt,placeholder:"Enter community description",rows:4})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"topics",children:"Topics"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(gt,{id:"topicInput",value:M,onChange:pe=>V(pe.target.value),placeholder:"Add topic (press Enter)",onKeyDown:pe=>{pe.key==="Enter"&&(pe.preventDefault(),re())}}),i.jsx(Se,{type:"button",onClick:re,children:"Add"})]}),C.topics.length>0&&i.jsx("div",{className:"mt-2",children:i.jsx(C1,{className:"h-20 w-full rounded-md border p-2",children:i.jsx("div",{className:"flex flex-wrap gap-2",children:C.topics.map(pe=>i.jsxs(an,{variant:"secondary",className:"flex items-center space-x-1",children:[i.jsx("span",{children:pe}),i.jsx("button",{type:"button",className:"ml-1 rounded-full text-muted-foreground hover:bg-muted hover:text-foreground",onClick:()=>Ke(pe),children:i.jsx(lK,{className:"h-3 w-3"})})]},pe))})})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"image",children:"Image URL"}),i.jsx(gt,{id:"image",name:"image",value:C.image,onChange:pt,placeholder:"Enter image URL (optional)"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"status",children:"Status"}),i.jsxs(Ns,{value:C.status,onValueChange:X,children:[i.jsx(ds,{children:i.jsx(Ss,{placeholder:"Select status"})}),i.jsxs(us,{children:[i.jsx($e,{value:"draft",children:"Draft"}),i.jsx($e,{value:"active",children:"Active"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"memberCount",children:"Initial Member Count"}),i.jsx(gt,{id:"memberCount",name:"memberCount",type:"number",min:"0",value:C.memberCount,onChange:pt,placeholder:"0"})]})]})]})}),i.jsxs(u0,{children:[i.jsx(Se,{variant:"outline",onClick:()=>p(!1),disabled:l,children:"Cancel"}),i.jsxs(Se,{onClick:x?ur:Rs,disabled:l||!C.name||!C.description,children:[l&&i.jsx(Da,{className:"mr-2 h-4 w-4 animate-spin"}),x?"Update Community":"Create Community"]})]})]})}),i.jsx(o6,{open:z,onOpenChange:D,children:i.jsxs(l6,{children:[i.jsxs(c6,{children:[i.jsx(u6,{children:"Are you sure?"}),i.jsxs(h6,{children:['This will permanently delete the community "',A==null?void 0:A.name,'". This action cannot be undone.']})]}),i.jsxs(d6,{children:[i.jsx(m6,{disabled:l,children:"Cancel"}),i.jsxs(f6,{onClick:zs,disabled:l,className:"bg-red-600 hover:bg-red-700",children:[l&&i.jsx(Da,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete"]})]})]})}),i.jsx(xc,{open:R,onOpenChange:P,children:i.jsxs(nl,{className:"sm:max-w-[600px]",children:[i.jsxs(yc,{children:[i.jsxs(sl,{children:["New Post ",O?`— ${O.name}`:""]}),i.jsx(Ud,{children:"Share an update with this community."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(We,{htmlFor:"postContent",children:"Content"}),i.jsx(ta,{id:"postContent",rows:5,value:J,onChange:pe=>Z(pe.target.value),placeholder:"Write your post..."})]}),i.jsxs(u0,{children:[i.jsx(Se,{variant:"outline",onClick:()=>P(!1),disabled:q,children:"Cancel"}),i.jsxs(Se,{onClick:Ae,disabled:q||!J.trim(),children:[q&&i.jsx(Da,{className:"mr-2 h-4 w-4 animate-spin"}),"Post"]})]})]})})]})}const rue=t=>{let e="";switch(t){case"pending":e="bg-yellow-100 text-yellow-800";break;case"approved":e="bg-blue-100 text-blue-800";break;case"shipped":e="bg-green-100 text-green-800";break;case"denied":e="bg-red-100 text-red-800";break;case"completed":e="bg-green-100 text-green-800";break;case"in_progress":e="bg-blue-100 text-blue-800";break;default:e="bg-gray-100 text-gray-800"}return i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${e}`,children:t.replace("_"," ")})},iue=t=>{if(!t)return"N/A";const e=t.toDate?t.toDate():new Date(t);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)},aue=({brandId:t})=>{const[e,n]=b.useState([]),[s,r]=b.useState([]),[a,l]=b.useState([]),[d,u]=b.useState({enrolled:0,completed:0}),[f,m]=b.useState({}),[p,x]=b.useState({total:0,last7d:0,last30d:0,series30d:[]}),[w,j]=b.useState([]),[S,_]=b.useState(!0),[E,C]=b.useState({trainings:!0,sampleRequests:!0,announcements:!0,engagement:!0}),[I,M]=b.useState({trainings:null,sampleRequests:null,announcements:null,engagement:null,brandId:null}),{now:V,sevenDaysAgo:z,thirtyDaysAgo:D}=b.useMemo(()=>{const R=new Date,P=new Date;P.setDate(R.getDate()-7);const O=new Date;return O.setDate(R.getDate()-30),{now:R,sevenDaysAgo:P,thirtyDaysAgo:O}},[]);b.useEffect(()=>{let R=!0,P=null,O=null,F=null,J=null;if(!t)return console.error("Missing brandId in BrandDashboardContent"),M(q=>({...q,brandId:"No brand ID provided. Please contact support if this issue persists.",trainings:"Cannot fetch trainings: Brand ID is missing",sampleRequests:"Cannot fetch sample requests: Brand ID is missing",announcements:"Cannot fetch announcements: Brand ID is missing",engagement:"Cannot fetch engagement data: Brand ID is missing"})),C({trainings:!1,sampleRequests:!1,announcements:!1,engagement:!1}),()=>{};M(q=>({...q,brandId:null}));try{const q=yt(Ue(ce,"trainings"),ht("brandId","==",t),ht("published","==",!0),Jn("createdAt","desc"));P=Ln(q,Y=>{if(R)try{const W=Y.docs.map(H=>({id:H.id,...H.data()}));n(W),C(H=>({...H,trainings:!1}))}catch(W){console.error("Error processing trainings data:",W),M(H=>({...H,trainings:`Error processing data: ${W.message}`})),C(H=>({...H,trainings:!1}))}},Y=>{R&&(console.error("Error fetching trainings:",Y),M(W=>({...W,trainings:Y.message})),C(W=>({...W,trainings:!1})))})}catch(q){console.error("Error setting up trainings query:",q),R&&(M(Y=>({...Y,trainings:`Error setting up query: ${q.message}`})),C(Y=>({...Y,trainings:!1})))}try{const q=yt(Ue(ce,"sample_requests"),ht("brandId","==",t),Jn("createdAt","desc"),zr(5));O=Ln(q,Y=>{if(R)try{const W=Y.docs.map(H=>({id:H.id,...H.data()}));r(W),C(H=>({...H,sampleRequests:!1}))}catch(W){console.error("Error processing sample requests data:",W),M(H=>({...H,sampleRequests:`Error processing data: ${W.message}`})),C(H=>({...H,sampleRequests:!1}))}},Y=>{R&&(console.error("Error fetching sample requests:",Y),M(W=>({...W,sampleRequests:Y.message})),C(W=>({...W,sampleRequests:!1})))})}catch(q){console.error("Error setting up sample requests query:",q),R&&(M(Y=>({...Y,sampleRequests:`Error setting up query: ${q.message}`})),C(Y=>({...Y,sampleRequests:!1})))}try{const q=yt(Ue(ce,"announcements"),ht("brandId","==",t),Jn("createdAt","desc"),zr(5));F=Ln(q,Y=>{if(R)try{const W=Y.docs.map(H=>({id:H.id,...H.data()}));l(W),C(H=>({...H,announcements:!1}))}catch(W){console.error("Error processing announcements data:",W),M(H=>({...H,announcements:`Error processing data: ${W.message}`})),C(H=>({...H,announcements:!1}))}},Y=>{R&&(console.error("Error fetching announcements:",Y),M(W=>({...W,announcements:Y.message})),C(W=>({...W,announcements:!1})))})}catch(q){console.error("Error setting up announcements query:",q),R&&(M(Y=>({...Y,announcements:`Error setting up query: ${q.message}`})),C(Y=>({...Y,announcements:!1})))}return(async()=>{try{if(!R)return;const q=yt(Ue(ce,"trainings"),ht("brandId","==",t));let W=(await fs(q)).docs.map(H=>H.id);if(W.length===0){R&&C(H=>({...H,engagement:!1}));return}W.length>10&&(W=W.slice(0,10));try{const H=yt(Ue(ce,"training_progress"),ht("trainingId","in",W),ht("updatedAt",">=",Tn.fromDate(z)));J=Ln(H,B=>{if(R)try{const K=B.docs.map(fe=>fe.data()),ne=K.length,te=K.filter(fe=>fe.status==="completed").length;u({enrolled:ne,completed:te}),C(fe=>({...fe,engagement:!1}))}catch(K){console.error("Error processing engagement data:",K),R&&(M(ne=>({...ne,engagement:`Error processing data: ${K.message}`})),C(ne=>({...ne,engagement:!1})))}},B=>{console.error("Error fetching engagement:",B),R&&(M(K=>({...K,engagement:B.message})),C(K=>({...K,engagement:!1})))})}catch(H){console.error("Error setting up progress query:",H),R&&(M(B=>({...B,engagement:`Error setting up query: ${H.message}`})),C(B=>({...B,engagement:!1})))}}catch(q){console.error("Error fetching training IDs:",q),R&&(M(Y=>({...Y,engagement:`Error fetching training IDs: ${q.message}`})),C(Y=>({...Y,engagement:!1})))}})(),()=>{if(R=!1,typeof P=="function")try{P()}catch(q){console.error("Error unsubscribing from trainings:",q)}if(typeof O=="function")try{O()}catch(q){console.error("Error unsubscribing from requests:",q)}if(typeof F=="function")try{F()}catch(q){console.error("Error unsubscribing from announcements:",q)}if(typeof J=="function")try{J()}catch(q){console.error("Error unsubscribing from progress:",q)}}},[t]),b.useEffect(()=>{if(!t)return;const R=yt(Ue(ce,"brand_follows"),ht("brandId","==",t)),P=Ln(R,O=>{const F=O.size;let J=0,Z=0;const q=new Array(30).fill(0);O.forEach(Y=>{var ne;const W=(ne=Y.data())==null?void 0:ne.createdAt,H=W!=null&&W.toDate?W.toDate():null;if(!H)return;const B=V-H,K=Math.floor(B/864e5);if(K<30){Z+=1;const te=29-K;q[te]+=1}K<7&&(J+=1)}),x({total:F,last7d:J,last30d:Z,series30d:q})},O=>console.error("followers snapshot error:",O));return()=>P()},[t,V]),b.useEffect(()=>{if(!t){m({});return}if(!e||e.length===0){m({});return}let R=!0;const P=e.slice(0,10).map(J=>J.id),O=yt(Ue(ce,"training_progress"),ht("trainingId","in",P)),F=Ln(O,J=>{if(!R)return;const Z={};J.forEach(q=>{const Y=q.data(),W=Y.trainingId;Z[W]||(Z[W]={enrolled:0,completed:0}),Z[W].enrolled+=1,Y.status==="completed"&&(Z[W].completed+=1)}),m(Z)},J=>{console.error("Error fetching training progress counts:",J)});return()=>{if(R=!1,typeof F=="function")try{F()}catch(J){console.error("Error unsubscribing training progress listener:",J)}}},[e,t]),b.useEffect(()=>{let R=!0;return(async()=>{_(!0);try{if(!t||e.length===0){R&&(j([]),_(!1));return}const O=Tn.fromDate(D),F=e.slice(0,50),J=await Promise.allSettled(F.map(async Y=>{const W=yt(Ue(ce,"training_progress"),ht("trainingId","==",Y.id),ht("status","==","completed"),ht("completedAt",">=",O)),H=await ka(W),B=H&&H.data&&typeof H.data().count=="number"?H.data().count:0;return{id:Y.id,title:Y.title||Y.name||"Untitled training",count:B}}));if(!R)return;const q=J.map((Y,W)=>Y.status==="fulfilled"?Y.value:{id:F[W].id,title:F[W].title||F[W].name||"Untitled training",count:0}).sort((Y,W)=>W.count-Y.count).slice(0,5);j(q)}catch{R&&j([])}finally{R&&_(!1)}})(),()=>{R=!1}},[t,e,D]);const A=R=>{if(!R)return"N/A";const P=R.toDate?R.toDate():new Date(R);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(P)};if(I.brandId)return i.jsx("div",{className:"p-6",children:i.jsx(De,{className:"p-6 bg-red-50 border border-red-200",children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx(o0,{className:"h-12 w-12 text-red-500 mb-4"}),i.jsx("h2",{className:"text-xl font-semibold text-red-700 mb-2",children:"Brand Dashboard Error"}),i.jsx("p",{className:"text-red-600 mb-4",children:I.brandId}),i.jsx("p",{className:"text-gray-600 mb-6",children:"This could be due to missing permissions or an invalid brand identifier. Please ensure you are logged in with the correct account and have brand manager permissions."}),i.jsx(Se,{variant:"outline",onClick:()=>window.location.reload(),children:"Retry"})]})})});const T=()=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(De,{className:"overflow-hidden",children:i.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-2 rounded-full",children:i.jsx($a,{className:"h-5 w-5 text-blue-600 dark:text-blue-300"})}),i.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900 dark:text-gray-100",children:"My Trainings"})]}),i.jsx(Se,{variant:"outline",size:"sm",asChild:!0,children:i.jsx($n,{to:"/brand/trainings",children:"View All"})})]}),E.trainings?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):I.trainings?i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-300 p-4 rounded-md",children:i.jsxs("p",{children:["Error loading trainings: ",I.trainings]})}):e.length===0?i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md p-6 text-center",children:[i.jsx($a,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),i.jsx("h3",{className:"text-gray-900 dark:text-gray-100 font-medium mb-1",children:"No Trainings Found"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"You don't have any published trainings yet."}),i.jsx(Se,{variant:"outline",size:"sm",asChild:!0,children:i.jsx($n,{to:"/brand/trainings/new",children:"Create Training"})}),i.jsx("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400",children:i.jsx("p",{children:"Need sample data? Use the Demo Data tool in Admin panel."})})]}):i.jsx("div",{className:"space-y-4",children:e.slice(0,4).map(R=>{var P,O,F,J;return i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-md p-4",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:R.title}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-1",children:R.description})]}),i.jsx(Se,{variant:"ghost",size:"sm",className:"ml-2",asChild:!0,children:i.jsxs($n,{to:`/brand/trainings/${R.id}`,children:[i.jsx(Zi,{className:"h-4 w-4 mr-1"}),"View"]})})]}),i.jsxs("div",{className:"flex items-center mt-3 text-sm",children:[i.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400 mr-4",children:[i.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100 mr-1",children:((P=f[R.id])==null?void 0:P.enrolled)??((O=R.metrics)==null?void 0:O.enrolled)??0}),"Enrolled"]}),i.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[i.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100 mr-1",children:((F=f[R.id])==null?void 0:F.completed)??((J=R.metrics)==null?void 0:J.completed)??0}),"Completed"]})]})]},R.id)})})]})}),i.jsx(De,{className:"overflow-hidden",children:i.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"bg-green-100 dark:bg-green-900 p-2 rounded-full",children:i.jsx(Od,{className:"h-5 w-5 text-green-600 dark:text-green-300"})}),i.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Engagement (7 days)"})]})}),E.engagement?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-green-500"})}):I.engagement?i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-300 p-4 rounded-md",children:i.jsxs("p",{children:["Error loading engagement data: ",I.engagement]})}):i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"New Enrollments"}),i.jsx("h4",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:d.enrolled})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completed"}),i.jsx("h4",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:d.completed})]}),i.jsx("div",{className:"col-span-2 mt-2",children:i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:d.enrolled===0&&d.completed===0?i.jsx("span",{children:"No recent engagement data. Try seeding demo data for testing."}):i.jsxs("span",{children:["Showing data from ",A(z)," to ",A(V)]})})})]})]})}),i.jsx(De,{className:"overflow-hidden",children:i.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900 p-2 rounded-full",children:i.jsx(qj,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-300"})}),i.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Top Trainings (30 days)"})]})}),S?i.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((R,P)=>i.jsxs("div",{className:"flex items-center justify-between animate-pulse",children:[i.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"}),i.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-12"})]},P))}):w.length===0?i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md p-6 text-center",children:[i.jsx(qj,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),i.jsx("h3",{className:"text-gray-900 dark:text-gray-100 font-medium mb-1",children:"No Training Completions"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"There have been no training completions in the last 30 days."})]}):i.jsx("ul",{className:"space-y-3",children:w.map(R=>i.jsxs("li",{className:"flex items-center justify-between border border-gray-200 dark:border-gray-700 rounded-md px-4 py-2",children:[i.jsx("span",{className:"truncate pr-2",children:R.title}),i.jsx("span",{className:"text-sm font-semibold bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full px-2 py-0.5",children:R.count})]},R.id))})]})}),i.jsx(De,{className:"overflow-hidden",children:i.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"bg-purple-100 dark:bg-purple-900 p-2 rounded-full",children:i.jsx(Ts,{className:"h-5 w-5 text-purple-600 dark:text-purple-300"})}),i.jsx("h3",{className:"ml-3 text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Followers (30 days)"})]})}),i.jsxs("div",{className:"flex space-x-4 mb-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),i.jsx("p",{className:"text-xl font-bold",children:p.total})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Last 7 d"}),i.jsx("p",{className:"text-xl font-bold",children:p.last7d})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Last 30 d"}),i.jsx("p",{className:"text-xl font-bold",children:p.last30d})]})]}),i.jsx("div",{className:"flex items-end space-x-0.5 h-20",children:p.series30d.map((R,P)=>{const O=Math.max(...p.series30d,1),F=R/O*100;return i.jsx("div",{style:{height:`${F}%`},className:"flex-1 bg-purple-400/70 dark:bg-purple-300/80 rounded-t"},P)})})]})})]});return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:"Brand Dashboard"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Overview of your brand's performance and activities"})]}),i.jsxs(ll,{defaultValue:"overview",className:"w-full",children:[i.jsxs(eo,{className:"mb-6",children:[i.jsx(on,{value:"overview",children:"Overview"}),i.jsx(on,{value:"analytics",children:"Analytics"}),i.jsx(on,{value:"roi",children:"ROI Calculator"}),i.jsx(on,{value:"community",children:"Community Metrics"})]}),i.jsx(yn,{value:"overview",children:T()}),i.jsx(yn,{value:"analytics",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:i.jsx(Lde,{brandId:t})})}),i.jsx(yn,{value:"roi",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:i.jsx(Vde,{brandId:t})})}),i.jsx(yn,{value:"community",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:i.jsx(Bde,{brandId:t})})})]})]})},y4=()=>{var D,A;const{brandId:t}=Nc(),e=ks(),n=M4(),{user:s,signOut:r}=bn(),{logout:a}=Rre(),d=(typeof window<"u"?localStorage.getItem("selectedBrandId"):null)||(s==null?void 0:s.brandId)||t||"demo-brand",[u,f]=b.useState(!1),[m,p]=b.useState("analytics"),[x,w]=b.useState(!1),[j,S]=b.useState(!1);b.useEffect(()=>{const T=R=>{(x||j)&&(R.target.closest(".dropdown-container")||(w(!1),S(!1)))};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[x,j]);const _=s||{name:"Brand Manager",email:"manager@engagenatural.com",avatar:null,notifications:3},E=[{id:"analytics",label:"Analytics Dashboard",icon:qj,description:"Key metrics and ROI"},{id:"users",label:"User Management",icon:Ts,description:"Manage team access"},{id:"content",label:"Content Management",icon:hi,description:"Publish and organize content"},{id:"samples",label:"Sample Requests",icon:i0,description:"Manage sample requests"},{id:"communities",label:"Communities",icon:Ts,description:"Manage communities & posts"},{id:"brand",label:"Brand Performance",icon:Od,description:"Track engagement metrics"},{id:"activity",label:"Activity Feed",icon:Xl,description:"Recent updates and events"},{id:"settings",label:"Settings",icon:tl,description:"Configure brand preferences"},{id:"help",label:"Help & Support",icon:aK,description:"Documentation and resources"}],C=T=>{p(T),f(!1)},I=()=>_.name?_.name.split(" ").map(T=>T[0]).join("").toUpperCase():"U",M=async()=>{a()},V=[{id:1,title:"New challenge completed",description:"User John D. completed the Eco-Shopping challenge",time:"10 minutes ago",read:!1},{id:2,title:"ROI milestone reached",description:"Your brand has reached 250% ROI growth",time:"2 hours ago",read:!1},{id:3,title:"New user registration spike",description:"25 new users registered in the last hour",time:"5 hours ago",read:!0}],z=({brandId:T})=>{const[R,P]=b.useState([]),[O,F]=b.useState(!0),[J,Z]=b.useState(null);return b.useEffect(()=>{if(!T)return;const q=yt(Ue(ce,"sample_requests"),ht("brandId","==",T),Jn("createdAt","desc")),Y=Ln(q,W=>{try{P(W.docs.map(H=>({id:H.id,...H.data()}))),F(!1)}catch(H){console.error(H),Z(H.message),F(!1)}},W=>{console.error(W),Z(W.message),F(!1)});return()=>Y()},[T]),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:"Sample Requests"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Review and manage all sample requests for your brand"})]}),O?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-purple-500"})}):J?i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-300 p-6 rounded-md",children:i.jsxs("p",{children:["Error loading sample requests: ",J]})}):R.length===0?i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md p-6 text-center",children:[i.jsx(i0,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),i.jsx("h3",{className:"text-gray-900 dark:text-gray-100 font-medium mb-1",children:"No Sample Requests"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"You don't have any sample requests yet."})]}):i.jsx("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg shadow",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Quantity"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:R.map(q=>i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[i.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100",children:q.quantity}),i.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:iue(q.createdAt)}),i.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:rue(q.status)})]},q.id))})]})})]})};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[u&&i.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-50 lg:hidden",onClick:()=>f(!1)}),i.jsx("div",{className:"lg:w-72 flex-shrink-0",children:i.jsxs("div",{className:"h-full bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[i.jsxs("div",{className:"flex items-center h-16 px-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/90 flex items-center justify-center text-white font-bold text-lg",children:"E"}),i.jsx("span",{className:"ml-3 text-lg font-semibold text-gray-800 dark:text-gray-200",children:"EngageNatural"})]}),i.jsx("div",{className:"px-4 py-4 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 rounded-md bg-primary/10 flex items-center justify-center",children:i.jsx(ph,{className:"h-4 w-4 text-primary"})}),i.jsxs("div",{className:"ml-2",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:d}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Brand Manager"})]})]}),i.jsx(Se,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(ah,{className:"h-4 w-4"})})]})}),i.jsxs("nav",{className:"flex-1 overflow-y-auto py-4 px-3",children:[i.jsx("div",{className:"mb-2 px-3",children:i.jsx("h3",{className:"text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Main"})}),E.map(T=>i.jsxs("button",{className:`flex items-center w-full px-4 py-2.5 text-sm rounded-md mb-1 transition-colors ${m===T.id?"text-primary-foreground bg-primary font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>C(T.id),children:[i.jsx(T.icon,{className:`h-5 w-5 mr-3 ${m===T.id?"text-primary-foreground":"text-gray-500 dark:text-gray-400"}`}),i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx("span",{children:T.label}),m===T.id&&i.jsx("span",{className:"text-xs opacity-80",children:T.description})]})]},T.id)),i.jsx(oh,{className:"my-4"}),i.jsx("div",{className:"mb-2 px-3",children:i.jsx("h3",{className:"text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Community"})}),i.jsxs("button",{className:"flex items-center w-full px-4 py-2.5 text-sm rounded-md mb-1 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>e("/brand/community"),children:[i.jsx(Ts,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),i.jsx("span",{children:"Community (list)"})]}),i.jsxs("button",{className:"flex items-center w-full px-4 py-2.5 text-sm rounded-md mb-1 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>e("/brand/community/new"),children:[i.jsx(Ql,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),i.jsx("span",{children:"New Post"})]}),i.jsx(oh,{className:"my-4"}),i.jsx("div",{className:"mb-2 px-3",children:i.jsx("h3",{className:"text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Account"})}),i.jsxs("button",{className:"flex items-center w-full px-4 py-2.5 text-sm rounded-md mb-1 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:M,children:[i.jsx(xh,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),i.jsx("span",{children:"Sign Out"})]})]}),i.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center",children:[i.jsxs(bh,{className:"h-10 w-10 border border-primary/20",children:[i.jsx(wh,{src:_.avatar,alt:_.name}),i.jsx(_h,{className:"bg-primary/10 text-primary",children:I()})]}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:_.name}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:_.email})]})]})})]})}),i.jsxs("div",{className:`fixed inset-y-0 left-0 z-30 w-72 bg-white dark:bg-gray-800 transform ${u?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out lg:hidden shadow-xl`,children:[i.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/90 flex items-center justify-center text-white font-bold text-lg",children:"E"}),i.jsx("span",{className:"ml-3 text-lg font-semibold text-gray-800 dark:text-gray-200",children:"EngageNatural"})]}),i.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:i.jsx(WN,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"px-4 py-4 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 rounded-md bg-primary/10 flex items-center justify-center",children:i.jsx(ph,{className:"h-4 w-4 text-primary"})}),i.jsxs("div",{className:"ml-2",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:d}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Brand Manager"})]})]}),i.jsx(Se,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(ah,{className:"h-4 w-4"})})]})}),i.jsxs("nav",{className:"flex-1 overflow-y-auto py-4 px-3",children:[i.jsx("div",{className:"mb-2 px-3",children:i.jsx("h3",{className:"text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Main"})}),E.map(T=>i.jsxs("button",{className:`flex items-center w-full px-4 py-2.5 text-sm rounded-md mb-1 transition-colors ${m===T.id?"text-primary-foreground bg-primary font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>C(T.id),children:[i.jsx(T.icon,{className:`h-5 w-5 mr-3 ${m===T.id?"text-primary-foreground":"text-gray-500 dark:text-gray-400"}`}),i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx("span",{children:T.label}),m===T.id&&i.jsx("span",{className:"text-xs opacity-80",children:T.description})]})]},T.id)),i.jsx(oh,{className:"my-4"}),i.jsx("div",{className:"mb-2 px-3",children:i.jsx("h3",{className:"text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Community"})}),i.jsxs("button",{className:"flex items-center w-full px-4 py-2.5 text-sm rounded-md mb-1 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>e("/brand/community"),children:[i.jsx(Ts,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),i.jsx("span",{children:"Community (list)"})]}),i.jsxs("button",{className:"flex items-center w-full px-4 py-2.5 text-sm rounded-md mb-1 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>e("/brand/community/new"),children:[i.jsx(Ql,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),i.jsx("span",{children:"New Post"})]}),i.jsx(oh,{className:"my-4"}),i.jsx("div",{className:"mb-2 px-3",children:i.jsx("h3",{className:"text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Account"})}),i.jsxs("button",{className:"flex items-center w-full px-4 py-2.5 text-sm rounded-md mb-1 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:M,children:[i.jsx(xh,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),i.jsx("span",{children:"Sign Out"})]})]}),i.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center",children:[i.jsxs(bh,{className:"h-10 w-10 border border-primary/20",children:[i.jsx(wh,{src:_.avatar,alt:_.name}),i.jsx(_h,{className:"bg-primary/10 text-primary",children:I()})]}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:_.name}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:_.email})]})]})})]}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsxs("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between h-16 px-4 lg:px-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{onClick:()=>f(!0),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 lg:hidden mr-3",children:i.jsx(KK,{className:"h-6 w-6"})}),i.jsxs("div",{className:"hidden md:flex items-center text-sm",children:[i.jsx($n,{to:"/",className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"Home"}),i.jsx("span",{className:"mx-2 text-gray-400 dark:text-gray-500",children:"/"}),i.jsx($n,{to:`/brand/${d}`,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"Brands"}),i.jsx("span",{className:"mx-2 text-gray-400 dark:text-gray-500",children:"/"}),i.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:((D=E.find(T=>T.id===m))==null?void 0:D.label)||"Dashboard"})]}),i.jsx("div",{className:"md:hidden text-lg font-semibold text-gray-900 dark:text-gray-100",children:((A=E.find(T=>T.id===m))==null?void 0:A.label)||"Dashboard"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative hidden md:block",children:[i.jsx(qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 h-4 w-4"}),i.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 w-64 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary dark:text-gray-200 text-sm"})]}),i.jsxs(Se,{variant:"outline",size:"sm",className:"hidden md:flex items-center space-x-1",children:[i.jsx(Sv,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:"Export"})]}),i.jsxs(Se,{variant:"outline",size:"sm",className:"hidden md:flex items-center space-x-1",children:[i.jsx(cf,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:"Last 30 Days"}),i.jsx(ah,{className:"h-4 w-4 ml-1"})]}),i.jsx("div",{className:"relative dropdown-container",children:i.jsxs(Ho,{open:x,onOpenChange:w,children:[i.jsx(Wo,{asChild:!0,children:i.jsxs(Se,{variant:"ghost",size:"sm",className:"relative h-9 w-9 rounded-full p-0",children:[i.jsx($N,{className:"h-5 w-5"}),_.notifications>0&&i.jsx("span",{className:"absolute top-0 right-0 block h-2.5 w-2.5 rounded-full bg-primary ring-2 ring-white dark:ring-gray-800"})]})}),i.jsxs(Wa,{align:"end",className:"w-80",children:[i.jsx(Uh,{className:"font-normal",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-sm font-semibold",children:"Notifications"}),i.jsxs(an,{variant:"outline",className:"text-xs",children:[V.filter(T=>!T.read).length," new"]})]})}),i.jsx(fi,{}),V.map(T=>i.jsx(zt,{className:"p-0 focus:bg-transparent",children:i.jsxs("div",{className:`w-full p-3 border-l-2 ${T.read?"border-transparent":"border-primary"} hover:bg-muted/50`,children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("p",{className:"text-sm font-medium",children:T.title}),i.jsx("span",{className:"text-xs text-muted-foreground",children:T.time})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:T.description})]})},T.id)),i.jsx(fi,{}),i.jsx(zt,{className:"justify-center text-center text-sm text-primary",children:"View all notifications"})]})]})}),i.jsx("div",{className:"relative dropdown-container",children:i.jsxs(Ho,{open:j,onOpenChange:S,children:[i.jsx(Wo,{asChild:!0,children:i.jsxs(Se,{variant:"ghost",className:"relative h-9 flex items-center space-x-2 rounded-full",children:[i.jsxs(bh,{className:"h-8 w-8",children:[i.jsx(wh,{src:_.avatar,alt:_.name}),i.jsx(_h,{className:"bg-primary/10 text-primary",children:I()})]}),i.jsx("span",{className:"hidden md:inline-block text-sm",children:_.name}),i.jsx(ah,{className:"hidden md:block h-4 w-4"})]})}),i.jsxs(Wa,{align:"end",className:"w-56",children:[i.jsx(Uh,{className:"font-normal",children:i.jsxs("div",{className:"flex flex-col space-y-1",children:[i.jsx("p",{className:"text-sm font-medium leading-none",children:_.name}),i.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:_.email})]})}),i.jsx(fi,{}),i.jsxs(zt,{children:[i.jsx(c0,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"My Profile"})]}),i.jsxs(zt,{children:[i.jsx(ph,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Brand Settings"})]}),i.jsxs(zt,{children:[i.jsx(tl,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Account Settings"})]}),i.jsx(fi,{}),i.jsxs(zt,{className:"text-red-600 focus:text-red-600",onSelect:M,children:[i.jsx(xh,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Sign out"})]})]})]})})]})]}),i.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900",children:n?i.jsx("div",{className:"w-full p-0 md:p-6",children:n}):i.jsxs(i.Fragment,{children:[m==="analytics"&&i.jsx(aue,{brandId:d}),m==="users"&&i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:"User Management"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage team members and their access permissions"})]}),i.jsx(De,{className:"p-6",children:i.jsx("p",{children:"User management content will be displayed here."})})]}),m==="content"&&i.jsx("div",{className:"w-full p-0 md:p-6",children:i.jsx(kre,{brandId:d})}),m==="samples"&&i.jsx("div",{className:"w-full p-6",children:i.jsx(z,{brandId:d})}),m==="communities"&&i.jsx("div",{className:"w-full p-0 md:p-6",children:i.jsx(sue,{brandId:d})}),m==="brand"&&i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:"Brand Performance"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Track your brand's performance and engagement metrics"})]}),i.jsx(De,{className:"p-6",children:i.jsx("p",{children:"Brand performance metrics will be displayed here."})})]}),m==="activity"&&i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:"Activity Feed"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Recent activity and events from your brand"})]}),i.jsx(De,{className:"p-6",children:i.jsx("p",{children:"Activity feed will be displayed here."})})]}),m==="settings"&&i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:"Settings"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Configure your brand settings and preferences"})]}),i.jsxs(De,{className:"p-6 space-y-4",children:[i.jsx("p",{children:"Settings options will be displayed here."}),i.jsx(Se,{asChild:!0,variant:"outline",children:i.jsx($n,{to:`/brand-dashboard/${d}/style-guide`,children:"View Brand Style Guide"})})]})]}),m==="help"&&i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:"Help & Support"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Resources and documentation to help you succeed"})]}),i.jsx(De,{className:"p-6",children:i.jsx("p",{children:"Help and support resources will be displayed here."})})]})]})})]})]})},sj=!1;function oue(){const[t,e]=b.useState([]),[n,s]=b.useState(!0),[r,a]=b.useState(null),[l,d]=b.useState("all"),[u,f]=b.useState({title:"",description:"",content:"",imageUrl:"",published:!1,brandId:""}),[m,p]=b.useState(!1),[x,w]=b.useState(null),[j,S]=b.useState(!1),[_,E]=b.useState(null),[C,I]=b.useState(!1),[M,V]=b.useState(!1),{user:z,brandId:D}=bn();b.useEffect(()=>{A()},[]);const A=async()=>{s(!0),a(null);try{const H=Ue(ce,"lessons"),K=(await f1(H,"LessonsManager list")).docs.map(ne=>({id:ne.id,...ne.data()}));K.sort((ne,te)=>ne.createdAt&&te.createdAt?te.createdAt.seconds-ne.createdAt.seconds:0),e(K)}catch(H){console.error("Error fetching lessons:",H),a("Failed to fetch lessons. Please try again."),un.error("Failed to fetch lessons.")}finally{s(!1)}},T=H=>{if(!H)return"";const B=typeof H=="object"&&H.url?H.url:H;return typeof B!="string"?(console.warn("Invalid URL format received:",B),""):B},R=H=>{const{name:B,value:K,type:ne,checked:te}=H.target;f({...u,[B]:ne==="checkbox"?te:K})},P=H=>{try{console.debug("File upload complete, result:",H);const B=T(H);f({...u,imageUrl:B}),V(!1),un.success("Image uploaded successfully.")}catch(B){console.error("Error processing upload result:",B),V(!1),un.error("Failed to process uploaded image.")}},O=H=>{console.error("File upload error:",H),V(!1),un.error(H.message||"Failed to upload image.")},F=async H=>{H.preventDefault(),S(!0);try{const B={...u,brandId:D||"default",updatedAt:new Date};if(m)await Qn(Je(ce,"lessons",x),B),un.success("Your lesson has been updated successfully."),p(!1),w(null);else{B.createdAt=new Date;const K=await cr(Ue(ce,"lessons"),B);un.success("Your lesson has been created successfully."),f({title:"",description:"",content:"",imageUrl:"",published:!1,brandId:D||"default"})}A()}catch(B){console.error("Error saving lesson:",B),un.error("Failed to save lesson. Please try again.")}finally{S(!1)}},J=async(H,B)=>{if(confirm("Are you sure you want to delete this lesson?"))try{if(await Zs(Je(ce,"lessons",H)),B)try{let K;if(!(sj&&B.includes("localhost"))){const ne=B.split("/o/")[1];ne&&(K=decodeURIComponent(ne.split("?")[0]))}if(K){const ne=af(Xa,K);await fG(ne)}}catch(K){console.error("Error deleting image:",K)}e(t.filter(K=>K.id!==H)),un.success("The lesson has been deleted successfully.")}catch(K){console.error("Error deleting lesson:",K),un.error("Failed to delete lesson. Please try again.")}},Z=async H=>{try{const B=await _r(Je(ce,"lessons",H));if(B.exists()){const K=B.data();f({title:K.title||"",description:K.description||"",content:K.content||"",imageUrl:K.imageUrl||"",published:K.published||!1,brandId:K.brandId||D||"default"}),p(!0),w(H),window.scrollTo({top:0,behavior:"smooth"})}}catch(B){console.error("Error fetching lesson for edit:",B),un.error("Failed to load lesson for editing.")}},q=async H=>{try{const B=await _r(Je(ce,"lessons",H));B.exists()&&(E({id:H,...B.data()}),I(!0))}catch(B){console.error("Error fetching lesson for preview:",B),un.error("Failed to load lesson preview.")}},Y=()=>{p(!1),w(null),f({title:"",description:"",content:"",imageUrl:"",published:!1,brandId:D||"default"})},W=t.filter(H=>l==="all"?!0:l==="published"?H.published:l==="drafts"?!H.published:!0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[i.jsx("div",{className:"lg:col-span-3",children:i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:m?"Edit Lesson":"Create New Lesson"}),i.jsx(Vt,{children:m?"Update the lesson details below":"Fill in the details to create a new lesson"})]}),i.jsx(He,{children:i.jsxs("form",{onSubmit:F,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"title",children:"Title"}),i.jsx(gt,{id:"title",name:"title",value:u.title,onChange:R,placeholder:"Enter lesson title",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"description",children:"Description"}),i.jsx(ta,{id:"description",name:"description",value:u.description,onChange:R,placeholder:"Enter a short description",rows:2})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{htmlFor:"content",children:"Content"}),i.jsx(ta,{id:"content",name:"content",value:u.content,onChange:R,placeholder:"Enter lesson content",rows:6,required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(We,{children:"Cover Image"}),i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsxs("div",{className:"flex flex-col space-y-1 mb-1",children:[i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:[i.jsxs("span",{className:"inline-flex items-center mr-2 text-blue-600",children:[i.jsx(Sy,{className:"h-3.5 w-3.5 mr-1"}),i.jsx("span",{className:"font-medium",children:"Image requirements:"})]}),i.jsx("span",{className:"text-xs",children:"16:9 ratio (1600×900 px recommended) · Max 5 MB"})]}),i.jsx("div",{className:"flex items-center",children:i.jsxs("a",{href:"https://www.iloveimg.com/resize-image",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs text-blue-600 hover:text-blue-800",children:[i.jsx("span",{className:"underline",children:"Need to resize an image?"}),i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-1",children:[i.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),i.jsx("polyline",{points:"15 3 21 3 21 9"}),i.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})})]}),u.imageUrl&&i.jsx("div",{className:"relative aspect-video w-full max-w-md overflow-hidden rounded-md border border-gray-200",children:i.jsx("img",{src:u.imageUrl,alt:"Cover",className:"h-full w-full object-cover",onError:H=>{H.target.onerror=null,H.target.src="https://placehold.co/600x400?text=Image+Not+Found"}})}),u.imageUrl&&sj,i.jsx(g1,{onUploadComplete:P,onUploadError:O,folder:"lessons",brandId:D,buttonText:"Upload Cover Image",allowedTypes:["image/jpeg","image/png","image/webp"],maxSizeMB:5,resizeImage:!0,maxWidth:1600,maxHeight:900,quality:.85})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"published",name:"published",checked:u.published,onChange:R,className:"h-4 w-4 rounded border-gray-300"}),i.jsx(We,{htmlFor:"published",children:"Publish this lesson"})]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(Se,{type:"submit",disabled:j,children:j?i.jsxs(i.Fragment,{children:[i.jsx(Da,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Updating...":"Creating..."]}):i.jsx(i.Fragment,{children:m?"Update Lesson":"Create Lesson"})}),m&&i.jsx(Se,{type:"button",variant:"outline",onClick:Y,children:"Cancel"})]})]})})]})}),i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(De,{className:"sticky top-4",children:[i.jsxs(et,{className:"pb-2",children:[i.jsx(nt,{children:"Live Preview"}),i.jsx(Vt,{children:"See how your lesson will appear"})]}),i.jsxs(He,{className:"space-y-4",children:[i.jsx("h2",{className:"text-2xl font-bold break-words",children:u.title||"Lesson Title"}),u.imageUrl?i.jsx("div",{className:"aspect-video w-full overflow-hidden rounded-md bg-gray-100",children:i.jsx("img",{src:u.imageUrl,alt:u.title,className:"h-full w-full object-cover",onError:H=>{H.target.onerror=null,H.target.src="https://placehold.co/600x400?text=Image+Not+Found"}})}):i.jsx("div",{className:"aspect-video w-full overflow-hidden rounded-md bg-gray-100 flex items-center justify-center",children:i.jsx(Sy,{className:"h-12 w-12 text-gray-300"})}),i.jsx("div",{className:"font-medium text-gray-700",children:u.description||"Lesson description will appear here…"}),i.jsx(C1,{className:"h-[300px] rounded border p-4",children:i.jsx("div",{className:"prose max-w-none",children:u.content?u.content.split(`
`).map((H,B)=>i.jsx("p",{children:H},B)):i.jsx("p",{className:"text-gray-400",children:"Lesson content will appear here…"})})}),i.jsx(an,{variant:u.published?"success":"secondary",children:u.published?"Published":"Draft"})]})]})})]}),i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Manage Lessons"}),i.jsx(Vt,{children:"View, edit, and delete existing lessons"})]}),i.jsx(He,{children:i.jsxs(ll,{value:l,onValueChange:d,children:[i.jsxs(eo,{className:"mb-4",children:[i.jsx(on,{value:"all",children:"All Lessons"}),i.jsx(on,{value:"published",children:"Published"}),i.jsx(on,{value:"drafts",children:"Drafts"})]}),n?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx(Da,{className:"h-8 w-8 animate-spin text-primary"}),i.jsx("span",{className:"ml-2",children:"Loading lessons..."})]}):r?i.jsxs(Pi,{variant:"destructive",children:[i.jsx(js,{className:"h-4 w-4"}),i.jsx(Ed,{children:"Error"}),i.jsx(Oi,{children:r})]}):W.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[i.jsx(Sy,{className:"h-12 w-12 text-muted-foreground"}),i.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No lessons found"}),i.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:l==="all"?"Get started by creating your first lesson":l==="published"?"No published lessons found":"No draft lessons found"})]}):i.jsx("div",{className:"space-y-4",children:W.map(H=>i.jsx(De,{className:"overflow-hidden",children:i.jsxs("div",{className:"flex flex-col md:flex-row",children:[H.imageUrl&&i.jsx("div",{className:"aspect-video w-full md:w-1/4 overflow-hidden",children:i.jsx("img",{src:H.imageUrl,alt:H.title,className:"h-full w-full object-cover",onError:B=>{B.target.onerror=null,B.target.src="https://placehold.co/600x400?text=Image+Not+Found"}})}),i.jsxs("div",{className:"flex-1 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-medium",children:H.title}),i.jsx(an,{variant:H.published?"success":"secondary",children:H.published?"Published":"Draft"})]}),i.jsx("p",{className:"mt-2 text-sm text-muted-foreground line-clamp-2",children:H.description||"No description provided"}),i.jsxs("div",{className:"mt-4 flex space-x-2",children:[i.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>q(H.id),children:[i.jsx(Zi,{className:"mr-1 h-4 w-4"}),"Preview"]}),i.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>Z(H.id),children:[i.jsx(eX,{className:"mr-1 h-4 w-4"}),"Edit"]}),i.jsxs(Se,{variant:"outline",size:"sm",className:"text-red-500 hover:bg-red-50 hover:text-red-600",onClick:()=>J(H.id,H.imageUrl),children:[i.jsx(ac,{className:"mr-1 h-4 w-4"}),"Delete"]})]})]})]})},H.id))})]})})]}),_&&i.jsx(xc,{open:C,onOpenChange:I,children:i.jsxs(nl,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(yc,{children:[i.jsx(sl,{children:_.title}),i.jsx(Ud,{children:_.description})]}),_.imageUrl&&i.jsx("div",{className:"aspect-video w-full overflow-hidden rounded-md",children:i.jsx("img",{src:_.imageUrl,alt:_.title,className:"h-full w-full object-cover",onError:H=>{H.target.onerror=null,H.target.src="https://placehold.co/600x400?text=Image+Not+Found"}})}),i.jsx(C1,{className:"h-[400px] rounded-md border p-4",children:i.jsx("div",{className:"prose max-w-none",children:_.content.split(`
`).map((H,B)=>i.jsx("p",{children:H},B))})}),i.jsx(u0,{children:i.jsx(Se,{onClick:()=>I(!1),children:"Close"})})]})})]})}function lue(){const[t,e]=b.useState("overview"),{user:n,brandId:s,brandName:r}=bn(),a=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold",children:[r||"Brand"," Dashboard"]}),i.jsx("p",{className:"text-muted-foreground",children:a})]}),i.jsxs("div",{className:"mt-4 md:mt-0 flex space-x-2",children:[i.jsxs(Se,{variant:"outline",size:"sm",children:[i.jsx(tl,{className:"h-4 w-4 mr-2"}),"Settings"]}),i.jsxs(Se,{size:"sm",children:[i.jsx(hi,{className:"h-4 w-4 mr-2"}),"View Site"]})]})]}),i.jsxs(ll,{value:t,onValueChange:e,className:"space-y-6",children:[i.jsxs(eo,{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[i.jsxs(on,{value:"overview",className:"flex items-center",children:[i.jsx(UK,{className:"h-4 w-4 mr-2"}),"Overview"]}),i.jsxs(on,{value:"lessons",className:"flex items-center",children:[i.jsx($a,{className:"h-4 w-4 mr-2"}),"Lessons"]}),i.jsxs(on,{value:"communities",className:"flex items-center",children:[i.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Communities"]}),i.jsxs(on,{value:"other",className:"flex items-center",children:[i.jsx(hi,{className:"h-4 w-4 mr-2"}),"Other Content"]})]}),i.jsxs(yn,{value:"overview",className:"space-y-6",children:[i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Welcome to your Content Dashboard"}),i.jsx(Vt,{children:"Manage all your brand content from this central location"})]}),i.jsx(He,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(De,{className:"bg-blue-50",children:[i.jsx(et,{className:"pb-2",children:i.jsxs(nt,{className:"text-lg flex items-center",children:[i.jsx($a,{className:"h-5 w-5 mr-2 text-blue-600"}),"Lessons"]})}),i.jsxs(He,{children:[i.jsx("p",{className:"text-2xl font-bold",children:"0"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Published lessons"}),i.jsx(Se,{variant:"link",className:"p-0 mt-2",onClick:()=>e("lessons"),children:"Manage Lessons →"})]})]}),i.jsxs(De,{className:"bg-green-50",children:[i.jsx(et,{className:"pb-2",children:i.jsxs(nt,{className:"text-lg flex items-center",children:[i.jsx(Ts,{className:"h-5 w-5 mr-2 text-green-600"}),"Communities"]})}),i.jsxs(He,{children:[i.jsx("p",{className:"text-2xl font-bold",children:"0"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Active communities"}),i.jsx(Se,{variant:"link",className:"p-0 mt-2",onClick:()=>e("communities"),children:"Manage Communities →"})]})]}),i.jsxs(De,{className:"bg-purple-50",children:[i.jsx(et,{className:"pb-2",children:i.jsxs(nt,{className:"text-lg flex items-center",children:[i.jsx(hi,{className:"h-5 w-5 mr-2 text-purple-600"}),"Other Content"]})}),i.jsxs(He,{children:[i.jsx("p",{className:"text-2xl font-bold",children:"0"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Content pieces"}),i.jsx(Se,{variant:"link",className:"p-0 mt-2",onClick:()=>e("other"),children:"Manage Content →"})]})]})]})})]}),i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Quick Tips"}),i.jsx(Vt,{children:"Get the most out of your brand dashboard"})]}),i.jsxs(He,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"bg-blue-100 p-2 rounded-full mr-4",children:i.jsx($a,{className:"h-5 w-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:"Create Engaging Lessons"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Use high-quality images and clear, concise content to engage your audience."})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"bg-green-100 p-2 rounded-full mr-4",children:i.jsx(Ts,{className:"h-5 w-5 text-green-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:"Build Active Communities"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Organize your communities with relevant topics and encourage participation."})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"bg-purple-100 p-2 rounded-full mr-4",children:i.jsx(tl,{className:"h-5 w-5 text-purple-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:"Customize Your Settings"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your brand profile and preferences in the settings section."})]})]})]})]})]}),i.jsx(yn,{value:"lessons",children:i.jsx(oue,{})}),i.jsx(yn,{value:"communities",children:i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Communities Manager"}),i.jsx(Vt,{children:"Create and manage communities for your brand"})]}),i.jsxs(He,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(Ts,{className:"h-16 w-16 text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Communities Coming Soon"}),i.jsx("p",{className:"text-center text-muted-foreground max-w-md mb-6",children:"This feature is under development. Soon you'll be able to create and manage communities for your brand."}),i.jsx(Se,{disabled:!0,children:"Create Community"})]})]})}),i.jsx(yn,{value:"other",children:i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Other Content"}),i.jsx(Vt,{children:"Manage additional content for your brand"})]}),i.jsxs(He,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(hi,{className:"h-16 w-16 text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Additional Content Types Coming Soon"}),i.jsx("p",{className:"text-center text-muted-foreground max-w-md mb-6",children:"We're working on supporting more content types. Check back soon for updates!"}),i.jsx(Se,{disabled:!0,children:"Add Content"})]})]})})]})]})}const rj={mainTitle:{fontFamily:"Playfair Display, serif",fontWeight:"900",letterSpacing:"-0.015em",lineHeight:"1.1",color:"#000000"},sectionHeading:{fontFamily:"Playfair Display, serif",fontWeight:"800",letterSpacing:"-0.02em",lineHeight:"1.2",color:"#000000"},subsectionTitle:{fontFamily:"Inter, sans-serif",fontWeight:"700",letterSpacing:"-0.005em",lineHeight:"1.3",color:"#000000"}};function cue(){var w;const{id:t}=Nc(),e=ks(),[n,s]=b.useState(null),[r,a]=b.useState([]),[l,d]=b.useState({training:!0,progress:!0}),[u,f]=b.useState({training:null,progress:null}),m=j=>{if(!j)return"N/A";if(j<60)return`${j} min`;{const S=Math.floor(j/60),_=j%60;return _>0?`${S}h ${_}m`:`${S}h`}},p=j=>j?(j.toDate?j.toDate():new Date(j)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";b.useEffect(()=>{if(!t)return;const j=Je(ce,"trainings",t),S=Ln(j,_=>{_.exists()?s({id:_.id,..._.data()}):f(E=>({...E,training:"Training not found"})),d(E=>({...E,training:!1}))},_=>{console.error("Error loading training:",_),f(E=>({...E,training:_.message})),A0(_,"TrainingDetail: training doc"),d(E=>({...E,training:!1}))});return()=>S()},[t]),b.useEffect(()=>{if(!t)return;const j=yt(Ue(ce,"training_progress"),ht("trainingId","==",t),Jn("updatedAt","desc")),S=fre(j,async _=>{try{const E=_.docs.map(I=>({id:I.id,...I.data()})),C=await Promise.all(E.map(async I=>{try{const M=Je(ce,"users",I.userId),V=await _r(M);return V.exists()?{...I,user:{id:V.id,...V.data()}}:I}catch(M){return console.error("Error fetching user data:",M),I}}));a(C),d(I=>({...I,progress:!1}))}catch(E){console.error("Error loading progress data:",E),f(C=>({...C,progress:E.message})),d(C=>({...C,progress:!1}))}},_=>{console.error("Error in progress snapshot:",_),A0(_,"TrainingDetail: progress"),f(E=>({...E,progress:_.message})),d(E=>({...E,progress:!1}))});return()=>S()},[t]);const x=b.useMemo(()=>{if(!r.length)return{total:0,completed:0,inProgress:0,notStarted:0,completionRate:0};const j=r.filter(_=>_.status==="completed").length,S=r.filter(_=>_.status==="in_progress").length;return{total:r.length,completed:j,inProgress:S,completionRate:r.length>0?Math.round(j/r.length*100):0}},[r]);return l.training?i.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary"})}):u.training?i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-md p-6 border border-red-200",children:[i.jsxs("div",{className:"flex items-center text-red-600 mb-4",children:[i.jsx(js,{className:"h-6 w-6 mr-2"}),i.jsx("h2",{className:"text-xl font-semibold",children:"Error Loading Training"})]}),i.jsx("p",{className:"text-gray-700 mb-4",children:u.training}),i.jsxs("button",{onClick:()=>e("/brand/trainings"),className:"flex items-center text-brand-primary hover:text-brand-primary/80",children:[i.jsx(Xm,{className:"h-4 w-4 mr-1"})," Back to Trainings"]})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"mb-6",children:i.jsxs("button",{onClick:()=>e("/brand/trainings"),className:"flex items-center text-brand-primary hover:text-brand-primary/80",children:[i.jsx(Xm,{className:"h-4 w-4 mr-1"})," Back to Trainings"]})}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200 mb-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl mb-2",style:rj.mainTitle,children:n.title}),i.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Qm,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:m(n.durationMins)})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(cf,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:["Created: ",p(n.createdAt)]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ts,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:[((w=n.metrics)==null?void 0:w.enrolled)||0," enrolled"]})]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${n.published?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:n.published?"Published":"Draft"}),i.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${n.visibility==="public"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:n.visibility==="public"?"Public":"Restricted"})]})]}),i.jsx("p",{className:"text-gray-700 mb-6",children:n.description}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Category"}),i.jsx("p",{className:"text-gray-900",children:n.category||"Uncategorized"})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Last Updated"}),i.jsx("p",{className:"text-gray-900",children:p(n.updatedAt)})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Content Type"}),i.jsx("p",{className:"text-gray-900",children:n.contentType||"Mixed Content"})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsx($n,{to:`/brand/trainings/${t}/edit`,className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90",children:"Edit Training"}),i.jsx($n,{to:`/brand/trainings/${t}/preview`,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Preview Training"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200 mb-6",children:[i.jsx("h2",{className:"text-2xl mb-6",style:rj.sectionHeading,children:"User Progress"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[i.jsx("h3",{className:"text-sm font-medium text-blue-700 mb-1",children:"Total Users"}),i.jsx("p",{className:"text-3xl font-bold text-blue-900",children:x.total})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100",children:[i.jsx("h3",{className:"text-sm font-medium text-green-700 mb-1",children:"Completed"}),i.jsx("p",{className:"text-3xl font-bold text-green-900",children:x.completed})]}),i.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-100",children:[i.jsx("h3",{className:"text-sm font-medium text-yellow-700 mb-1",children:"In Progress"}),i.jsx("p",{className:"text-3xl font-bold text-yellow-900",children:x.inProgress})]}),i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:[i.jsx("h3",{className:"text-sm font-medium text-purple-700 mb-1",children:"Completion Rate"}),i.jsxs("p",{className:"text-3xl font-bold text-purple-900",children:[x.completionRate,"%"]})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[i.jsx("span",{children:"Progress Overview"}),i.jsxs("span",{children:[x.completionRate,"% Complete"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-brand-primary h-2.5 rounded-full",style:{width:`${x.completionRate}%`}})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl mb-4",style:rj.subsectionTitle,children:"User Progress Details"}),l.progress?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-brand-primary"})}):u.progress?i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:["Error loading progress data: ",u.progress]}):r.length===0?i.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:[i.jsx(Ts,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No users enrolled"}),i.jsx("p",{className:"text-gray-500",children:"No one has started this training yet. Share it with your team to get started."})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Started"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Spent"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(j=>{var S,_,E;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:(S=j.user)!=null&&S.profileImage?typeof j.user.profileImage=="string"&&j.user.profileImage.startsWith("http")?i.jsx("img",{src:j.user.profileImage,alt:"",className:"h-10 w-10 rounded-full object-cover"}):i.jsx("span",{children:j.user.profileImage}):i.jsx("span",{children:"👤"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:((_=j.user)==null?void 0:_.name)||"Unknown User"}),i.jsx("div",{className:"text-sm text-gray-500",children:((E=j.user)==null?void 0:E.email)||j.userId})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${j.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:j.status==="completed"?"Completed":"In Progress"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p(j.startedAt)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.completedAt?p(j.completedAt):"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.timeSpentMins?m(j.timeSpentMins):"-"})]},j.id)})})]})})]})]})]})})}function due(){const{user:t}=bn(),e=ks(),[n,s]=b.useState([]),[r,a]=b.useState(!0),[l,d]=b.useState(null),[u,f]=b.useState({}),[m,p]=b.useState(null);b.useEffect(()=>{if(!(t!=null&&t.uid)){a(!1);return}a(!0),d(null);try{const E=yt(Ue(ce,"community_posts"),ht("authorUid","==",t.uid),Jn("createdAt","desc"),zr(20)),C=Ln(E,I=>{const M=I.docs.map(V=>({id:V.id,...V.data()}));s(M),a(!1)},I=>{d(`Error loading posts: ${I.message}`),a(!1)});return()=>C()}catch(E){d(`Error setting up posts query: ${E.message}`),a(!1)}},[t==null?void 0:t.uid]);const x=E=>{if(!E)return"N/A";const C=E.toDate?E.toDate():new Date(E);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(C)},w=E=>{e(`/brand/community/${E}/edit`)},j=E=>{p(E)},S=()=>{p(null)},_=async E=>{if(E){f(C=>({...C,[E]:!0})),p(null);try{await Zs(Je(ce,"community_posts",E))}catch(C){d(`Error deleting post: ${C.message}`)}finally{f(C=>({...C,[E]:!1}))}}};return t?i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Community Posts"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Manage posts you've created in the community"})]}),l&&i.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 p-4 rounded-md",children:l}),r?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-brand-primary"})}):n.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-8 text-center",children:[i.jsx("div",{className:"text-gray-500 mb-4",children:"You haven't created any posts yet."}),i.jsx("button",{onClick:()=>e("/brand/community/new"),className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primary/90",children:"Create Your First Post"})]}):i.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Visibility"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(E=>{var C,I;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.title||((C=E.content)==null?void 0:C.substring(0,50))+(((I=E.content)==null?void 0:I.length)>50?"...":"")})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-500",children:x(E.createdAt)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:E.visibility||"public"})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[i.jsx("button",{onClick:()=>w(E.id),className:"text-brand-primary hover:text-brand-primary/80 mr-4",disabled:u[E.id],children:"Edit"}),i.jsx("button",{onClick:()=>j(E),className:"text-red-600 hover:text-red-900",disabled:u[E.id],children:u[E.id]?"Deleting...":"Delete"})]})]},E.id)})})]})}),i.jsx("div",{className:"md:hidden divide-y divide-gray-200",children:n.map(E=>{var C,I;return i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.title||((C=E.content)==null?void 0:C.substring(0,50))+(((I=E.content)==null?void 0:I.length)>50?"...":"")}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:x(E.createdAt)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:E.visibility||"public"}),i.jsxs("div",{children:[i.jsx("button",{onClick:()=>w(E.id),className:"text-brand-primary hover:text-brand-primary/80 mr-3 text-sm",disabled:u[E.id],children:"Edit"}),i.jsx("button",{onClick:()=>j(E),className:"text-red-600 hover:text-red-900 text-sm",disabled:u[E.id],children:u[E.id]?"Deleting...":"Delete"})]})]})]},E.id)})})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Delete"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this post? This action cannot be undone."}),i.jsxs("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{onClick:S,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),i.jsx("button",{onClick:()=>_(m.id),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})}),i.jsx("div",{className:"mt-6",children:i.jsx("button",{onClick:()=>e("/brand/community/new"),className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primary/90",children:"Create New Post"})})]}):i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 p-4 rounded-md",children:"Please sign in to view your community posts."})})}function v4({mode:t="create"}){const{postId:e}=Nc(),{user:n}=bn(),s=ks(),r=b.useRef(null),[a,l]=b.useState(""),[d,u]=b.useState(""),[f,m]=b.useState(null),[p,x]=b.useState(""),[w,j]=b.useState(""),[S,_]=b.useState(!0),[E,C]=b.useState(t==="edit"),[I,M]=b.useState(!1),[V,z]=b.useState(null),[D,A]=b.useState({}),[T,R]=b.useState(!1),[P,O]=b.useState(!1),[F,J]=b.useState(!1);b.useEffect(()=>{if(t!=="edit"||!e||!n)return;C(!0),z(null);const K=Je(ce,"community_posts",e),ne=Ln(K,te=>{if(te.exists()){const fe=te.data();if(fe.authorUid!==n.uid&&fe.userId!==n.uid&&n.role!=="super_admin"){O(!0),C(!1);return}l(fe.title||""),u(fe.body||""),fe.imageUrl&&(j(fe.imageUrl),_(!0))}else R(!0);C(!1)},te=>{z(`Error loading post: ${te.message}`),C(!1)});return()=>ne()},[t,e,n]);const Z=K=>{const ne=K.target.files[0];if(!ne)return;if(!ne.type.startsWith("image/")){A(fe=>({...fe,image:"Please select an image file"}));return}A(fe=>{const ke={...fe};return delete ke.image,ke}),m(ne),_(!1);const te=new FileReader;te.onload=fe=>{x(fe.target.result)},te.readAsDataURL(ne)},q=()=>{m(null),x(""),_(!1),r.current&&(r.current.value="")},Y=()=>{const K={};return a.trim()||(K.title="Title is required"),d.trim()||(K.body="Body is required"),A(K),Object.keys(K).length===0},W=async K=>{if(!f)return null;try{const ne=f.name.split(".").pop(),te=`app/community/${K}/hero.${ne}`,fe=af(Xa,te);return await VN(fe,f),await sp(fe)}catch(ne){throw new Error(`Failed to upload image: ${ne.message}`)}},H=async K=>{if(K.preventDefault(),!!Y()){M(!0),z(null);try{if(t==="create"){const ne={title:a.trim(),body:d.trim(),content:`${a.trim()}

${d.trim()}`,authorUid:n.uid,brandId:n.brandId,communityId:"whats-good",visibility:"public",userName:n.name||n.displayName||"Anonymous",likeCount:0,commentCount:0,createdAt:ze(),updatedAt:ze(),demoSeed:!1},te=await cr(Ue(ce,"community_posts"),ne);if(f){const fe=await W(te.id);fe&&await Qn(te,{imageUrl:fe})}s("/brand/community")}else if(t==="edit"){const ne=Je(ce,"community_posts",e),te=await _r(ne);if(!te.exists()){R(!0),M(!1);return}const fe=te.data();if(fe.authorUid!==n.uid&&fe.userId!==n.uid&&n.role!=="super_admin"){O(!0),M(!1);return}const Ee={title:a.trim(),body:d.trim(),content:`${a.trim()}

${d.trim()}`,updatedAt:ze()};if(f){const ve=await W(e);ve&&(Ee.imageUrl=ve)}else S||(Ee.imageUrl=null);await Qn(ne,Ee),s("/brand/community")}}catch(ne){z(`Error saving post: ${ne.message}`),M(!1)}}},B=async()=>{if(!(t!=="edit"||!e)){M(!0),z(null);try{await Zs(Je(ce,"community_posts",e)),s("/brand/community")}catch(K){z(`Error deleting post: ${K.message}`),M(!1)}}};return n?t==="edit"&&T&&!E?i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 p-4 rounded-md",children:"Post not found. It may have been deleted."}),i.jsx("button",{onClick:()=>s("/brand/community"),className:"mt-4 px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primary/90",children:"Back to Posts"})]}):t==="edit"&&P&&!E?i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-md",children:"You do not have permission to edit this post."}),i.jsx("button",{onClick:()=>s("/brand/community"),className:"mt-4 px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primary/90",children:"Back to Posts"})]}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t==="create"?"Create New Post":"Edit Post"}),i.jsx("p",{className:"text-gray-600 mt-1",children:t==="create"?"Share content with the community":"Update your community post"})]}),V&&i.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 p-4 rounded-md",children:V}),E?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-brand-primary"})}):i.jsx("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:i.jsxs("form",{onSubmit:H,children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"title",value:a,onChange:K=>l(K.target.value),className:`w-full px-3 py-2 border ${D.title?"border-red-300":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent`,placeholder:"Enter post title"}),D.title&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.title})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{htmlFor:"body",className:"block text-sm font-medium text-gray-700 mb-1",children:["Body ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{id:"body",value:d,onChange:K=>u(K.target.value),rows:6,className:`w-full px-3 py-2 border ${D.body?"border-red-300":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent`,placeholder:"Write your post content here..."}),D.body&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.body})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image (Optional)"}),t==="edit"&&w&&S&&i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"relative inline-block",children:[i.jsx("img",{src:w,alt:"Current",className:"h-40 w-auto object-cover rounded-md border border-gray-300"}),i.jsx("button",{type:"button",onClick:()=>_(!1),className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1 hover:bg-red-700",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),p&&i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"relative inline-block",children:[i.jsx("img",{src:p,alt:"Preview",className:"h-40 w-auto object-cover rounded-md border border-gray-300"}),i.jsx("button",{type:"button",onClick:q,className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1 hover:bg-red-700",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),(!S||t==="create")&&i.jsxs("div",{children:[i.jsx("input",{type:"file",ref:r,onChange:Z,accept:"image/*",className:"hidden"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>{var K;return(K=r.current)==null?void 0:K.click()},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:p?"Change Image":"Select Image"}),D.image&&i.jsx("p",{className:"text-sm text-red-600",children:D.image})]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("div",{children:t==="edit"&&i.jsx("button",{type:"button",onClick:()=>J(!0),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",disabled:I,children:"Delete"})}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{type:"button",onClick:()=>s("/brand/community"),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:I,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primary/90 disabled:opacity-50",disabled:I,children:I?t==="create"?"Creating...":"Saving...":t==="create"?"Create Post":"Save Changes"})]})]})]})}),F&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Delete"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this post? This action cannot be undone."}),i.jsxs("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{onClick:()=>J(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),i.jsx("button",{onClick:B,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]}):i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 p-4 rounded-md",children:"Please sign in to create or edit posts."})})}function uue({user:t,profileImage:e,showAvatarSelector:n,setShowAvatarSelector:s,avatarOptions:r,uploadProfileImage:a,selectAvatar:l,getStatusBadge:d}){const u=b.useRef(null);return i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[i.jsx("h2",{className:"font-heading text-xl font-semibold mb-4",children:"Profile Information"}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsxs("div",{className:"relative inline-block",children:[i.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center text-4xl overflow-hidden mx-auto",children:e?typeof e=="string"&&e.startsWith("http")?i.jsx("img",{src:e,alt:"Profile",className:"w-full h-full object-cover"}):i.jsx("span",{children:e}):i.jsx("span",{children:"👤"})}),i.jsx("button",{onClick:()=>s(!0),className:"absolute bottom-0 right-0 bg-brand-primary text-white rounded-full p-2 hover:bg-brand-primary/90",children:"📷"})]}),n&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[i.jsx("h3",{className:"font-heading text-lg font-semibold mb-4",children:"Choose Profile Picture"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Photo"}),i.jsx("input",{type:"file",accept:"image/*",onChange:f=>{f.target.files[0]&&(a(f.target.files[0]),s(!1))},className:"w-full",ref:u})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Or Choose Avatar"}),i.jsx("div",{className:"grid grid-cols-5 gap-2",children:r.map((f,m)=>i.jsx("button",{onClick:()=>l(f),className:"w-12 h-12 text-2xl hover:bg-gray-100 rounded-lg transition-colors",children:f},m))})]})]}),i.jsx("div",{className:"flex justify-end mt-6",children:i.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"})})]})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),i.jsx("p",{className:"font-medium",children:(t==null?void 0:t.name)||(t==null?void 0:t.displayName)||"New User"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),i.jsx("p",{className:"font-medium",children:t==null?void 0:t.email})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Store"}),i.jsx("p",{className:"font-medium",children:(t==null?void 0:t.storeName)||(t==null?void 0:t.storeCode)||"Unknown Store"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Verification Status"}),i.jsx("div",{className:"mt-1",children:d()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Total Points"}),i.jsx("p",{className:"font-medium text-brand-primary",children:(t==null?void 0:t.points)||0})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Level"}),i.jsx("p",{className:"font-medium",children:(t==null?void 0:t.level)||1})]})]})]})}const uy={sectionHeading:{fontFamily:"Playfair Display, serif",fontWeight:"800",letterSpacing:"-0.02em",lineHeight:"1.2",color:"#000000"},subsectionTitle:{fontFamily:"Inter, sans-serif",fontWeight:"700",letterSpacing:"-0.005em",lineHeight:"1.3",color:"#000000"}};function hue(){var W;const{id:t}=Nc(),e=ks(),{user:n}=bn(),[s,r]=b.useState(null),[a,l]=b.useState(null),[d,u]=b.useState(0),[f,m]=b.useState({training:!0,progress:!0}),[p,x]=b.useState({training:null,progress:null}),[w,j]=b.useState(!1),[S,_]=b.useState(!0),E=b.useRef(null),C=b.useRef(null),I=b.useRef(0),M=H=>{if(!H)return"N/A";if(H<60)return`${H} min`;{const B=Math.floor(H/60),K=H%60;return K>0?`${B}h ${K}m`:`${B}h`}},V=H=>H?(H.toDate?H.toDate():new Date(H)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";b.useEffect(()=>{if(!t)return;const H=Je(ce,"trainings",t),B=Ln(H,K=>{K.exists()?r({id:K.id,...K.data()}):x(ne=>({...ne,training:"Training not found"})),m(ne=>({...ne,training:!1}))},K=>{console.error("Error loading training:",K),x(ne=>({...ne,training:K.message})),m(ne=>({...ne,training:!1}))});return()=>B()},[t]),b.useEffect(()=>{if(!t||!(n!=null&&n.uid))return;const H=`${n.uid}_${t}`,B=Je(ce,"training_progress",H),K=Ln(B,async ne=>{if(ne.exists())l({id:ne.id,...ne.data()});else try{const te={id:H,userId:n.uid,trainingId:t,status:"in_progress",startedAt:ze(),updatedAt:ze(),completedSections:[],currentSection:0,timeSpentMins:0};await qr(B,te),l(te)}catch(te){console.error("Error creating progress document:",te),x(fe=>({...fe,progress:te.message}))}m(te=>({...te,progress:!1}))},ne=>{console.error("Error loading progress:",ne),x(te=>({...te,progress:ne.message})),m(te=>({...te,progress:!1}))});return()=>K()},[t,n==null?void 0:n.uid]),b.useEffect(()=>{(a==null?void 0:a.currentSection)!==void 0&&a.currentSection!==d&&u(a.currentSection)},[a==null?void 0:a.currentSection,d]),b.useEffect(()=>{const H=a==null?void 0:a.id;if(!H||!(n!=null&&n.uid))return;I.current=a.timeSpentMins||0,C.current=setInterval(()=>{I.current+=1/60},1e3);const B=setInterval(async()=>{try{const K=Je(ce,"training_progress",H);await Qn(K,{timeSpentMins:Math.round(I.current),updatedAt:ze()})}catch(K){console.error("Error updating time spent:",K)}},6e4);return()=>{clearInterval(C.current),clearInterval(B);const K=Je(ce,"training_progress",H);Qn(K,{timeSpentMins:Math.round(I.current),updatedAt:ze()}).catch(ne=>{console.error("Error updating final time spent:",ne)})}},[a==null?void 0:a.id,n==null?void 0:n.uid]);const z=b.useMemo(()=>!(s!=null&&s.sections)||!s.sections.length?null:s.sections[d]||s.sections[0],[s,d]),D=b.useMemo(()=>(a==null?void 0:a.completedSections)||[],[a]),A=b.useMemo(()=>z?D.includes(z.id):!1,[z,D]),T=b.useMemo(()=>{var H;return((H=s==null?void 0:s.sections)==null?void 0:H.length)||0},[s]),R=b.useMemo(()=>T?Math.round(D.length/T*100):0,[D,T]),P=b.useMemo(()=>T?D.length===T:!1,[D,T]),O=()=>{d<T-1&&(u(H=>H+1),Z(d+1))},F=()=>{d>0&&(u(H=>H-1),Z(d-1))},J=H=>{H>=0&&H<T&&(u(H),Z(H))},Z=async H=>{if(a!=null&&a.id)try{const B=Je(ce,"training_progress",a.id);await Qn(B,{currentSection:H,updatedAt:ze()})}catch(B){console.error("Error updating current section:",B)}},q=async()=>{if(!(!(a!=null&&a.id)||!(z!=null&&z.id)||A||w)){j(!0);try{const H=[...D];H.includes(z.id)||H.push(z.id);const B=Je(ce,"training_progress",a.id);await Qn(B,{completedSections:H,updatedAt:ze()}),H.length===T&&await Qn(B,{status:"completed",completedAt:ze()})}catch(H){console.error("Error marking section complete:",H)}finally{j(!1)}}},Y=async()=>{if(!(!(a!=null&&a.id)||!P||w)){j(!0);try{const H=Je(ce,"training_progress",a.id);await Qn(H,{status:"completed",completedAt:ze(),updatedAt:ze()})}catch(H){console.error("Error marking training complete:",H)}finally{j(!1)}}};return f.training||f.progress?i.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary mx-auto"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Loading training content..."})]})}):p.training||p.progress?i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-md p-6 border border-red-200",children:[i.jsxs("div",{className:"flex items-center text-red-600 mb-4",children:[i.jsx(js,{className:"h-6 w-6 mr-2"}),i.jsx("h2",{className:"text-xl font-semibold",children:"Error Loading Training"})]}),i.jsx("p",{className:"text-gray-700 mb-4",children:p.training||p.progress}),i.jsxs("button",{onClick:()=>e("/staff/dashboard"),className:"flex items-center text-brand-primary hover:text-brand-primary/80",children:[i.jsx(Xm,{className:"h-4 w-4 mr-1"})," Back to Dashboard"]})]})}):s?i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:i.jsx("div",{className:"container mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("button",{onClick:()=>e("/staff/dashboard"),className:"flex items-center text-brand-primary hover:text-brand-primary/80",children:[i.jsx(Xm,{className:"h-4 w-4 mr-1"})," Back to Dashboard"]}),i.jsx("div",{className:"text-center flex-1 mx-4",children:i.jsx("h1",{className:"text-xl md:text-2xl truncate",style:uy.sectionHeading,children:s.title})}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx("button",{onClick:()=>_(!S),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg","aria-label":"Toggle sidebar",children:i.jsx(zK,{className:"h-5 w-5"})})})]})})}),i.jsx("div",{className:"bg-white border-b",children:i.jsxs("div",{className:"container mx-auto px-4 py-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[i.jsxs("span",{children:["Progress: ",R,"%"]}),i.jsxs("span",{children:[D.length," of ",T," sections"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-brand-primary h-2 rounded-full transition-all duration-300",style:{width:`${R}%`}})})]})}),i.jsx("div",{className:"container mx-auto px-4 py-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[S&&i.jsxs("div",{className:"md:w-64 bg-white rounded-lg shadow-md p-4 h-fit sticky top-24",children:[i.jsx("h2",{className:"text-lg mb-4",style:uy.subsectionTitle,children:"Sections"}),i.jsx("ul",{className:"space-y-2",children:(W=s.sections)==null?void 0:W.map((H,B)=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>J(B),className:`w-full text-left px-3 py-2 rounded-lg flex items-center justify-between ${d===B?"bg-brand-primary text-white":D.includes(H.id)?"bg-green-50 text-green-800":"hover:bg-gray-100"}`,children:[i.jsxs("span",{className:"truncate flex-1 text-sm",children:[B+1,". ",H.title]}),D.includes(H.id)&&i.jsx(Ur,{className:"h-4 w-4 ml-2 flex-shrink-0"})]})},H.id))}),(a==null?void 0:a.status)==="completed"?i.jsx("div",{className:"mt-6 bg-green-50 text-green-800 p-3 rounded-lg text-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ur,{className:"h-5 w-5 mr-2"}),i.jsxs("span",{children:["Completed on ",V(a.completedAt)]})]})}):P?i.jsxs("button",{onClick:Y,disabled:w,className:"mt-6 w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:[w?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}):i.jsx(Ur,{className:"h-4 w-4 mr-2"}),"Mark Training Complete"]}):null]}),i.jsxs("div",{className:"flex-1",children:[z?i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-50 border-b p-4",children:[i.jsx("h2",{className:"text-xl",style:uy.subsectionTitle,children:z.title}),A&&i.jsxs("div",{className:"mt-2 flex items-center text-green-600 text-sm",children:[i.jsx(Ur,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:"Completed"})]})]}),i.jsxs("div",{className:"p-6",ref:E,children:[z.type==="video"&&z.videoUrl?i.jsx("div",{className:"aspect-video mb-6",children:i.jsx("iframe",{src:z.videoUrl,title:z.title,className:"w-full h-full rounded-lg",allowFullScreen:!0})}):null,z.content&&i.jsx("div",{className:"prose max-w-none",children:i.jsx("div",{dangerouslySetInnerHTML:{__html:z.content}})}),!z.content&&!z.videoUrl&&i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx($a,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"No content available for this section."})]})]}),i.jsxs("div",{className:"border-t p-4 flex items-center justify-between",children:[i.jsxs("button",{onClick:F,disabled:d===0,className:"flex items-center px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(JY,{className:"h-5 w-5 mr-1"}),"Previous"]}),i.jsx("div",{children:A?i.jsxs("span",{className:"text-green-600 flex items-center",children:[i.jsx(Ur,{className:"h-5 w-5 mr-2"}),"Completed"]}):i.jsxs("button",{onClick:q,disabled:w,className:"flex items-center px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:[w?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}):i.jsx(Ur,{className:"h-5 w-5 mr-2"}),"Mark Complete"]})}),i.jsxs("button",{onClick:O,disabled:d===T-1,className:"flex items-center px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",i.jsx(uO,{className:"h-5 w-5 ml-1"})]})]})]}):i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[i.jsx(js,{className:"h-12 w-12 text-yellow-500 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No Content Available"}),i.jsx("p",{className:"text-gray-500 mb-4",children:"This training doesn't have any sections yet."})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[i.jsx("h3",{className:"text-lg mb-4",style:uy.subsectionTitle,children:"Training Details"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"}),i.jsx("p",{className:"text-gray-900",children:s.description})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Duration"}),i.jsx("p",{className:"text-gray-900",children:M(s.durationMins)})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Category"}),i.jsx("p",{className:"text-gray-900",children:s.category||"Uncategorized"})]}),(a==null?void 0:a.timeSpentMins)>0&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Your Time Spent"}),i.jsx("p",{className:"text-gray-900",children:M(a.timeSpentMins)})]})]})]})]})]})]})})]}):i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex items-center text-yellow-600 mb-4",children:[i.jsx(js,{className:"h-6 w-6 mr-2"}),i.jsx("h2",{className:"text-xl font-semibold",children:"Training Not Found"})]}),i.jsx("p",{className:"text-gray-700 mb-4",children:"The requested training could not be found."}),i.jsxs("button",{onClick:()=>e("/staff/dashboard"),className:"flex items-center text-brand-primary hover:text-brand-primary/80",children:[i.jsx(Xm,{className:"h-4 w-4 mr-1"})," Back to Dashboard"]})]})})}class fue extends Ct.Component{constructor(n){super(n);rt(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,info:null,key:this.state.key+1})});this.state={hasError:!1,error:null,info:null,key:0}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,s){this.setState({info:s}),console.error("ErrorBoundary caught error",n,s)}render(){var n,s,r,a;return this.state.hasError?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-lg w-full border border-red-200",children:[i.jsxs("div",{className:"flex items-center text-red-600 mb-4",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),i.jsx("h2",{className:"text-xl font-bold",children:"Something went wrong"})]}),i.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded border border-red-100",children:[i.jsx("p",{className:"font-medium text-red-800",children:((n=this.state.error)==null?void 0:n.name)||"Error"}),i.jsx("p",{className:"text-red-700",children:((s=this.state.error)==null?void 0:s.message)||"An unknown error occurred"})]}),i.jsxs("details",{className:"mb-6 text-sm",children:[i.jsx("summary",{className:"cursor-pointer text-gray-600 hover:text-gray-800",children:"Show error details"}),i.jsxs("pre",{className:"mt-2 p-3 bg-gray-100 rounded overflow-auto text-xs text-gray-800 max-h-60",children:[((r=this.state.error)==null?void 0:r.stack)||"No stack trace available",((a=this.state.info)==null?void 0:a.componentStack)&&i.jsxs(i.Fragment,{children:[`

Component Stack:
`,this.state.info.componentStack]})]})]}),i.jsx("button",{onClick:this.handleRetry,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors",children:"Try Again"})]})}):this.props.children}}function mue(){const{user:t}=bn();Hr();const[e,n]=b.useState(!1),s=()=>{window.location.href="/?logout=true"};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"container mx-auto px-4 py-4",onClick:()=>e&&n(!1),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome, ",(t==null?void 0:t.name)||(t==null?void 0:t.displayName)||"New User","!"]}),i.jsx("p",{className:"text-gray-600 mt-1",children:(t==null?void 0:t.storeName)||(t==null?void 0:t.storeCode)||"Unknown Store"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:r=>{r.stopPropagation(),n(a=>!a)},className:"flex items-center focus:outline-none","aria-haspopup":"true","aria-expanded":e?"true":"false",children:t!=null&&t.photoURL?i.jsx("img",{src:t.photoURL,alt:"User avatar",className:"h-10 w-10 rounded-full border"}):i.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 border flex items-center justify-center text-gray-600 font-semibold",children:((t==null?void 0:t.name)||(t==null?void 0:t.displayName)||"U").charAt(0).toUpperCase()})}),e&&i.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[i.jsxs("div",{className:"px-4 py-3 border-b",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:(t==null?void 0:t.name)||(t==null?void 0:t.displayName)||"User"}),i.jsx("p",{className:"text-xs text-gray-500 truncate",children:(t==null?void 0:t.email)||""})]}),i.jsxs("nav",{className:"py-1",children:[i.jsx(Ul,{to:"/staff/profile",className:({isActive:r})=>`block px-4 py-2 text-sm ${r?"text-brand-primary":"text-gray-700 hover:bg-gray-50"}`,children:"My Profile"}),i.jsx(Ul,{to:"/staff/my-brands",className:({isActive:r})=>`block px-4 py-2 text-sm ${r?"text-brand-primary":"text-gray-700 hover:bg-gray-50"}`,children:"My Brands"}),i.jsx(Ul,{to:"/staff/learning",className:({isActive:r})=>`block px-4 py-2 text-sm ${r?"text-brand-primary":"text-gray-700 hover:bg-gray-50"}`,children:"Learning"}),i.jsx("button",{onClick:s,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Sign Out"})]})]})]})]})})}),i.jsx("div",{className:"container mx-auto px-4 py-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[i.jsx("div",{className:"md:w-64 flex-shrink-0",children:i.jsx("nav",{className:"bg-white shadow rounded-lg p-4",children:i.jsxs("ul",{className:"flex flex-row md:flex-col space-y-0 space-x-2 md:space-x-0 md:space-y-2 overflow-x-auto md:overflow-x-visible",children:[i.jsx("li",{children:i.jsx(Ul,{to:"/staff/community",className:({isActive:r})=>`block px-4 py-2 rounded-md transition-colors ${r?"bg-sage-green/10 text-deep-moss":"text-warm-gray hover:text-deep-moss hover:bg-oat-beige"}`,children:"Community"})}),i.jsx("li",{children:i.jsx(Ul,{to:"/staff/verification",className:({isActive:r})=>`block px-4 py-2 rounded-md transition-colors ${r?"bg-brand-primary text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Verification"})}),i.jsx("li",{children:i.jsx(Ul,{to:"/staff/my-brands",className:({isActive:r})=>`block px-4 py-2 rounded-md transition-colors ${r?"bg-brand-primary text-white":"text-gray-700 hover:bg-gray-50"}`,children:"My Brands"})}),i.jsx("li",{children:i.jsx(Ul,{to:"/staff/learning",className:({isActive:r})=>`block px-4 py-2 rounded-md transition-colors ${r?"bg-brand-primary text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Learning"})})]})})}),i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:i.jsx(_9,{})})})]})})]})}function gue(){const{user:t}=bn(),[e,n]=b.useState(null),[s,r]=b.useState({interests:"",location:"",story:""}),[a,l]=b.useState({name:"",storeName:""}),[d,u]=b.useState(!1),[f,m]=b.useState(!1),[p,x]=b.useState(!1),[w,j]=b.useState(!1),[S,_]=b.useState(!0),E=["👤","👨‍💼","👩‍💼","👨‍🔬","👩‍🔬","👨‍⚕️","👩‍⚕️","🧑‍🌾","👨‍🍳","👩‍🍳","🌱","🥬","🥕","🍎","🥑","🌿","🌾","🍯","🧘‍♀️","🧘‍♂️"],C={mainTitle:{fontFamily:"Playfair Display, serif",fontWeight:"900",letterSpacing:"-0.015em",lineHeight:"1.1",color:"#000000"},sectionHeading:{fontFamily:"Playfair Display, serif",fontWeight:"800",letterSpacing:"-0.02em",lineHeight:"1.2",color:"#000000"},subsectionTitle:{fontFamily:"Inter, sans-serif",fontWeight:"700",letterSpacing:"-0.005em",lineHeight:"1.3",color:"#000000"}};b.useEffect(()=>{async function T(){if(t!=null&&t.uid)try{_(!0);const R=await _r(Je(ce,"users",t.uid));if(R.exists()){const P=R.data();r({interests:P.interests||"",location:P.location||"",story:P.story||""}),l({name:P.name||P.displayName||t.displayName||"New User",storeName:P.storeName||P.storeCode||"Unknown Store"}),n(P.profileImage||null)}}catch(R){console.error("Error loading user data:",R),alert("Error loading profile data. Please try again later.")}finally{_(!1)}}T()},[t==null?void 0:t.uid,t==null?void 0:t.displayName]);const I=()=>{const T="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium";switch((t==null?void 0:t.verificationStatus)||(t!=null&&t.verified?"approved":"pending")){case"approved":return i.jsx("span",{className:`${T} bg-green-100 text-green-800`,children:"✓ Verified"});case"pending":return i.jsx("span",{className:`${T} bg-yellow-100 text-yellow-800`,children:"⏳ Under Review"});case"rejected":return i.jsx("span",{className:`${T} bg-red-100 text-red-800`,children:"⚠ Rejected"});default:return i.jsx("span",{className:`${T} bg-gray-100 text-gray-800`,children:"🔒 Not Verified"})}},M=async T=>{if(!(!T||!(t!=null&&t.uid))){j(!0);try{if(!Xa)throw new Error("Firebase Storage not initialized");const R=af(Xa,`profile_images/${t.uid}/${Date.now()}_${T.name}`),P=await VN(R,T),O=await sp(P.ref);await Qn(Je(ce,"users",t.uid),{profileImage:O}),n(O),u(!1),alert("Profile photo uploaded successfully!")}catch(R){console.error("Error uploading avatar:",R),alert(`Error uploading photo: ${R.message}. Please check Firebase Storage setup.`)}finally{j(!1)}}},V=async T=>{if(t!=null&&t.uid){j(!0);try{await Qn(Je(ce,"users",t.uid),{profileImage:T}),n(T),u(!1)}catch(R){console.error("Error selecting avatar:",R),alert("Error updating avatar. Please try again.")}finally{j(!1)}}},z=async()=>{if(t!=null&&t.uid){j(!0);try{await Qn(Je(ce,"users",t.uid),{interests:s.interests,location:s.location,story:s.story}),m(!1),alert("About Me section updated successfully!")}catch(T){console.error("Error updating about me:",T),alert("Error updating information. Please try again.")}finally{j(!1)}}},D=async()=>{if(t!=null&&t.uid){j(!0);try{await Qn(Je(ce,"users",t.uid),{name:a.name,storeName:a.storeName}),x(!1),alert("Profile information updated successfully!")}catch(T){console.error("Error updating user info:",T),alert("Error updating information. Please try again.")}finally{j(!1)}}},A=()=>{const T=(t==null?void 0:t.verificationStatus)==="approved"||(t==null?void 0:t.verified)===!0;return i.jsxs("div",{className:"bg-gradient-to-r from-brand-primary/10 to-brand-secondary/10 rounded-lg p-6 border border-brand-primary/20",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",style:C.sectionHeading,children:T?"🎉 Verified Benefits":"🔒 Verification Benefits"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:`flex items-center space-x-3 ${T?"text-green-700":"text-gray-600"}`,children:[i.jsx("span",{children:T?"✅":"🔒"}),i.jsx("span",{children:"Access to premium communities (Supplement Scoop, Fresh Finds, Good Vibes)"})]}),i.jsxs("div",{className:`flex items-center space-x-3 ${T?"text-green-700":"text-gray-600"}`,children:[i.jsx("span",{children:T?"✅":"🔒"}),i.jsx("span",{children:"Exclusive brand challenges and training content"})]}),i.jsxs("div",{className:`flex items-center space-x-3 ${T?"text-green-700":"text-gray-600"}`,children:[i.jsx("span",{children:T?"✅":"🔒"}),i.jsx("span",{children:"Earn points to stand out to brands and become a super user"})]}),i.jsxs("div",{className:`flex items-center space-x-3 ${T?"text-green-700":"text-gray-600"}`,children:[i.jsx("span",{children:T?"✅":"🔒"}),i.jsx("span",{children:"Special access to prizes and exclusive product launches"})]}),i.jsxs("div",{className:`flex items-center space-x-3 ${T?"text-green-700":"text-gray-600"}`,children:[i.jsx("span",{children:T?"✅":"🔒"}),i.jsx("span",{children:"Career advancement - status follows you to help get jobs and negotiate raises"})]}),i.jsxs("div",{className:"flex items-center space-x-3 text-green-700",children:[i.jsx("span",{children:"✅"}),i.jsx("span",{children:`Access to "What's Good" community (available to all!)`})]})]}),!T&&i.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:i.jsxs("p",{className:"text-yellow-800 text-sm",children:[i.jsx("strong",{children:"Current Status:"}),` You have access to "What's Good" community. Get verified to unlock premium communities and advance your career!`]})})]})};return S?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",style:C.mainTitle,children:"Profile"}),i.jsx("p",{className:"text-gray-600",children:"Manage your profile information and verification status"})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[i.jsx("div",{className:"md:col-span-1",children:i.jsx(uue,{user:t,profileImage:e,showAvatarSelector:d,setShowAvatarSelector:u,avatarOptions:E,uploadProfileImage:M,selectAvatar:V,getStatusBadge:I})}),i.jsxs("div",{className:"md:col-span-2 space-y-6",children:[A(),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",style:C.subsectionTitle,children:"About Me"}),f?i.jsxs("div",{className:"space-x-2",children:[i.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700 text-sm font-medium",disabled:w,children:"Cancel"}),i.jsx("button",{onClick:z,className:"text-brand-primary hover:text-brand-primary/80 text-sm font-medium",disabled:w,children:w?"Saving...":"Save"})]}):i.jsx("button",{onClick:()=>m(!0),className:"text-brand-primary hover:text-brand-primary/80 text-sm font-medium",children:"Edit"})]}),f?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Interests"}),i.jsx("input",{type:"text",value:s.interests,onChange:T=>r({...s,interests:T.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:border-transparent",placeholder:"What are your interests?"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Location"}),i.jsx("input",{type:"text",value:s.location,onChange:T=>r({...s,location:T.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:border-transparent",placeholder:"Where are you based?"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"My Story"}),i.jsx("textarea",{value:s.story,onChange:T=>r({...s,story:T.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:border-transparent",placeholder:"Share your story...",rows:4})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Interests"}),i.jsx("p",{className:"text-gray-800",children:s.interests||"Not specified"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Location"}),i.jsx("p",{className:"text-gray-800",children:s.location||"Not specified"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"My Story"}),i.jsx("p",{className:"text-gray-800",children:s.story||"Not specified"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",style:C.subsectionTitle,children:"Profile Information"}),p?i.jsxs("div",{className:"space-x-2",children:[i.jsx("button",{onClick:()=>x(!1),className:"text-gray-500 hover:text-gray-700 text-sm font-medium",disabled:w,children:"Cancel"}),i.jsx("button",{onClick:D,className:"text-brand-primary hover:text-brand-primary/80 text-sm font-medium",disabled:w,children:w?"Saving...":"Save"})]}):i.jsx("button",{onClick:()=>x(!0),className:"text-brand-primary hover:text-brand-primary/80 text-sm font-medium",children:"Edit"})]}),p?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Name"}),i.jsx("input",{type:"text",value:a.name,onChange:T=>l({...a,name:T.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:border-transparent",placeholder:"Your name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Store Name"}),i.jsx("input",{type:"text",value:a.storeName,onChange:T=>l({...a,storeName:T.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:border-transparent",placeholder:"Your store name"})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Name"}),i.jsx("p",{className:"text-gray-800",children:a.name})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Store Name"}),i.jsx("p",{className:"text-gray-800",children:a.storeName})]})]})]})]})]})]})}const pue=()=>{const[t,e]=b.useState(!1),[n,s]=b.useState(null),r=b.useRef(null),a=b.useRef(null),l=b.useRef(null);return{isActive:t,error:n,videoRef:r,canvasRef:a,startCamera:async()=>{try{s(null);const m=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},audio:!1});r.current&&(r.current.srcObject=m,l.current=m,e(!0))}catch(m){console.error("Error accessing camera:",m),s("Unable to access camera. Please check permissions.")}},stopCamera:()=>{l.current&&(l.current.getTracks().forEach(p=>p.stop()),l.current=null),r.current&&(r.current.srcObject=null),e(!1),s(null)},capturePhoto:()=>new Promise((m,p)=>{if(!r.current||!a.current){p(new Error("Camera not ready"));return}const x=r.current,w=a.current;w.width=x.videoWidth,w.height=x.videoHeight,w.getContext("2d").drawImage(x,0,0),w.toBlob(S=>{S?m(S):p(new Error("Failed to capture photo"))},"image/jpeg",.8)})}},xue=({onPhotoCapture:t,onFileUpload:e})=>{const n=pue(),[s,r]=b.useState(!1),[a,l]=b.useState(null),d=b.useRef(null),u=async()=>{try{const x=await n.capturePhoto();l(x),t(x),r(!1),n.stopCamera()}catch(x){console.error("Error capturing photo:",x),alert("Error capturing photo. Please try again.")}},f=x=>{const w=x.target.files[0];w&&(l(w),e(w))},m=async()=>{r(!0),await n.startCamera()},p=()=>{r(!1),n.stopCamera()};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("button",{onClick:m,className:"flex items-center justify-center space-x-2 bg-brand-primary text-white py-3 px-4 rounded-lg hover:bg-brand-primary/90 transition-colors",children:[i.jsx("span",{children:"📷"}),i.jsx("span",{children:"Take Photo"})]}),i.jsxs("button",{onClick:()=>{var x;return(x=d.current)==null?void 0:x.click()},className:"flex items-center justify-center space-x-2 bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors",children:[i.jsx("span",{children:"📁"}),i.jsx("span",{children:"Upload File"})]})]}),i.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:f,className:"hidden"}),s&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-heading text-lg font-semibold",children:"Take Verification Photo"}),i.jsx("button",{onClick:p,className:"text-gray-500 hover:text-gray-700 text-xl",children:"✕"})]}),n.error&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:i.jsx("p",{className:"text-red-800 text-sm",children:n.error})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("video",{ref:n.videoRef,autoPlay:!0,playsInline:!0,className:"w-full rounded-lg bg-gray-100",style:{maxHeight:"400px"}}),i.jsxs("div",{className:"absolute top-4 left-4 right-4 bg-black bg-opacity-75 text-white p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm",children:"📋 Make sure to include:"}),i.jsxs("ul",{className:"text-xs mt-1 space-y-1",children:[i.jsx("li",{children:"• Your name tag or apron"}),i.jsx("li",{children:"• Store environment in background"}),i.jsxs("li",{children:["• Today's code: ",i.jsxs("strong",{children:["ENG-",String(new Date().getDate()).padStart(2,"0"),String(new Date().getMonth()+1).padStart(2,"0")]})]})]})]})]}),i.jsx("canvas",{ref:n.canvasRef,className:"hidden"}),i.jsxs("div",{className:"flex justify-center space-x-4",children:[i.jsx("button",{onClick:u,disabled:!n.isActive,className:"bg-brand-primary text-white px-6 py-2 rounded-lg hover:bg-brand-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:"📷 Capture Photo"}),i.jsx("button",{onClick:p,className:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600",children:"Cancel"})]})]})]})}),a&&i.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-green-600",children:"✓"}),i.jsx("span",{className:"text-green-800 font-medium",children:"Photo ready for submission"})]}),i.jsx("p",{className:"text-green-700 text-sm mt-1",children:"Photo captured successfully. You can now submit your verification."})]})]})};function yue(){const{user:t}=bn(),[e,n]=b.useState(null),[s,r]=b.useState(null),[a,l]=b.useState(""),[d,u]=b.useState(""),[f,m]=b.useState(!1),[p,x]=b.useState(""),[w,j]=b.useState(""),[S,_]=b.useState({}),[E,C]=b.useState(""),I=[{id:"nature-made",name:"Nature Made"},{id:"garden-of-life",name:"Garden of Life"},{id:"new-chapter",name:"New Chapter"},{id:"nordic-naturals",name:"Nordic Naturals"},{id:"store-manager",name:"Store Manager"}],M=()=>{const R=new Date;return`ENG-${String(R.getDate()).padStart(2,"0")}${String(R.getMonth()+1).padStart(2,"0")}`},V=async R=>new Promise(P=>{const O=new Image;O.onload=()=>{P({width:O.width,height:O.height,aspectRatio:O.width/O.height})},O.onerror=()=>P(null),O.src=URL.createObjectURL(R)}),z=async R=>{if(R){n(R),r(URL.createObjectURL(R));try{const P={fileName:R.name||`capture-${Date.now()}.jpg`,mimeType:R.type||"image/jpeg",size:R.size,capturedViaCamera:!R.name,clientInfo:{userAgent:navigator.userAgent,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,hardwareConcurrency:navigator.hardwareConcurrency,platform:navigator.platform,memory:navigator.deviceMemory||"unknown"},aiPlaceholders:{pending:!0,confidence:null,moderation:null}},O=await V(R);O&&(P.dimensions=O),_(P)}catch(P){console.error("Error processing metadata:",P)}}},D=()=>{if(C("requesting"),!navigator.geolocation){C("unavailable");return}navigator.geolocation.getCurrentPosition(R=>{_(P=>({...P,geolocation:{latitude:R.coords.latitude,longitude:R.coords.longitude,accuracy:R.coords.accuracy,timestamp:R.timestamp}})),C("granted")},R=>{console.error("Geolocation error:",R),C("denied")},{timeout:1e4,maximumAge:6e4})},A=()=>{s&&URL.revokeObjectURL(s),n(null),r(null),_(R=>({...R,fileName:void 0,mimeType:void 0,size:void 0,dimensions:void 0,capturedViaCamera:void 0}))},T=async()=>{if(!e&&!a){j("Please provide a photo or verification code");return}j(""),x(""),m(!0);try{let R=null;if(e){const F=af(Xa,`verification/${t.uid}/${Date.now()}_${S.fileName||"verification.jpg"}`);await VN(F,e),R=await sp(F)}const P=M(),O={userId:t.uid,userEmail:t.email,userName:t.name||t.displayName||"New User",storeName:t.storeName||t.storeCode||"Unknown Store",verificationCodeDaily:P,providedCode:a,selectedBrand:d,photoURL:R,metadata:S,status:"pending",submittedAt:ze(),aiPendingAnalysis:!0};await cr(Ue(ce,"verification_requests"),O),await Qn(Je(ce,"users",t.uid),{verificationStatus:"pending",lastVerificationSubmission:ze()}),x("Verification submitted successfully! We'll review your submission within 1-2 business days."),A(),l(""),u("")}catch(R){console.error("Error submitting verification:",R),j(`Error submitting verification: ${R.message}`)}finally{m(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verification Center"}),i.jsx("p",{className:"text-gray-600",children:"Submit your verification to unlock premium features and communities."})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Current Status"}),i.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[(t==null?void 0:t.verificationStatus)==="approved"&&i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"✓ Verified"}),(t==null?void 0:t.verificationStatus)==="pending"&&i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:"⏳ Under Review"}),(t==null?void 0:t.verificationStatus)==="rejected"&&i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:"⚠ Rejected"}),(!(t!=null&&t.verificationStatus)||(t==null?void 0:t.verificationStatus)==="not_submitted")&&i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:"🔒 Not Verified"})]}),(t==null?void 0:t.verificationStatus)==="pending"&&i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-4",children:i.jsx("p",{className:"text-yellow-800",children:"Your verification is under review. We'll notify you within 1-2 business days."})}),(t==null?void 0:t.verificationStatus)==="approved"&&i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4 mb-4",children:i.jsx("p",{className:"text-green-800",children:"🎉 Congratulations! Your account is verified and you have full access to all features."})}),(t==null?void 0:t.verificationStatus)==="rejected"&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:[i.jsx("p",{className:"text-red-800 mb-2",children:"Your verification was rejected:"}),i.jsx("p",{className:"text-red-700 text-sm",children:(t==null?void 0:t.rejectionReason)||"Please ensure your photo meets all requirements and try again."})]}),(!(t!=null&&t.verificationStatus)||(t==null?void 0:t.verificationStatus)==="not_submitted"||(t==null?void 0:t.verificationStatus)==="rejected")&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Photo Verification"}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:i.jsxs("p",{className:"text-blue-800 text-sm",children:["Take a photo of yourself ",i.jsx("strong",{children:"in-store with your name tag or apron visible"}),". Include today's verification code ",i.jsx("strong",{children:M()})," written on a piece of paper in the photo."]})}),e?i.jsxs("div",{className:"space-y-4 mb-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-green-600 font-medium mb-2",children:"✅ Photo ready for submission"}),s&&i.jsx("img",{src:s,alt:"Verification preview",className:"max-w-full h-48 object-cover rounded-lg mx-auto"})]}),i.jsx("button",{type:"button",onClick:A,className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200",children:"Clear Photo"}),!S.geolocation&&i.jsx("button",{type:"button",onClick:D,disabled:E==="requesting",className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 disabled:opacity-50",children:E==="requesting"?"Requesting Location...":"📍 Add Location (Optional)"}),E==="granted"&&i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-2 text-sm text-green-800",children:"✓ Location added to verification"}),E==="denied"&&i.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-2 text-sm text-gray-600",children:"Location access denied - that's okay, it's optional"})]}):i.jsx(xue,{onPhotoSelected:z,className:"mb-4"})]}),i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Brand/Manager Code Verification"}),i.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Get a verification code from your store manager or brand representative."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Brand/Source"}),i.jsxs("select",{value:d,onChange:R=>u(R.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent",children:[i.jsx("option",{value:"",children:"Choose brand or source..."}),I.map(R=>i.jsx("option",{value:R.id,children:R.name},R.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),i.jsx("input",{type:"text",value:a,onChange:R=>l(R.target.value),placeholder:"Enter your verification code",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent"})]})]})]}),i.jsx("button",{onClick:T,disabled:f||!e&&!a,className:"w-full bg-brand-primary text-white py-3 px-4 rounded-lg hover:bg-brand-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"⏳ Submitting...":"✅ Submit Verification"}),p&&i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4 mt-4",children:i.jsx("p",{className:"text-green-800",children:p})}),w&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mt-4",children:i.jsx("p",{className:"text-red-800",children:w})})]})]})]})}const ij=()=>i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-4 shadow-sm animate-pulse",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/5 mb-2"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/5"})]}),i.jsxs("div",{className:"space-y-2 my-3",children:[i.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]}),i.jsxs("div",{className:"flex justify-between items-center mt-4",children:[i.jsx("div",{className:"h-5 bg-gray-200 rounded w-20"}),i.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})]})]}),vue=({post:t,liked:e,likeCount:n,commentCount:s,onToggleLike:r,pendingLike:a,comments:l,commentInput:d,onChangeComment:u,onAddComment:f,submittingComment:m})=>{var w;const p=(w=t.createdAt)!=null&&w.toDate?new Date(t.createdAt.toDate()).toLocaleString():"Recently",x=(j,S=160)=>j&&j.length>S?`${j.slice(0,S)}...`:j||"";return i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-4 shadow-sm hover:shadow transition-shadow",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h3",{className:"font-medium text-lg text-gray-900",children:t.title||"Untitled Post"}),i.jsxs("div",{className:"text-xs text-gray-500 flex items-center",children:[i.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded mr-2",children:t.authorRole||"user"}),i.jsx("span",{children:p})]})]}),t.body&&i.jsx("p",{className:"text-gray-700 my-3",children:x(t.body)}),i.jsxs("div",{className:"flex justify-between items-center mt-4",children:[i.jsxs("div",{className:"flex space-x-5 items-center",children:[i.jsxs("button",{onClick:()=>r(t.id),disabled:a,className:`flex items-center space-x-1 ${e?"text-brand-primary":"text-gray-500"} ${a?"opacity-50 cursor-not-allowed":"hover:text-brand-primary"}`,children:[i.jsx("span",{role:"img","aria-label":"like",children:e?"❤️":"🤍"}),i.jsx("span",{children:n??0})]}),i.jsxs("div",{className:"flex items-center space-x-1 text-gray-500",children:[i.jsx("span",{role:"img","aria-label":"comments",children:"💬"}),i.jsx("span",{children:s??0})]})]}),i.jsx($n,{to:`/community/post/${t.id}`,className:"text-sm px-3 py-1 bg-brand-primary text-white rounded hover:bg-brand-primary/90",children:"View thread"})]}),l&&l.length>0&&i.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-100",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Recent comments:"}),i.jsx("div",{className:"space-y-2",children:l.map(j=>{var S;return i.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[i.jsx("span",{children:j.userRole||"user"}),i.jsx("span",{children:(S=j.createdAt)!=null&&S.toDate?new Date(j.createdAt.toDate()).toLocaleString():"Recently"})]}),i.jsx("p",{className:"text-sm",children:x(j.text,100)})]},j.id)})})]}),i.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:d||"",onChange:j=>u==null?void 0:u(t.id,j.target.value),placeholder:"Add a comment…",className:"flex-1 p-2 text-sm border border-gray-300 rounded"}),i.jsx("button",{onClick:()=>f==null?void 0:f(t),disabled:m||!(d!=null&&d.trim()),className:"text-sm px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50",children:m?"Posting…":"Comment"})]})})]})};function bue(){const{user:t}=bn(),[e,n]=b.useState([]),[s,r]=b.useState(!0),[a,l]=b.useState(!1),[d,u]=b.useState(!0),f=b.useRef(null),[m,p]=b.useState(new Set),[x,w]=b.useState(new Set),[j,S]=b.useState({}),[_,E]=b.useState({}),[C,I]=b.useState({}),[M,V]=b.useState({}),[z,D]=b.useState(new Set),[A,T]=b.useState([]),[R,P]=b.useState(!0),[O,F]=b.useState(""),[J,Z]=b.useState(""),[q,Y]=b.useState(null),[W,H]=b.useState(!1),[B,K]=b.useState(""),[ne,te]=b.useState(!1),fe=(t==null?void 0:t.role)==="super_admin"||(t==null?void 0:t.role)==="brand_manager",ke=q==="whats-good"||fe,Ee=fe||q==="whats-good",ve=(je,qe=140)=>je&&je.length>qe?`${je.slice(0,qe)}...`:je||"",le=b.useCallback(async je=>{if(!je||je.length===0)return;const qe={},ct={};for(const dt of je){const pt=yt(Ue(ce,"post_likes"),ht("postId","==",dt)),X=yt(Ue(ce,"community_comments"),ht("postId","==",dt)),[re,he]=await Promise.all([ka(pt),ka(X)]);qe[dt]=re.data().count||0,ct[dt]=he.data().count||0}S(dt=>({...dt,...qe})),E(dt=>({...dt,...ct}))},[]),Ne=b.useCallback(async(je,qe)=>{if(!qe||!je||je.length===0)return;const ct=new Set;for(const dt of je){const pt=Je(ce,"post_likes",`${dt}_${qe}`);(await _r(pt)).exists()&&ct.add(dt)}p(dt=>{const pt=new Set(dt);return ct.forEach(X=>pt.add(X)),pt})},[]),Pe=b.useCallback(async je=>{if(!je||je.length===0)return;const qe={};for(const ct of je){const dt=yt(Ue(ce,"community_comments"),ht("postId","==",ct),Jn("createdAt","desc"),zr(3)),pt=await fs(dt);qe[ct]=pt.docs.map(X=>({id:X.id,...X.data()}))}I(ct=>({...ct,...qe}))},[]),Ge=async je=>{if(!(t!=null&&t.uid))return;const qe=(M[je.id]||"").trim();if(!qe||z.has(je.id))return;const ct=new Set(z);ct.add(je.id),D(ct);try{await cr(Ue(ce,"community_comments"),{postId:je.id,communityId:je.communityId||"whats-good",brandId:je.brandId||null,userId:t.uid,userRole:t.role||"user",text:qe,createdAt:ze()}),E(dt=>({...dt,[je.id]:(dt[je.id]||0)+1})),V(dt=>({...dt,[je.id]:""})),await Pe([je.id])}catch(dt){console.error("Failed to add comment",dt)}finally{const dt=new Set(z);dt.delete(je.id),D(dt)}};b.useEffect(()=>{const je=yt(Ue(ce,"community_posts"),ht("visibility","==","public"),Jn("createdAt","desc"),zr(10)),qe=Ln(je,async ct=>{const dt=ct.docs.map(X=>({id:X.id,...X.data()}));n(dt),f.current=ct.docs[ct.docs.length-1]||null,u(ct.size===10),r(!1);const pt=dt.map(X=>X.id);await Promise.all([le(pt),Pe(pt),Ne(pt,t==null?void 0:t.uid)])});return()=>qe()},[t==null?void 0:t.uid,le,Pe,Ne]);const Ye=async()=>{if(!(!f.current||a)){l(!0);try{const je=yt(Ue(ce,"community_posts"),ht("visibility","==","public"),Jn("createdAt","desc"),DM(f.current),zr(10)),qe=await fs(je);if(qe.empty){u(!1);return}const ct=qe.docs.map(pt=>({id:pt.id,...pt.data()}));n(pt=>[...pt,...ct]),f.current=qe.docs[qe.docs.length-1]||null,u(qe.size===10);const dt=ct.map(pt=>pt.id);await Promise.all([le(dt),Pe(dt),Ne(dt,t==null?void 0:t.uid)])}finally{l(!1)}}},ot=async je=>{if(!(t!=null&&t.uid)||x.has(je))return;w(he=>new Set(he).add(je));const qe=Je(ce,"post_likes",`${je}_${t.uid}`);(await _r(qe)).exists()?(await Zs(qe),p(he=>{const Ae=new Set(he);return Ae.delete(je),Ae})):(await qr(qe,{postId:je,userId:t.uid,createdAt:ze()}),p(he=>{const Ae=new Set(he);return Ae.add(je),Ae}));const dt=yt(Ue(ce,"post_likes"),ht("postId","==",je)),pt=yt(Ue(ce,"community_comments"),ht("postId","==",je)),[X,re]=await Promise.all([ka(dt),ka(pt)]);S(he=>({...he,[je]:X.data().count||0})),E(he=>({...he,[je]:re.data().count||0})),w(he=>{const Ae=new Set(he);return Ae.delete(je),Ae})},Dt=async je=>{if(je.preventDefault(),!(!Ee||!O.trim()||!J.trim()||W)){H(!0),K("");try{await cr(Ue(ce,"community_posts"),{title:O.trim(),body:J.trim(),visibility:"public",createdAt:ze(),userId:(t==null?void 0:t.uid)||null,authorRole:(t==null?void 0:t.role)||"user",communityId:q||"whats-good",communityName:q||"whats-good"}),F(""),Z("")}catch(qe){console.error(qe),K("Failed to create post")}finally{H(!1)}}};return b.useEffect(()=>{(async()=>{try{const qe=yt(Ue(ce,"communities"),ht("isActive","==",!0),ht("isPublic","==",!0));let dt=(await fs(qe)).docs.map(pt=>({id:pt.id,...pt.data()}));dt.sort((pt,X)=>pt.id==="whats-good"?-1:X.id==="whats-good"?1:(pt.name||"").localeCompare(X.name||"")),(!dt||dt.length===0)&&(dt=[{id:"whats-good",name:"What's Good",description:"Open community for all users",members:0,badge:"Open to All",isPublic:!0,isActive:!0}]),T(dt)}catch(qe){console.error("Error loading communities",qe),te(!0)}finally{P(!1)}})()},[]),i.jsx("div",{className:"space-y-8",children:i.jsxs("div",{children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Communities"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Public community posts"})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Communities"}),R?i.jsx("div",{className:"text-gray-500 text-sm mt-2",children:"Loading communities…"}):ne&&A.length===0?i.jsx("div",{className:"mt-3",children:i.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"What's Good"}),i.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-brand-primary/10 text-brand-primary",children:"Open to All"})]}),i.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Latest product drops and industry buzz."}),i.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"2500 members"})]}),i.jsx($n,{to:"/community/whats-good",className:"ml-3 text-sm px-3 py-1 bg-brand-primary text-white rounded hover:bg-brand-primary/90",children:"Open"})]})})}):A.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3",children:A.map(je=>i.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:je.name||je.id}),je.badge&&i.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-brand-primary/10 text-brand-primary",children:je.badge})]}),i.jsx("p",{className:"text-gray-600 text-sm mt-1",children:ve(je.description,140)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:[je.members??je.memberCount??0," members"]})]}),je.id==="whats-good"?i.jsx("button",{onClick:()=>Y(qe=>qe==="whats-good"?null:"whats-good"),className:"ml-3 text-sm px-3 py-1 bg-brand-primary text-white rounded hover:bg-brand-primary/90",children:q==="whats-good"?"Close":"Open"}):i.jsx($n,{to:`/community/${je.id}`,className:"ml-3 text-sm px-3 py-1 bg-brand-primary text-white rounded hover:bg-brand-primary/90",children:"Open"})]})},je.id))}):i.jsx("div",{className:"text-gray-500 text-sm mt-2",children:"No public communities available."})]}),A.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Community Overview"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3",children:A.slice(0,3).map(je=>i.jsxs("div",{className:"text-center p-4 bg-white border border-gray-200 rounded-lg shadow-sm",children:[i.jsx("div",{className:"font-medium text-gray-900",children:je.name||je.id}),i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:ve(je.description,100)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:[je.members??je.memberCount??0," members"]})]},je.id))})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Community Feed"}),s?i.jsxs("div",{className:"flex flex-col py-4",children:[i.jsx(ij,{}),i.jsx(ij,{}),i.jsx(ij,{})]}):e.length>0?i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm mt-3",children:[i.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.map(je=>i.jsx(vue,{post:je,liked:m.has(je.id),likeCount:j[je.id],commentCount:_[je.id],onToggleLike:ot,pendingLike:x.has(je.id),comments:C[je.id]||[],commentInput:M[je.id]||"",onChangeComment:(qe,ct)=>V(dt=>({...dt,[qe]:ct})),onAddComment:Ge,submittingComment:z.has(je.id)},je.id))}),d&&i.jsx("div",{className:"flex justify-center mt-2",children:i.jsx("button",{onClick:Ye,disabled:a,className:"px-4 py-2 rounded bg-brand-primary text-white hover:bg-brand-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Loading…":"Load More"})})]}):i.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center mt-4",children:i.jsx("p",{className:"text-gray-500",children:"No public posts yet"})})]}),ke&&i.jsxs("form",{onSubmit:Dt,className:"mt-6 bg-white rounded-lg border border-gray-200 p-4 shadow-sm",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:["Create a Post ",q?`in ${q}`:""]}),B&&i.jsx("div",{className:"mb-2 text-sm text-red-600",children:B}),i.jsx("input",{type:"text",value:O,onChange:je=>F(je.target.value),placeholder:"Post title",className:"w-full mb-3 p-2 border border-gray-300 rounded"}),i.jsx("textarea",{value:J,onChange:je=>Z(je.target.value),placeholder:"Write your post…",rows:"4",className:"w-full mb-3 p-2 border border-gray-300 rounded"}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"submit",disabled:W||!O.trim()||!J.trim(),className:"px-4 py-2 rounded bg-brand-primary text-white hover:bg-brand-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:W?"Posting…":"Post"})})]}),!1]})})}function wue(){const{user:t}=bn();ks();const[e,n]=b.useState(""),[s,r]=b.useState([]),[a,l]=b.useState(!0),[d,u]=b.useState(!1),[f,m]=b.useState([]),[p,x]=b.useState({}),[w,j]=b.useState(new Set),S=b.useRef(null),_=b.useRef({});b.useEffect(()=>{(async()=>{u(!0);try{const V=yt(Ue(ce,"brands"),Jn("name"),zr(20)),D=(await fs(V)).docs.map(R=>({id:R.id,...R.data()})),A=e?D.filter(R=>{var P,O,F;return((P=R.name)==null?void 0:P.toLowerCase().includes(e.toLowerCase()))||((O=R.category)==null?void 0:O.toLowerCase().includes(e.toLowerCase()))||((F=R.description)==null?void 0:F.toLowerCase().includes(e.toLowerCase()))}):D;A.some(R=>R.id==="calm-well-co")||A.push({id:"calm-well-co",name:"Calm Well Co",description:"Natural wellness and CBD products",category:"Wellness",logo:"https://placehold.co/100x100/e5e5e5/666666?text=CWC",isExample:!0}),r(A)}catch(V){console.error("Error loading brands:",V),r([{id:"calm-well-co",name:"Calm Well Co",description:"Natural wellness and CBD products",category:"Wellness",logo:"https://placehold.co/100x100/e5e5e5/666666?text=CWC",isExample:!0}])}finally{u(!1),l(!1)}})()},[e]),b.useEffect(()=>{if(!(t!=null&&t.uid))return;const M=yt(Ue(ce,"brand_follows"),ht("userId","==",t.uid));return S.current=Ln(M,V=>{const z=V.docs.map(D=>D.data());m(z)},V=>{console.error("Error loading follows:",V),m([])}),()=>{S.current&&S.current()}},[t]),b.useEffect(()=>{if(Object.values(_.current).forEach(V=>{Object.values(V).forEach(z=>{typeof z=="function"&&z()})}),_.current={},!f.length)return;const M={};return f.forEach(V=>{M[V.brandId]={communities:[],trainings:[],challenges:[],loading:!0}}),x(M),f.forEach(V=>{const z=V.brandId;_.current[z]={};const D=yt(Ue(ce,"communities"),ht("brandId","==",z),ht("isPublic","==",!0),zr(5));let A=[],T=[];const R=()=>{const J=new Map;[...A,...T].forEach(q=>{J.set(q.id,q)});const Z=Array.from(J.values()).sort((q,Y)=>{var B,K;const W=(B=q.createdAt)!=null&&B.toDate?q.createdAt.toDate():q.createdAt||new Date(0);return((K=Y.createdAt)!=null&&K.toDate?Y.createdAt.toDate():Y.createdAt||new Date(0))-W}).slice(0,5);x(q=>({...q,[z]:{...q[z],communities:Z}}))};_.current[z].communities=Ln(D,J=>{A=J.docs.map(Z=>({id:Z.id,...Z.data()})),R()},J=>{console.error(`Error loading communities for ${z}:`,J)});const P=yt(Ue(ce,"brands",z,"communities"),ht("isPublic","==",!0),zr(5));_.current[z].communitiesScoped=()=>{},fs(P).then(J=>{T=J.docs.map(Z=>({id:Z.id,...Z.data()})),R()}).catch(J=>{console.error(`Error loading scoped communities for ${z}:`,J)});const O=yt(Ue(ce,"trainings"),ht("brandId","==",z),ht("published","==",!0),zr(5));_.current[z].trainings=Ln(O,J=>{const Z=J.docs.map(q=>({id:q.id,...q.data()}));x(q=>({...q,[z]:{...q[z],trainings:Z}}))},J=>{console.error(`Error loading trainings for ${z}:`,J)});const F=yt(Ue(ce,"challenges"),ht("brandId","==",z),zr(5));_.current[z].challenges=Ln(F,J=>{const Z=J.docs.map(q=>({id:q.id,...q.data()}));x(q=>({...q,[z]:{...q[z],challenges:Z,loading:!1}}))},J=>{console.error(`Error loading challenges for ${z}:`,J),x(Z=>({...Z,[z]:{...Z[z],loading:!1}}))})}),()=>{Object.values(_.current).forEach(V=>{Object.values(V).forEach(z=>{typeof z=="function"&&z()})})}},[f]);const E=async M=>{if(!(t!=null&&t.uid)){alert("You need to be logged in to follow brands");return}const V=M.id;j(R=>{const P=new Set(R);return P.add(V),P});const z=M.name||M.displayName||"Unknown Brand",D={brandId:V,brandName:z,userId:t.uid,createdAt:ze()},A=`${t.uid}_${V}`,T=f.some(R=>R.brandId===V);T||m(R=>[...R,D]);try{await qr(Je(ce,"brand_follows",A),D),console.log(`Successfully followed brand: ${z}`)}catch(R){console.error("Error following brand:",R),T||m(P=>P.filter(O=>O.brandId!==V)),alert("Failed to follow brand. Please try again.")}finally{j(R=>{const P=new Set(R);return P.delete(V),P})}},C=async M=>{if(!(t!=null&&t.uid))return;j(D=>{const A=new Set(D);return A.add(M),A});const V=[...f];m(D=>D.filter(A=>A.brandId!==M));const z=`${t.uid}_${M}`;try{await Zs(Je(ce,"brand_follows",z)),console.log(`Successfully unfollowed brand: ${M}`)}catch(D){console.error("Error unfollowing brand:",D),m(V),alert("Failed to unfollow brand. Please try again.")}finally{j(D=>{const A=new Set(D);return A.delete(M),A})}},I=M=>f.some(V=>V.brandId===M);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Brands"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Find and explore brands, access challenges and exclusive content"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:e,onChange:M=>n(M.target.value),placeholder:"Search brands by name, category, or keyword...",className:"w-full p-3 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent"}),i.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:i.jsx("span",{role:"img","aria-label":"search",children:"🔍"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Available Brands"}),a?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-brand-primary"})}):s.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(M=>{var V;return i.jsxs("div",{className:`border rounded-lg p-4 ${M.id==="calm-well-co"?"border-brand-primary bg-brand-primary/5":"border-gray-200"}`,children:[i.jsxs("div",{className:"flex items-start",children:[M.logo?i.jsx("img",{src:M.logo,alt:`${M.name} logo`,className:"w-12 h-12 object-contain rounded mr-3",onError:z=>{z.target.onerror=null,z.target.src="https://placehold.co/48x48/e5e5e5/666666?text=Logo"}}):i.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded flex items-center justify-center mr-3",children:i.jsx("span",{className:"text-gray-500 text-xs",children:((V=M.name)==null?void 0:V.substring(0,2))||"BR"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-medium text-gray-900",children:M.name}),i.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:M.description||"No description available"}),M.category&&i.jsx("span",{className:"inline-block mt-1 text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded",children:M.category})]})]}),i.jsx("div",{className:"mt-3 flex justify-end",children:I(M.id)?i.jsx("button",{onClick:()=>C(M.id),disabled:w.has(M.id),className:`text-sm px-3 py-1.5 ${w.has(M.id)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 hover:bg-gray-300 text-gray-700"} rounded`,children:w.has(M.id)?"Processing...":"Unfollow"}):i.jsx("button",{onClick:()=>E(M),disabled:w.has(M.id),className:`text-sm px-3 py-1.5 ${w.has(M.id)?"bg-brand-primary/50 cursor-not-allowed":"bg-brand-primary hover:bg-brand-primary/90"} text-white rounded`,children:w.has(M.id)?"Processing...":"Follow"})})]},M.id)})}):i.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[i.jsx("p",{className:"text-gray-500",children:"No brands found matching your search"}),i.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Try a different search term or browse all brands"})]})]}),f.length>0&&i.jsxs("div",{className:"space-y-4 mt-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Following"}),f.map(M=>{var z,D,A;const V=p[M.brandId];return i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium",children:M.brandName}),i.jsx("button",{onClick:()=>C(M.brandId),disabled:w.has(M.brandId),className:`text-xs px-2 py-1 ${w.has(M.brandId)?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:text-gray-800"}`,children:w.has(M.brandId)?"Processing...":"Unfollow"})]}),V!=null&&V.loading?i.jsx("div",{className:"flex justify-center py-4",children:i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-brand-primary"})}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"border border-gray-100 rounded p-3",children:[i.jsx("h4",{className:"font-medium mb-2",children:"Communities"}),((z=V==null?void 0:V.communities)==null?void 0:z.length)>0?i.jsx("div",{className:"space-y-2",children:V.communities.map(T=>i.jsx($n,{to:`/community/${T.id}`,className:"block text-sm px-3 py-2 bg-gray-50 hover:bg-gray-100 rounded text-brand-primary",children:T.name||"Unnamed Community"},T.id))}):i.jsx("p",{className:"text-sm text-gray-500",children:"No communities available"})]}),i.jsxs("div",{className:"border border-gray-100 rounded p-3",children:[i.jsx("h4",{className:"font-medium mb-2",children:"Learning"}),((D=V==null?void 0:V.trainings)==null?void 0:D.length)>0?i.jsx("div",{className:"space-y-2",children:V.trainings.map(T=>i.jsx($n,{to:`/staff/trainings/${T.id}`,className:"block text-sm px-3 py-2 bg-gray-50 hover:bg-gray-100 rounded text-brand-primary",children:T.title||"Unnamed Training"},T.id))}):i.jsx("p",{className:"text-sm text-gray-500",children:"No trainings available"})]}),i.jsxs("div",{className:"border border-gray-100 rounded p-3",children:[i.jsx("h4",{className:"font-medium mb-2",children:"Challenges"}),((A=V==null?void 0:V.challenges)==null?void 0:A.length)>0?i.jsx("div",{className:"space-y-2",children:V.challenges.map(T=>i.jsx("div",{className:"text-sm px-3 py-2 bg-gray-50 rounded",children:T.title||"Unnamed Challenge"},T.id))}):i.jsx("p",{className:"text-sm text-gray-500",children:"No challenges available"})]})]})]},M.brandId)})]}),f.length===0&&i.jsxs("div",{className:"space-y-4 mt-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Brand Challenges"}),i.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[i.jsx("p",{className:"text-gray-500",children:"Complete challenges to earn points and advance your career"}),i.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Follow brands to see their challenges here"})]})]})]})}const aj=({training:t,progress:e,onStart:n,onComplete:s,isPending:r,onOpen:a})=>{const l=(e==null?void 0:e.status)||null,d=l==="completed",u=l==="in_progress",f=d?"Completed":u?"Resume":"Start",m=w=>w?(w.toDate?w.toDate():new Date(w)).toLocaleDateString():"",p=e!=null&&e.completedAt?m(e.completedAt):"",x=e!=null&&e.startedAt?m(e.startedAt):"";return i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow flex flex-col justify-between h-full cursor-pointer",onClick:a,children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-1 line-clamp-2",children:t.title||"Untitled Training"}),i.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:t.description||"No description available"}),t.modules&&t.modules.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:t.modules.map((w,j)=>i.jsx("span",{className:"inline-block bg-gray-100 text-xs text-gray-600 px-2 py-0.5 rounded",children:w},j))})]}),i.jsxs("div",{className:"flex justify-between items-center mt-4",children:[i.jsxs("div",{className:"text-xs text-gray-500",children:[d&&p&&`Completed: ${p}`,u&&x&&`Started: ${x}`]}),i.jsx("button",{onClick:w=>{w.stopPropagation(),d?s():(u||n(),a())},disabled:r||d,className:`px-3 py-1 text-sm rounded font-medium ${d?"bg-green-100 text-green-800 cursor-default":r?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-brand-primary text-white hover:bg-brand-primary/90"}`,children:r?"Processing...":f})]})]})},oj=()=>i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm flex flex-col justify-between h-full animate-pulse",children:[i.jsxs("div",{children:[i.jsx("div",{className:"h-5 w-3/4 bg-gray-200 rounded mb-2"}),i.jsx("div",{className:"h-4 w-full bg-gray-200 rounded mb-1"}),i.jsx("div",{className:"h-4 w-2/3 bg-gray-200 rounded"}),i.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[i.jsx("div",{className:"h-4 w-16 bg-gray-200 rounded"}),i.jsx("div",{className:"h-4 w-20 bg-gray-200 rounded"})]})]}),i.jsxs("div",{className:"flex justify-between items-center mt-4",children:[i.jsx("div",{className:"h-3 w-1/4 bg-gray-200 rounded"}),i.jsx("div",{className:"h-7 w-16 bg-gray-200 rounded"})]})]});function _ue(){const{user:t}=bn(),e=ks(),[n,s]=b.useState([]),[r,a]=b.useState({}),[l,d]=b.useState(!0),[u,f]=b.useState(!0),[m,p]=b.useState(""),[x,w]=b.useState(new Set),[j,S]=b.useState(new Set),_=b.useRef({});if(t&&t.role!=="staff")return i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center p-8",children:[i.jsx("span",{role:"img","aria-label":"lock",className:"text-4xl mb-4",children:"🔒"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Staff Access Only"}),i.jsx("p",{className:"text-gray-600 max-w-md",children:"This learning dashboard is available exclusively to staff members. If you believe you should have access, please contact support."})]});b.useEffect(()=>{if(!(t!=null&&t.uid))return;Object.values(_.current).forEach(P=>{typeof P=="function"&&P()});const T=yt(Ue(ce,"trainings"),ht("published","==",!0),Jn("createdAt","desc"),zr(50));d(!0),_.current.trainings=Ln(T,P=>{const O=P.docs.map(F=>({id:F.id,...F.data()}));s(O),d(!1)},P=>{s([]),d(!1)});const R=yt(Ue(ce,"training_progress"),ht("userId","==",t.uid));return f(!0),_.current.progress=Ln(R,P=>{const O={};P.docs.forEach(F=>{const J=F.data();J.trainingId&&(O[J.trainingId]={id:F.id,...J})}),a(O),f(!1)},P=>{a({}),f(!1)}),()=>{Object.values(_.current).forEach(P=>{typeof P=="function"&&P()})}},[t]);const E=b.useMemo(()=>{const T=new Set;return n.forEach(R=>{Array.isArray(R.modules)&&R.modules.forEach(P=>T.add(P))}),Array.from(T).sort()},[n]),C=b.useMemo(()=>n.filter(T=>{const R=!m||T.title&&T.title.toLowerCase().includes(m.toLowerCase()),P=x.size===0||Array.isArray(T.modules)&&T.modules.some(O=>x.has(O));return R&&P}),[n,m,x]),I=b.useMemo(()=>{const T=[];return Object.entries(r).forEach(([R,P])=>{if(P.status==="in_progress"||P.status==="not_started"){const O=n.find(F=>F.id===R);O&&T.push({...O,progress:P})}}),T},[n,r]),M=b.useMemo(()=>{const T=[];return Object.entries(r).forEach(([R,P])=>{if(P.status==="completed"){const O=n.find(F=>F.id===R);O&&T.push({...O,progress:P})}}),T.sort((R,P)=>{var J,Z,q,Y,W,H;const O=((q=(Z=(J=R.progress)==null?void 0:J.completedAt)==null?void 0:Z.toMillis)==null?void 0:q.call(Z))||0;return(((H=(W=(Y=P.progress)==null?void 0:Y.completedAt)==null?void 0:W.toMillis)==null?void 0:H.call(W))||0)-O})},[n,r]),V=T=>{w(R=>{const P=new Set(R);return P.has(T)?P.delete(T):P.add(T),P})},z=async T=>{if(!(!(t!=null&&t.uid)||j.has(T.id))){S(R=>{const P=new Set(R);return P.add(T.id),P});try{const R=`${t.uid}_${T.id}`,P=Je(ce,"training_progress",R),O=await _r(P),F=O.exists()?O.data():null,J={userId:t.uid,trainingId:T.id,status:"in_progress",updatedAt:ze(),demoSeed:!1};F!=null&&F.startedAt||(J.startedAt=ze()),await qr(P,J,{merge:!0})}catch{}finally{S(R=>{const P=new Set(R);return P.delete(T.id),P})}}},D=async T=>{if(!(!(t!=null&&t.uid)||j.has(T.id))){S(R=>{const P=new Set(R);return P.add(T.id),P});try{const R=`${t.uid}_${T.id}`,P=Je(ce,"training_progress",R);await qr(P,{userId:t.uid,trainingId:T.id,status:"completed",completedAt:ze(),updatedAt:ze()},{merge:!0})}catch{}finally{S(R=>{const P=new Set(R);return P.delete(T.id),P})}}},A=l||u;return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Learning Dashboard"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Continue your learning journey and discover new training content"})]}),i.jsxs("section",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{role:"img","aria-label":"book",children:"📚"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Continue Learning"})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:A?i.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(T=>i.jsx(oj,{},T))}):I.length>0?i.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:I.map(T=>i.jsx(aj,{training:T,progress:T.progress,onStart:()=>z(T),onComplete:()=>D(T),isPending:j.has(T.id),onOpen:()=>e(`/staff/trainings/${T.id}`)},T.id))}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx("p",{children:"No trainings in progress"}),i.jsx("p",{className:"text-sm mt-1",children:"Start a training from the Discover section below"})]})})]}),i.jsxs("section",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{role:"img","aria-label":"check",children:"✅"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Completed"})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:A?i.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:[1,2].map(T=>i.jsx(oj,{},T))}):M.length>0?i.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:M.map(T=>i.jsx(aj,{training:T,progress:T.progress,onStart:()=>z(T),onComplete:()=>D(T),isPending:j.has(T.id),onOpen:()=>e(`/staff/trainings/${T.id}`)},T.id))}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx("p",{children:"No completed trainings yet"}),i.jsx("p",{className:"text-sm mt-1",children:"Complete trainings to see them here"})]})})]}),i.jsxs("section",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{role:"img","aria-label":"sparkle",children:"✨"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Discover"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-grow",children:[i.jsx("input",{type:"text",value:m,onChange:T=>p(T.target.value),placeholder:"Search trainings...",className:"w-full p-2 pl-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent"}),i.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-2 pointer-events-none",children:i.jsx("span",{role:"img","aria-label":"search",className:"text-gray-400",children:"🔍"})})]}),i.jsx("div",{className:"flex flex-wrap gap-2 items-center",children:E.map(T=>i.jsx("button",{onClick:()=>V(T),className:`px-3 py-1 text-xs rounded-full transition-colors ${x.has(T)?"bg-brand-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:T},T))})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:A?i.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4].map(T=>i.jsx(oj,{},T))}):C.length>0?i.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:C.map(T=>{const R=r[T.id];return i.jsx(aj,{training:T,progress:R,onStart:()=>z(T),onComplete:()=>D(T),isPending:j.has(T.id),onOpen:()=>e(`/staff/trainings/${T.id}`)},T.id)})}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx("p",{children:"No trainings match your search"}),i.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your filters"})]})})]})]})}function b4({children:t}){const{user:e}=bn();return(e==null?void 0:e.verified)===!0||(e==null?void 0:e.verificationStatus)==="approved"?t:i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[i.jsx("h3",{className:"text-lg font-medium text-yellow-800 mb-2",children:"Verification Required"}),i.jsx("p",{className:"text-yellow-700 mb-4",children:"This content requires verification. Please complete the verification process to access it."}),i.jsx($n,{to:"/staff/verification",className:"inline-block bg-brand-primary hover:bg-brand-primary/90 text-white px-4 py-2 rounded-lg transition-colors",children:"Get Verified Now"})]})}function jue(){return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Firebase Emulator Dashboard"}),i.jsx(an,{variant:"outline",className:"ml-2 bg-amber-100 text-amber-800 border-amber-200",children:"Emulator Mode"})]}),i.jsx("p",{className:"text-muted-foreground",children:"Test your Firebase functionality in a local environment"})]}),i.jsx("div",{className:"mt-4 md:mt-0",children:i.jsx(Se,{variant:"outline",size:"sm",asChild:!0,children:i.jsxs("a",{href:"/emulator-diagnostics",target:"_blank",rel:"noopener noreferrer",children:[i.jsx(js,{className:"h-4 w-4 mr-2"}),"Run Diagnostics"]})})})]}),i.jsxs(ll,{defaultValue:"overview",className:"space-y-6",children:[i.jsxs(eo,{children:[i.jsx(on,{value:"overview",children:"Overview"}),i.jsx(on,{value:"auth",children:"Authentication"}),i.jsx(on,{value:"firestore",children:"Firestore"}),i.jsx(on,{value:"storage",children:"Storage"})]}),i.jsx(yn,{value:"overview",children:i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Firebase Emulator Test Dashboard"}),i.jsx(Vt,{children:"This dashboard will be expanded with comprehensive testing tools"})]}),i.jsxs(He,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(De,{className:"bg-blue-50",children:[i.jsx(et,{className:"pb-2",children:i.jsxs(nt,{className:"text-lg flex items-center",children:[i.jsx(r0,{className:"h-5 w-5 mr-2 text-blue-600"}),"Authentication"]})}),i.jsxs(He,{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Test user authentication and roles"}),i.jsx(Se,{variant:"link",className:"p-0 mt-2",children:"Coming Soon →"})]})]}),i.jsxs(De,{className:"bg-green-50",children:[i.jsx(et,{className:"pb-2",children:i.jsxs(nt,{className:"text-lg flex items-center",children:[i.jsx(Lh,{className:"h-5 w-5 mr-2 text-green-600"}),"Firestore"]})}),i.jsxs(He,{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Test database operations"}),i.jsx(Se,{variant:"link",className:"p-0 mt-2",children:"Coming Soon →"})]})]}),i.jsxs(De,{className:"bg-purple-50",children:[i.jsx(et,{className:"pb-2",children:i.jsxs(nt,{className:"text-lg flex items-center",children:[i.jsx(Hj,{className:"h-5 w-5 mr-2 text-purple-600"}),"Storage"]})}),i.jsxs(He,{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Test file uploads and downloads"}),i.jsx(Se,{variant:"link",className:"p-0 mt-2",children:"Coming Soon →"})]})]})]}),i.jsx("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-100",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(mO,{className:"h-5 w-5 text-blue-500 mr-3 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-blue-800",children:"Placeholder Dashboard"}),i.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"This is a placeholder for the Firebase Emulator Test Dashboard. The full implementation will include comprehensive tools for testing all Firebase services in the emulator environment."})]})]})})]})]})}),i.jsx(yn,{value:"auth",children:i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Authentication Testing"}),i.jsx(Vt,{children:"Coming soon"})]}),i.jsxs(He,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(r0,{className:"h-16 w-16 text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Authentication Testing Coming Soon"}),i.jsx("p",{className:"text-center text-muted-foreground max-w-md",children:"This section will include tools for testing user authentication, roles, and permissions."})]})]})}),i.jsx(yn,{value:"firestore",children:i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Firestore Testing"}),i.jsx(Vt,{children:"Coming soon"})]}),i.jsxs(He,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(Lh,{className:"h-16 w-16 text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Firestore Testing Coming Soon"}),i.jsx("p",{className:"text-center text-muted-foreground max-w-md",children:"This section will include tools for testing Firestore CRUD operations and security rules."})]})]})}),i.jsx(yn,{value:"storage",children:i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Storage Testing"}),i.jsx(Vt,{children:"Coming soon"})]}),i.jsxs(He,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(Hj,{className:"h-16 w-16 text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Storage Testing Coming Soon"}),i.jsx("p",{className:"text-center text-muted-foreground max-w-md",children:"This section will include tools for testing file uploads, downloads, and storage security rules."})]})]})})]}),i.jsxs(De,{className:"mt-6",children:[i.jsx(et,{children:i.jsx(nt,{className:"text-lg",children:"Emulator Status"})}),i.jsx(He,{children:i.jsxs("div",{className:"flex items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500 mr-2"}),i.jsx("span",{className:"font-medium",children:"Running in Emulator Mode"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Firebase emulators should be running at localhost:9099"})]}),i.jsx(Se,{variant:"outline",size:"sm",asChild:!0,children:i.jsxs("a",{href:"http://127.0.0.1:9099",target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:[i.jsx(tl,{className:"h-4 w-4 mr-2"}),"Emulator UI"]})})]})})]})]})}function Nue(){return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Firebase Emulator Diagnostics"}),i.jsx(an,{variant:"outline",className:"ml-2 bg-amber-100 text-amber-800 border-amber-200",children:"Emulator Mode"})]}),i.jsx("p",{className:"text-muted-foreground",children:"Diagnose and troubleshoot Firebase emulator connectivity issues"})]}),i.jsx("div",{className:"mt-4 md:mt-0",children:i.jsx(Se,{variant:"outline",size:"sm",asChild:!0,children:i.jsxs("a",{href:"/emulator",className:"flex items-center",children:[i.jsx(Lh,{className:"h-4 w-4 mr-2"}),"Emulator Dashboard"]})})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Emulator Diagnostics"}),i.jsx(Vt,{children:"Test connectivity to Firebase emulator services"})]}),i.jsx(He,{children:i.jsxs("div",{className:"space-y-6",children:[!Ia&&i.jsxs(Pi,{variant:"destructive",children:[i.jsx(js,{className:"h-4 w-4 mr-2"}),i.jsx(Oi,{children:"This page is designed to work with Firebase emulators in a local development environment. You appear to be accessing it from a production environment."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(De,{children:[i.jsx(et,{className:"pb-2",children:i.jsxs(nt,{className:"text-lg flex items-center",children:[i.jsx(r0,{className:"h-5 w-5 mr-2 text-blue-600"}),"Authentication"]})}),i.jsx(He,{children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"Status: Pending check"})})]}),i.jsxs(De,{children:[i.jsx(et,{className:"pb-2",children:i.jsxs(nt,{className:"text-lg flex items-center",children:[i.jsx(Lh,{className:"h-5 w-5 mr-2 text-green-600"}),"Firestore"]})}),i.jsx(He,{children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"Status: Pending check"})})]}),i.jsxs(De,{children:[i.jsx(et,{className:"pb-2",children:i.jsxs(nt,{className:"text-lg flex items-center",children:[i.jsx(Hj,{className:"h-5 w-5 mr-2 text-purple-600"}),"Storage"]})}),i.jsx(He,{children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"Status: Pending check"})})]})]}),i.jsx("div",{className:"flex justify-center mt-6",children:i.jsxs(Se,{className:"flex items-center",children:[i.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Run Diagnostics"]})}),i.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100 mt-6",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(mO,{className:"h-5 w-5 text-blue-500 mr-3 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-blue-800",children:"Placeholder"}),i.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"This is a placeholder for the Firebase Emulator Diagnostic Page. The full implementation will include comprehensive tools for diagnosing connectivity issues with Firebase emulators."})]})]})})]})})]}),i.jsxs(De,{children:[i.jsxs(et,{children:[i.jsx(nt,{children:"Emulator Configuration"}),i.jsx(Vt,{children:"Check your Firebase emulator configuration"})]}),i.jsx(He,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm",children:"Ensure your Firebase emulators are running with the following configuration:"}),i.jsx("div",{className:"bg-gray-50 p-4 rounded-md font-mono text-sm",children:i.jsx("pre",{className:"whitespace-pre-wrap",children:`{
  "emulators": {
    "auth": {
      "port": 9099,
      "host": "127.0.0.1"
    },
    "firestore": {
      "port": 8080,
      "host": "127.0.0.1"
    },
    "storage": {
      "port": 9199,
      "host": "127.0.0.1"
    },
    "ui": {
      "port": 4000,
      "host": "127.0.0.1"
    }
  }
}`})}),i.jsx("p",{className:"text-sm mt-4",children:"To start the emulators, run:"}),i.jsx("div",{className:"bg-gray-50 p-3 rounded-md font-mono text-sm",children:"firebase emulators:start"})]})})]})]})]})}const gi={tabs:{whatsGood:"What’s Good",pro:"Pro Feed"},searchPlaceholder:"Search posts",brandsLabel:"Brands",gate:{title:"Pro Feed is for verified staff.",subcopy:"Verification takes about 2 minutes.",cta:"Verify me"},empty:{whatsGood:"Fresh space. No posts yet.",pro:"No pro posts yet. Check back soon."},buttons:{like:"Like",comment:"Comment",viewTraining:"View training"},errors:{generic:"Something went wrong. Try again."}},w4=({id:t,isActive:e,onSelect:n,children:s,controls:r,dataTestId:a})=>i.jsx("button",{id:t,role:"tab","aria-selected":e,"aria-controls":r,tabIndex:e?0:-1,onClick:n,"data-testid":a,className:`flex-1 text-center px-4 h-11 min-h-[44px] rounded-md font-medium text-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 ${e?"bg-white text-deep-moss shadow-sm ring-deep-moss/30":"text-warm-gray hover:text-deep-moss"}`,type:"button",children:s});function Sue({value:t="whatsGood",onChange:e}){const n=b.useCallback(s=>{if(s.key!=="ArrowLeft"&&s.key!=="ArrowRight")return;s.preventDefault();const r=t==="whatsGood"?"pro":"whatsGood";e==null||e(r)},[t,e]);return i.jsxs("div",{role:"tablist","aria-label":"Community feeds",onKeyDown:n,className:"flex space-x-1 bg-oat-beige rounded-lg p-1",children:[i.jsx(w4,{id:"tab-whats-good",isActive:t==="whatsGood",onSelect:()=>e==null?void 0:e("whatsGood"),controls:"panel-whats-good",dataTestId:"tab-whats-good",children:gi.tabs.whatsGood}),i.jsx(w4,{id:"tab-pro",isActive:t==="pro",onSelect:()=>e==null?void 0:e("pro"),controls:"panel-pro",dataTestId:"tab-pro",children:gi.tabs.pro})]})}function she({postId:t,feedType:e="unknown"}){}function rhe({postId:t,liked:e}){}function ihe({postId:t,length:e}){}function Eue({postId:t,trainingId:e}){}function Cue(t){try{let e=t;if(!e)return"";if(typeof(e==null?void 0:e.toDate)=="function"&&(e=e.toDate()),typeof e=="number"&&(e=new Date(e)),typeof e=="string"){const d=new Date(e);isNaN(d)||(e=d)}if(!(e instanceof Date))return String(t||"");const n=Date.now()-e.getTime(),s=Math.max(1,Math.floor(n/1e3));if(s<60)return`${s}s ago`;const r=Math.floor(s/60);if(r<60)return`${r}m ago`;const a=Math.floor(r/60);if(a<24)return`${a}h ago`;const l=Math.floor(a/24);return l<7?`${l}d ago`:e.toLocaleDateString()}catch{return""}}function WV({post:t,onLike:e,onComment:n,onViewTraining:s,onCardClick:r,dataTestId:a}){var _;const l=Array.isArray(t==null?void 0:t.likeIds)?t.likeIds.length:0,d=Array.isArray(t==null?void 0:t.commentIds)?t.commentIds.length:0,u=(t==null?void 0:t.likedByMe)===!0,f=(t==null?void 0:t.brand)||"General",m=(t==null?void 0:t.title)||((_=t==null?void 0:t.author)==null?void 0:_.name)||`${f} update`,p=(t==null?void 0:t.snippet)||(t==null?void 0:t.content)||"",x=(t==null?void 0:t.timeAgo)||Cue(t==null?void 0:t.createdAt),w=!!(t!=null&&t.trainingId),j=E=>{E.target.closest("button")||r==null||r(t)},S=E=>{E.key!=="Enter"&&E.key!==" "||E.target.closest("button")||(E.key===" "&&E.preventDefault(),r==null||r(t))};return i.jsxs("article",{className:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm min-h-[140px] cursor-pointer hover:shadow-md transition-shadow focus:outline-none focus:ring-2 focus:ring-deep-moss focus:ring-offset-2","data-testid":a||"postcard","aria-label":m,role:"button",tabIndex:0,onClick:j,onKeyDown:S,children:[i.jsxs("header",{className:"flex items-start justify-between gap-3",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"inline-flex items-center px-3 h-7 min-h-[28px] rounded-full text-xs font-medium border border-deep-moss/30 text-deep-moss bg-white","aria-label":`Brand ${f}`,children:f})}),x&&i.jsx("time",{className:"text-xs text-warm-gray","aria-label":`Posted ${x}`,children:x})]}),i.jsxs("div",{className:"mt-3",children:[i.jsx("h3",{className:"text-base font-semibold text-gray-900 leading-snug truncate",title:m,children:m}),p&&i.jsx("p",{className:"mt-1 text-sm text-gray-700 overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:p})]}),i.jsxs("footer",{className:"mt-4 flex items-center gap-3",children:[i.jsxs("button",{type:"button",onClick:()=>e==null?void 0:e(t),className:`inline-flex items-center justify-center px-3 h-11 min-h-[44px] rounded-md border text-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 ${u?"border-rose-500 text-rose-600 bg-rose-50":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,"aria-pressed":u?"true":"false","aria-label":u?`Unlike post (${l} likes)`:`Like post (${l} likes)`,"data-testid":"like-button",children:[i.jsx("span",{className:"mr-1","aria-hidden":!0,children:u?"❤️":"🤍"}),i.jsx("span",{children:gi.buttons.like}),i.jsx("span",{className:"ml-2 text-gray-500",children:l})]}),i.jsxs("button",{type:"button",onClick:()=>n==null?void 0:n(t),className:"inline-flex items-center justify-center px-3 h-11 min-h-[44px] rounded-md border border-gray-300 text-sm text-gray-700 hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-1","aria-label":`Comment on post (${d} comments)`,"data-testid":"comment-button",children:[i.jsx("span",{className:"mr-1","aria-hidden":!0,children:"💬"}),i.jsx("span",{children:gi.buttons.comment}),i.jsx("span",{className:"ml-2 text-gray-500",children:d})]}),w&&i.jsx("button",{type:"button",onClick:()=>{try{Eue({postId:t.id,trainingId:t.trainingId})}catch{}s==null||s(t.trainingId,t)},className:"ml-auto inline-flex items-center justify-center px-3 h-11 min-h-[44px] rounded-md border border-deep-moss text-sm text-deep-moss hover:bg-oat-beige focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-1","aria-label":"View related training","data-testid":"view-training-cta",children:gi.buttons.viewTraining})]})]})}function Go(){return i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 motion-safe:animate-pulse motion-reduce:animate-none",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded"}),i.jsx("div",{className:"h-3 w-16 bg-gray-200 rounded"})]}),i.jsx("div",{className:"mt-3 h-5 w-3/4 bg-gray-200 rounded"}),i.jsx("div",{className:"mt-2 h-4 w-full bg-gray-200 rounded"}),i.jsx("div",{className:"mt-2 h-4 w-5/6 bg-gray-200 rounded"}),i.jsx("div",{className:"mt-4 h-10 w-2/3 bg-gray-200 rounded"})]})}function z0({message:t,onDismiss:e}){const n=b.useRef(null);return b.useEffect(()=>{n.current},[]),t?i.jsxs("div",{ref:n,role:"alert","aria-live":"assertive",className:"flex items-start justify-between gap-3 bg-red-50 border border-red-200 text-red-800 text-sm rounded-md px-3 py-2",children:[i.jsx("span",{children:t}),i.jsx("button",{type:"button",onClick:e,"aria-label":"Dismiss error",className:"shrink-0 px-2 h-8 min-h-[32px] rounded bg-red-100 text-red-800 hover:bg-red-200",children:"×"})]}):null}const My=[{id:"wg-001",brand:"All",tags:["milestone","csat"],content:"🎉 Just hit our quarterly sales target! Amazing teamwork across locations. Shoutout to the Denver team for stellar CSAT this month.",author:{name:"Sarah Chen",role:"Regional Manager",verified:!0},timeAgo:"2h ago"},{id:"wg-002",brand:"Botanical Co",tags:["sustainability","packaging"],content:"Customers love the new sustainability packaging. One said it made her feel great about supporting us! 🌱",author:{name:"Marcus Rodriguez",role:"Store Manager",verified:!0},timeAgo:"4h ago"},{id:"wg-003",brand:"All",tags:["training","people"],content:"Amazing training session with new team members today. Their enthusiasm reminded me why I love this industry. ✨",author:{name:"Jennifer Park",role:"Training Coordinator",verified:!0},timeAgo:"6h ago"}];function Tue({query:t="",search:e="",brand:n="All",selectedBrands:s=[],selectedTags:r=[],onStartPost:a}){const l=ks(),{user:d,hasRole:u}=bn(),[f,m]=b.useState(!0),[p,x]=b.useState(""),[w,j]=b.useState(My.map(A=>({...A,likeIds:A.likeIds||[],commentIds:A.commentIds||[]}))),S=u(["staff","verified_staff","brand_manager","super_admin"]);b.useEffect(()=>{let A=!1;return(async()=>{try{const R=await Promise.all(My.map(async P=>{try{if(!ce)return{...P,commentIds:[],likeIds:[]};const O=yt(Ue(ce,"community_comments"),ht("postId","==",P.id)),F=yt(Ue(ce,"post_likes"),ht("postId","==",P.id)),[J,Z]=await Promise.all([ka(O),ka(F)]),q=J.data().count||0,Y=Z.data().count||0;return{...P,commentIds:Array.from({length:q},(W,H)=>`comment-${H}`),likeIds:Array.from({length:Y},(W,H)=>`like-${H}`)}}catch(O){return console.warn(`Failed to load counts for post ${P.id}:`,O),{...P,commentIds:[],likeIds:[]}}}));A||j(R)}catch(R){console.warn("Failed to load comment counts:",R),A||(x("Failed to load latest interaction data. Showing cached content."),j(My.map(P=>({...P,commentIds:[],likeIds:[]}))))}finally{A||m(!1)}})(),()=>{A=!0}},[]),b.useEffect(()=>{const A=setTimeout(()=>m(!1),2e3);return()=>clearTimeout(A)},[]);const _=async A=>{console.log("refreshCommentCount called for postId:",A);try{if(!ce){console.warn("No Firestore database available");return}const T=yt(Ue(ce,"community_comments"),ht("postId","==",A)),P=(await ka(T)).data().count||0;console.log(`Found ${P} comments for post ${A}`),j(O=>{const F=O.map(J=>J.id===A?{...J,commentIds:Array.from({length:P},(Z,q)=>`comment-${q}`)}:J);return console.log("Updated postsWithCounts:",F.find(J=>J.id===A)),F})}catch(T){console.error("Failed to refresh comment count for post",A,":",T)}};b.useEffect(()=>(window.refreshWhatsGoodComments=_,()=>{delete window.refreshWhatsGoodComments}),[]);const E=(t||e).trim().toLowerCase(),C=w.filter(A=>{var J,Z,q;const T=!E||((J=A.content)==null?void 0:J.toLowerCase().includes(E))||((q=(Z=A.author)==null?void 0:Z.name)==null?void 0:q.toLowerCase().includes(E)),R=s.length>0?s:n&&n!=="All"?[n]:[],P=R.length===0||R.includes(A.brand||""),O=Array.isArray(A.tags)?A.tags:[],F=r.length===0||O.some(Y=>r.includes(Y));return T&&P&&F});if(f)return i.jsxs("div",{id:"panel-whats-good",role:"tabpanel","aria-labelledby":"tab-whats-good",className:"community-cards",children:[i.jsx(Go,{}),i.jsx(Go,{}),i.jsx(Go,{})]});if(C.length===0)return i.jsxs("div",{id:"panel-whats-good",role:"tabpanel","aria-labelledby":"tab-whats-good",className:"space-y-3 text-center py-10",children:[p&&i.jsx("div",{className:"max-w-md mx-auto",children:i.jsx(z0,{message:p,onDismiss:()=>x("")})}),i.jsx("div",{className:"text-gray-900 font-medium",children:gi.empty.whatsGood}),S&&i.jsx("div",{children:i.jsx("button",{type:"button",onClick:()=>{if(a)return a();l("/staff/communities")},className:"mt-2 inline-flex items-center justify-center px-4 h-11 min-h-[44px] rounded-md bg-deep-moss text-white text-sm hover:bg-sage-dark",children:"Start a post"})})]});const I=async A=>{if(console.log("Like post:",A.id),!d){console.warn("No user logged in");return}try{if(j(T=>T.map(R=>R.id===A.id?{...R,likeIds:R.likedByMe?(R.likeIds||[]).filter(P=>P!=="me"):[...R.likeIds||[],"me"],likedByMe:!R.likedByMe}:R)),ce){const T=`${A.id}_${d.uid}`,R=Je(ce,"post_likes",T);if((await _r(R)).exists()){const{deleteDoc:O}=await Ah(async()=>{const{deleteDoc:F}=await Promise.resolve().then(()=>Ij);return{deleteDoc:F}},void 0);await O(R),console.log("Unliked post:",A.id)}else{const{setDoc:O,serverTimestamp:F}=await Ah(async()=>{const{setDoc:J,serverTimestamp:Z}=await Promise.resolve().then(()=>Ij);return{setDoc:J,serverTimestamp:Z}},void 0);await O(R,{postId:A.id,userId:d.uid,createdAt:F()}),console.log("Liked post:",A.id)}setTimeout(()=>M(A.id),500)}}catch(T){console.error("Failed to toggle like:",T),x("Failed to save like. Please try again."),j(R=>R.map(P=>P.id===A.id?{...P,likeIds:A.likedByMe?[...P.likeIds||[],"me"]:(P.likeIds||[]).filter(O=>O!=="me"),likedByMe:A.likedByMe}:P))}},M=async A=>{try{if(!ce)return;const T=yt(Ue(ce,"post_likes"),ht("postId","==",A)),P=(await ka(T)).data().count||0;j(O=>O.map(F=>F.id===A?{...F,likeIds:Array.from({length:P},(J,Z)=>`like-${Z}`)}:F))}catch(T){console.error("Failed to refresh like count:",T)}},V=A=>{console.log("Comment on post:",A.id),l(`/community/post/${A.id}`)},z=A=>{console.log("Card clicked for post:",A.id),l(`/community/post/${A.id}`)},D=(A,T)=>{console.log("View training:",A,"from post:",T.id),l(`/staff/trainings/${A}`)};return i.jsxs("div",{id:"panel-whats-good",role:"tabpanel","aria-labelledby":"tab-whats-good",className:"community-cards",children:[p&&i.jsx("div",{className:"max-w-md mx-auto",children:i.jsx(z0,{message:p,onDismiss:()=>x("")})}),C.map((A,T)=>i.jsx(WV,{post:A,dataTestId:T===0?"postcard-first":void 0,onLike:I,onComment:V,onCardClick:z,onViewTraining:D},A.id))]})}function Aue({onRequestVerify:t}){const e=b.useRef(null);return b.useEffect(()=>{e.current&&e.current.focus()},[]),i.jsx("div",{className:"space-y-4",id:"panel-pro",role:"tabpanel","aria-labelledby":"tab-pro",children:i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 text-amber-900",children:[i.jsx("h2",{ref:e,tabIndex:-1,className:"text-lg font-heading font-semibold mb-1",children:gi.gate.title}),i.jsx("p",{className:"text-sm",children:gi.gate.subcopy}),i.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:()=>t==null?void 0:t(),className:"px-4 py-2 bg-deep-moss text-white rounded-md text-sm hover:bg-sage-dark",children:gi.gate.cta}),i.jsx("button",{type:"button",onClick:()=>window.open("/staff/verification","_self"),className:"text-sm underline text-amber-900 hover:text-amber-950",children:"Learn why verification matters"})]})]})})}const nE=[{id:"pro-001",brand:"All",tags:["strategy","growth"],content:"Q4 strategic review: 23% growth in organic lines. Plan educational content around ingredient sourcing.",author:{name:"Alexandra Reid",role:"Product Strategy",verified:!0},timeAgo:"3h ago",isPinned:!0},{id:"pro-002",brand:"Botanical Co",tags:["competition","training"],content:"Competitor analysis complete. Strong digital, weaker in-store. Double down on training + education.",author:{name:"James Wilson",role:"Market Research",verified:!0},timeAgo:"5h ago"}];function _4(){if(typeof window>"u")return null;try{const t=localStorage.getItem("DEV_isVerifiedStaff");return t==="true"?!0:t==="false"?!1:null}catch{return null}}function kue({query:t="",search:e="",brand:n="All",selectedBrands:s=[],selectedTags:r=[]}){const[a,l]=b.useState(!0),[d,u]=b.useState(""),[f,m]=b.useState(nE.map(C=>({...C,likeIds:C.likeIds||[],likedByMe:!1}))),p=ks();b.useEffect(()=>{const C=setTimeout(()=>l(!1),0);return()=>clearTimeout(C)},[]);const x=(t||e).trim().toLowerCase(),w=f.filter(C=>{var A,T,R;const I=!x||((A=C.content)==null?void 0:A.toLowerCase().includes(x))||((R=(T=C.author)==null?void 0:T.name)==null?void 0:R.toLowerCase().includes(x)),M=s.length>0?s:n&&n!=="All"?[n]:[],V=M.length===0||M.includes(C.brand||""),z=Array.isArray(C.tags)?C.tags:[],D=r.length===0||z.some(P=>r.includes(P));return I&&V&&D});if(a)return i.jsxs("div",{id:"panel-pro",role:"tabpanel","aria-labelledby":"tab-pro",className:"community-cards",children:[i.jsx(Go,{}),i.jsx(Go,{}),i.jsx(Go,{})]});if(w.length===0)return i.jsxs("div",{id:"panel-pro",role:"tabpanel","aria-labelledby":"tab-pro",className:"space-y-3 text-center py-10",children:[d&&i.jsx("div",{className:"max-w-md mx-auto",children:i.jsx(z0,{message:d,onDismiss:()=>u("")})}),i.jsx("div",{className:"text-gray-900 font-medium",children:gi.empty.pro})]});const j=C=>{console.log("Like pro post:",C.id),m(I=>I.map(M=>M.id===C.id?{...M,likeIds:M.likedByMe?(M.likeIds||[]).filter(V=>V!=="me"):[...M.likeIds||[],"me"],likedByMe:!M.likedByMe}:M))},S=C=>{console.log("Comment on pro post:",C.id),p(`/staff/community/post/${C.id}`)},_=C=>{console.log("Pro card clicked for post:",C.id),p(`/staff/community/post/${C.id}`)},E=(C,I)=>{console.log("View training:",C,"from pro post:",I.id),p(`/staff/trainings/${C}`)};return i.jsxs("div",{id:"panel-pro",role:"tabpanel","aria-labelledby":"tab-pro",className:"community-cards",children:[d&&i.jsx("div",{className:"max-w-md mx-auto",children:i.jsx(z0,{message:d,onDismiss:()=>u("")})}),w.map((C,I)=>i.jsxs("div",{children:[C.isPinned&&i.jsx("div",{className:"flex items-center space-x-2 text-xs font-medium text-deep-moss mb-2",children:i.jsx("span",{children:"PINNED"})}),i.jsx(WV,{post:C,dataTestId:I===0?"postcard-first":void 0,onLike:j,onComment:S,onCardClick:_,onViewTraining:E})]},C.id))]})}function Rue({query:t="",search:e="",brand:n="All",selectedBrands:s=[],selectedTags:r=[],onRequestVerify:a}){const{isVerified:l,hasRole:d}=bn(),u=l===!0&&d(["verified_staff","staff","brand_manager","super_admin"]),[f,m]=b.useState(_4());return b.useEffect(()=>{const x=setInterval(()=>{const w=_4();m(j=>j!==w?w:j)},800);return()=>clearInterval(x)},[]),b.useMemo(()=>f===!0?!0:f===!1?!1:u,[f,u])?i.jsx(kue,{query:t,search:e,brand:n,selectedBrands:s,selectedTags:r}):i.jsx(Aue,{onRequestVerify:a})}const Iue=Object.freeze(Object.defineProperty({__proto__:null,PRO_STUBS:nE,default:Rue},Symbol.toStringTag,{value:"Module"}));function j4({query:t,selectedBrands:e=[],selectedTags:n=[],availableBrands:s=[],availableTags:r=[],onChange:a}){const l=b.useRef(null),d=p=>String(p||"").toLowerCase().replace(/[^a-z0-9]+/g,"-"),u=b.useMemo(()=>Array.from(new Set(s.filter(Boolean))),[s]),f=b.useMemo(()=>Array.from(new Set(r.filter(Boolean))),[r]),m=(p,x)=>{const w=new Set(p);return w.has(x)?w.delete(x):w.add(x),Array.from(w)};return i.jsx("div",{className:"sticky top-0 z-40 bg-white border-b border-gray-200",children:i.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("input",{ref:l,type:"search",value:t,onChange:p=>a==null?void 0:a({query:p.target.value,selectedBrands:e,selectedTags:n}),placeholder:gi.searchPlaceholder,"aria-label":gi.searchPlaceholder,"data-testid":"filter-search",className:"flex-1 px-3 py-3 h-11 min-h-[44px] border border-gray-300 rounded-md text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-1"})}),u.length>0&&i.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[i.jsx("div",{className:"w-full text-xs font-medium text-gray-700 mb-1",children:gi.brandsLabel}),u.map(p=>{const x=e.includes(p);return i.jsx("button",{type:"button","aria-pressed":x,onClick:()=>a==null?void 0:a({query:t,selectedBrands:m(e,p),selectedTags:n}),"data-testid":`brand-chip-${d(p)}`,className:`px-3 h-11 min-h-[44px] rounded-full text-sm border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 ${x?"bg-deep-moss text-white border-deep-moss":"bg-white text-deep-moss border-deep-moss/30 hover:border-deep-moss"}`,children:p},p)})]}),f.length>0&&i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:f.map(p=>{const x=n.includes(p);return i.jsxs("button",{type:"button","aria-pressed":x,onClick:()=>a==null?void 0:a({query:t,selectedBrands:e,selectedTags:m(n,p)}),"data-testid":`tag-chip-${d(p)}`,className:`px-3 h-11 min-h-[44px] rounded-full text-sm border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 ${x?"bg-oat-beige text-deep-moss border-oat-beige":"bg-white text-deep-moss border-deep-moss/30 hover:border-deep-moss"}`,children:["#",p]},p)})})]})})}const Due=b.lazy(()=>Ah(()=>Promise.resolve().then(()=>Iue),void 0));function Mue(){const t=Hr(),e=ks(),[n,s]=b.useState("whatsGood"),[r,a]=b.useState(""),[l,d]=b.useState([]),[u,f]=b.useState([]);b.useEffect(()=>{var S;const j=(S=t.state)==null?void 0:S.focusPostId;j&&e(`/staff/community/post/${j}`,{replace:!0})},[t.state,e]);const m=b.useMemo(()=>n==="whatsGood"?My:nE,[n]),p=b.useMemo(()=>Array.from(new Set(m.map(j=>j.brand).filter(Boolean))),[m]),x=b.useMemo(()=>Array.from(new Set(m.flatMap(j=>Array.isArray(j.tags)?j.tags:[]).filter(Boolean))),[m]),w=b.useMemo(()=>i.jsxs("div",{className:"bg-white border-b border-gray-200",children:[i.jsxs("div",{className:"max-w-5xl mx-auto px-4 pt-3",children:[i.jsx("h1",{className:"text-2xl font-heading font-semibold text-deep-moss mb-3",children:"Community"}),i.jsx(Sue,{value:n,onChange:j=>{s(j)}})]}),i.jsx("div",{className:"only-mobile",children:i.jsx(j4,{query:r,selectedBrands:l,selectedTags:u,availableBrands:p,availableTags:x,onChange:({query:j,selectedBrands:S,selectedTags:_})=>{a(j??""),d(S??[]),f(_??[])}})})]}),[n,r,l,u,p,x]);return b.useEffect(()=>{},[n]),i.jsxs("div",{className:"min-h-screen bg-cool-gray",children:[w,i.jsx("main",{className:"max-w-5xl mx-auto px-4 py-6",children:i.jsxs("div",{className:"community-grid",children:[i.jsx("aside",{className:"only-desktop",children:i.jsx("div",{className:"community-sticky",children:i.jsx(j4,{query:r,selectedBrands:l,selectedTags:u,availableBrands:p,availableTags:x,onChange:({query:j,selectedBrands:S,selectedTags:_})=>{a(j??""),d(S??[]),f(_??[])}})})}),i.jsx("section",{children:n==="whatsGood"?i.jsx(Tue,{query:r,selectedBrands:l,selectedTags:u}):i.jsx(b.Suspense,{fallback:i.jsxs("div",{className:"community-cards",children:[i.jsx(Go,{}),i.jsx(Go,{}),i.jsx(Go,{})]}),children:i.jsx(Due,{query:r,selectedBrands:l,selectedTags:u,onRequestVerify:()=>{e("/staff/verification")}})})})]})})]})}function Pue(){const{postId:t}=Nc();return i.jsx(oi,{to:`/staff/community/post/${t}`,replace:!0})}function Oue(){return null}const Lue=()=>null,Vue=b.lazy(()=>Ah(()=>import("./PostDetail-CvjL1_bO.js"),[])),GV=()=>i.jsx("div",{className:"flex h-screen items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"})}),Uue=()=>{const{user:t,loading:e}=bn(),n=Hr(),r=new URLSearchParams(n.search).has("logout")||typeof window<"u"&&localStorage.getItem("FORCE_PUBLIC_WEBSITE")==="true";if(typeof window<"u"&&localStorage.getItem("FORCE_PUBLIC_WEBSITE")==="true"&&localStorage.removeItem("FORCE_PUBLIC_WEBSITE"),e)return i.jsx(GV,{});if(r)return i.jsx(qk,{});if(!t)return i.jsx(qk,{});const a=YP(t);return n.pathname!==a?i.jsx(oi,{to:a,state:{from:n},replace:!0}):null};function Fue(){const[t,e]=b.useState(!1);return b.useEffect(()=>{e(!0)},[]),i.jsxs(VG,{children:[i.jsxs(Y9,{children:[i.jsx("div",{className:"fixed top-3 right-3 z-50",children:i.jsx(F3,{})}),i.jsxs(N9,{children:[i.jsx(At,{path:"/",element:i.jsx(Uue,{})}),i.jsx(At,{path:"/admin",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(pte,{})})})}),i.jsx(At,{path:"/admin/users",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(Tse,{})})})}),i.jsx(At,{path:"/admin/verifications",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(Ase,{})})})}),i.jsx(At,{path:"/admin/brands",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(kse,{})})})}),i.jsx(At,{path:"/admin/analytics",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(Pse,{})})})}),i.jsx(At,{path:"/admin/content",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(OR,{})})})}),i.jsx(At,{path:"/admin/products",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(Ose,{})})})}),i.jsx(At,{path:"/admin/activity",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(Vse,{})})})}),i.jsx(At,{path:"/admin/settings",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(Wse,{})})})}),i.jsxs(i.Fragment,{children:[i.jsx(At,{path:"/admin/demo",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(Zse,{})})})}),i.jsx(At,{path:"/admin/dev",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(Jse,{})})})}),i.jsx(At,{path:"/admin/env-check",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(ere,{})})})})]}),i.jsx(At,{path:"/admin/templates",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(OR,{})})})}),i.jsx(At,{path:"/admin/templates/new",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(LR,{})})})}),i.jsx(At,{path:"/admin/templates/:id",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(VR,{})})})}),i.jsx(At,{path:"/admin/templates/:id/view",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(VR,{})})})}),i.jsx(At,{path:"/admin/templates/:id/edit",element:i.jsx(Bn,{allowedRoles:["super_admin"],children:i.jsx(Xn,{children:i.jsx(LR,{})})})}),i.jsx(At,{path:"/pending",element:i.jsx(Bn,{allowedRoles:["brand_manager"],requireApprovedBrandManager:!1,children:i.jsx(tre,{})})}),i.jsx(At,{path:"/brand",element:i.jsx(Bn,{allowedRoles:["brand_manager"],requireApprovedBrandManager:!0,children:i.jsx(y4,{})})}),i.jsxs(At,{path:"/brand/*",element:i.jsx(Bn,{allowedRoles:["brand_manager"],requireApprovedBrandManager:!0,children:i.jsx(y4,{})}),children:[i.jsx(At,{path:"community",element:i.jsx(due,{})}),i.jsx(At,{path:"community/new",element:i.jsx(v4,{mode:"create"})}),i.jsx(At,{path:"community/:postId/edit",element:i.jsx(v4,{mode:"edit"})})]}),i.jsx(At,{path:"/brand/content",element:i.jsx(Bn,{allowedRoles:["brand_manager"],requireApprovedBrandManager:!0,children:i.jsx(lue,{})})}),i.jsx(At,{path:"/brand/trainings/:id",element:i.jsx(Bn,{allowedRoles:["brand_manager"],requireApprovedBrandManager:!0,children:i.jsx(cue,{})})}),i.jsx(At,{path:"/staff",element:i.jsx(oi,{to:"/staff/profile",replace:!0})}),i.jsxs(At,{path:"/staff/*",element:i.jsx(Bn,{allowedRoles:["staff"],children:i.jsx(fue,{children:i.jsx(mue,{})})}),children:[i.jsx(At,{index:!0,element:i.jsx(oi,{to:"/staff/profile",replace:!0})}),i.jsx(At,{path:"dashboard",element:i.jsx(oi,{to:"/staff/profile",replace:!0})}),i.jsx(At,{path:"profile",element:i.jsx(gue,{})}),i.jsx(At,{path:"verification",element:i.jsx(yue,{})}),i.jsx(At,{path:"communities",element:i.jsx(bue,{})}),i.jsx(At,{path:"my-brands",element:i.jsx(b4,{children:i.jsx(wue,{})})}),i.jsx(At,{path:"learning",element:i.jsx(b4,{children:i.jsx(_ue,{})})}),i.jsx(At,{path:"community",element:i.jsx(Mue,{})}),i.jsx(At,{path:"community/post/:postId",element:i.jsx(b.Suspense,{fallback:i.jsx(GV,{}),children:i.jsx(Vue,{})})})]}),i.jsx(At,{path:"/staff/trainings/:id",element:i.jsx(Bn,{allowedRoles:["staff"],children:i.jsx(hue,{})})}),Ia&&i.jsx(At,{path:"/emulator",element:i.jsx(Bn,{allowedRoles:[],children:i.jsx(jue,{})})}),i.jsx(At,{path:"/emulator-diagnostics",element:i.jsx(Nue,{})}),i.jsx(At,{path:"/community",element:i.jsx(oi,{to:"/staff/community",replace:!0})}),i.jsx(At,{path:"/community/whats-good",element:i.jsx(oi,{to:"/staff/community",replace:!0})}),i.jsx(At,{path:"/community/post/:postId",element:i.jsx(Pue,{})}),i.jsx(At,{path:"*",element:i.jsx(oi,{to:"/"})})]})]}),i.jsx(Oue,{}),i.jsx(Lue,{})]})}AF.createRoot(document.getElementById("root")).render(i.jsx(b.StrictMode,{children:i.jsx(Fue,{})}));export{gi as C,nE as P,My as W,Ah as _,ks as a,bn as b,ce as c,Je as d,she as e,Ue as f,_r as g,ka as h,fs as i,i as j,rhe as k,ihe as l,Ij as m,Jn as o,Eue as p,yt as q,b as r,Nc as u,ht as w};
//# sourceMappingURL=index-xAKXMtLt.js.map
